(this.webpackJsonpkohlrabi=this.webpackJsonpkohlrabi||[]).push([[0],{15:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(8),a=n.n(r),s=(n(15),n(2)),o=(n(6),n(7)),l=n.n(o),d=n(9),j=function(e){var t=Object(c.useState)(null),n=Object(s.a)(t,2),i=n[0],r=n[1];return Object(c.useEffect)((function(){function t(){return(t=Object(d.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if((n=t.sent).ok){t.next=6;break}return console.log("bad response from server"),t.abrupt("return");case 6:return t.next=8,n.json();case 8:c=t.sent,r(c);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),i},b=n(0);var u=function(e){var t=Object(c.useState)(0),n=Object(s.a)(t,2),i=n[0],r=n[1],a=Object(c.useState)(0),o=Object(s.a)(a,2),l=o[0],d=o[1],u=[],h=j("/papi/v1/pathology/preview/".concat(e.original_file,"/").concat(e.VRindex));h&&(u=h.map((function(e,t){return Object(b.jsx)("img",{className:"smallImage",style:{filter:"invert(".concat(i,")"),transform:"rotate(".concat(l,"deg)")},src:"/papi/v1/files/".concat(e.preview_file_id,"/data"),alt:"svs-preview"},t)})));var f=[],x=j("/papi/v1/pathology/preview_file_name/".concat(e.original_file));return x&&(f=x.map((function(e,t){var n="Unreviewed";return!0===e.good?n="Good":!1===e.good&&(n="Bad"),Object(b.jsxs)("div",{children:[" ",Object(b.jsxs)("h2",{children:["File ",e.file_name]})," ",Object(b.jsxs)("h3",{children:["Status: ",n," "]})," "]},t)}))),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{className:"btn btn-warning",onClick:function(){r(1===i?0:1)},children:"Invert"}),Object(b.jsx)("button",{className:"btn btn-warning",onClick:function(){d(l<280?l+90:0)},children:"Rotate"})]}),Object(b.jsxs)("div",{className:"imgdisplay",children:[f,u]})]})},h=n(10);var f=function(e){var t=[],n=j("/papi/v1/pathology/review/".concat(e.VRindex));if(n){var c=Object(h.a)(n);c.sort((function(e,t){return e.good<t.good?-1:e.good>t.good?1:0})),t=c.map((function(e,t){var n="Unreviewed";return!0===e.good?n="Good":!1===e.good&&(n="Bad"),Object(b.jsxs)("div",{children:[" ",Object(b.jsxs)("tr",{children:[Object(b.jsxs)("td",{children:[" ",e.file_name," "]})," ",Object(b.jsx)("td",{children:n})," "]})]},t)}))}return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Files as currently labeled"}),Object(b.jsxs)("table",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"File"}),Object(b.jsx)("th",{children:"Status"})]}),t]})]})})};var x=function(e){var t=Object(c.useState)(0),n=Object(s.a)(t,2),i=n[0],r=n[1],a=Object(c.useState)(0),o=Object(s.a)(a,2),l=o[0],d=o[1];function h(){i<p.length-1?r(i+1):d(1)}function x(){i>0&&(d(0),r(i-1))}function O(){alert("not yet implemented")}var p=j("/papi/v1/pathology/start/"+e.VRindex);return null===e.VRindex?Object(b.jsx)("span",{children:"Improper URL. No visual review instance selected."}):p?0===p.length?Object(b.jsxs)("span",{children:["No files for review in VR ",e.VRindex," "]}):1===l?Object(b.jsxs)("div",{children:[Object(b.jsx)(f,{VRindex:e.VRindex}),Object(b.jsx)("button",{className:"btn btn-warning",onClick:function(){return x()},children:"Back"})]}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:["Now Viewing Image ",i+1," out of ",p.length]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{className:"btn btn-success",onClick:function(){fetch("/papi/v1/pathology/set_edit/"+p[i].path_file_id+"/good",{method:"PUT"}).then((function(){return h()}))},children:"Good"}),Object(b.jsx)("button",{className:"btn btn-error",onClick:function(){fetch("/papi/v1/pathology/set_edit/"+p[i].path_file_id+"/bad",{method:"PUT"}).then((function(){return h()}))},children:"Bad"}),Object(b.jsx)("button",{className:"btn btn-warning",onClick:function(){return O()},children:"Edit"}),Object(b.jsx)("button",{className:"btn btn-warning",onClick:function(){return O()},children:"Download"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{className:"btn btn-warning",onClick:function(){return x()},children:"Back"}),Object(b.jsx)("button",{className:"btn btn-warning",onClick:function(){return h()},children:"Next"})]}),Object(b.jsx)("div",{children:Object(b.jsx)(u,{original_file:p[i].path_file_id,VRindex:e.VRindex})})]}):Object(b.jsx)("span",{children:"loading...."})},O=(n(18),window.location.pathname.match(/\/(\d+)/)),p=null;O&&(p=O[1]),a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(x,{VRindex:p})}),document.getElementById("root"))},6:function(e,t,n){}},[[19,1,2]]]);
//# sourceMappingURL=main.d4378845.chunk.js.map