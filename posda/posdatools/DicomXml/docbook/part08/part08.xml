<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!-- $Source: /home/bbennett/pass/archive/DicomXml/docbook/part08/part08.xml,v $ -->
<!-- $Date: 2014/05/08 19:52:40 $ -->
<!-- $Revision: 1.2 $ -->
<book xmlns="http://docbook.org/ns/docbook" xmlns:xhtml="http://www.w3.org/1999/xhtml" label="PS3.8" version="5.0" xml:id="PS3.8">
  <title>PS3.8</title>
  <subtitle>DICOM PS3.8 2013 - Network Communication Support for Message Exchange</subtitle>
  <info>
    <author>
      <orgname>DICOM Standards Committee</orgname>
    </author>
    <copyright>
      <year>2013</year>
      <holder>NEMA</holder>
    </copyright>
  </info>
  <chapter label="" status="1" xml:id="chapter_Notice">
    <title>Notice and Disclaimer</title>
    <para>The information in this publication was considered technically sound by the consensus of
      persons engaged in the development and approval of the document at the time it was developed.
      Consensus does not necessarily mean that there is unanimous agreement among every person
      participating in the development of this document.</para>
    <para>NEMA standards and guideline publications, of which the document contained herein is one,
      are developed through a voluntary consensus standards development process. This process brings
      together volunteers and/or seeks out the views of persons who have an interest in the topic
      covered by this publication. While NEMA administers the process and establishes rules to
      promote fairness in the development of consensus, it does not write the document and it does
      not independently test, evaluate, or verify the accuracy or completeness of any information or
      the soundness of any judgments contained in its standards and guideline publications.</para>
    <para>NEMA disclaims liability for any personal injury, property, or other damages of any nature
      whatsoever, whether special, indirect, consequential, or compensatory, directly or indirectly
      resulting from the publication, use of, application, or reliance on this document. NEMA
      disclaims and makes no guaranty or warranty, expressed or implied, as to the accuracy or
      completeness of any information published herein, and disclaims and makes no warranty that the
      information in this document will fulfill any of your particular purposes or needs. NEMA does
      not undertake to guarantee the performance of any individual manufacturer or seller's products
      or services by virtue of this standard or guide.</para>
    <para>In publishing and making this document available, NEMA is not undertaking to render
      professional or other services for or on behalf of any person or entity, nor is NEMA
      undertaking to perform any duty owed by any person or entity to someone else. Anyone using
      this document should rely on his or her own independent judgment or, as appropriate, seek the
      advice of a competent professional in determining the exercise of reasonable care in any given
      circumstances. Information and other standards on the topic covered by this publication may be
      available from other sources, which the user may wish to consult for additional views or
      information not covered by this publication.</para>
    <para>NEMA has no power, nor does it undertake to police or enforce compliance with the contents
      of this document. NEMA does not certify, test, or inspect products, designs, or installations
      for safety or health purposes. Any certification or other statement of compliance with any
      health or safety-related information in this document shall not be attributable to NEMA and is
      solely the responsibility of the certifier or maker of the statement.</para>
  </chapter>
  <chapter label="" status="1" xml:id="chapter_Foreword">
    <title>Foreword</title>
    <para>This DICOM Standard was developed according to the procedures of the DICOM Standards Committee.</para>
    <para>The DICOM Standard is structured as a multi-part document using the guidelines established in <xref linkend="biblio_ISODirectives3"/>.</para>
  </chapter>
  <chapter label="1" status="1" xml:id="chapter_1">
    <title>Scope and Field of Application</title>
  
  <para>The Communication Protocols specified in this part of PS 3 closely fit the ISO Open Systems Interconnection Basic Reference Model (ISO 7498-1, see <xref linkend="figure_1-1" xrefstyle="select: label"/>). They relate to the following layers: Physical, Data Link, Network, Transport, Session, Presentation and the Association Control Services (ACSE) of the Application layer. The communication protocols specified by this part are general purpose communication protocols (TCP/IP) and not specific to this standard. The other aspects of the Application Layer protocols are addressed in other parts of this standard as discussed in <olink targetdoc="PS3.1" targetptr="PS3.1" xrefstyle="select: labelnumber quotedtitle"/>.</para>
  <para>
  <figure label="1-1" pgwide="1" xml:id="figure_1-1">
    <title>ISO OSI Basic Reference Model</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_1-1.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image002.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  </chapter>
<chapter label="2" status="1" xml:id="chapter_2">
    <title>Normative References</title>
  
  <section label="2.1" status="2" xml:id="sect_2.1">
    <title>International Standards</title>
  
  <para>ISO 7498-1, Information Processing Systems - Open Systems Interconnection - Basic Reference Model</para>
  <para>ISO 7498-3, OSI Basic Reference Model - Part 3: Naming and Addressing</para>
  <para>ISO 8327:1987, Information Processing Systems - Open Systems Interconnection - Connection Oriented Session Protocol Specification</para>
  <para>ISO 8327/AM 2, Information Processing Systems - Open Systems Interconnection - Connection Oriented Session Protocol Specification - Amendment 2: Incorporation of Unlimited User Data</para>
  <para>ISO 8649:1987, Information Processing Systems - Open Systems Interconnection - Service Definition for the Association Control Service Element</para>
  <para>ISO 8650:1987, Information Processing Systems - Open Systems Interconnection - Protocol Specification for the Association Control Service Element</para>
  <para>ISO TR 8509, Information Processing Systems - Open Systems Interconnection - Service Conventions</para>
  <para>ISO 8822:1988, Information Processing Systems - Open Systems Interconnection - Connection-Oriented Presentation Service Definition</para>
  <para>ISO 8823:1988, Information Processing Systems - Open Systems Interconnection - Connection Oriented Presentation Protocol Specification</para>
  <para>ISO 8824:1990, Information Processing Systems - Open Systems Interconnection - Specification of Abstract Syntax Notation One (ASN.1)</para>
  <para>ISO 8825:1990, Information Processing Systems - Open Systems Interconnection - Specification of Basic Encoding Rules for Abstract Syntax Notation One (ASN.1)</para>
  <para>ISO/IEC 9545, Information Processing Systems - Open Systems Interconnection - Application Layer Structure</para>
  <para>ISO/IEC 9834-1, Information technology - Open Systems Interconnection - Procedures for the operation of OSI Registration Authorities: General procedures and top arcs of the ASN.1 Object Identifier tree</para>
  <para>ISO/IEC TR 10000-1, Information Processing Systems - Open Systems Interconnection - International Standardized Profiles, Part 1: Taxonomy Framework</para>
  </section>
<section label="2.2" status="2" xml:id="sect_2.2">
    <title>Other Documents</title>
  
  <para>NIST Special Publication 500-150 - Stable Implementation Agreements for Open Systems Interconnection Protocols</para>
  <para>RFC 791, Internet Protocol - DARPA Internet Protocol Specification</para>
  <para>RFC 792, Internet Control Message Protocol - DARPA Internet Program Protocol Specification</para>
  <para>RFC 793, Transmission Control Program - DARPA Internet Protocol Specification</para>
  <para>RFC 950, Internet Subnetting</para>
  <para>RFC 1881, IPv6 Address Allocation Management</para>
  <para>RFC 2460, Internet Protocol, Version 6 (IPv6) Specification</para>
  </section>
</chapter>
<chapter label="3" status="1" xml:id="chapter_3">
    <title>Definitions</title>
  
  <section label="3.1" status="2" xml:id="sect_3.1">
    <title>Reference Model Definitions</title>
  
  <para>This part of the Standard is based on the concepts developed in ISO 7498-1 and makes use of the following terms defined in it:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>application entity</para></listitem>
<listitem><para>application layer</para></listitem>
<listitem><para>application process</para></listitem>
<listitem><para>data link layer</para></listitem>
<listitem><para>layer entity</para></listitem>
<listitem><para>network layer</para></listitem>
<listitem><para>physical layer</para></listitem>
<listitem><para>presentation layer</para></listitem>
<listitem><para>presentation service</para></listitem>
<listitem><para>protocol or layer protocol</para></listitem>
<listitem><para>protocol data unit or layer protocol data unit</para></listitem>
<listitem><para>service or layer service</para></listitem>
<listitem><para>service access point</para></listitem>
<listitem><para>session layer</para></listitem>
<listitem><para>transfer syntax</para></listitem>
<listitem><para>transport layer</para></listitem>
<listitem><para>transport protocol</para></listitem>
<listitem><para>transport connection</para></listitem>
</orderedlist>
  </section>
<section label="3.2" status="2" xml:id="sect_3.2">
    <title>Naming and Addressing Definitions</title>
  
  <para>This part of the Standard makes use of the following terms defined in ISO 7498-3:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>calling presentation address</para></listitem>
<listitem><para>called presentation address</para></listitem>
<listitem><para>responding presentation address</para></listitem>
<listitem><para>called application entity title</para></listitem>
<listitem><para>calling application entity title</para></listitem>
</orderedlist>
  </section>
<section label="3.3" status="2" xml:id="sect_3.3">
    <title>Service Conventions Definitions</title>
  
  <para>This part of the Standard makes use of the following terms defined in ISO/TR 8509:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>service provider</para></listitem>
<listitem><para>service user</para></listitem>
<listitem><para>confirmed service</para></listitem>
<listitem><para>non-confirmed service</para></listitem>
<listitem><para>primitive</para></listitem>
<listitem><para>request (primitive)</para></listitem>
<listitem><para>indication (primitive)</para></listitem>
<listitem><para>response (primitive)</para></listitem>
<listitem><para>confirmation (primitive)</para></listitem>
</orderedlist>
  </section>
<section label="3.4" status="2" xml:id="sect_3.4">
    <title>Presentation Service Definitions</title>
  
  <para>This part of the Standard makes use of the following terms defined in ISO 8822:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>abstract syntax</para></listitem>
<listitem><para>abstract syntax name</para></listitem>
<listitem><para>presentation context</para></listitem>
<listitem><para>presentation data values</para></listitem>
<listitem><para>transfer syntax</para></listitem>
<listitem><para>transfer syntax name</para></listitem>
</orderedlist>
  </section>
<section label="3.5" status="2" xml:id="sect_3.5">
    <title>ACSE Service Definitions</title>
  
  <para>This part of the Standard makes use of the following terms defined in ISO 8649:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>association or application association</para></listitem>
<listitem><para>application context</para></listitem>
<listitem><para>association control service element</para></listitem>
<listitem><para>association initiator</para></listitem>
</orderedlist>
  </section>
<section label="3.6" status="2" xml:id="sect_3.6">
    <title>DICOM Introduction and Overview Definition</title>
  
  <orderedlist numeration="loweralpha">
<listitem><para>message</para></listitem>
</orderedlist>
  </section>
<section label="3.7" status="2" xml:id="sect_3.7">
    <title>DICOM Communication Support Definitions</title>
  
  <para>The following definitions are commonly used in this part of the Standard:</para>
  <para>
  <emphasis role="bold">Unique identifier (UID) :</emphasis>The scheme used to provide global unique identification for objects. It uses the structure defined by ISO 8824 for OSI Object Identifiers.</para>
  <para>
  <emphasis role="bold">DICOM upper layer:</emphasis>The Upper Layer protocols are related to the Session, Presentation and part of the Application Layer of the ISO reference model. These protocols provide the Upper Layer Service. This Service is a proper subset of the ACSE Service and OSI Presentation Layer Service.</para>
  </section>
</chapter>
<chapter label="4" status="1" xml:id="chapter_4">
    <title>Symbols and Abbreviations</title>
  <para>The following symbols and abbreviations are used in this part of the Standard.</para>
  <variablelist>
  <varlistentry><term>ACR</term><listitem><para>American College of Radiology</para></listitem></varlistentry>
  <varlistentry><term>ACSE</term><listitem><para>Association Control Service Element</para></listitem></varlistentry>
  <varlistentry><term>ASCII</term><listitem><para>American Standard Code for Information Interchange</para></listitem></varlistentry>
  <varlistentry><term>AE</term><listitem><para>Application Entity</para></listitem></varlistentry>
  <varlistentry><term>ANSI</term><listitem><para>American National Standards Institute</para></listitem></varlistentry>
  <varlistentry><term>AP</term><listitem><para>Application Process</para></listitem></varlistentry>
  <varlistentry><term>ASE</term><listitem><para>Application Service Element</para></listitem></varlistentry>
  <varlistentry><term>ARTIM</term><listitem><para>Association Request/Reject/Release Timer</para></listitem></varlistentry>
  <varlistentry><term>CEN TC251</term><listitem><para>Comite Europeen de Normalisation-Technical Committee 251 - Medical Informatics</para></listitem></varlistentry>
  <varlistentry><term>DICOM</term><listitem><para>Digital Imaging and Communications in Medicine</para></listitem></varlistentry>
  <varlistentry><term>FDDI</term><listitem><para>Fiber Distributed Data Interface</para></listitem></varlistentry>
  <varlistentry><term>HL7</term><listitem><para>Health Level 7</para></listitem></varlistentry>
  <varlistentry><term>IEC</term><listitem><para>International Electrotechnical Commission</para></listitem></varlistentry>
  <varlistentry><term>IEEE</term><listitem><para>Institute of Electrical and Electronics Engineers</para></listitem></varlistentry>
  <varlistentry><term>ISDN</term><listitem><para>Integrated Services Digital Network</para></listitem></varlistentry>
  <varlistentry><term>ISO</term><listitem><para>International Organization for Standardization</para></listitem></varlistentry>
  <varlistentry><term>ISP</term><listitem><para>International Standardized Profile</para></listitem></varlistentry>
  <varlistentry><term>JIRA</term><listitem><para>Japan Medical Imaging and Radiological Systems Industries Association</para></listitem></varlistentry>
  <varlistentry><term>LAN</term><listitem><para>Local Area Network</para></listitem></varlistentry>
  <varlistentry><term>NEMA</term><listitem><para>National Electrical Manufacturers Association</para></listitem></varlistentry>
  <varlistentry><term>NIST</term><listitem><para>National Institute of Standards and Technology</para></listitem></varlistentry>
  <varlistentry><term>OSI</term><listitem><para>Open Systems Interconnection</para></listitem></varlistentry>
  <varlistentry><term>PDU</term><listitem><para>Protocol Data Unit</para></listitem></varlistentry>
  <varlistentry><term>PDV</term><listitem><para>Presentation Data Values</para></listitem></varlistentry>
  <varlistentry><term>SAP</term><listitem><para>Service Access Point</para></listitem></varlistentry>
  <varlistentry><term>TCP/IP</term><listitem><para>Transmission Control Program/Internet Protocol</para></listitem></varlistentry>
  <varlistentry><term>UID</term><listitem><para>Unique Identifier</para></listitem></varlistentry>
    <varlistentry><term>UL</term><listitem><para>Upper Layers</para></listitem></varlistentry>
    <varlistentry><term>WAN</term><listitem><para>Wide Area Network</para></listitem></varlistentry>
  </variablelist>
</chapter>
<chapter label="5" status="1" xml:id="chapter_5">
    <title>Conventions</title>
  
  <para>The following conventions are used for the service description tables shown in this part of the Standard.</para>
  <variablelist>
  <varlistentry><term>(=)</term><listitem><para>The same parameter value used in the indication or confirmation shall be the same as used in the request or response respectively.</para></listitem></varlistentry>
  <varlistentry><term>C</term><listitem><para>Conditional (on User Option)</para></listitem></varlistentry>
  <varlistentry><term>M</term><listitem><para>Mandatory usage</para></listitem></varlistentry>
  <varlistentry><term>MF</term><listitem><para>Mandatory with a fixed value</para></listitem></varlistentry>
  <varlistentry><term>NU</term><listitem><para>Not Used</para></listitem></varlistentry>
  <varlistentry><term>P</term><listitem><para>Provider Initiated</para></listitem></varlistentry>
  <varlistentry><term>U</term><listitem><para>User Option</para></listitem></varlistentry>
  <varlistentry><term>UF</term><listitem><para>User Option with a fixed value</para></listitem></varlistentry>
  </variablelist>
  <para>Blank entries are not applicable.</para>
  </chapter>
<chapter label="6" status="1" xml:id="chapter_6">
    <title>Network Communication Support Environment</title>
  
  <para>The Network Communication Services specified in <olink targetdoc="PS3.8" targetptr="PS3.8" xrefstyle="select: labelnumber"/> are a set of generic services provided to support the communication of DICOM Application Entities. They are a proper subset of the services offered by the OSI Presentation Service (ISO 8822) and of the OSI Association Control Service Element (ACSE) (ISO 8649). They shall be referred to as the Upper Layer Service or UL Service. The DICOM UL Service is specified in Section 7.</para>
  <para>This UL Service is provided by the Upper Layer Protocol for TCP/IP (see Section 9).</para>
  <para><xref linkend="figure_6-1" xrefstyle="select: label"/> shows the TCP/IP protocol stack that is available to support the communication of DICOM Application Entities.</para>
  <para>
  <figure label="6-1" pgwide="1" xml:id="figure_6-1">
    <title>DICOM Network Protocol Architecture</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_6-1.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image004.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  
  </chapter>
<chapter label="7" status="1" xml:id="chapter_7">
    <title>OSI Upper Layer Service for DICOM Application Entities</title>
  
  <para>This section provides a description of how to use the OSI Association Control Service Element (ACSE) and OSI Presentation Layer to provide the Upper Layer Service necessary to support the communication of DICOM Application Entities. This Upper Layer Service is a fully conformant subset of the services offered by the ACSE and the OSI Presentation Layer.</para>
  <para>The UL Services are listed in <xref linkend="table_7-1" xrefstyle="select: label"/>.</para>
    <table frame="box" label="7-1" rules="all" xml:id="table_7-1">
    <caption>Upper Layer Services</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>SERVICE</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>TYPE</para>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr valign="top">
        <td align="center" colspan="1" rowspan="1">
          <para>A-ASSOCIATE</para>
        </td>
        <td align="center" colspan="1" rowspan="1">
          <para>Confirmed</para>
        </td>
      </tr>
      <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>A-RELEASE</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>Confirmed</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
          <para>A-ABORT</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>Non-Confirmed</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
          <para>A-P-ABORT</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>Provider-initiated</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
          <para>P-DATA</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>Non-Confirmed</para>
      </td>
    </tr>
  </tbody>
  </table>
  <para>In addition to the Upper Layer Service specification, this section defines at the parameter level the use of each element of this Upper Layer Service by DICOM Application Entities. The rules guiding the use of this Upper Layer Service by the DICOM Application Entities are addressed in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
  <section label="7.1" status="2" xml:id="sect_7.1">
    <title>A-ASSOCIATE Service</title>
  
  <para>The establishment of an association between two AEs shall be performed through ACSE A-ASSOCIATE request, indication, response and confirmation primitives. The initiator of the service is hereafter called a requestor and the service-user that receives the A-ASSOCIATE indication is hereafter called the acceptor. It shall be a confirmed service.</para>
  <note>
    <para>The A-ASSOCIATE service supports the equivalent of a channel establishment in a point-to-point interface (see the retired PS3.9).</para>
  </note>
  <para><xref linkend="figure_7-1" xrefstyle="select: label"/> illustrates the association establishment between two AEs.</para>
  <para>
  <figure label="7-1" pgwide="1" xml:id="figure_7-1">
    <title>Associate Request</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_7-1.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image006.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  <section label="7.1.1" status="3" xml:id="sect_7.1.1">
    <title>A-ASSOCIATE Parameters</title>
  
  <para><xref linkend="table_7-2" xrefstyle="select: label"/> lists the parameters that shall be required for the A-ASSOCIATE service used by DICOM Application Entities in this standard.</para>
    <table frame="box" label="7-2" rules="all" xml:id="table_7-2">
    <caption>Key A-ASSOCIATE Service Parameters</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>A-ASSOCIATE parameter name</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Request</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Indication</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Response</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Confirmation</para>
        </th>
      </tr>
      
    </thead>
    <tbody>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>application context name</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>calling AE title</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>called AE title</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>user information</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>result</para>
        </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>result source</para>
        </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>diagnostic</para>
        </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>U</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>C(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>calling presentation address</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>called presentation address</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>presentation context definition list</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>presentation context definition list result</para>
        </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
    </tr>
  </tbody>
  </table>
  <note>
    <para>See Section 5 of this part for table conventions.</para>
  </note>
  <para><xref linkend="table_7-3" xrefstyle="select: label"/> lists the parameters for the A-ASSOCIATE service that shall contain fixed values or shall not be used by DICOM Application Entities in this standard.</para>
    <table frame="box" label="7-3" rules="all" xml:id="table_7-3">
    <caption>A-ASSOCIATE Service Parameter (Fixed or Not Used)</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>A-ASSOCIATE parameter name</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Request</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Indication</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Response</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Confirmation</para>
        </th>
      </tr>
      
    </thead>
    <tbody>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>mode</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>UF</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>MF(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>responding AE title</para>
        </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>MF</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>MF(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>calling/called/responding AE qualifier</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>calling/called/responding AP invoc-id</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>calling/called/responding AE invoc-id</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>responding presentation address</para>
        </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>MF</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>MF(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>default context name/result</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>presentation &amp; session requirements</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>UF</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>UF(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>UF</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>UF(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>other parameters (see ISO 8822 &amp; 8649)</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
    </tr>
  </tbody>
  </table>
  <section label="7.1.1.1" status="4" xml:id="sect_7.1.1.1">
    <title>Mode (Fixed)</title>
  
  <para>This parameter allows the negotiation of the optional Mode OSI-ACSE Service parameter. Only the default value of "normal" is used by DICOM Application Entities. Therefore, this parameter shall always specify the value "normal."</para>
  </section>
<section label="7.1.1.2" status="4" xml:id="sect_7.1.1.2">
    <title>Application Context Name</title>
  
  <para>This parameter identifies the application context proposed by the requestor. The acceptor shall return either the same or a different name. The returned name shall specify the application context to be used for this association. Further discussion on Application Context Names can be found in <xref linkend="chapter_A" xrefstyle="template: Annex %n"/>.</para>
  <para>An application context is an explicitly defined set of application service elements, related options, and any other information necessary for the interworking of application entities on an association.</para>
  <note>
    <para>The offer of an alternate application context by the acceptor provides a mechanism for limited negotiation. If the requestor cannot operate in the acceptor's application context, it shall issue an A-Abort request primitive. Application Context Names for the DICOM Application Entity as well as Application Context Names usage rules are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
  </note>
  </section>
<section label="7.1.1.3" status="4" xml:id="sect_7.1.1.3">
    <title>Calling AE Title</title>
  
  <para>This parameter identifies the Application Entity (AE) that shall contain the requestor of the A-ASSOCIATE service. It is based on the Source DICOM Application Name. The relationship between DICOM Application Names and AE titles is specified in <xref linkend="chapter_C" xrefstyle="template: Annex %n"/>. The Calling AE title may or may not be the same as the Initiator Address present in DICOM Messages exchanged over the association.</para>
  <note>
    <para>It is the responsibility of the UL User that received the A-ASSOCIATE-RQ to verify whether the Calling AE Title is one of its known remote DICOM Application Names.</para>
  </note>
  </section>
<section label="7.1.1.4" status="4" xml:id="sect_7.1.1.4">
    <title>Called AE Title</title>
  
  <para>This parameter identifies the Application Entity that shall contain the intended acceptor of the A-ASSOCIATE service. It is based on the Destination DICOM Application Name. The relationship between DICOM Application Name and AE titles is specified in <xref linkend="chapter_C" xrefstyle="template: Annex %n"/>. The Called AE title may or may not be the same as the Receiver Address present in DICOM Messages exchanged over the association.</para>
  <note>
    <para>It is the responsibility of the UL User that received the A-ASSOCIATE-RQ to verify whether the Called AE Title is its (or one of its) DICOM Application Name(s).</para>
  </note>
  </section>
<section label="7.1.1.5" status="4" xml:id="sect_7.1.1.5">
    <title>Responding AE Title (Fixed)</title>
  
  <para>This parameter identifies the AE that shall contain the actual acceptor of the A-ASSOCIATE service. In this standard it shall always contain the same value as the Called AE Title of the A-ASSOCIATE indication.</para>
  </section>
<section label="7.1.1.6" status="4" xml:id="sect_7.1.1.6">
    <title>User Information</title>
  
  <para>This parameter shall be used by the requestor and the acceptor of the association to include DICOM Application Entity user information. Its meaning shall depend on the application context that accompanies the primitive. The usage of this parameter is specified in <xref linkend="chapter_D" xrefstyle="template: Annex %n"/>.</para>
  <note>
    <orderedlist numeration="arabic">
      <listitem>
        <para>This parameter is used to carry initialization information for the DICOM Application Entities as defined in the application context specified by the value of the accompanying Application Context Name parameter.</para>
      </listitem>
      <listitem>
        <para><xref linkend="chapter_D" xrefstyle="template: Annex %n"/> specifies some user information sub-items, and references <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for the specification of additional sub-items. <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>, in turn, references <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/> for the specification of Service-class-application-information used in some sub-items.</para>
      </listitem>
    </orderedlist>
  </note>
  </section>
<section label="7.1.1.7" status="4" xml:id="sect_7.1.1.7">
    <title>Result</title>
  
  <para>This parameter shall be provided either by the acceptor of the A-ASSOCIATE request, by the UL service-provider (ACSE related function), or by the UL service-provider (Presentation related function). It shall indicate the result of using the A-ASSOCIATE service. It shall take one of the following symbolic values:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>accepted;</para></listitem>
<listitem><para>rejected (permanent);</para></listitem>
<listitem><para>rejected (transient).</para></listitem>
</orderedlist>
  <note>
    <para>The rejected (permanent) implies that the association calling UL user (when returning such a result to an association request) does not need to "call later." A permanent situation exists that prevents the association establishment (e.g., remote DICOM Application Name unknown).</para>
  </note>
  </section>
<section label="7.1.1.8" status="4" xml:id="sect_7.1.1.8">
    <title>Result Source</title>
  
  <para>The value of the parameter is supplied by the UL service-provider. It identifies the creating source of the Result parameter and the Diagnostic parameter, if present. It shall take one of the following symbolic values:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>UL service-user;</para></listitem>
<listitem><para>UL service-provider (ACSE related function);c) UL service-provider (Presentation related function).</para></listitem>
</orderedlist>
  <note>
    <para>If the Result parameter has the value "accepted," the value of this parameter is "UL service-user."</para>
  </note>
  </section>
<section label="7.1.1.9" status="4" xml:id="sect_7.1.1.9">
    <title>Diagnostic</title>
  
  <para>This parameter shall only be used if the Result parameter has the value of "rejected (permanent) " or "rejected (transient)." It shall be used to provide diagnostic information about the result of the A-ASSOCIATE service.</para>
  <para>If the Result Source parameter has the value "UL service-user," it shall take one of the following symbolic values:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>no-reason-given</para></listitem>
<listitem><para>application-context-name not supported</para></listitem>
<listitem><para>calling-AE-title not recognized</para></listitem>
<listitem><para>called-AE-title not recognized</para></listitem>
<listitem><para>calling-AE-qualifier not recognized (see note)</para></listitem>
<listitem><para>calling-AP-invocation-identifier not recognized (see note)</para></listitem>
<listitem><para>calling-AE-invocation-identifier not recognized (see note)</para></listitem>
<listitem><para>called-AE-qualifier not recognized (see note)</para></listitem>
<listitem><para>called-AP-invocation-identifier not recognized (see note)</para></listitem>
<listitem><para>called-AE-invocation-identifier not recognized (see note)</para></listitem>
</orderedlist>
  <para>If the Result Source parameter has the value "UL service-provider" (ACSE related function), it shall take one of the following symbolic values:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>no-reason-given</para></listitem>
<listitem><para>no-common-UL version</para></listitem>
</orderedlist>
  <para>If the result source has the value "UL service-provider" (Presentation related function), it shall take the following symbolic values:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>no-reason-given</para></listitem>
<listitem><para>temporary-congestion</para></listitem>
<listitem><para>local-limit-exceeded</para></listitem>
<listitem><para>called-(Presentation) -address-unknown</para></listitem>
<listitem><para>Presentation-protocol version not supported</para></listitem>
<listitem><para>no-(Presentation) Service Access Point (SAP) available</para></listitem>
</orderedlist>
  <note>
    <para>Even though some of the above symbolic values correspond to parameter errors not used in this standard, they are included to allow the notification of errors resulting from the unauthorized use of these parameters.</para>
  </note>
  </section>
<section label="7.1.1.10" status="4" xml:id="sect_7.1.1.10">
    <title>Calling Presentation Address</title>
  
  <para>This parameter shall contain a structured destination address unambiguous within the global network address structure. This shall be a TCP/IP Address. See <xref linkend="chapter_C" xrefstyle="template: Annex %n"/>.</para>
  </section>
<section label="7.1.1.11" status="4" xml:id="sect_7.1.1.11">
    <title>Called Presentation Address</title>
  
  <para>This parameter shall contain a structured destination address unambiguous within the global network address structure. This shall be a TCP/IP Address. See <xref linkend="chapter_C" xrefstyle="template: Annex %n"/>.</para>
  </section>
<section label="7.1.1.12" status="4" xml:id="sect_7.1.1.12">
    <title>Responding Presentation Address</title>
  
  <para>In this standard, a responding presentation address shall always contain the same value as the called Presentation Address of the A-ASSOCIATE indication. This parameter shall contain a structured destination address unambiguous within the global network address structure.</para>
  </section>
<section label="7.1.1.13" status="4" xml:id="sect_7.1.1.13">
    <title>Presentation Context Definition List</title>
  
  <para>This parameter used in an A-ASSOCIATE request or indication shall consist of a list containing one or more presentation contexts. Each item shall contain three components, a presentation context identification, an Abstract Syntax Name, and a list of one or more Transfer Syntax Names.</para>
  <para>The presentation context identification components of this parameter exist to distinguish presentation contexts in communication. Such an identification of presentation context(s) applies only within the context of a given association (i.e., different presentation contexts may be identified by the same presentation context identification on different associations). It is the association-requestor's responsibility to assign an arbitrary, but unused identifier for each proposed presentation context on a given association. There is no restriction on the ordering of the presentation contexts in relation to their identifiers.</para>
  <note>
    <para>A separate presentation context will be associated with each Abstract Syntax Name in each of the elements of the Presentation Context Definition List parameter. If the same Abstract Syntax Name occurs more than once, a separate and distinctly identified presentation context will be generated for each occurrence (as only one Transfer Syntax per presentation context can be accepted).</para>
  </note>
  <para>Abstract Syntaxes defined by this standard and used by DICOM Application Entites are defined in <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>. Transfer Syntaxes defined by this standard and used by DICOM Application Entities are defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>. Further discussion on Abstract Syntaxes and Transfer Syntaxes can be found in <xref linkend="chapter_B" xrefstyle="template: Annex %n"/>.</para>
  </section>
<section label="7.1.1.14" status="4" xml:id="sect_7.1.1.14">
    <title>Presentation Context Definition Result List</title>
  
  <para>This parameter used in the A-ASSOCIATE Response and Confirmation indicates the acceptance or rejection of each of the presentation context definitions proposed in the presentation context definition list parameter (<xref linkend="sect_7.1.1.13" xrefstyle="select: label"/>). The Presentation Context Definition Result List parameter shall take the form of a list of result values. There is a one to one correspondence between each one of these result values and each of the presentation contexts proposed in the Presentation Context Definition List parameter. Each result value represents either "acceptance," "user-rejection," or "provider-rejection." The values of the results are assigned by the UL user on the response service primitive. The result values may be sent in any order.</para>
  <note>
    <para>The order of the results may be different than the order proposed. The order need not be sorted by identifier, and the Initiator may not assume or depend upon any particular order.</para>
  </note>
  <para>In this standard only one Transfer Syntax per presentation context shall be agreed to, even though more than one choice of Transfer Syntaxes may have been offered in a specific presentation context of the Presentation Context Definition list.</para>
  </section>
<section label="7.1.1.15" status="4" xml:id="sect_7.1.1.15">
    <title>Presentation Requirements (Fixed Value)</title>
  
  <para>This parameter allows the negotiation of optional presentation functional units beyond the Presentation Kernel. Only the Kernel Functional Unit is used by DICOM Application Entities. Therefore, this parameter shall always specify "Presentation Kernel."</para>
  </section>
<section label="7.1.1.16" status="4" xml:id="sect_7.1.1.16">
    <title>Session Requirements (Fixed Value)</title>
  
  <para>This parameter allows the negotiation of optional session Functional Units beyond the Session Kernel. Only the Kernel functional unit with the Full Duplex Functional Unit shall be used by DICOM Application Entities.</para>
  </section>
<section label="7.1.1.17" status="4" xml:id="sect_7.1.1.17">
    <title>Other Parameters</title>
  
  <para>A few optional parameters defined in the OSI ACSE (ISO 8649) and OSI Presentation Service (ISO 8822) Standards are not identified here. They are not necessary for the communication of DICOM Application Entities and shall not be used in this standard.</para>
  </section>
</section>
<section label="7.1.2" status="3" xml:id="sect_7.1.2">
    <title>A-ASSOCIATE Service Procedure</title>
  
  <para>
  <emphasis role="bold">7.1.2.1</emphasis> A DICOM Application Entity (which includes the Upper Layer service-user) that desires to establish an association shall issue an A-ASSOCIATE request primitive. The called AE is identified by parameters of the request primitive. The requestor shall not issue any primitives except an A-ABORT request primitive until it receives an A-ASSOCIATE confirmation primitive.</para>
  <para>
  <emphasis role="bold">7.1.2.2</emphasis> The Upper Layer (UL) service-provider shall issue an A-ASSOCIATE indication primitive to the called AE.</para>
  <para>
  <emphasis role="bold">7.1.2.3</emphasis> The called AE shall accept or reject the association by sending an A-ASSOCIATE response primitive with an appropriate Result parameter. The Upper layer service-provider shall issue an A-ASSOCIATE confirmation primitive having the same Result parameter. The Result Source parameter shall be assigned the symbolic value of "UL service-user."</para>
  <para>
  <emphasis role="bold">7.1.2.4</emphasis> If the acceptor accepts the association, the association is available for use. Both AEs may now use any service provided by the DICOM application context that is in effect (with the exception of A-ASSOCIATE).</para>
  <note>
    <para>This implies that once the association has been established, DICOM Messages can be exchanged as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
  </note>
  <para>
  <emphasis role="bold">7.1.2.5</emphasis> If the called AE rejects the association, the association shall not be established.</para>
  <para>
  <emphasis role="bold">7.1.2.6</emphasis> The UL service-provider may not be capable of supporting the requested association. In this situation, it shall return an A-ASSOCIATE confirmation primitive to the requestor with an appropriate Result parameter (rejected). The Result Source parameter shall be appropriately assigned either the symbolic value of "UL service-provider (ACSE related function) " or "UL service-provider (Presentation related function)." The indication primitive shall not be issued. The association shall not be established.</para>
  <para>
  <emphasis role="bold">7.1.2.7</emphasis> Either an association-requestor or acceptor may disrupt the A-ASSOCIATE service procedure by issuing an A-ABORT request primitive (see <xref linkend="sect_7.3" xrefstyle="select: label"/>). The remote AE receives an A-ABORT indication primitive. The association shall not be established.</para>
  </section>
</section>
<section label="7.2" status="2" xml:id="sect_7.2">
    <title>A-RELEASE Service</title>
  
  <para>The graceful release of an association between two AEs shall be performed through ACSE A-RELEASE request, indication, response, and confirmation primitives. The initiator of the service is hereafter called a requestor and the service-user that receives the A-RELEASE indication is hereafter called the acceptor. It shall be a confirmed service.</para>
  <para><xref linkend="figure_7-2" xrefstyle="select: label"/> illustrates the graceful release of an association between two AEs.</para>
  <para>
  <figure label="7-2" pgwide="1" xml:id="figure_7-2">
    <title>Association Release</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_7-2.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image008.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  <section label="7.2.1" status="3" xml:id="sect_7.2.1">
    <title>A-RELEASE Parameters</title>
  
  <para><xref linkend="table_7-4" xrefstyle="select: label"/> lists the parameters for the A-RELEASE service that shall contain fixed values or shall not be used by DICOM Application Entities in this standard.</para>
    <table frame="box" label="7-4" rules="all" xml:id="table_7-4">
    <caption>A-RELEASE Service Parameters</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">A-RELEASE parameter name</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Request</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Indication</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Response</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Confirmation</emphasis>
          </para>
        </th>
      </tr>
      
    </thead>
    <tbody>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>reason</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>UF</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>UF(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>UF</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>UF(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>user information</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU(=)</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU(=)</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>result</para>
        </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>MF</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>MF(=)</para>
      </td>
    </tr>
  </tbody>
  </table>
  <section label="7.2.1.1" status="4" xml:id="sect_7.2.1.1">
    <title>Reason (Fixed)</title>
  
  <para>When used on the request primitive, this parameter identifies the general level of urgency of the request. This parameter shall always use the value "normal" in this standard.</para>
  </section>
<section label="7.2.1.2" status="4" xml:id="sect_7.2.1.2">
    <title>Result (Fixed)</title>
  
  <para>This parameter shall always take the value "affirmative" in this standard.</para>
  </section>
</section>
<section label="7.2.2" status="3" xml:id="sect_7.2.2">
    <title>A-RELEASE Service Procedure</title>
  
  <para>
  <emphasis role="bold">7.2.2.1</emphasis> An UL service-user that desires to release the association shall issue an A-RELEASE request primitive. This requestor shall not issue any further primitives other than an A-ABORT request primitive until it receives an A-RELEASE confirmation primitive.</para>
  <note>
    <para>Even though the requestor of the A-RELEASE service shall not issue any further primitive other than A-ABORT, it may receive P-DATA Indication primitives.</para>
  </note>
  <para>
  <emphasis role="bold">7.2.2.2</emphasis> The UL service-provider shall issue an A-RELEASE indication primitive to the acceptor. The acceptor then shall not issue any UL primitives other than an A-RELEASE response primitive, an A-ABORT request primitive, or P-DATA Request primitive.</para>
  <para>
  <emphasis role="bold">7.2.2.3</emphasis> To complete the A-RELEASE service, the acceptor shall reply to the A-RELEASE indication primitive by issuing an A-RELEASE response primitive. An accepting DICOM Application Entity shall always issue an A-RELEASE response primitive with an "affirmative" result parameter (i.e., accept the release).</para>
  <para>
  <emphasis role="bold">7.2.2.4</emphasis> After an A-RELEASE response has been issued, the acceptor shall not issue any further primitives for the association thereafter, including P-DATA Requests.</para>
  <para>
  <emphasis role="bold">7.2.2.5</emphasis> The UL service-provider shall issue an A-RELEASE confirmation primitive always with an "affirmative" value for the Result parameter.</para>
  <para>
  <emphasis role="bold">7.2.2.6</emphasis> A requestor in either AE may disrupt the A-RELEASE service procedure by issuing an A-ABORT request. When the acceptor receives an A-ABORT indication, the association is released with the possible loss of information in transit.</para>
  <para>
  <emphasis role="bold">7.2.2.7</emphasis> An A-RELEASE service procedure collision results when requestors in both AEs simultaneously issue an A-RELEASE service primitive. In this situation, both UL service-users receive an unexpected A-RELEASE indication primitive. The following sequence shall occur to complete the normal release of the association:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>The association-requestor shall issue an A-RELEASE response primitive.</para></listitem>
<listitem><para>The association-acceptor waits for an A-RELEASE confirmation primitive from its peer. When it receives one, it shall then issue an A-RELEASE response primitive.</para></listitem>
<listitem><para>The association-requestor receives an A-RELEASE confirmation primitive.</para></listitem>
</orderedlist>
  <para>The association shall be released when both ACSE service-users have received an A-RELEASE confirmation primitive.</para>
  </section>
</section>
<section label="7.3" status="2" xml:id="sect_7.3">
    <title>A-ABORT Service</title>
  
  <para>The ACSE A-ABORT service shall be used by a requestor in either of the AEs to cause the abnormal release of the association. It shall be a non-confirmed service. However, because of the possibility of an A-ABORT service procedure collision, the delivery of the indication primitive is not guaranteed. Should such a collision occur, both AEs are aware that the association has been terminated. The abort shall be performed through A-ABORT request and A-ABORT indication primitives.</para>
  <note>
    <para>An A-ABORT request primitive used on an established association may result in the destruction of data in transit.</para>
  </note>
  <para><xref linkend="figure_7-3" xrefstyle="select: label"/> illustrates aborting an established association between two AE's.</para>
  <para>
  <figure label="7-3" pgwide="1" xml:id="figure_7-3">
    <title>Association User Initiated Abort</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_7-3.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image010.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  <section label="7.3.1" status="3" xml:id="sect_7.3.1">
    <title>A-ABORT Parameters</title>
  
  <para><xref linkend="table_7-5" xrefstyle="select: label"/> lists the parameters for the A-ABORT service. Only the first parameter shall be used by DICOM Application Entities in this standard.</para>
    <table frame="box" label="7-5" rules="all" xml:id="table_7-5">
    <caption>A-ABORT Service Parameters</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">A-ABORT Parameter Name</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Request</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Indication</emphasis>
          </para>
        </th>
      </tr>
      
    </thead>
    <tbody>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>abort source</para>
        </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
    </tr>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>user information</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>NU(=)</para>
      </td>
    </tr>
  </tbody>
  </table>
  <section label="7.3.1.1" status="4" xml:id="sect_7.3.1.1">
    <title>Abort Source</title>
  
  <para>This parameter indicates the initiating source of this abort. It shall take one of the following symbolic values:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>UL service-user</para></listitem>
<listitem><para>UL service-provider (ACSE related)</para></listitem>
</orderedlist>
  </section>
</section>
<section label="7.3.2" status="3" xml:id="sect_7.3.2">
    <title>A-ABORT Service Procedure</title>
  
  <para>
  <emphasis role="bold">7.3.2.1</emphasis> When the A-ABORT service is used, the association shall be released abnormally and simultaneous with the abnormal release of the underlying connection.</para>
  <para>
  <emphasis role="bold">7.3.2.2</emphasis> A UL service-user that desires to release the association abnormally shall issue the A-ABORT request primitive. This requestor shall not issue any further primitives for the association.</para>
  <para>
  <emphasis role="bold">7.3.2.3</emphasis> The UL service-provider shall issue an A-ABORT indication primitive to the acceptor. The UL service-provider shall assign the value of "UL service-user" for the Abort Source parameter. The association and the underlying connection have been released.</para>
  <para>
  <emphasis role="bold">7.3.2.4</emphasis> The UL service-provider (ACSE related functions) may itself cause the abnormal release of the association because of internal errors. In this case, the UL service-provider shall issue A-ABORT indication primitives to acceptors in both AEs. The UL service-provider shall assign the value of "UL service-provider" to the Abort Source parameter. The user information parameter shall not be used.</para>
  </section>
</section>
<section label="7.4" status="2" xml:id="sect_7.4">
    <title>A-P-ABORT Service</title>
  
  <para>The ACSE A-P-ABORT service shall be used by the UL service-provider to signal the abnormal release of the association due to problems in services at the Presentation Layer and below. This occurrence indicates the possible loss of information in transit. A-P-ABORT is a provider-initiated service.</para>
  <para><xref linkend="figure_7-4" xrefstyle="select: label"/> illustrates aborting an established association by an UL service-provider.</para>
  <para>
  <figure label="7-4" pgwide="1" xml:id="figure_7-4">
    <title>Provider Initiated Abort</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_7-4.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image012.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  <section label="7.4.1" status="3" xml:id="sect_7.4.1">
    <title>A-P-ABORT Parameter</title>
  
  <para><xref linkend="table_7-6" xrefstyle="select: label"/> lists the parameter that shall be required for the A-P-ABORT service.</para>
    <table frame="box" label="7-6" rules="all" xml:id="table_7-6">
    <caption>A-P-ABORT Service Parameters</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>A-P-ABORT Parameter Name</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Indication</para>
        </th>
      </tr>
      
    </thead>
    <tbody>
      <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>provider reason</para>
        </td>
        <td align="center" colspan="1" rowspan="1">
          <para>P</para>
        </td>
      </tr>
    </tbody>
  </table>
  <para>The provider reason parameter shall be used to convey one of the following reasons:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>reason-not-specified</para></listitem>
<listitem><para>unrecognized-pdu</para></listitem>
<listitem><para>unexpected-pdu</para></listitem>
<listitem><para>unexpected-session-service primitive</para></listitem>
<listitem><para>unrecognized-pdu parameter</para></listitem>
<listitem><para>unexpected-pdu parameter</para></listitem>
<listitem><para>invalid-pdu-parameter value</para></listitem>
</orderedlist>
  <note>
    <para>In addition to these reasons, a locally defined list of reasons may be used to reflect errors that caused the abort and originated in the Session, Transport, Network, Data Link, and Physical layers. The generation and handling of such errors is internal to an implementation and, therefore, is outside the scope of this communications standard.</para>
  </note>
  </section>
<section label="7.4.2" status="3" xml:id="sect_7.4.2">
    <title>A-P-ABORT Service Procedure</title>
  
  <para>When the UL service-provider detects an internal error, A-P-ABORT indication primitives shall be issued to acceptors in both AEs. The association shall be abnormally released. Requestors in both AEs shall not issue any further primitives for the association.</para>
  </section>
</section>
<section label="7.5" status="2" xml:id="sect_7.5">
    <title>Sequencing Information</title>
  
  <para>Interactions among the specific service procedures, discussed in <xref linkend="sect_7.1" xrefstyle="select: label"/>, <xref linkend="sect_7.2" xrefstyle="select: label"/>, <xref linkend="sect_7.3" xrefstyle="select: label"/> and <xref linkend="sect_7.4" xrefstyle="select: label"/> for the ACSE subset of the Upper Layer Service, are defined in clause 10 of ISO 8649 - The ACSE Service Definition.</para>
  </section>
<section label="7.6" status="2" xml:id="sect_7.6">
    <title>P-DATA Service</title>
  
  <para>This Presentation P-DATA Service shall be used by either AE to cause the exchange of application information (i.e., DICOM Messages). DICOM Messages shall be exchanged as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. An association provides a simultaneous bi-directional exchange of P-DATA request/indication primitives.</para>
  <para><xref linkend="figure_7-5" xrefstyle="select: label"/> illustrates the transfer of data on an established association between two AEs.</para>
  <para>
  <figure label="7-5" pgwide="1" xml:id="figure_7-5">
    <title>Data Transfer</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_7-5.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image014.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  <section label="7.6.1" status="3" xml:id="sect_7.6.1">
    <title>P-DATA Parameters</title>
  
  <para><xref linkend="table_7-7" xrefstyle="select: label"/> lists the parameter that shall be required for the P-DATA service.</para>
    <table frame="box" label="7-7" rules="all" xml:id="table_7-7">
    <caption>P-DATA Service Parameter</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">P-DATA Paramater Name</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Request</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Indication</emphasis>
          </para>
        </th>
      </tr>
      
    </thead>
    <tbody>
    <tr valign="top">
        <td align="left" colspan="1" rowspan="1">
          <para>presentation data value list</para>
        </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>M(=)</para>
      </td>
    </tr>
  </tbody>
  </table>
  <para>The Presentation Data Value List parameter shall contain one or more Presentation Data Values (PDV). Each PDV shall consist of two parameters: a Presentation Context ID and User Data values. The User Data values are taken from the Abstract Syntax and encoded in the Transfer Syntax identified by the Presentation Context ID. This referenced Presentation Context ID identifies one of the presentation contexts agreed to at association time. The User Data values format used in each PDV by the DICOM Application Entities is specified in <xref linkend="chapter_E" xrefstyle="template: Annex %n"/>.</para>
  </section>
</section>
</chapter>

  <chapter label="9" status="1" xml:id="chapter_9">
    <title>DICOM Upper Layer Protocol for TCP/IP</title>
  
  <para>The DICOM Upper Layer Protocol specified in this section shall be used in conjunction with the TCP/IP transport layers..</para>
  <section label="9.1" status="2" xml:id="sect_9.1">
    <title>Use of the Transport Service Provided By TCP</title>
  
  <section label="9.1.1" status="3" xml:id="sect_9.1.1">
    <title>General</title>
  
  <para>There is a one-to-one relationship between a TCP Transport Connection and an Upper Layer Association. Therefore, the following rules apply:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>Each Upper Layer Association shall be supported by one and only one TCP Transport Connection.</para></listitem>
<listitem><para>Each TCP Transport Connection shall support one and only one Upper Layer Association.</para></listitem>
</orderedlist>
  <para>The Services provided by the TCP Transport Services are not formally documented. This section, therefore, makes use of "commonly" used terms in a number of TCP Programming Interface Implementations (e.g., Sockets). However, the following RFCs shall be required for TCP/IP support. They specify the support needed for IPv4.</para>
  <orderedlist numeration="loweralpha">
<listitem><para>RFC 793, Transmission Control Program - DARPA Internet Protocol Specification</para></listitem>
<listitem><para>RFC 791, Internet Protocol - DARPA Internet Protocol Specification</para></listitem>
<listitem><para>RFC 792, Internet Control Message Protocol - DARPA Internet Program Protocol Specification</para></listitem>
<listitem><para>RFC 950, Internet Subnetting</para></listitem>
</orderedlist>
  <para>In addition, devices that support IPv6 shall comply with:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>RFC 1881, IPv6 Address Allocation Management</para></listitem>
<listitem><para>RFC 2460, Internet Protocol, Version 6 (IPv6) Specification</para></listitem>
</orderedlist>
  <note>
    <para>There are many other RFC's that may also apply to a particular implementation depending upon specific selections of hardware and software features.</para>
  </note>
  <para>For the establishment of a TCP connection, a TCP port shall be used to serve as the transport selector. A DICOM UL entity is identified on a given system on the network by a port number unique within the scope of this system. Port numbers of remote DICOM UL entities (well known port number or other numbers) shall be configurable on DICOM UL entities.</para>
  <note>
    <para>It is strongly recommended that systems supporting a single DICOM UL entity use as their port the "well known port" registered for the DICOM Upper Layer Protocol: port number 104 (decimal), if the operating system permits access to privileged ports (in the range 0 to 1023), otherwise it is recommended that they use the "registered" port number 11112 (decimal). See "http://www.iana.org/assignments/port-numbers".</para>
  </note>
  <para>Application Entities may also choose to access the TCP Transport Services via a Secure Transport Connection. The nature of this Secure Transport Connection is specified through Security Profiles (see <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>). Security Profiles select minimum mechanisms needed to support that profile. Other mechanisms may also be used if agreed to during establishment of the Secure Transport Connection.</para>
  <note>
    <orderedlist numeration="arabic">
      <listitem>
        <para>DICOM does not specify how a secure transport connection is established, or the significance of any certificates exchanged during peer entity authentication. These issues are left up to the application, which is assumed to be following some security policy. Once the application has established a secure Transport Connection, then an Upper Layer Association can use that secure channel.</para>
      </listitem>
      <listitem>
        <para>There may be an interaction between PDU size and record size of the secure Transport Connection that impacts efficiency of transport.</para>
      </listitem>
      <listitem>
        <para>Registered ports for Secure Transport Connections are defined in <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>.</para>
      </listitem>
    </orderedlist>
  </note>
  </section>
<section label="9.1.2" status="3" xml:id="sect_9.1.2">
    <title>Opening a TCP Transport Connection</title>
  
  <para>When an Association is to be established by a DICOM Upper Layer Entity, a TRANSPORT CONNECT request primitive shall be issued to the TCP Transport Service (Active Open). Once the TCP Transport Connection Confirmation is received (Open Completed), an A-ASSOCIATE-RQ PDU shall be sent/written on the now established transport connection.</para>
  <para>When a DICOM Upper Layer Entity becomes activated (Association Idle State), it shall wait for TCP Transport Connections in a passive mode by initiating a "listen." When an incoming TCP Transport Connection Indication is received from the network, it is accepted and a timer ARTIM (Association Request/Reject/Release Timer) shall be set. Any further exchange of PDUs (read/write) shall be performed as specified by the Upper Layer State Machine (including ARTIM Timer expiration before an A-ASSOCIATE-RQ PDU is received, see <xref linkend="sect_9.2" xrefstyle="select: label"/>).</para>
  </section>
<section label="9.1.3" status="3" xml:id="sect_9.1.3">
    <title>Transferring Data On a TCP Connection</title>
  
  <para>Data exchange of PDUs (read/write) on an established TCP Connection shall follow the specifications of the DICOM Upper Layer Protocol State Machine (see <xref linkend="sect_9.2" xrefstyle="select: label"/>) and the DICOM Upper Layer PDU structure (see <xref linkend="sect_9.3" xrefstyle="select: label"/>).</para>
  </section>
<section label="9.1.4" status="3" xml:id="sect_9.1.4">
    <title>Closing a TCP Transport Connection</title>
  
  <para>TCP Transport Connections shall be closed using the "don't linger" option.</para>
  <para>A TCP Transport Connection is closed under a number of situations. These are described in the DICOM Upper Layer Protocol State Machine. Some typical cases are discussed below:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>After an A-RELEASE-RQ has been sent and the A-RELEASE-RP PDU is received</para></listitem>
<listitem><para>When a Transport Connection has been established by the DICOM remote UL Entity and no A-ASSOCIATE-RQ is received before the ARTIM Timer expires</para></listitem>
<listitem><para>When an A-ABORT PDU has been received</para></listitem>
<listitem><para>When an A-ABORT PDU has been sent and the ARTIM Timer expires before the Transport Connection is closed</para></listitem>
<listitem><para>When a TCP connection is being disconnected by the Transport Service Provider (e.g., network failure)</para></listitem>
<listitem><para>When a TCP connection is being disconnected by the remote DICOM UL Entity</para></listitem>
</orderedlist>
  <note>
    <orderedlist numeration="arabic">
      <listitem><para>Except following the normal completion of an association reject, release or abort and in specific situations such as temporary lack of resources, an Upper Layer State Machine should not disconnect a TCP connection or reject its establishment. The appropriate behavior is to use the Association Reject or Abort services.</para>
      </listitem>
      <listitem><para>The ARTIM Timer should not be used to oversee the Association Establishment or Release. Such a mechanism falls under the protocol definition of the layer above the DICOM Upper Layer (i.e., DICOM Application Entity, see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>).</para>
      </listitem>
    </orderedlist>
  </note>
      </section>
<section label="9.1.5" status="3" xml:id="sect_9.1.5">
    <title>ARTIM Timer</title>
  
  <para>The value of the ARTIM Timer used to manage the Request, Reject, and Release of associations on a DICOM UL entity shall be configurable to address a wide range of network configurations.</para>
  </section>
</section>
<section label="9.2" status="2" xml:id="sect_9.2">
    <title>DICOM Upper Layer Protocol for TCP/IP State Machine</title>
  
  <section label="9.2.1" status="3" xml:id="sect_9.2.1">
    <title>Machine States Definition</title>
  
    <table frame="box" label="9-1" rules="all" xml:id="table_9-1">
    <caption>No Association</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">State</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Definition</emphasis>
          </para>
        </th>
      </tr>
      
    </thead>
    <tbody>
   <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Idle</para>
      </td>
    </tr>
  </tbody>
  </table>
    <table frame="box" label="9-2" rules="all" xml:id="table_9-2">
    <caption>Association Establishment</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">State</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Definition</emphasis>
          </para>
        </th>
      </tr>
      
    </thead>
    <tbody>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Transport connection open (Awaiting A-ASSOCIATE-RQ PDU)</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 3</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Awaiting local A-ASSOCIATE response primitive (from local user)</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Awaiting transport connection opening to complete (from local transport service)</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 5</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Awaiting A-ASSOCIATE-AC or A-ASSOCIATE-RJ PDU</para>
      </td>
    </tr>
  </tbody>
  </table>
    <table frame="box" label="9-3" rules="all" xml:id="table_9-3">
    <caption>Data Transfer</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">State</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Definition</emphasis>
          </para>
        </th>
      </tr>
      
    </thead>
    <tbody>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Association established and ready for data transfer</para>
      </td>
    </tr>
  </tbody>
  </table>
    <table frame="box" label="9-4" rules="all" xml:id="table_9-4">
    <caption>Association Release</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">State</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Definition</emphasis>
          </para>
        </th>
      </tr>
      
    </thead>
    <tbody>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 7</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Awaiting A-RELEASE-RP PDU</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Awaiting local A-RELEASE response primitive (from local user)</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 9</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Release collision requestor side; awaiting A-RELEASE response (from local user)</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 10</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Release collision acceptor side; awaiting A-RELEASE-RP PDU</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 11</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Release collision requestor side; awaiting A-RELEASE-RP PDU</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 12</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Release collision acceptor side; awaiting A-RELEASE response primitive (from local user)</para>
      </td>
    </tr>
  </tbody>
  </table>
    <table frame="box" label="9-5" rules="all" xml:id="table_9-5">
    <caption>Waiting for Transport Connection Close</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">State</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Definition</emphasis>
          </para>
        </th>
      </tr>
      
    </thead>
    <tbody>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Sta 13</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Awaiting Transport Connection Close Indication (Association no longer exists)</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
<section label="9.2.2" status="3" xml:id="sect_9.2.2">
    <title>State Machine Actions Definition</title>
  
    <table frame="box" label="9-6" rules="all" xml:id="table_9-6">
    <caption>Association Establishment Related Actions</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Action</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Definition</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AE-1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue TRANSPORT CONNECT request primitive to local transport serviceNext state is Sta4</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AE-2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Send A-ASSOCIATE-RQ-PDUNext state is Sta5</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AE-3</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue A-ASSOCIATE confirmation (accept) primitiveNext state is Sta6</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AE-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue A-ASSOCIATE confirmation (reject) primitive and close transport connectionNext state is Sta1</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AE-5</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue Transport connection response primitive; start ARTIM timerNext state is Sta2</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AE-6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Stop ARTIM timer and if A-ASSOCIATE-RQ acceptable by service-provider:- issue A-ASSOCIATE indication primitiveNext state is Sta3</para>
        <para>otherwise:-issue A-ASSOCIATE-RJ-PDU and start ARTIM timerNext state is Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AE-7</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Send A-ASSOCIATE-AC PDUNext state is Sta6</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AE-8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Send A-ASSOCIATE-RJ PDU and start ARTIM timerNext state is STA13</para>
      </td>
    </tr>
  </tbody>
  </table>
    <table frame="box" label="9-7" rules="all" xml:id="table_9-7">
    <caption>Data Transfer Related Actions</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">State</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Definition</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>DT-1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Send P-DATA-TF PDUNext state is Sta6</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>DT-2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Send P-DATA indication primitiveNext state is Sta6</para>
      </td>
    </tr>
  </tbody>
  </table>
    <table frame="box" label="9-8" rules="all" xml:id="table_9-8">
    <caption>Association Release Related Actions</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Action</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Definition</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AR-1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Send A-RELEASE-RQ PDUNext state is Sta7</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AR-2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue A-RELEASE indication primitiveNext state is Sta8</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AR-3</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue A-RELEASE confirmation primitive, and close transport connectionNext state is Sta1</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AR-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue A-RELEASE-RP PDU and start ARTIM timerNext state is Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AR-5</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Stop ARTIM timerNext state is Sta1</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AR-6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue P-DATA indicationNext state is Sta7</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AR-7</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue P-DATA-TF PDUNext state is Sta8</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AR-8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue A-RELEASE indication (release collision) :- if association-requestor, next state is Sta9- if not, next state is Sta10</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AR-9</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Send A-RELEASE-RP PDUNext state is Sta11</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AR-10</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue A-RELEASE confirmation primitiveNext state is Sta12</para>
      </td>
    </tr>
  </tbody>
  </table>
    <table frame="box" label="9-9" rules="all" xml:id="table_9-9">
    <caption>Association Abort Related Actions</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Action</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Definition</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AA-1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Send A-ABORT PDU (service-user source) and start (or restart if already started) ARTIM timer;Next state is Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AA-2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Stop ARTIM timer if running. Close transport connectionNext state is Sta1</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AA-3</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>If (service-user inititated abort)- issue A-ABORT indication and close transport connectionotherwise (service-provider inititated abort) :- issue A-P-ABORT indication and close transport connectionNext state is Sta1</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AA-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Issue A-P-ABORT indication primitive, Next state is Sta1</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AA-5</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Stop ARTIM timer, Next state is Sta1</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AA-6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Ignore PDU, Next state is Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AA-7</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Send A-ABORT PDU, Next state is Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>AA-8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Send A-ABORT PDU (service-provider source-), issue an A-P-ABORT indication, and start ARTIM timer;Nest state is Sta13</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
<section label="9.2.3" status="3" xml:id="sect_9.2.3">
    <title>DICOM Upper Layer Protocol for TCP/IP State Transition Table</title>
  
  <para>The DICOM Upper Layer Protocol State transitions are specified in <xref linkend="table_9-10" xrefstyle="select: label"/>. This table addresses both the normal and error cases for the protocol operation. Both the called and the calling aspects of an association are described in this table.</para>
  
    <table frame="box" label="9-10" rules="all" xml:id="table_9-10">
    <caption>DICOM Upper Layer Protocol State Transition Table</caption>
    <thead>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>STATES</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>No assoc<superscript>n</superscript>
</para>
        </th>
        <th align="center" colspan="4" rowspan="1">
          <para>
            <emphasis role="bold">Association establishment</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Data transfer</emphasis>
          </para>
        </th>
        <th align="center" colspan="6" rowspan="1">
          <para>
            <emphasis role="bold">Association release (normal &amp; collision)</emphasis>
          </para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>
            <emphasis role="bold">Wait for Tp Close</emphasis>
          </para>
        </th>
      </tr>
      <tr valign="top">
        <th align="center" colspan="1" rowspan="1">
          <para>EVENTS</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta1</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta2</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta3</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta4</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta5</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta6</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta7</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta8</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta9</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta10</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta11</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta12</para>
        </th>
        <th align="center" colspan="1" rowspan="1">
          <para>Sta13</para>
        </th>
      </tr>
      
    </thead>
    <tbody>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-ASSOCIATE Request (local user)</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AE-1</para>
<para>Sta4</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Transport Conn. Confirm<superscript>n</superscript> (local transport service)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AE-2</para>
<para>Sta5</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-ASSOCIATE-AC PDU (received on transport connection)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AE-3</para>
<para>Sta6</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-6</para>
<para>Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-ASSOCIATE-RJ PDU (received on transport connection)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AE-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-6</para>
<para>Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Transport Connection Indication (local transport service)</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AE-5</para>
<para>Sta2</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-ASSOCIATE-RQ PDU (received on transport connection)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AE-6</para>
<para>Sta3 or 13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-7</para>
<para>Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-ASSOCIATE response primitive (accept)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AE-7</para>
<para>Sta6</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-ASSOCIATE response primitive (reject)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AE-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>P-DATA request primitive</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>DT-1</para>
<para>Sta6</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-7</para>
<para>Sta8</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>P-DATA-TF PDU</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>DT-2</para>
<para>Sta6</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-6</para>
<para>Sta7</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-6</para>
<para>Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-RELEASE Request primitive</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-1</para>
<para>Sta7</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-RELEASE-RQ PDU (received on open transport connection)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-2</para>
<para>Sta8</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-8</para>
<para>Sta9 or 10</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-6</para>
<para>Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-RELEASE-RP PDU (received on transport connection)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-10</para>
<para>Sta12</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-6</para>
<para>Sta13</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-RELEASE Response primitive</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-4</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-9</para>
<para>Sta11</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-4</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-ABORT Request primitive</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-2</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>A-ABORT PDU (received on open transport connection)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-2</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-3</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-2</para>
<para>Sta1</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Transport connection closed indication (local transport service)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-5</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-4</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AR-5</para>
<para>Sta1</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>ARTIM timer expired (Association reject/release timer)</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-2</para>
<para>Sta1</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-2</para>
<para>Sta1</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="left" colspan="1" rowspan="1">
        <para>Unrecognized or invalid PDU received</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-1</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1"/>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-8</para>
<para>Sta13</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>AA-7</para>
<para>Sta13</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
</section>
<section label="9.3" status="2" xml:id="sect_9.3">
    <title>DICOM Upper Layer Protocol for TCP/IP Data Units Structure</title>
  
  <section label="9.3.1" status="3" xml:id="sect_9.3.1">
    <title>General</title>
  
  <para>The Protocol Data Units (PDUs) are the message formats exchanged between peer entities within a layer. A PDU shall consist of protocol control information and user data. PDUs are constructed by mandatory fixed fields followed by optional variable fields that contain one or more items and/or sub-items.</para>
  <para>Items of unrecognized types shall be ignored and skipped. Items shall appear in an increasing order of their item types. Several instances of the same item shall be acceptable or shall not as specified by each item.</para>
  <para>The DICOM UL protocol consists of seven Protocol Data Units:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>A-ASSOCIATE-RQ PDU</para></listitem>
<listitem><para>A-ASSOCIATE-AC PDU</para></listitem>
<listitem><para>A-ASSOCIATE-RJ PDU</para></listitem>
<listitem><para>P-DATA-TF PDU</para></listitem>
<listitem><para>A-RELEASE-RQ PDU</para></listitem>
<listitem><para>A-RELEASE-RP PDU</para></listitem>
<listitem><para>A-ABORT PDU</para></listitem>
</orderedlist>
  <para>The encoding of the DICOM UL PDUs is defined as follows (Big Endian byte ordering) :</para>
  <note>
    <para>The Big Endian byte ordering has been chosen for consistency with the OSI and TCP/IP environment. This pertains to the DICOM UL PDU headers only. The encoding of the PDV message fragments is defined by the Transfer Syntax negotiated at association establishment.</para>
  </note>
  <orderedlist numeration="loweralpha">
<listitem><para>Each PDU type shall consist of one or more bytes that when represented, are numbered sequentially, with byte 1 being the lowest byte number.</para></listitem>
<listitem><para>Each byte within the PDU shall consist of eight bits that, when represented, are numbered 7 to 0, where bit 0 is the low order bit.</para></listitem>
<listitem><para>When consecutive bytes are used to represent a string of characters, the lowest byte numbers represent the first character.</para></listitem>
<listitem><para>When consecutive bytes are used to represent a binary number, the lower byte number has the most significant value.</para></listitem>
<listitem><para>The lowest byte number is placed first in the transport service data flow.</para></listitem>
    <listitem><para>An overview of the PDUs is shown in <xref linkend="figure_9-1" xrefstyle="select: label"/> and <xref linkend="figure_9-2" xrefstyle="select: label"/>. The detailed structure of each PDU is specified in the following sections.</para></listitem>
</orderedlist>
    <note><para>A number of parameters defined in the UL Service are not reflected in these PDUs (e.g., service parameters, fixed values, values not used by DICOM Application Entities.)</para>
    </note>
      <para>
  <figure label="9-1" pgwide="1" xml:id="figure_9-1">
    <title>Protocol Data Units Structure and Encoding</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_9-1.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image017.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  <para>
  <figure label="9-2" pgwide="1" xml:id="figure_9-2">
    <title>Protocol Data Units Structure and Encoding</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_9-2.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image019.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  </section>
<section label="9.3.2" status="3" xml:id="sect_9.3.2">
    <title>A-ASSOCIATE-RQ PDU Structure</title>
  
  <para>An A-ASSOCIATE-RQ PDU shall be made of a sequence of mandatory fields followed by a variable length field. <xref linkend="table_9-11" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
  <para>The variable field shall consist of one Application Context Item, one or more Presentation Context Items, and one User Information Item. Sub-Items shall exist for the Presentation Context and User Information Items.</para>
    <table frame="box" label="9-11" rules="all" xml:id="table_9-11">
    <caption>ASSOCIATE-RQ PDU Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">PDU bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>01H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This PDU-length shall be the number of bytes from the first byte of the following field to the last byte of the variable field. It shall be encoded as an unsigned binary number</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>7-8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Protocol-version</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This two byte field shall use one bit to identify each version of the DICOM UL protocol supported by the calling end-system. This is Version 1 and shall be identified with bit 0 set. A receiver of this PDU implementing only this version of the DICOM UL protocol shall only test that bit 0 is set.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>9-10</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 0000H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>11-26</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Called-AE-title</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Destination DICOM Application Name. It shall be encoded as 16 characters as defined by the ISO 646:1990-Basic G0 Set with leading and trailing spaces (20H) being non-significant. The value made of 16 spaces (20H) meaning "no Application Name specified" shall not be used. For a complete description of the use of this field, see <xref linkend="sect_7.1.1.4" xrefstyle="select: label"/>.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>27-42</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Calling-AE-title</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Source DICOM Application Name. It shall be encoded as 16 characters as defined by the ISO 646:1990-Basic G0 Set with leading and trailing spaces (20H) being non-significant. The value made of 16 spaces (20H) meaning "no Application Name specified" shall not be used. For a complete description of the use of this field, see <xref linkend="sect_7.1.1.3" xrefstyle="select: label"/>.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>43-74</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H for all bytes but not tested to this value when received</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>75-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Variable items</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This variable field shall contain the following items: one Application Context Item, one or more Presentation Context Items and one User Information Item. For a complete description of the use of these items see <xref linkend="sect_7.1.1.2" xrefstyle="select: label"/>, <xref linkend="sect_7.1.1.13" xrefstyle="select: label"/>, and <xref linkend="sect_7.1.1.6" xrefstyle="select: label"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  <section label="9.3.2.1" status="4" xml:id="sect_9.3.2.1">
    <title>Application Context Item Structure</title>
  
  <para>An Application Context Item shall be made of a sequence of mandatory fields followed by a variable length field. <xref linkend="table_9-12" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
    <table frame="box" label="9-12" rules="all" xml:id="table_9-12">
    <caption>Application Context Item Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>10H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the Application-context-name field. It shall be encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Application-context-name</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>A valid Application-context-name shall be encoded as defined in <xref linkend="chapter_F" xrefstyle="template: Annex %n"/>. For a description of the use of this field see <xref linkend="sect_7.1.1.2" xrefstyle="select: label"/>. Application-context-names are structured as UIDs as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> (see <xref linkend="chapter_A" xrefstyle="template: Annex %n"/> for an overview of this concept). DICOM Application-context-names are registered in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
<section label="9.3.2.2" status="4" xml:id="sect_9.3.2.2">
    <title>Presentation Context Item Structure</title>
  
  <para>The Presentation Context Item shall be made of a sequence of mandatory fixed length fields followed by a variable field. <xref linkend="table_9-13" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
  <para>The variable field shall consist of one Abstract Syntax Sub-Item followed by one or more Transfer Syntax Sub-Items.</para>
    <table frame="box" label="9-13" rules="all" xml:id="table_9-13">
    <caption>Presentation Context Item Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>20H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the last Transfer Syntax Item. It shall be encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Presentation-context-ID</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Presentation-context-ID values shall be odd integers between 1 and 255, encoded as an unsigned binary number. For a complete description of the use of this field see <xref linkend="sect_7.1.1.13" xrefstyle="select: label"/>.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>7</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>9-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Abstract/Transfer Syntax Sub-Items</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This variable field shall contain the following sub-items: one Abstract Syntax and one or more Transfer Syntax(es). For a complete description of the use and encoding of these sub-items see <xref linkend="sect_9.3.2.2.1" xrefstyle="select: label"/> and <xref linkend="sect_9.3.2.2.2" xrefstyle="select: label"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  <section label="9.3.2.2.1" status="5" xml:id="sect_9.3.2.2.1">
    <title>Abstract Syntax Sub-Item Structure</title>
  
  <para>The Abstract Syntax Sub-Item shall be made of a sequence of mandatory fixed length fields followed by a variable field. <xref linkend="table_9-14" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
    <table frame="box" label="9-14" rules="all" xml:id="table_9-14">
    <caption>Abstract Syntax Sub-Item Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>30H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the Abstract-syntax-name field. It shall be encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Abstract-syntax-name</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This variable field shall contain the Abstract-syntax-name related to the proposed presentation context. A valid Abstract-syntax-name shall be encoded as defined in <xref linkend="chapter_F" xrefstyle="template: Annex %n"/>. For a description of the use of this field see <xref linkend="sect_7.1.1.13" xrefstyle="select: label"/>. Abstract-syntax-names are structured as UIDs as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> (see <xref linkend="chapter_B" xrefstyle="template: Annex %n"/> for an overview of this concept). DICOM Abstract-syntax-names are registered in <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
<section label="9.3.2.2.2" status="5" xml:id="sect_9.3.2.2.2">
    <title>Transfer Syntax Sub-Item Structure</title>
  
  <para>The Transfer Syntax Sub-Item shall be made of a sequence of mandatory fixed length fields followed by a variable field. <xref linkend="table_9-15" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
    <table frame="box" label="9-15" rules="all" xml:id="table_9-15">
    <caption>Transfer Syntax Sub-Item Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>40H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the Transfer-syntax-name field(s). It shall be encoded as an unsigned binary numbers</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Transfer-syntax-name(s)</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This variable field shall contain the Transfer-syntax-name proposed for this presentation context. A valid Transfer-syntax-name shall be encoded as defined in <xref linkend="chapter_F" xrefstyle="template: Annex %n"/>. For a description of the use of this field see <xref linkend="sect_7.1.1.13" xrefstyle="select: label"/>. Transfer-syntax-names are structured as UIDs as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> (see <xref linkend="chapter_B" xrefstyle="template: Annex %n"/> for an overview of this concept). DICOM Transfer-syntax-names are registered in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
</section>
<section label="9.3.2.3" status="4" xml:id="sect_9.3.2.3">
    <title>User Information Item Structure</title>
  
  <para>The User Information Item shall be made of a sequence of mandatory fixed length fields followed by a variable field. <xref linkend="table_9-16" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
  <para>The variable field shall consist of one or more User-Data Sub-Items.</para>
  <note>
    <para>The User-Data Sub-Items may be present in any order within the User-Information Item. No significance should be placed on the order of User-Data Sub-Items within the User Information Item. Sending applications should be aware that some older applications might expect Sub-Items to be encoded in ascending order of Item-type within the enclosing Item.</para>
  </note>
    <table frame="box" label="9-16" rules="all" xml:id="table_9-16">
    <caption>User Information Item Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>50H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the User-data field(s). It shall be encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>User-data</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This variable field shall contain User-data sub-items as defined by the DICOM Application Entity. The structure and content of these sub-items is defined in <xref linkend="chapter_D" xrefstyle="template: Annex %n"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
</section>
<section label="9.3.3" status="3" xml:id="sect_9.3.3">
    <title>A-ASSOCIATE-AC PDU Structure</title>
  
  <para>An A-ASSOCIATE-AC PDU shall be made of a sequence of mandatory fields followed by a variable length field. <xref linkend="table_9-17" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
  <para>The variable field consist of one Application Context Item, one or more Presentation Context Items, and one User Information Item. Sub-Items shall exist for the Presentation Context and User Information Items.</para>
    <table frame="box" label="9-17" rules="all" xml:id="table_9-17">
    <caption>ASSOCIATE-AC PDU Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">PDU bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>02H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This PDU-length shall be the number of bytes from the first byte of the following field to the last byte of the variable field. It shall be encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>7-8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Protocol-version</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This two byte field shall use one bit to identify each version of the DICOM UL protocol supported by the calling end-system. This is Version 1 and shall be identified with bit 0 set. A receiver of this PDU implementing only this version of the DICOM UL protocol shall only test that bit 0 is set.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>9-10</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 0000H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>11-26</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value identical to the value received in the same field of the A-ASSOCIATE-RQ PDU, but its value shall not be tested when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>27-42</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value identical to the value received in the same field of the A-ASSOCIATE-RQ PDU, but its value shall not be tested when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>43-74</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value identical to the value received in the same field of the A-ASSOCIATE-RQ PDU, but its value shall not be tested when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>75-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Variable items</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This variable field shall contain the following items: one Application Context Item, one or more Presentation Context Item(s) and one User Information Item. For a complete description of these items see <xref linkend="sect_7.1.1.2" xrefstyle="select: label"/>, <xref linkend="sect_7.1.1.14" xrefstyle="select: label"/>, and <xref linkend="sect_7.1.1.6" xrefstyle="select: label"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  <section label="9.3.3.1" status="4" xml:id="sect_9.3.3.1">
    <title>Application Context Item Structure</title>
  
  <para>An Application Context Item shall be made of a sequence of mandatory fields followed by a variable length field. <xref linkend="table_9-12" xrefstyle="select: label"/> shows the sequence of mandatory fields.</para>
  </section>
<section label="9.3.3.2" status="4" xml:id="sect_9.3.3.2">
    <title>Presentation Context Item Structure</title>
  
  <para>The Presentation Context Item shall be made of a sequence of mandatory fixed length fields followed by a variable field. <xref linkend="table_9-18" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
  <para>The variable field shall consist of one Transfer Syntax Sub-Item.</para>
    <table frame="box" label="9-18" rules="all" xml:id="table_9-18">
    <caption>Presentation Context Item Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>21H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the Transfer Syntax Sub-Item. It shall be encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Presentation-context-ID</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Presentation-context-ID values shall be odd integers between 1 and 255, encoded as an unsigned binary number. For a complete description of the use of this field see <xref linkend="sect_7.1.1.13" xrefstyle="select: label"/>.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>7</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Result/Reason</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Result/Reason field shall contain an integer value encoded as an unsigned binary number. One of the following values shall be used:</para>
        <para>0 - acceptance</para>
        <para>1 - user-rejection</para>
        <para>2 - no-reason (provider rejection)</para>
        <para>3 - abstract-syntax-not-supported (provider rejection)</para>
        <para>4 - transfer-syntaxes-not-supported (provider rejection)</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>9-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Transfer syntax sub-item</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This variable field shall contain one Transfer Syntax Sub-Item. When the Result/Reason field has a value other than acceptance (0), this field shall not be significant and its value shall not be tested when received. For a complete description of the use and encoding of this item see <xref linkend="sect_9.3.3.2.1" xrefstyle="select: label"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  <section label="9.3.3.2.1" status="5" xml:id="sect_9.3.3.2.1">
    <title>Transfer Syntax Sub-Item Structure</title>
  
  <para>The Transfer Syntax Sub-Item shall be made of a sequence of mandatory fixed length fields followed by a variable field. <xref linkend="table_9-19" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
    <table frame="box" label="9-19" rules="all" xml:id="table_9-19">
    <caption>Transfer Syntax Sub-Item Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>40H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the Transfer-syntax-name field. It shall be encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Transfer-syntax-name</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This variable field shall contain the Transfer-syntax-name proposed for this presentation context. A valid Transfer-syntax-name shall be encoded as defined in <xref linkend="chapter_F" xrefstyle="template: Annex %n"/>. For a description of the use of this field see <xref linkend="sect_7.1.1.14" xrefstyle="select: label"/>. Transfer-syntax-names are structured as UIDs as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> (see <xref linkend="chapter_B" xrefstyle="template: Annex %n"/> for an overview of this concept). DICOM Transfer-syntax-names are registered in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
</section>
<section label="9.3.3.3" status="4" xml:id="sect_9.3.3.3">
    <title>User Information Item Structure</title>
  
  <para>The User Information Item shall be made of a sequence of mandatory length fields followed by a variable field. <xref linkend="table_9-20" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
  <para>The variable field shall consist of one or more User-Data Sub-Items.</para>
  <note>
    <para>The User-Data Sub-Items may be present in any order within the User-Information Item. No significance should be placed on the order of User-Data Sub-Items within the User Information Item. Sending applications should be aware that some older applications might expect Sub-Items to be encoded in ascending order of Item-type within the enclosing Item.</para>
  </note>
    <table frame="box" label="9-20" rules="all" xml:id="table_9-20">
    <caption>User Information Item Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>50H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the User-data-information field(s). It shall be encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>User-data</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This variable field shall contain User-data sub-items as defined by the DICOM Application Entity. The structure and content of these sub-items is defined in <xref linkend="chapter_D" xrefstyle="template: Annex %n"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
</section>
<section label="9.3.4" status="3" xml:id="sect_9.3.4">
    <title>A-ASSOCIATE-RJ PDU Structure</title>
  
  <para>An A-ASSOCIATE-RJ PDU shall be made of a sequence of mandatory fields. <xref linkend="table_9-21" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
    <table frame="box" label="9-21" rules="all" xml:id="table_9-21">
    <caption>ASSOCIATE-RJ PDU Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">PDU bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>03H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This PDU-length shall be the number of bytes from the first byte of the following field to the last byte of the Reason/Diag. field. In the case of this PDU, it shall have the fixed value of 00000004H encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>7</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Result</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Result field shall contain an integer value encoded as an unsigned binary number. One of the following values shall be used:</para>
        <para>1 - rejected-permanent</para>
        <para>2 - rejected-transient</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>9</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Source</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Source field shall contain an integer value encoded as an unsigned binary number. One of the following values shall be used:</para>
        <para>1 - DICOM UL service-user</para>
        <para>2 - DICOM UL service-provider (ACSE related function)</para>
        <para>3 - DICOM UL service-provider (Presentation related function)</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>10</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reason/Diag.</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This field shall contain an integer value encoded as an unsigned binary number. If the Source field has the value (1) "DICOM UL service-user", it shall take one of the following:</para>
        <para>1 - no-reason-given</para>
        <para>2 - application-context-name-not-supported</para>
        <para>3 - calling-AE-title-not-recognized</para>
        <para>4-6 - reserved</para>
        <para>7 - called-AE-title-not-recognized</para>
        <para>8-10 - reserved</para>
        <para>If the Source field has the value (2) "DICOM UL service provided (ACSE related function)", it shall take one of the following:</para>
        <para>1 - no-reason-given</para>
        <para>2 - protocol-version-not-supported</para>
        <para>If the Source field has the value (3) "DICOM UL service provided (Presentation related function)", it shall take one of the following:</para>
        <para>0 - reserved</para>
        <para>1 - temporary-congestio</para>
        <para>2 - local-limit-exceeded</para>
        <para>3-7 - reserved</para>
        <note>
    <para>The reserved fields are used to preserve symmetry with OSI ACSE/Presentation Services and Protocols.</para>
        </note>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
<section label="9.3.5" status="3" xml:id="sect_9.3.5">
    <title>P-DATA-TF PDU Structure</title>
  
  <para>A P-DATA-TF PDU shall be made of a sequence of mandatory fixed length fields followed by a variable length field. <xref linkend="table_9-22" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
  <para>The variable data field shall contain one or more Presentation-Data-Value Items.</para>
    <table frame="box" label="9-22" rules="all" xml:id="table_9-22">
    <caption>P-DATA-TF PDU Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">PDU bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>04H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This PDU-length shall be the number of bytes from the first byte of the following field to the last byte of the variable field. It shall be encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>7-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Presentation-data-value Item(s)</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This variable data field shall contain one or more Presentation-data-value Items(s). For a complete description of the use of this field see <xref linkend="sect_9.3.5.1" xrefstyle="select: label"/></para>
      </td>
    </tr>
  </tbody>
  </table>
  <section label="9.3.5.1" status="4" xml:id="sect_9.3.5.1">
    <title>Presentation Data Value Item Structure</title>
  
  <para>The Presentation Data Value Item shall be made of a sequence of mandatory fixed length fields followed by one variable length field. <xref linkend="table_9-23" xrefstyle="select: label"/> shows the sequence of the fields.</para>
  <para>The variable field shall consist of one Presentation-Data-Value.</para>
    <table frame="box" label="9-23" rules="all" xml:id="table_9-23">
    <caption>Presentation-Data-Value Item Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the Presentation-data-value field. It shall be encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Presentation-context-ID</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Presentation-context-ID values shall be odd integers between 1 and 255, encoded as an unsigned binary number. For a complete description of the use of this field see <xref linkend="sect_7.1.1.13" xrefstyle="select: label"/>.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>6-xxx</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Presentation-data-value</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Presentation-data-value field shall contain DICOM message information (command and/or data set) with a message control header. For a complete description of the use of this field see <xref linkend="chapter_E" xrefstyle="template: Annex %n"/>.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
</section>
<section label="9.3.6" status="3" xml:id="sect_9.3.6">
    <title>A-RELEASE-RQ PDU Structure</title>
  
  <para>An A-RELEASE-RQ PDU shall be made of a sequence of mandatory fields. <xref linkend="table_9-24" xrefstyle="select: label"/> shows the sequence of the fields.</para>
    <table frame="box" label="9-24" rules="all" xml:id="table_9-24">
    <caption>A-RELEASE-RQ PDU Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">PDU bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>05H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This PDU-length shall be the number of bytes from the first byte of the following field to the last byte of the Reserved field. In the case of this PDU, it shall have the fixed value of 00000004H encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>7-10</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00000000H but not tested to this value when received.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
<section label="9.3.7" status="3" xml:id="sect_9.3.7">
    <title>A-RELEASE-RP PDU Structure</title>
  
  <para>An A-RELEASE-RP PDU shall be made of a sequence of mandatory fields. <xref linkend="table_9-25" xrefstyle="select: label"/> shows the sequence of the fields.</para>
    <table frame="box" label="9-25" rules="all" xml:id="table_9-25">
    <caption>A-RELEASE-RP PDU Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">PDU bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>06H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This PDU-length shall be the number of bytes from the first byte of the following field to the last byte of the Reserved field. In the case of this PDU, it shall have the fixed value of 00000004H encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>7-10</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00000000H but not tested to this value when received.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
<section label="9.3.8" status="3" xml:id="sect_9.3.8">
    <title>A-ABORT PDU Structure</title>
  
  <para>An A-ABORT PDU shall be made of a sequence of mandatory fields. <xref linkend="table_9-26" xrefstyle="select: label"/> shows the sequence of the fields.</para>
  <para>The A-ABORT PDU shall support both the A-ABORT Service (user initiated) and the A-P-ABORT Service (provider initiated).</para>
    <table frame="box" label="9-26" rules="all" xml:id="table_9-26">
    <caption>A-ABORT PDU Fields</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">PDU bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>07H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-6</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>PDU-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This PDU-length shall be the number of bytes from the first byte of the following field to the last byte of the Reserved field. In the case of this PDU, it shall have the fixed value of 00000004H encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>7</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>9</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Source</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Source field shall contain an integer value encoded as an unsigned binary number. One of the following values shall be used:</para>
        <para>0 - DICOM UL service-user (initiated abort)</para>
        <para>1 - reserved</para>
        <para>2 - DICOM UL service-provider (initiated abort)</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>10</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reason/Diag.,</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This field shall contain an integer value encoded as an unsigned binary number. If the Source field has the value (2) "DICOM UL service-provider", it shall take one of the following:</para>
        <para>0 - reason-not-specified1 - unrecognized-PDU</para>
        <para>2 - unexpected-PDU</para>
        <para>3 - reserved</para>
        <para>4 - unrecognized-PDU parameter</para>
        <para>5 - unexpected-PDU parameter</para>
        <para>6 - invalid-PDU-parameter value</para>
        <para>If the Source field has the value (0) "DICOM UL service-user", this reason field shall not be significant. It shall be sent with a value 00H but not tested to this value when received.</para>
        <note>
    <para>The reserved fields are used to preserve symmetry with OSI ACSE/Presentation Services and Protocol.</para>
        </note>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
</section>
</chapter>
<chapter label="10" status="1" xml:id="chapter_10">
    <title>Conformance</title>
  
  <section label="10.1" status="2" xml:id="sect_10.1">
    <title>Conformance Requirements</title>
  
  <section label="10.1.1" status="3" xml:id="sect_10.1.1">
    <title>Retired</title>
      <para/>
  </section>
<section label="10.1.2" status="3" xml:id="sect_10.1.2">
    <title>TCP/IP Network Communication Support</title>
  
  <para>An implementation claiming conformance to
  <emphasis role="italic">DICOM TCP/IP Network Communication Support</emphasis>shall:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>Meet the DICOM Upper Layers Protocol requirements as defined in Section 9.</para></listitem>
<listitem>
  <para>Use registered Application Context Names, Abstract Syntax Names and Transfer Syntax Names as defined for OSI Object Identifiers (ISO 8824 and ISO 9834-1).</para>
  <note>
    <para><xref linkend="chapter_F" xrefstyle="template: Annex %n"/> defines the DICOM Upper Layer Protocol encoding for the Application Context Names, Abstract Syntax Names, and Transfer Syntax Names. ISO 8825 defined encoding is not used.</para>
  </note>
</listitem>
    <listitem><para>Use one of the published and approved RFCs defining the operation of TCP/IP over specific physical networks.</para>
    </listitem>
</orderedlist>
    </section>
</section>
<section label="10.2" status="2" xml:id="sect_10.2">
    <title>Conformance Statement</title>
  
  <para>An implementation claiming conformance to DICOM for communication support in a networked environment shall state DICOM V3.0 TCP/IP Network Communication Support with the list of physical networks and corresponding relevant implementation information. This implies that the conformance requirements defined in <xref linkend="sect_10.1.2" xrefstyle="select: label"/> are met.</para>
  
  </section>
</chapter>
<chapter label="A" status="1" xml:id="chapter_A">
    <title>Application Context Names (Informative)</title>
  
  <section label="A.1" status="2" xml:id="sect_A.1">
    <title>Application Context Definition</title>
  
  <para>An application context explicitly defines the set of application service elements, related options and any other information necessary for the interworking of Application Entities on an association. The usage of the application context is defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
  <para>Two Application Entities when establishing an association agree on an application context. The requestor of an association proposes an Application Context Name and the acceptor returns either the same or a different Application Context Name. The returned name specifies the application context to be used for this association. The offer of an alternate application context by the acceptor provides a mechanism for limited negotiation. If the requestor cannot operate in the acceptor's application context, it will issue an A-Abort request primitive. Such a negotiation will facilitate the introduction of future versions of the DICOM Application Entity.</para>
  </section>
<section label="A.2" status="2" xml:id="sect_A.2">
    <title>DICOM Application Context Name Encoding and Registration</title>
  
  <para>The Application Context Name structure is based on the OSI Object Identification (numeric form) as defined by ISO 8824. Application Context Names are registered values as defined by ISO 9834-1 to ensure global uniqueness. They are encoded as defined in <xref linkend="chapter_F" xrefstyle="template: Annex %n"/> when the TCP/IP network communication support is used as defined in Section 9.</para>
  <section label="A.2.1" status="3" xml:id="sect_A.2.1">
    <title>DICOM Registered Application Context Names</title>
  
  <para>The organization responsible for the definition and registration of DICOM Application Context Names is NEMA. NEMA guarantees uniqueness for all DICOM Application Context Names. A choice of DICOM registered Application Context Names related to the DICOM Application Entities, as well as the associated negotiation rules, are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
  </section>
</section>
</chapter>
<chapter label="B" status="1" xml:id="chapter_B">
    <title>Abstract and Transfer Syntaxes (Informative)</title>
  
  <section label="B.1" status="2" xml:id="sect_B.1">
    <title>Abstract Syntax Definition</title>
  
  <para>An Abstract Syntax is the specification of Application Layer data elements with associated semantics or Application Layer protocol control information by using notation rules that are independent of the encoding technique used to represent them.</para>
  <note>
    <para>In particular, it allows the communicating Application Entities to negotiate an agreed set of DICOM Data Elements (e.g., from a specific version of the Data Dictionary) and/or Information Object Class definitions.</para>
  </note>
  </section>
<section label="B.2" status="2" xml:id="sect_B.2">
    <title>Transfer Syntax Definition</title>
  
  <para>A Transfer Syntax is a set of encoding rules able to unambiguously represent the data elements defined by one or more Abstract Syntaxes. In particular, negotiation of Transfer Syntaxes allows the communicating Application Entities to agree on the encoding techniques they are able to support (e.g., byte ordering, compression, etc.).</para>
  </section>
<section label="B.3" status="2" xml:id="sect_B.3">
    <title>DICOM Abstract and Transfer Syntax Names Encoding and Registration</title>
  
  <para>The Abstract and Transfer Syntax Name structure is based on the OSI Object Identification (numeric form) as defined by ISO 8824. Abstract and Transfer Syntax Names are registered values as defined by ISO 9834-1 to ensure global uniqueness. Abstract and Transfer Syntax Names are encoded as defined in ISO 8825 (Object Identifiers of numeric form) when the OSI network communication support is used as defined in Section 8. They are encoded as defined in <xref linkend="chapter_F" xrefstyle="template: Annex %n"/> when the TCP/IP network communication support is used as defined in Section 9.</para>
  <section label="B.3.1" status="3" xml:id="sect_B.3.1">
    <title>DICOM Registered Abstract and Transfer Syntax Names</title>
  
  <para>The organization responsible for the definition and registration of DICOM Abstract and Transfer Syntax Names is NEMA. NEMA guarantees uniqueness for all DICOM Abstract and Transfer Syntax Names. A choice of DICOM registered Abstract and Transfer Syntax Names related to a specific version of the DICOM Application Entities, as well as the associated negotiation rules, are defined in <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/> for Abstract Syntaxes and <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> for Transfer Syntaxes.</para>
  </section>
<section label="B.3.2" status="3" xml:id="sect_B.3.2">
    <title>Privately Defined Abstract and Transfer Syntax Names</title>
  
  <para>Privately defined Abstract and Transfer Syntax Names may also be used, however, they will not be registered by NEMA. Organizations that define private Abstract and Transfer Syntax Names are responsible to obtain their proper registration defined for OSI Object Identifiers. National Standards Organizations representing a number of countries (e.g., UK, France, Germany, Japan, USA, etc.) to the International Standards Organization act as a registration authority as defined by ISO 9834-1.</para>
  <note>
    <para>For example, in the USA, ANSI assigns (for a fee) Organization Identifiers to any requesting organization. This identifier is made of a series of four numeric components; 1 (identifies ISO), 2 (identifies the ISO member bodies branch), 840 (identifies ANSI as the ISO member body representing the USA), and xxxxxx (identifies a specific organization and is issued by ANSI). Such an identifier may be used by the identified organization as a root to which it may add a suffix made of one or more numeric components. The identified organization accepts the responsibility to properly register these suffixes to ensure uniqueness.</para>
  </note>
  
  </section>
</section>
</chapter>
<chapter label="C" status="1" xml:id="chapter_C">
    <title>DICOM Addressing (Normative)</title>
  
  <section label="C.1" status="2" xml:id="sect_C.1">
    <title>DICOM Application Entity Titles</title>
  
  <para>A DICOM Application Entity Title uniquely identifies a service or application on a specific system in the network. Application Entity Titles are independent of network topology so a device may be physically moved while its corresponding Application Entity Title may remain the same. See <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> for the encoding of DICOM Application Entity Titles.</para>
  <note>
    <para>DICOM Application Entity Title was called Logical Address in the ACR-NEMA Standard.</para>
  </note>
  <para>DICOM Application Entity Titles are used in three instances of communication:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>to identify the Called/Calling Application Entities. They are used to establish an association and to ensure that the association is established with the expected application.</para></listitem>
<listitem><para>to identify the originator and intended destination of DICOM Retrieve Services (see <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>). They are conveyed in DICOM Commands with messages of the DIMSE C-MOVE and C-STORE Services exchanged over an established association.</para></listitem>
<listitem><para>to identify the location of a Retrieve Service SCP for one or more SOP Instances. They are conveyed in DICOM DataSets of various services.</para></listitem>
</orderedlist>
  </section>
<section label="C.2" status="2" xml:id="sect_C.2">
    <title>Naming and Addressing Usage Rules</title>
  
  <para>DICOM Application Entity Titles are used in the Called/Calling Application Entity Title fields of the Upper Layer Service, in the Move Destination and Move Originator Application Entity Title data elements in the DICOM Message Command Set, and in various Attributes of the DICOM Message Data Set.</para>
  <note>
    <orderedlist numeration="arabic">
      <listitem>
        <para>A single Application Entity Title can be associated with multiple network addresses assigned to a single system (e.g., multi-homed host).</para>
      </listitem>
      <listitem>
        <para>A single Application Entity Title can be associated with multiple TCP Ports using the same or different IP Addresses.</para>
      </listitem>
      <listitem>
        <para>A single network access point (IP Address and TCP Port) can support multiple Application Entity Titles.</para>
      </listitem>
    </orderedlist>
  </note>
  <para>A DICOM system on a network may support several application processes identified by different DICOM Application Entity Titles.</para>
  <para>Upon receiving an association request, the Called Application Entity Title shall be validated so an association can be rejected when the corresponding local application does not exist.</para>
  
  </section>
</chapter>
<chapter label="D" status="1" xml:id="chapter_D">
    <title>Use and Format of the A-ASSOCIATE User Information Parameter (Normative)</title>
  
  <para>This parameter allows for the negotiation of a number of features related to the communication of DICOM Application Entities at association establishment.</para>
  <section label="D.1" status="2" xml:id="sect_D.1">
    <title>Maximum Length Negotiation</title>
  
  <para>This negotiation allows the receivers to limit the size of the Presentation Data Values List parameters of each P-DATA Indication. The association-requestor shall specify in the user information parameter of the A-ASSOCIATE request primitive the maximum length in bytes for the PDV list parameter it is ready to receive in each P-DATA indication. The association-acceptor shall ensure in its fragmentation of the DICOM Messages that the list of PDVs included in each P-DATA request does not exceed this maximum length. Likewise, the association-acceptor can specify in the user information parameter of A-ASSOCIATE response primitive the maximum length in bytes for the PDV list parameter it is ready to receive in each P-DATA indication. The association-requestor shall ensure in its fragmentation of the DICOM Messages that the list of PDVs included in each P-DATA request does not exceed this maximum length. Different maximum lengths can be specified for each direction of data flow on
  the association.</para>
  <para>The Maximum Length Item support is required for all DICOM V3.0 conforming implementations.</para>
  <section label="D.1.1" status="3" xml:id="sect_D.1.1">
    <title>Maximum Length Sub-Item Structure (A-ASSOCIATE-RQ)</title>
  
  <para>The Maximum Length Sub-Item shall be made of a sequence of mandatory fixed length fields. Only one Maximum Length Sub-Item shall be present in the User Data information in the A-ASSOCIATE-RQ. <xref linkend="table_D.1-1" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
    <table frame="box" label="D.1-1" rules="all" xml:id="table_D.1-1">
    <caption>Maximum Length Sub-Item Fields (A-ASSOCIATE-RQ)</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>51H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the Maximum-length-received field. In the case of this Item, it shall have the fixed value of 00000004H encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5-8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Maximum-length-received</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This parameter allows the association-requestor to restrict the maximum length of the variable field of the P-DATA-TF PDUs sent by the acceptor on the association once established. This length value is indicated as a number of bytes encoded as an unsigned binary number. The value of (0) indicates that no maximum length is specified. This maximum length value shall never be exceeded by the PDU length values used in the PDU-length field of the P-DATA-TF PDUs received by the association-requestor. Otherwise, it shall be a protocol error.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
<section label="D.1.2" status="3" xml:id="sect_D.1.2">
    <title>Maximum Length Sub-Item Structure (A-ASSOCIATE-AC)</title>
  
  <para>The Maximum Length Sub-Item shall be made of a sequence of mandatory fixed length fields. Only one Maximum Length Sub-Item shall be present in the User Data information in the A-ASSOCIATE-AC. <xref linkend="table_D.1-2" xrefstyle="select: label"/> shows the sequence of the mandatory fields.</para>
    <table frame="box" label="D.1-2" rules="all" xml:id="table_D.1-2">
    <caption>Maximum Length Sub-Item Fields (A-ASSOCIATE-AC)</caption>
    <thead>
    <tr valign="top">
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Item bytes</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Field name</emphasis>
        </para>
      </th>
      <th align="center" colspan="1" rowspan="1">
        <para>
          <emphasis role="bold">Description of field</emphasis>
        </para>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>1</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-type</para>
      </td>
      <td align="center" colspan="1" rowspan="1">
        <para>51H</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>2</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Reserved</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>3-4</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Item-length</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the Maximum-length-received field. In the case of this Item, it shall have the fixed value of 00000004H encoded as an unsigned binary number.</para>
      </td>
    </tr>
    <tr valign="top">
      <td align="center" colspan="1" rowspan="1">
        <para>5-8</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>Maximum-length-received</para>
      </td>
      <td align="left" colspan="1" rowspan="1">
        <para>This parameter allows the association-acceptor to restrict the maximum length of the variable field of the P-DATA-TF PDUs sent by the requestor on the association once established. This length value is indicated as a number of bytes encoded as an unsigned binary number. The value of (0) indicates that no maximum length is specified. This maximum length value shall never be exceeded by the PDU length values used in the PDU-length field of the P-DATA-TF PDUs received by the association-acceptor. Otherwise, it shall be a protocol error.</para>
      </td>
    </tr>
  </tbody>
  </table>
  </section>
</section>
<section label="D.2" status="2" xml:id="sect_D.2">
    <title>Extended User Information Negotiation</title>
  
  <para>The user information parameter, of the A-ASSOCIATE primitive, can be extended to support the negotiation needs of DICOM Application Entities using the UL Service. This will result in the definition of specific user information sub-items. These sub-items shall be assigned unique item-type values registered in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
  <note>
    <orderedlist numeration="arabic">
      <listitem>
        <para>The values of the Sub-Items types in the User Information Field are assigned by this standard in the range of 51H through FFH. Sub-Item values are defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.8" targetptr="PS3.8" xrefstyle="select: labelnumber"/>.</para>
      </listitem>
      <listitem>
        <para>Succeeding editions of the Standard may define additional user information Sub-Items in a manner that does not affect the semantics of previously defined Sub-Items. Association acceptors compliant to an earlier edition of the Standard are required to ignore such unrecognized user information Sub-Items and not reject an Association because of their presence.</para>
      </listitem>
    </orderedlist>
  </note>
  
  </section>
</chapter>
<chapter label="E" status="1" xml:id="chapter_E">
    <title>Usage of the P-DATA Service By the DICOM Application Entity (Normative)</title>
  
  <para>This Annex specifies how DICOM messages are encapsulated into the P-DATA Service by the DICOM Application Entity.</para>
  <section label="E.1" status="2" xml:id="sect_E.1">
    <title>Encapsulation Rules</title>
  
  <para>DICOM Messages are encapsulated in P-DATA request primitives as the user data of Presentation Data Values (PDV). A DICOM Message is fragmented in Command Fragments and Data Fragments, each placed in a PDV. The same presentation context shall be used for every fragment of the same message (i.e., same Presentation Context ID for the user data of the PDVs containing the fragments of a same message). A PDV User Data parameter shall contain one and only one fragment (either Command or Data) preceded by a Message Control Header. This header will indicate:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>whether the fragment is of the Command or Data type</para></listitem>
<listitem><para>whether the fragment is or is not the last fragment of a Command/Data Stream of a DICOM Message</para></listitem>
</orderedlist>
  <para>A P-DATA request PDV List parameter shall contain one or more such PDV(s) (Message Control Header and a complete message fragment). Each PDV is wholly contained in a given P-DATA request primitive and does not span across several P-DATA request primitives. The PDVs contained in a P-DATA request primitive shall be related to the same DICOM message. Each fragment of a message shall consist of an even number of bytes.</para>
  <note>
    <orderedlist>
      <listitem>
        <para>No padding is necessary as <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> defines messages on an even byte boundary.</para>
      </listitem>
      <listitem><para>The above rules state that each fragment contained in a PDV shall consist of an even number of bytes (only). Therefore, encoding such as Group Number, Element Number, Value Length, etc. (as defined by the DICOM Application Entity, see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>) is not guaranteed to be within the same PDV.</para>
      </listitem>
    </orderedlist>
  </note>
    <para>The fragmentation of any message results in a series of PDVs that shall be sent, on a given association, by a corresponding series of P-DATA requests preserving the ordering of the fragments of any message. Furthermore, no fragments of any other message shall be sent until all fragments of the current message have been sent (i.e., interleaving of fragments from different messages is not permitted).</para>
  <para>It is strongly recommended that two consecutive PDVs in the same P-DATA Request primitive (therefore containing fragments of the same message using the same Presentation Context ID) do not contain two message Control Headers with the same type (Command or Data). These should have been combined in a single PDV by the sender. However, receivers must be able to receive and process such PDVs.</para>
  <note>
    <para>The above rules allow the sending in the same P-DATA request/indication of a Command fragment in the first PDV (with the last fragment flag set) followed by a Data Fragment in the second PDV (with the last fragment flag set or not). In particular, if the negotiated maximum length for the PDV List parameter of the P-DATA request is sufficient to hold a complete message, a single P-DATA request can be used to exchange an entire message.</para>
  </note>
  <para>Individual PDVs shall not be sent with Presentation-data-value fields consisting only of a single byte containing a Message Control Header, but without any other content in the fragment. These should have been combined with the preceding or succeeding PDVs by the sender.</para>
  <note>
    <para>Even though the above rules prohibit the sending of an "empty" PDV (such as with the last fragment flag set), it is recommended that receivers be able to receive and process such PDVs.</para>
  </note>
  </section>
<section label="E.2" status="2" xml:id="sect_E.2">
    <title>Message Control Header Encoding</title>
  
  <para>The Message Control Header is located in front of each DICOM message fragment (see <xref linkend="figure_E.2-1" xrefstyle="select: label"/>). Its presence is mandatory for all DICOM Abstract Syntaxes (see <xref linkend="chapter_B" xrefstyle="template: Annex %n"/> for further discussion on Abstract Syntaxes).</para>
  <para>The Message Control Header shall be made of one byte with the least significant bit (bit 0) taking one of the following values:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>If bit 0 is set to 1, the following fragment shall contain Message Command information.</para></listitem>
<listitem><para>If bit 0 is set to 0, the following fragment shall contain Message Data Set information.</para></listitem>
</orderedlist>
  <para>The next least significant bit (bit 1) shall be defined by the following rules:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>If bit 1 is set to 1, the following fragment shall contain the last fragment of a Message Data Set or of a Message Command.</para></listitem>
<listitem><para>If bit 1 is set to 0, the following fragment does not contain the last fragment of a Message Data Set or of a Message Command.</para></listitem>
</orderedlist>
  <para>Bits 2 through 7 are always set to 0 by the sender and never checked by the receiver.</para>
  <note>
    <para>The Message Control Header, in the Transport data flow, is the 1st byte in each PDV. The Transfer Syntax, negotiated at association establishment, defines the encoding for the Command/Data fragment.</para>
  </note>
  <para>
  <figure label="E.2-1" pgwide="1" xml:id="figure_E.2-1">
    <title>Presentation Data Value and the Message Control Header</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_E.2-1.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image021.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  
  </section>
</chapter>
<chapter label="F" status="1" xml:id="chapter_F">
  <title>DICOM UL Encoding Rules for Application Contexts, Abstract Syntaxes, Transfer Syntaxes (Normative)</title>

  <section label="F.1" status="2" xml:id="sect_F.1">
    <title>Encoding Rules</title>
  
  <para>Application Context Names, Abstract Syntax Names, Transfer Syntax Names, and Service Class UIDs are OSI Object Identifiers in a numeric form as defined by ISO 8824. The encoding of these names in the DICOM UL protocol is specified in this Annex.</para>
  <para>Each component of a Name or UID is encoded as an ISO 646:1990-Basic G0 Set Numeric String of bytes (characters 0-9). Leading 0's of each component are not significant and shall not be sent. Components shall not be padded. Components shall be separated by the character "." (2EH). "Null" components (no numeric value between two separators) shall not exist. Components with the value zero (0) shall be encoded as (nnn.0.ppp). No separator nor padding shall be present before the first digit of the first component or after the last digit of the last component.</para>
  <note>
    <orderedlist>
      <listitem>
        <para>The string "1.2.840.123456.0.21.4" encoded as an ISO 646:1990-Basic G0 Set character string conveys the following UID or Name with the following sequence of Object Identifier components: { (1), (2), (840), (123456), (0), (21), (4) }.</para>
      </listitem>
      <listitem><para>The above rules have been made to simplify performing the comparison of UIDs.</para></listitem>
    </orderedlist>
  </note>
  
  <para>DICOM Application Context Names (root plus suffix) shall not exceed 64 total characters (digits and separators between components).</para>
  <para>DICOM Abstract and Transfer Syntax Names (root plus suffix) shall not exceed 64 total characters (digits and separators between components).</para>
  
  </section>
</chapter>
<chapter label="G" status="1" xml:id="chapter_G">
    <title>Overview of the OSI Layer and Services Concepts (Informative)</title>
  
  <para>In a layered communication model, such as the OSI 7 layer reference model, each layer uses the service provided by the layer immediately below. The operation of a protocol layer on top of the lower layer service provides a new service to the layer above. The service is the "glue" between the layers of protocols.</para>
  <para>Services describe the resulting effects of the operation of a protocol without requiring knowledge of the detailed specifications of the protocol itself. A protocol specifies a horizontal dialogue between two computing systems across a network, while a service describes a vertical relationship within a system. See <xref linkend="figure_G-1" xrefstyle="select: label"/>.</para>
  <figure label="G-1" pgwide="1" xml:id="figure_G-1">
    <title>Relationship of Services to Protocol</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_G-1.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image028.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>

  <para>The OSI Upper Layer Service is described by a number of service primitives. They each model one of the functional interactions between the service-user in the layer above and the service-provider. In the context of this Standard, the service-user is called the DICOM Application Service Element. The service-provider is called the Upper Layer and performs the Upper Layer Protocol.</para>
  <note>
    <para>The OSI UL Services defined in this standard are provided by the DICOM Upper Layer Protocol for TCP/IP (Section 9).</para>
  </note>
  <para>These service primitives cross the layer boundary at what is called a Service Access Point (SAP). In most cases a direct relationship exists between service primitives in two Application Entities (AEs). This is reflected in the names of these primitives:</para>
  <orderedlist numeration="loweralpha">
<listitem><para>A request primitive in System A induces an indication primitive in System B.</para></listitem>
<listitem><para>If an indication primitive in System B requires a reply, a response primitive may be issued at the Service Access Point (SAP) in System B. This response primitive will induce a confirmation primitive in System A.</para></listitem>
</orderedlist>
  <para>The different types of service primitives and their relationship are shown in <xref linkend="figure_G-2" xrefstyle="select: label"/>. The dotted lines represent the exchange of Protocol Data Units that are triggered by request/response primitives or generated indication/confirmation primitives.</para>
  <para>
  <figure label="G-2" pgwide="1" xml:id="figure_G-2">
    <title>Service Description Conventions</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="figures/PS3.8_G-2.svg"/>
        <!--<imagedata fileref="part08_fromword_files/image030.png"/>-->
      </imageobject>
    </mediaobject>
  </figure>
</para>
  </chapter>
<chapter label="H" status="1" xml:id="chapter_H">
    <title>Index of Item and PDU Types (Informative)</title>
  <para>Retired.</para>
</chapter>
</book>
