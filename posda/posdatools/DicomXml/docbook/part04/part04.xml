<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!-- $Source: /home/bbennett/pass/archive/DicomXml/docbook/part04/part04.xml,v $ -->
<!-- $Date: 2014/05/08 19:52:41 $ -->
<!-- $Revision: 1.2 $ -->
<book xmlns="http://docbook.org/ns/docbook" xmlns:xhtml="http://www.w3.org/1999/xhtml" version="5.0" xml:id="PS3.4" label="PS3.4">
  <title>PS3.4</title>
  <subtitle>DICOM PS3.4 2013 - Service Class Specifications</subtitle>
  <info>
    <author>
      <orgname>DICOM Standards Committee</orgname>
    </author>
    <copyright>
      <year>2013</year>
      <holder>NEMA</holder>
    </copyright>
  </info>
  <chapter label="" status="1" xml:id="chapter_Notice">
    <title>Notice and Disclaimer</title>
    <para>The information in this publication was considered technically sound by the consensus of
      persons engaged in the development and approval of the document at the time it was developed.
      Consensus does not necessarily mean that there is unanimous agreement among every person
      participating in the development of this document.</para>
    <para>NEMA standards and guideline publications, of which the document contained herein is one,
      are developed through a voluntary consensus standards development process. This process brings
      together volunteers and/or seeks out the views of persons who have an interest in the topic
      covered by this publication. While NEMA administers the process and establishes rules to
      promote fairness in the development of consensus, it does not write the document and it does
      not independently test, evaluate, or verify the accuracy or completeness of any information or
      the soundness of any judgments contained in its standards and guideline publications.</para>
    <para>NEMA disclaims liability for any personal injury, property, or other damages of any nature
      whatsoever, whether special, indirect, consequential, or compensatory, directly or indirectly
      resulting from the publication, use of, application, or reliance on this document. NEMA
      disclaims and makes no guaranty or warranty, expressed or implied, as to the accuracy or
      completeness of any information published herein, and disclaims and makes no warranty that the
      information in this document will fulfill any of your particular purposes or needs. NEMA does
      not undertake to guarantee the performance of any individual manufacturer or seller's products
      or services by virtue of this standard or guide.</para>
    <para>In publishing and making this document available, NEMA is not undertaking to render
      professional or other services for or on behalf of any person or entity, nor is NEMA
      undertaking to perform any duty owed by any person or entity to someone else. Anyone using
      this document should rely on his or her own independent judgment or, as appropriate, seek the
      advice of a competent professional in determining the exercise of reasonable care in any given
      circumstances. Information and other standards on the topic covered by this publication may be
      available from other sources, which the user may wish to consult for additional views or
      information not covered by this publication.</para>
    <para>NEMA has no power, nor does it undertake to police or enforce compliance with the contents
      of this document. NEMA does not certify, test, or inspect products, designs, or installations
      for safety or health purposes. Any certification or other statement of compliance with any
      health or safety-related information in this document shall not be attributable to NEMA and is
      solely the responsibility of the certifier or maker of the statement.</para>
  </chapter>
  <chapter label="" status="1" xml:id="chapter_Foreword">
    <title>Foreword</title>
    <para>This DICOM Standard was developed according to the procedures of the DICOM Standards Committee.</para>
    <para>The DICOM Standard is structured as a multi-part document using the guidelines established in <xref linkend="biblio_ISODirectives3"/>.</para>
  </chapter>
  <chapter label="1" status="1" xml:id="chapter_1">
    <title>Scope and Field of Application</title>
    <para>This Part of the DICOM Standard specifies the set of Service Class Definitions that provide an abstract definition of real-world activities applicable to communication of digital medical information. For each Service Class Definition, this Part specifies:</para>
    <itemizedlist>
      <listitem>
        <para>the semantic description of the activities of the Service Class Definition</para>
      </listitem>
      <listitem>
        <para>the group of DIMSE Service operations and notifications applicable to the Service Class Description</para>
      </listitem>
      <listitem>
        <para>one or more functionally-related Service-Object Pair (SOP) Classes that are supported by the Service Class Definition and may be performed between peer DICOM Application Entities</para>
      </listitem>
      <listitem>
        <para>the relationship of each Service-Object Pair (SOP) Classes to applicable Information Object Definitions specified in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
      </listitem>
    </itemizedlist>
    <para>For each Service Class Definition, this Part does not specify:</para>
    <itemizedlist>
      <listitem>
        <para>any necessary information for the semantic description of the IOD</para>
      </listitem>
      <listitem>
        <para>relationships to associated real-world objects relevant to the IOD</para>
      </listitem>
      <listitem>
        <para>Attributes that describe the characteristics of the IOD</para>
      </listitem>
    </itemizedlist>
    <para>This Part is related to other parts of the DICOM Standard in that:</para>
    <itemizedlist>
      <listitem>
        <para><olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="template: %n Information Object Definitions"/> specifies the set of Information Object Definitions to which the services defined in this Part may be applied</para>
      </listitem>
      <listitem>
        <para><olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="template: %n Data Structure and Semantics"/> defines the data encoding used in the DIMSE Protocol when applied to IODs defined in this Part</para>
      </listitem>
      <listitem>
        <para><olink targetdoc="PS3.6" targetptr="PS3.6" xrefstyle="template: %n Data Dictionary"/> contains an index by Tag of all IOD Attributes defined in this Part. This index includes the Value Representation and Value Multiplicity for each Attribute</para>
      </listitem>
      <listitem>
        <para><olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="template: %n Message Exchange Protocol"/> defines the DIMSE Services and Protocol that may be applied to IODs defined in this Part.</para>
      </listitem>
    </itemizedlist>
  </chapter>
  <chapter label="2" status="1" xml:id="chapter_2">
    <title>Normative References</title>
    <para>The following standards contain provisions which, through reference in this text, constitute provisions of this Standard. At the time of publication, the editions indicated were valid. All standards are subject to revision, and parties to agreements based on this Standard are encouraged to investigate the possibilities of applying the most recent editions of the standards indicated below.</para>
    <para>ISO/IEC Directives, 1989 Part 3 - Drafting and Presentation of International Standards.</para>
    <para>ISO 7498-1 Information Processing Systems-Open Systems Interconnection- Basic Reference Model</para>
    <para>ISO/TR 8509 Information Processing Systems-Open Systems Interconnection- Service Conventions</para>
  </chapter>
  <chapter label="3" status="1" xml:id="chapter_3">
    <title>Definitions</title>
    <para>For the purposes of this Standard the following definitions apply.</para>
    <section label="3.1" status="2" xml:id="sect_3.1">
      <title>Reference Model Definitions</title>
      <para>This Part of the Standard makes use of the following terms defined in ISO 7498-1:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Application Entity</para>
        </listitem>
        <listitem>
          <para>Service or Layer Service</para>
        </listitem>
        <listitem>
          <para>Application Entity Title</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.2" status="2" xml:id="sect_3.2">
      <title>Service Conventions Definitions</title>
      <para>This Part of the Standard makes use of the following terms defined in ISO/TR 8509:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Primitive</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.3" status="2" xml:id="sect_3.3">
      <title>DICOM Introduction and Overview Definitions</title>
      <para>This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.1" targetptr="PS3.1" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Attribute</para>
        </listitem>
        <listitem>
          <para>Command</para>
        </listitem>
        <listitem>
          <para>Data Dictionary</para>
        </listitem>
        <listitem>
          <para>Information Object</para>
        </listitem>
        <listitem>
          <para>Message</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.4" status="2" xml:id="sect_3.4">
      <title>DICOM Upper Layer Service Definitions</title>
      <para>This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.8" targetptr="PS3.8" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Unique Identifier (UID)</para>
        </listitem>
        <listitem>
          <para>DICOM Upper Layer Service</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.5" status="2" xml:id="sect_3.5">
      <title>DICOM Message Exchange Definitions</title>
      <para>This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>DICOM Message Service Element (DIMSE)</para>
        </listitem>
        <listitem>
          <para>DIMSE-N Services</para>
        </listitem>
        <listitem>
          <para>DIMSE-C Services</para>
        </listitem>
        <listitem>
          <para>DIMSE Service Group (DSG)</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.6" status="2" xml:id="sect_3.6">
      <title>DICOM Information Object Definitions</title>
      <para>This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Attribute Tag</para>
        </listitem>
        <listitem>
          <para>Composite IOD</para>
        </listitem>
        <listitem>
          <para>DICOM Application Model</para>
        </listitem>
        <listitem>
          <para>DICOM Information Model</para>
        </listitem>
        <listitem>
          <para>Information Object Definition</para>
        </listitem>
        <listitem>
          <para>Module</para>
        </listitem>
        <listitem>
          <para>Normalized IOD</para>
        </listitem>
        <listitem>
          <para>Functional Group</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.7" status="2" xml:id="sect_3.7">
      <title>DICOM Conformance</title>
      <para>This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Standard SOP Class</para>
        </listitem>
        <listitem>
          <para>Specialized SOP Class</para>
        </listitem>
        <listitem>
          <para>Conformance Statement</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.8" status="2" xml:id="sect_3.8">
      <title>DICOM Data Structures and Encoding</title>
      <para>This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Data Element</para>
        </listitem>
        <listitem>
          <para>Data Set</para>
        </listitem>
      </orderedlist>
    </section>
    <section label="3.9" status="2" xml:id="sect_3.9">
      <title>DICOM Service Class Definitions</title>
      <para>The following definitions are commonly used in this Part of the DICOM Standard:</para>
      <para><emphasis role="bold">Classic Image Storage SOP Class</emphasis>: an Image Storage SOP Class that is defined by an IOD that stores a single frame and defines the majority of the Attributes in the top-level Data Set.</para>
      <para><emphasis role="bold">Combined Print Image</emphasis>: a pixel matrix created by superimposing an image and an overlay, the size of which is defined by the smallest rectangle enclosing the superimposed image and overlay.</para>
      <para><emphasis role="bold">DICOM Information Model</emphasis>: an Entity-Relationship diagram that is used to model the relationships between the Information Object Definitions representing classes of Real-World Objects defined by the DICOM Application Model.</para>
      <para><emphasis role="bold">DICOM Application Model</emphasis>: an Entity-Relationship diagram used to model the relationships between Real-World Objects that are within the area of interest of the DICOM Standard.</para>
      <para><emphasis role="bold">Enhanced Image Storage SOP Class</emphasis>: an Image Storage SOP Class that is defined by an IOD that stores multiple frames and defines the majority of the Attributes in Functional Group Sequences.</para>
      <para><emphasis role="bold">Legacy Converted Enhanced Image Storage SOP Class</emphasis>: a modality-specific Enhanced Image Storage SOP Class that is defined by an IOD that defines only generic Functional Group Sequences, which does not require information that is not present in Classic Image Storage SOP Class Instances, and is intended for storage of converted Classic Image Storage SOP Class Instances when there is insufficient information to use a True Enhanced Image Storage SOP Class.</para>
      <para><emphasis role="bold">Meta Service-Object Pair (SOP) Class</emphasis>: a pre-defined set of SOP Classes that may be associated under a single SOP for the purpose of negotiating the use of the set with a single item.</para>
      <para><emphasis role="bold">Performed Procedure Step SOP Class</emphasis>: any SOP Class that encodes the details about the performance of a procedure step.
  
</para>
      <para><emphasis role="bold">Performed Procedure Step SOP Instance</emphasis>: an instance of a Performed Procedure Step SOP Class. Note that all UPS instances are instances of the UPS Push SOP Class, which is capable of encoding details about the performance of a procedure step (in addition to details about the scheduled procedure step) and thus qualify as an instance of a Performed Procedure Step SOP Class.</para>
      <para><emphasis role="bold">Preformatted Grayscale Image</emphasis>: an image where all annotation, graphics, and grayscale transformations (up to and including the VOI LUT) expected in the printed image have been burnt in or applied before being sent to the SCP. It is a displayable image where the polarity of the intended display is specified by Photometric Interpretation (0028,0004).</para>
      <para><emphasis role="bold">Preformatted Color Image</emphasis>: an image where all annotation, graphics, and color transformations expected in the printed image have been burnt in or applied before being sent to the SCP.</para>
      <para><emphasis role="bold">Real-World Activity</emphasis>: that which exists in the real world that pertains to specific area of information processing within the area of interest of the DICOM Standard. Such a Real-World Activity may be represented by one or more computer information metaphors called SOP Classes.</para>
      <para><emphasis role="bold">Real-World Object</emphasis>: that which exists in the real world upon which operations may be performed that are within the area of interest of the DICOM Standard. Such a Real-World Object may be represented through a computer information metaphor called a SOP Instance.</para>
      <para><emphasis role="bold">Related General SOP Class</emphasis>: a SOP Class that is related to another SOP Class as being more generalized in terms of behavior defined in the standard, and that may be used to identically encode an instance with the same Attributes and values, other than the SOP Class UID. In particular, this may be the SOP Class from which a Specialized SOP Class (see <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>) is derived.</para>
      <para><emphasis role="bold">Service Class User</emphasis>: the role played by a DICOM Application Entity (DIMSE-Service-User) that invokes operations and performs notifications on a specific Association.</para>
      <para><emphasis role="bold">Service Class Provider</emphasis>: the role played by a DICOM Application Entity (DIMSE-Service-User) that performs operations and invokes notifications on a specific Association.</para>
      <para><emphasis role="bold">Service Class</emphasis>: a collection of SOP Classes and/or Meta SOP Classes that are related in that they are described together to accomplish a single application.</para>
      <para><emphasis role="bold">Service-Object Pair (SOP) Class</emphasis>: the union of a specific set of DIMSE Services and one related Information Object Definition (as specified by a Service Class Definition) that completely defines a precise context for communication of operations on such an object or notifications about its state.</para>
      <para><emphasis role="bold">Service-Object Pair (SOP) Instance</emphasis>: a concrete occurrence of an Information Object that is managed by a DICOM Application Entity and may be operated upon in a communication context defined by a specific set of DIMSE Services (on a network or interchange media). A SOP Instance is persistent beyond the context of its communication.</para>
      <para><emphasis role="bold">True Enhanced Image Storage SOP Class</emphasis>: a modality-specific Enhanced Image Storage SOP Class that is defined by an IOD that defines modality-specific Functional Group Sequences, Attributes and sets of values, and is intended for creation by acquisition devices.</para>
    </section>
    <section label="3.10" status="2" xml:id="sect_3.10">
      <title>Device Independent Pixel Values</title>
      <para>This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>P-Value</para>
        </listitem>
        <listitem>
          <para>PCS-Value</para>
        </listitem>
      </orderedlist>
    </section>
  </chapter>
  <chapter label="4" status="1" xml:id="chapter_4">
    <title>Symbols and Abbreviations</title>
    <para>The following symbols and abbreviations are used in this Part of the DICOM Standard.</para>
    <para><emphasis role="bold">ACR</emphasis> American College of Radiology</para>
    <para><emphasis role="bold">ASCII</emphasis> American Standard Code for Information Interchange</para>
    <para><emphasis role="bold">AE</emphasis> Application Entity</para>
    <para><emphasis role="bold">ANSI</emphasis> American National Standards Institute</para>
    <para><emphasis role="bold">CDS</emphasis> Clinical Decision Support</para>
    <para><emphasis role="bold">CEN TC251</emphasis> Comité Européen de Normalisation -Technical Committee 251 - Medical Informatics</para>
    <para><emphasis role="bold">Chest CAD</emphasis> Computer-Aided Detection and/or Computer-Aided Diagnosis for chest radiography</para>
    <para><emphasis role="bold">DICOM</emphasis> Digital Imaging and Communications in Medicine</para>
    <para><emphasis role="bold">DIMSE</emphasis> DICOM Message Service Element</para>
    <para><emphasis role="bold">DIMSE-C</emphasis> DICOM Message Service Element-Composite</para>
    <para><emphasis role="bold">DIMSE-N</emphasis> DICOM Message Service Element-Normalized</para>
    <para><emphasis role="bold">HL7</emphasis> Health Level 7</para>
    <para><emphasis role="bold">IE</emphasis> Information Entity</para>
    <para><emphasis role="bold">IEEE</emphasis> Institute of Electrical and Electronics Engineers</para>
    <para><emphasis role="bold">IOD</emphasis> Information Object Definition</para>
    <para><emphasis role="bold">IS</emphasis> Information System</para>
    <para><emphasis role="bold">ISO</emphasis> International Standards Organization</para>
    <para><emphasis role="bold">JIRA</emphasis> Japan Medical Imaging and Radiological Systems Industries Association</para>
    <para><emphasis role="bold">JPIP</emphasis> JPEG 2000 Interactive Protocol</para>
    <para><emphasis role="bold">MAR</emphasis> Medication Administration Record</para>
    <para><emphasis role="bold">NEMA</emphasis> National Electrical Manufacturers Association</para>
    <para><emphasis role="bold">OSI</emphasis> Open Systems Interconnection</para>
    <para><emphasis role="bold">SCP</emphasis> Service Class Provider</para>
    <para><emphasis role="bold">SCU</emphasis> Service Class User</para>
    <para><emphasis role="bold">SOP</emphasis> Service-Object Pair</para>
    <para><emphasis role="bold">UID</emphasis> Unique Identifier</para>
  </chapter>
  <chapter label="5" status="1" xml:id="chapter_5">
    <title>Conventions</title>
    <section label="5.1" status="2" xml:id="sect_5.1">
      <title>Entity-Relationship Model</title>
      <section label="5.1.1" status="3" xml:id="sect_5.1.1">
        <title>Entity</title>
        <para>An entity is used in an Entity-Relationship (E-R) model to represent a Real-World Object, class of Real-World Objects, or DICOM data representation (such as IOD or Module). An entity is depicted as a box within this Part of the DICOM Standard as shown in Figure 5-1.</para>
        <para>
          <figure label="5-1" pgwide="1" xml:id="figure_5-1">
            <title>Entity Convention</title>
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/PS3.4_5-1.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image002.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
      </section>
      <section label="5.1.2" status="3" xml:id="sect_5.1.2">
        <title>Relationship</title>
        <para>A relationship, which defines how entities are related, is depicted as a diamond within this Standard as shown in Figure 5-2.</para>
        <para>
          <figure label="5-2" pgwide="1" xml:id="figure_5-2">
            <title>Relationship Convention</title>
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/PS3.4_5-2.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image004.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
        <para>The relationship is read from source to destination entity as indicated by the arrows. The a and b show the source and destination cardinality of the relationship respectively. The following cardinalities are permitted:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>(a = 1, b = 1) -one source entity is related to one destination entity</para>
          </listitem>
          <listitem>
            <para>(a = 1, b = 0-n) -one source entity is related to zero or more destination entities</para>
          </listitem>
          <listitem>
            <para>(a = 1, b = 1-n) -one source entity is related to one or more destination entities</para>
          </listitem>
          <listitem>
            <para>(a = 1-n, b = 1) -one or more source entities are related to one destination entity</para>
          </listitem>
          <listitem>
            <para>(a = 1-n, b = 0-n) -one or more source entities are related to zero or more destination entities</para>
          </listitem>
          <listitem>
            <para>(a = 1-n, b = 1-n) -one or more source entities are related to one or more destination entities</para>
          </listitem>
        </orderedlist>
        <para>In a relationship where (a = 1-n, b = 1-n) the values of the source and destination cardinalities may be different. The value "n" simply denotes one or more.</para>
        <note>
          <para>DICOM has added the use of arrows to the E-R diagramming conventions often used in other literature. This has been done to avoid the possibility of inferring an incorrect relationship that can result from reading a relationship in the reverse order of that intended. For example, a relationship "Cat Catches Mouse" could be read "Mouse Catches Cat" if the arrows were not present.</para>
        </note>
        <para>A relationship may be bi-directional (i.e., the relationship is true in both directions). In such a case, the convention used is arrows pointing toward both the source and the destination entities.</para>
      </section>
    </section>
    <section label="5.2" status="2" xml:id="sect_5.2">
      <title>Sequences</title>
      <para>Certain tables in this Part of the DICOM Standard denote a Sequence of Items by using the symbol: '&gt;.'</para>
      <para>In <xref linkend="chapter_A" xrefstyle="template: Annex %n"/>, '&gt;' is used to identify a 'Sequence of Modules.' Nested Sequences of Modules are identified by '&gt;&gt;'. In <xref linkend="chapter_B" xrefstyle="template: Annex %n"/> and <xref linkend="chapter_C" xrefstyle="template: Annex %n"/>, '&gt;' is used to identify a 'Sequence of Attributes'. See <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> for the complete specification of how Sequences of Items shall be encoded.</para>
      <note>
        <para>Information Object Definitions (IODs) that include the Sequence of Module construct are often called folders. The use of 'Sequences of Attributes' is not limited to 'Folders.'</para>
      </note>
    </section>
    <section label="5.3" status="2" xml:id="sect_5.3">
      <title>Response Status Values</title>
      <para>Certain tables in this Part of the DICOM Standard denote an implementation specific response status code by using the symbol: 'xx' as part of the code.</para>
    </section>
    <section label="5.4" status="2" xml:id="sect_5.4">
      <title>Usage Specification</title>
      <para>The building blocks of SOP Classes are Modules and DIMSE Services. The DIMSE Services associated with a SOP Class may be Mandatory (M) or Optional (U). The usage may be different for the SCU and SCP. The usage is specified as a pair of letters: the former indicating the SCU usage, the latter indicating the SCP usage.</para>
      <para>The meaning and behavior of the usage specification for DIMSE Services are:</para>
      <variablelist>
        <varlistentry>
          <term>M/M</term>
          <listitem>
            <para>The SCU shall support the DIMSE Service but is not required to use it on an Association. The SCP shall support the DIMSE Service.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>U/M</term>
          <listitem>
            <para>The SCU may support and use the DIMSE Service. The SCP shall support the DIMSE Service.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>U/U</term>
          <listitem>
            <para>The SCU may support and use the DIMSE Service. The SCP may support the DIMSE Service. If the SCP does not support the DIMSE Service used by the SCU, it shall return a Failure status.</para>
          </listitem>
        </varlistentry>
      </variablelist>
      <para>Modules and their usage in Composite IODs are defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. Normalized IODs are also constructed from Modules but usage is specified on an Attribute basis in this Part of the DICOM Standard. The following usage specification applies to all Attributes of Normalized IODs unless superseded by a usage specification in a particular SOP Class Specification.</para>
      <para>The meaning and behavior of the usage specification for Attributes of Normalized IODs are as follows:</para>
      <variablelist>
        <varlistentry>
          <term>1/1</term>
          <listitem>
            <para>The SCU shall provide a value for the Attribute. If the SCU does not supply a value, the SCP shall return a Failure status ("Missing Attribute," code 0120H). The SCP shall support the Attribute. The SCP shall not support null values (Attribute provided with a zero length and no value) for the Attribute.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>3/1</term>
          <listitem>
            <para>The SCU may retrieve or provide a value for the Attribute. The SCP shall support the Attribute. The SCP shall not support null values (Attribute provided with a zero length and no value) for the Attribute.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>-/1</term>
          <listitem>
            <para>The SCU's usage of the Attribute is undefined. The SCP shall support the Attribute. The SCP shall not support null values (Attribute provided with a zero length and no value) for the Attribute.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>2/2</term>
          <listitem>
            <para>The SCU shall retrieve or provide a value for the Attribute. The SCU shall always provide the Attribute but a null value shall be permitted (Attribute provided with a zero length and no value). The SCP shall support the Attribute and permit null values (Attribute provided with a zero length and no value) for the Attribute.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>3/2</term>
          <listitem>
            <para>The SCU may retrieve or provide a value for the Attribute. The SCP shall support the Attribute and permit null values (Attribute provided with a zero length and no value) for the Attribute.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>-/2</term>
          <listitem>
            <para>The SCU's usage of the Attribute is undefined. The SCP shall support the Attribute and permit null values (Attribute provided with a zero length and no value) for the Attribute.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>3/3</term>
          <listitem>
            <para>The SCU may retrieve or provide a value for the Attribute. The SCP may support the Attribute. If the SCP does not support the Attribute and it is requested by the SCU, the SCP shall return either a Failure status ("Invalid Attribute Value", code 0106H) or a Warning status ("Attribute Value out of Range", code 0116H). If the SCU provides the Attribute and the SCP does not support the Attribute and returned a failure or warning, the Attribute shall be ignored.</para>
          </listitem>
        </varlistentry>
      </variablelist>
      <para>If the SCP usage type designation is modified by a "C" (e.g., 3/1C) the specification stated above shall be modified to include the requirement that the SCP shall support the Attribute if the specified condition is met.</para>
      <para>For all N-CREATE, N-SET, N-GET, N-DELETE, N-ACTION and N-EVENT-REPORT operations, the SOP Class is conveyed in the request primitive in Affected SOP Class UID (0000,0002). The SOP Class UID (0008,0016) Attribute shall not be present in the Data Set.</para>
      <para>For N-CREATE operations and N-EVENT-REPORT notifications, the SOP Instance is conveyed in Affected SOP Instance UID (0000,1000). The SOP Instance UID (0008,0018) Attribute shall not be present in the Data Set.</para>
      <note>
        <para>In some Service Classes, the SOP Class definition may override the general provision in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> that allows the SOP Instance UID to be specified or omitted in the N-CREATE request primitive, and require that the SCU be responsible for specifying the SOP Instance UID.</para>
      </note>
      <para>For N-SET, N-GET, N-ACTION and N-DELETE operations, the SOP Instance is conveyed in Requested SOP Instance UID (0000,1001). The SOP Instance UID (0008,0018) Attribute shall not be present in the data set.</para>
    </section>
  </chapter>
  <chapter label="6" status="1" xml:id="chapter_6">
    <title>DICOM Information Model</title>
    <para>The DICOM Information Model defines the structure and organization of the information related to the communication of medical images. Figure 6-1 shows the relationships between the major structures of the DICOM Information Model.</para>
    <section label="6.1" status="2" xml:id="sect_6.1">
      <title>Information Object Definition</title>
      <para>An Information Object Definition (IOD) is an object-oriented abstract data model used to specify information about Real-World Objects. An IOD provides communicating Application Entities with a common view of the information to be exchanged.</para>
      <para>
        <figure label="6-1" pgwide="1" xml:id="figure_6-1">
          <title>Major Structures of DICOM Information Model</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="figures/PS3.4_6-1.svg"/>
              <!--<imagedata fileref="part04_fromword_files/image006.png"/>-->
            </imageobject>
          </mediaobject>
        </figure>
      </para>
      <para>An IOD does not represent a specific instance of a Real-World Object, but rather a class of Real-World Objects that share the same properties. An IOD used to represent a single class of Real-World Objects is called a Normalized Information Object. An IOD that includes information about related Real-World Objects is called a Composite Information Object.</para>
      <section label="6.1.1" status="3" xml:id="sect_6.1.1">
        <title>Composite IOD</title>
        <para>A Composite IOD is an Information Object Definition that represents parts of several entities in the DICOM Model of the Real-World. (see <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.) Such an IOD includes Attributes that are not inherent in the Real-World Object that the IOD represents but rather are inherent in related Real-World Objects.</para>
        <para>These related Real-World Objects provide a complete context for the exchanged information. When an instance of a Composite IOD is communicated, this entire context is exchanged between Application Entities. Relationships between Composite IOD Instances shall be conveyed in this contextual information.</para>
        <note>
          <orderedlist>
            <listitem>
              <para>Actual communication of IOD Instances is via SOP Instances.</para>
            </listitem>
            <listitem>
              <para>Whenever Composite SOP Instances are in fact related, some of the contextual information is redundant (i.e., the same information about the same Real-World Objects is contained in multiple SOP Instances).</para>
            </listitem>
          </orderedlist>
        </note>
        <para>The Composite IODs are specified in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="6.1.2" status="3" xml:id="sect_6.1.2">
        <title>Normalized IOD</title>
        <para>A Normalized IOD is an Information Object Definition that generally represents a single entity in the DICOM Model of the Real-World.</para>
        <para>When an instance of a Normalized IOD is communicated, the context for that instance is not actually exchanged. Instead, the context is provided through the use of pointers to related Normalized IOD Instances.</para>
        <para>The Normalized IODs are specified in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
      </section>
    </section>
    <section label="6.2" status="2" xml:id="sect_6.2">
      <title>Attributes</title>
      <para>The Attributes of an IOD describe the properties of a Real-World Object Instance. Related Attributes are grouped into Modules that represents a higher level of semantics documented in the Module Specifications found in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
      <para>Attributes are encoded as Data Elements using the rules, the Value Representation and the Value Multiplicity concepts specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>. For specific Data Elements, the Value Representation and Value Multiplicity of Data Elements are specified in the Data Dictionary in <olink targetdoc="PS3.6" targetptr="PS3.6" xrefstyle="select: labelnumber"/>.</para>
    </section>
    <section label="6.3" status="2" xml:id="sect_6.3">
      <title>On-Line Communication and Media Storage Services</title>
      <para>For on-line communication the DIMSE Services allow a DICOM Application Entity to invoke an operation or notification across a network or a point-to-point interface. DIMSE Services are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      <para>For media storage interchange, Media Storage Services allow a DICOM Application Entity to invoke media storage related operations.</para>
      <para>Media Storage Services are discussed in <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/>.</para>
      <section label="6.3.1" status="3" xml:id="sect_6.3.1">
        <title>DIMSE-C Services</title>
        <para>DIMSE-C Services are services applicable only to a Composite IOD. DIMSE-C provides only operation services.</para>
      </section>
      <section label="6.3.2" status="3" xml:id="sect_6.3.2">
        <title>DIMSE-N Services</title>
        <para>DIMSE-N Services are services applicable only to a Normalized IOD. DIMSE-N provides both operation and notification services.</para>
      </section>
    </section>
    <section label="6.4" status="2" xml:id="sect_6.4">
      <title>DIMSE Service Group</title>
      <para>A DIMSE Service Group specifies one or more operations/notifications defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> that are applicable to an IOD.</para>
      <para>DIMSE Service Groups are defined in this Part of the DICOM Standard, in the specification of a Service-Object Pair Class.</para>
    </section>
    <section label="6.5" status="2" xml:id="sect_6.5">
      <title>Service-Object Pair (SOP) Class</title>
      <para>A Service-Object Pair (SOP) Class is defined by the union of an IOD and a DIMSE Service Group. The SOP Class definition contains the rules and semantics that may restrict the use of the services in the DIMSE Service Group or the Attributes of the IOD.</para>
      <para>The selection of SOP Classes is used by Application Entities to establish an agreed set of capabilities to support their interaction. This negotiation is performed at Association establishment time as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. An extended negotiation allows Application Entities to further agree on specific options within a SOP Class.</para>
      <note>
        <para>The SOP Class as defined in the DICOM Information Model is equivalent in ISO/OSI terminology to the Managed Object Class. Readers familiar with object oriented terminology will recognize the SOP Class operations (and notifications) as comprising the methods of an object class.</para>
      </note>
      <section label="6.5.1" status="3" xml:id="sect_6.5.1">
        <title>Normalized and Composite SOP Classes</title>
        <para>DICOM defines two types of SOP Classes, Normalized and Composite. Normalized SOP Classes are defined as the union of a Normalized IOD and a set of DIMSE-N Services. Composite SOP Classes are defined as the union of a Composite IOD and a set of DIMSE-C Services.</para>
        <note>
          <para>SOP Class Specifications play a central role for defining DICOM conformance requirements. It allows DICOM Application Entities to select a well-defined application level subset of this Standard to which they may claim conformance. See <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        </note>
      </section>
    </section>
    <section label="6.6" status="2" xml:id="sect_6.6">
      <title>Association Negotiation</title>
      <para>Association establishment is the first phase of communication between peer DICOM compliant Application Entities. The Application Entities shall use Association establishment to negotiate which SOP Classes can be exchanged and how this data will be encoded.</para>
      <para>Association Negotiation is defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
    </section>
    <section label="6.7" status="2" xml:id="sect_6.7">
      <title>Service Class Specification</title>
      <para>A Service Class Specification defines a group of one or more SOP Classes related to a specific function that is to be accomplished by communicating Application Entities. A Service Class Specification also defines rules that allow implementations to state some pre-defined level of conformance to one or more SOP Classes. Applications may conform to SOP Classes as either a Service Class User (SCU) or Service Class Provider (SCP).</para>
      <para>Service Class Specifications are defined in this Part of the DICOM Standard.</para>
      <note>
        <para>Such interaction between peer Application Entities work on a 'client/server model.' The SCU acts as the 'client,' while the SCP acts as the 'server'. The SCU/SCP roles are determined during Association establishment.</para>
      </note>
    </section>
  </chapter>
  <chapter label="7" status="1" xml:id="chapter_7">
    <title>DICOM Model of the Real World</title>
    <para>The DICOM view of the Real-World that identifies the relevant Real-World Objects and their relationships within the scope of the DICOM Standard is described in the DICOM Model of the Real-World Section of <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
    <para>This section also describes the DICOM Information Model that identifies the various IODs specified by the DICOM Standard and their relationship.</para>
  </chapter>
  <chapter label="A" status="1" xml:id="chapter_A">
    <title>Verification Service Class (Normative)</title>
    <section label="A.1" status="2" xml:id="sect_A.1">
      <title>Overview</title>
      <section label="A.1.1" status="3" xml:id="sect_A.1.1">
        <title>Scope</title>
        <para>The Verification Service Class defines a service that verifies application level communication between peer DICOM AEs. This verification is accomplished on an established Association using the C-ECHO DIMSE-C service.</para>
      </section>
    </section>
    <section label="A.2" status="2" xml:id="sect_A.2">
      <title>SCU/SCP Behavior</title>
      <para>A DICOM AE, supporting the Verification SOP Class SCU role, requests verification of communication to a remote DICOM AE. This request is performed using the C-ECHO request primitive. The remote DICOM AE, supporting the Verification SOP Class SCP role, issues an C-ECHO response primitive. Upon receipt of the C-ECHO confirmation, the SCU determines that verification is complete. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for the specification of the C-ECHO primitives.</para>
    </section>
    <section label="A.3" status="2" xml:id="sect_A.3">
      <title>DIMSE-C Service Group</title>
      <para>The C-ECHO DIMSE-C service shall be the mechanism used to verify communications between peer DICOM AEs. The C-ECHO service and protocol parameters shall be required as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
    </section>
    <section label="A.4" status="2" xml:id="sect_A.4">
      <title>Verification SOP Class</title>
      <para>The Verification SOP Class consists of the C-ECHO DIMSE-C service. No associated Information Object Definition is defined. The SOP Class UID shall be "1.2.840.10008.1.1".</para>
      <para>No Specialized SOP Classes and/or Meta SOP Classes shall be defined for the Verification SOP Class.</para>
    </section>
    <section label="A.5" status="2" xml:id="sect_A.5">
      <title>Association Negotiation</title>
      <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. The following negotiation rules apply to DICOM AEs that support the Verification SOP Class</para>
      <itemizedlist>
        <listitem>
          <para>The Association-requester (verification SCU role) in the A-ASSOCIATE request shall convey an Abstract Syntax, in a Presentation Context, for the Verification SOP Class. The Abstract Syntax Name shall be equivalent to the Verification SOP Class UID.</para>
        </listitem>
        <listitem>
          <para>The Association-acceptor (verification SCP role) in the A-ASSOCIATE response shall accept the Abstract Syntax, in a Presentation Context, for the supported Verification SOP Class.</para>
        </listitem>
      </itemizedlist>
      <para>No Application Association Information specific to the Verification SOP Class shall be used.</para>
    </section>
    <section label="A.6" status="2" xml:id="sect_A.6">
      <title>Conformance</title>
      <section label="A.6.1" status="3" xml:id="sect_A.6.1">
        <title>Conformance Supporting the SCU Role</title>
        <para>Implementations that conform to the Verification SOP Class SCU role shall meet the:</para>
        <itemizedlist>
          <listitem>
            <para>C-ECHO service requirements as defined by the DIMSE Service Group, <xref linkend="sect_A.3" xrefstyle="select: label"/></para>
          </listitem>
          <listitem>
            <para>Association negotiation rules as defined in <xref linkend="sect_A.5" xrefstyle="select: label"/></para>
          </listitem>
        </itemizedlist>
      </section>
      <section label="A.6.2" status="3" xml:id="sect_A.6.2">
        <title>Conformance Supporting the SCP Role</title>
        <para>Implementations that conform to the Verification SOP Class SCP role shall meet the:</para>
        <itemizedlist>
          <listitem>
            <para>C-ECHO operation rules as defined by the DIMSE Service Group, <xref linkend="sect_A.3" xrefstyle="select: label"/></para>
          </listitem>
          <listitem>
            <para>Association negotiation rules as defined in <xref linkend="sect_A.5" xrefstyle="select: label"/></para>
          </listitem>
        </itemizedlist>
      </section>
      <section label="A.6.3" status="3" xml:id="sect_A.6.3">
        <title>Conformance Statement</title>
        <para>An implementation may conform to the Verification SOP Class as an SCU, SCP, or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
      </section>
    </section>
  </chapter>
  <chapter label="B" status="1" xml:id="chapter_B">
    <title>Storage Service Class (Normative)</title>
    <section label="B.1" status="2" xml:id="sect_B.1">
      <title>Overview</title>
      <section label="B.1.1" status="3" xml:id="sect_B.1.1">
        <title>Scope</title>
        <para>The Storage Service Class defines an application-level class-of-service that facilitates the simple transfer of information Instances (objects).. It allows one DICOM AE to send images, waveforms, reports, etc., to another.</para>
        <para>Information Object Definitions for Instances that are transferred under the Storage Service Class shall adhere to the Composite Instance IOD Information Model specified in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>, and include at least the Patient, Study, and Series Information Entities.</para>
      </section>
      <section label="B.1.2" status="3" xml:id="sect_B.1.2">
        <title>Service Definition</title>
        <para>Two peer DICOM AEs implement a SOP Class of the Storage Service Class with one serving in the SCU role and one serving in the SCP role. SOP Classes of the Storage Service Class are implemented using the C-STORE DIMSE-C service. C-STORE is described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. A successful completion of the C-STORE has the following semantics:</para>
        <itemizedlist>
          <listitem>
            <para>Both the SCU and the SCP support the type of information to be stored.</para>
          </listitem>
          <listitem>
            <para>The information is stored in some medium.</para>
          </listitem>
          <listitem>
            <para>For some time frame, the information may be accessed.</para>
          </listitem>
        </itemizedlist>
        <note>
          <orderedlist>
            <listitem>
              <para>Support for Storage SOP Classes does not necessarily involve support for SOP Classes of the Query/Retrieve Service Class. How the information may be accessed is implementation dependent. It is required that some access method exists. This method may require an implementation dependent operation at the SCP of the Storage Service Class. The duration of the storage is also implementation dependent, but is described in the Conformance Statement of the SCP. Storage SOP Classes are intended to be used in a variety of environments: e.g., for modalities to transfer images to workstations or archives, for archives to transfer images to workstations or back to modalities, for workstations to transfer processed images to archives, etc.</para>
            </listitem>
            <listitem>
              <para>For the JPIP Referenced Pixel Data transfer syntaxes, transfers may result in storage of incomplete information in that the pixel data may be partially or completely transferred by some other mechanism at the discretion of the SCP.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
    </section>
    <section label="B.2" status="2" xml:id="sect_B.2">
      <title>Behavior</title>
      <para>This Section discusses the SCU and SCP behavior for SOP Classes of the Storage Service Class. The C-STORE DIMSE-C Service shall be the mechanism used to transfer SOP Instances between peer DICOM AEs as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      <section label="B.2.1" status="3" xml:id="sect_B.2.1">
        <title>Behavior of an SCU</title>
        <para>The SCU invokes a C-STORE DIMSE Service with a SOP Instance that meets the requirements of the corresponding IOD. The SCU shall recognize the status of the C-STORE service and take appropriate action upon the success or failure of the service.</para>
        <note>
          <para>The appropriate action is implementation dependent. It is required that the SCU distinguish between successful and failed C-STORE responses. Appropriate action may differ according to application, but are described in the Conformance Statement of the SCU.</para>
        </note>
      </section>
      <section label="B.2.2" status="3" xml:id="sect_B.2.2">
        <title>Behavior of an SCP</title>
        <para>An SCP of a Storage SOP Class acts as a performing DIMSE-service-user for the C-STORE Service. By performing this service successfully, the SCP indicates that the SOP Instance has been successfully stored.</para>
      </section>
      <section label="B.2.3" status="3" xml:id="sect_B.2.3">
        <title>Statuses</title>
        <para><xref linkend="table_B.2-1" xrefstyle="select: label"/> defines the specific status code values that might be returned in a C-STORE response. General status code values and fields related to status code values are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <table frame="box" label="B.2-1" rules="all" xml:id="table_B.2-1">
          <caption>C-STORE Status</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Service Status</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Further Meaning</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Status Codes</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Related Fields</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Failure</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Refused: Out of Resources</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A7xx</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1">
                <para>Error: Data Set does not match SOP Class</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A9xx</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0901)</para>
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1">
                <para>Error: Cannot understand</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>Cxxx</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0901)</para>
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Warning</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Coercion of Data Elements</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>B000</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0901)</para>
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1">
                <para>Data Set does not match SOP Class</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>B007</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0901)</para>
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1">
                <para>Elements Discarded</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>B006</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0901)</para>
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Success</para>
              </td>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="center" colspan="1" rowspan="1">
                <para>0000</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>None</para>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
    <section label="B.3" status="2" xml:id="sect_B.3">
      <title>Association Negotiation</title>
      <para>SCUs and SCPs of Storage SOP Classes operate on SOP Instances specific to the SOP Class. They may use the SOP Class Extended Negotiation Sub-Item defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. This Sub-Item allows DICOM AEs to exchange application information specific to SOP Class specifications. This is achieved by defining the Service-class-application-information field.</para>
      <para>SCUs may use the SOP Class Common Extended Negotiation Sub-Item defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. This Sub-Item allows DICOM AEs to exchange information about the nature of the SOP Classes.</para>
      <para>The SOP Class Extended Negotiation Sub-Item and SOP Class Common Extended Negotiation Sub-Item negotiation is optional for storage based SOP Classes.</para>
      <para>The following negotiation rules apply to all DICOM SOP Classes and Specialized SOP Classes of the Storage Service Class.</para>
      <para>The Association-requester (Storage SCU role) in the A-ASSOCIATE request shall convey:</para>
      <itemizedlist>
        <listitem>
          <para>one Abstract Syntax, in a Presentation Context, for each supported SOP Class of the Storage Service Class</para>
        </listitem>
        <listitem>
          <para>optionally, one SOP Class Extended Negotiation Sub-Item, for each supported SOP Class of the Storage Service Class</para>
        </listitem>
        <listitem>
          <para>optionally, one SOP Class Common Extended Negotiation Sub-Item, for each supported SOP Class of the Storage Service Class</para>
        </listitem>
      </itemizedlist>
      <para>The Association-acceptor (Storage SCP role) in the A-ASSOCIATE request shall accept:</para>
      <itemizedlist>
        <listitem>
          <para>one Abstract Syntax, in a Presentation Context, for each supported SOP Class of the Storage Service Class</para>
        </listitem>
        <listitem>
          <para>optionally, one SOP Class Extended Negotiation Sub-Item, for each supported SOP Class of the Storage Service Class</para>
        </listitem>
      </itemizedlist>
      <section label="B.3.1" status="3" xml:id="sect_B.3.1">
        <title>Extended Negotiation</title>
        <para>At the time of Association establishment implementations may exchange information about their respective capabilities, as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.8" targetptr="PS3.8" xrefstyle="select: labelnumber"/>. SCUs and SCPs may use the SOP Class Extended Negotiation Sub-Item Structure as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> to exchange information about the level of conformance and options supported. SCUs may use the SOP Class Common Extended Negotiation Sub-Item defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> to exchange information about the nature of the SOP Classes.</para>
        <para>Extended negotiation is optional. In the event that either the SCU or the SCP does not support extended negotiation, the defaults shall apply.</para>
        <section label="B.3.1.1" status="4" xml:id="sect_B.3.1.1">
          <title>Service-Class-Application-Information (A-ASSOCIATE-RQ)</title>
          <para>The SOP Class Extended Negotiation Sub-item is made of a sequence of mandatory fields as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. <xref linkend="table_B.3-1" xrefstyle="select: label"/> shows the format of the Service-class-application-information field of the SOP Class Extended Negotiation Sub-Item for SOP Classes of the Storage Service Class in the A-ASSOCIATE-RQ.</para>
          <table frame="box" label="B.3-1" rules="all" xml:id="table_B.3-1">
            <caption>Service-Class-Application-Information (A-ASSOCIATE-RQ)</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Item Bytes</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Field Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Description of Field</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Level of support</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field defines the supported storage level of the Association-requester. It shall be encoded as an unsigned binary integer and shall use one of the following values:</para>
                  <para>0 - level 0 SCP</para>
                  <para>1 - level 1 SCP</para>
                  <para>2 - level 2 SCP</para>
                  <para>3 - N/A Association-requester is SCU only</para>
                  <para>If extended negotiation is not supported, the default shall have a value of 3.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Reserved</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Level of Digital Signature support</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>A Level 2 SCP may further define its behavior in this byte field.</para>
                  <para>0 - The signature level is unspecified, the AE is an SCU only, or the AE is not a level 2 SCP</para>
                  <para>1 - signature level 1</para>
                  <para>2 - signature level 2</para>
                  <para>3 - signature level 3</para>
                  <para>If extended negotiation is not supported, the default shall have a value of 0.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>4</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Reserved</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>5</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Element Coercion</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field defines whether the Association-requester may coerce Data Elements. It shall be encoded as an unsigned binary integer and shall use one of the following values:</para>
                  <para>0 - does not coerce any Data Element</para>
                  <para>1 - may coerce Data Elements</para>
                  <para>2 - N/A - Association-requester is SCU only</para>
                  <para>If extended negotiation is not supported, the default shall have a value of 2.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>6</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Reserved</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
        <section label="B.3.1.2" status="4" xml:id="sect_B.3.1.2">
          <title>Service-Class-Application-Information (A-ASSOCIATE-AC)</title>
          <para>The SOP Class Extended Negotiation Sub-item is made of a sequence of mandatory fields as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. <xref linkend="table_B.3-2" xrefstyle="select: label"/> shows the format of the Service-class-application-information field of the SOP Class Extended Negotiation Sub-Item for SOP Classes of the Storage Service Class in the A-ASSOCIATE-AC.</para>
          <table frame="box" label="B.3-2" rules="all" xml:id="table_B.3-2">
            <caption>Service-Class-Application-Information (A-ASSOCIATE-AC)</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Item Bytes</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Field Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Description of Field</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Level of support</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field defines the supported storage level of the Association-acceptor. It shall be encoded as an unsigned binary integer and shall use one of the following values:</para>
                  <para>0 - level 0 SCP</para>
                  <para>1 - level 1 SCP</para>
                  <para>2 - level 2 SCP</para>
                  <para>3 - N/A - Association-acceptor is SCU only</para>
                  <para>If extended negotiation is not supported, no assumptions shall be made by the Association-requester about the capabilities of the Association-acceptor based upon this extended negotiation.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Reserved</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Level of Digital Signature support</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>A Level 2 SCP may further define its behavior in this byte field.</para>
                  <para>0 - The signature level is unspecified, the AE is an SCU only, or the AE is not a level 2 SCP</para>
                  <para>1 - signature level 1</para>
                  <para>2 - signature level 2</para>
                  <para>3 - signature level 3</para>
                  <para>If extended negotiation is not supported, no assumptions shall be made by the Association-requester about the capabilities of the Association-acceptor based upon this extended negotiation.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>4</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Reserved</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>5</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Element Coercion</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field defines whether the Association-acceptor may coerce Data Elements. It shall be encoded as an unsigned binary integer and shall use one of the following values:</para>
                  <para>0 - does not coerce any Data Element</para>
                  <para>1 - may coerce Data Elements</para>
                  <para>2 - N/A - Association-acceptor is SCU only</para>
                  <para>If extended negotiation is not supported, no assumptions shall be made by the Association-requester about the capabilities of the Association-acceptor based upon this extended negotiation.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>6</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Reserved</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This reserved field shall be sent with a value 00H but not tested to this value when received.</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
        <section label="B.3.1.3" status="4" xml:id="sect_B.3.1.3">
          <title>Service Class UID (A-ASSOCIATE-RQ)</title>
          <para>SOP Class Common Extended Negotiation Sub-Item allows the SCU to convey the Service Class UID of each proposed SOP Class.</para>
          <para>The Storage Service Class UID shall be "1.2.840.10008.4.2".</para>
        </section>
        <section label="B.3.1.4" status="4" xml:id="sect_B.3.1.4">
          <title>Related General SOP Classes (A-ASSOCIATE-RQ)</title>
          <para>A limited set of Standard SOP Classes in the Storage Service Class are defined to have one or more Related General SOP Classes. The Related General SOP Classes may be conveyed using the SOP Class Relationship Extended Negotiation during association establishment as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. <xref linkend="table_B.3-3" xrefstyle="select: label"/> identifies which Standard SOP Classes participate in this mechanism. If a Standard SOP Class is not listed in this table, Related General SOP Classes shall not be included in a Related Storage SOP Class Extended Negotiation Sub-Item.</para>
          <note>
            <para>Implementation-defined Specialized SOP Classes (see <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>) of the Storage Service Class may convey a Related General SOP Class.</para>
          </note>
          <table frame="box" label="B.3-3" rules="all" xml:id="table_B.3-3">
            <caption>Standard and Related General SOP Classes</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Related General SOP Class Name</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>12-lead ECG Waveform Storage</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>General ECG Waveform Storage</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Digital Mammography X-Ray Image Storage - For Presentation</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Digital X-Ray Image Storage - For Presentation</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Digital Mammography X-Ray Image Storage - For Processing</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Digital X-Ray Image Storage - For Processing</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Digital Intra-Oral X-Ray Image Storage - For Presentation</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Digital X-Ray Image Storage - For Presentation</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Digital Intra-Oral X-Ray Image Storage - For Processing</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Digital X-Ray Image Storage - For Processing</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="3">
                  <para>Basic Text SR</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Enhanced SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Comprehensive SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Comprehensive 3D SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="2">
                  <para>Enhanced SR</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Comprehensive SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Comprehensive 3D SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="3">
                  <para>Procedure Log</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Enhanced SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Comprehensive SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Comprehensive 3D SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="3">
                  <para>X-Ray Radiation Dose SR</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Enhanced SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Comprehensive SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Comprehensive 3D SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Spectacle Prescription Report</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Enhanced SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Macular Grid Thickness and Volume Report</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Enhanced SR</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Enhanced CT Image Storage</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Legacy Converted Enhanced CT Image Storage</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Enhanced MR Image Storage</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Legacy Converted Enhanced MR Image Storage</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Enhanced PET Image Storage</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Legacy Converted Enhanced PET Image Storage</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </section>
    <section label="B.4" status="2" xml:id="sect_B.4">
      <title>Conformance</title>
      <para>An implementation that conforms to Storage SOP Classes shall meet the:</para>
      <itemizedlist>
        <listitem>
          <para>C-STORE Service requirements as defined in <xref linkend="sect_B.2" xrefstyle="select: label"/></para>
        </listitem>
        <listitem>
          <para>Association requirements as defined in <xref linkend="sect_B.3" xrefstyle="select: label"/></para>
        </listitem>
      </itemizedlist>
      <note>
        <para>No SCU or SCP behavior requirements other than those in this section are specified. In particular, an SCP of the Storage SOP Classes may not attach any significance to the particular association or associations over which C-STORE operations are requested, nor the order in which C-STORE operations occur within an association. No constraints are placed on the operations an SCU may perform during any particular association, other than those defined during association negotiation. An SCP may not expect an SCU to perform C-STORE operations in a particular order.</para>
      </note>
      <para>Similarly, no semantics are attached to the closing of an Association, such as the end of a Study or Performed Procedure Step.</para>
      <section label="B.4.1" status="3" xml:id="sect_B.4.1">
        <title>Conformance as an SCP</title>
        <para>Three levels of conformance to the Storage SOP Classes as an SCP may be provided:</para>
        <itemizedlist>
          <listitem>
            <para>Level 0 (Local). Level 0 conformance indicates that a user-defined subset of the Attributes of the image will be stored, and all others will be discarded. This subset of the Attributes shall be defined in the Conformance Statement of the implementer.</para>
          </listitem>
          <listitem>
            <para>Level 1 (Base). Level 1 conformance indicates that all Type 1 and 2 Attributes defined in the IOD associated with the SOP Class will be stored, and may be accessed. All other elements may be discarded. The SCP may, but is not required to validate that the Attributes of the SOP Instance meets the requirements of the IOD.</para>
          </listitem>
          <listitem>
            <para>Level 2 (Full). Level 2 conformance indicates that all Type 1, Type 2, and Type 3 Attributes defined in the Information Object Definition associated with the SOP Class, as well as any Standard Extended Attributes (including Private Attributes) included in the SOP Instance, will be stored and may be accessed. The SCP may, but is not required to validate that the Attributes of the SOP Instance meet the requirements of the IOD.</para>
          </listitem>
        </itemizedlist>
        <note>
          <para>A Level 2 SCP may discard (not store) Type 3 Attributes that are empty (zero length and no Value), since the meaning of an empty Type 3 Attribute is the same as absence of the Attribute. See <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> definition of "Type 3 Optional Data Elements".</para>
        </note>
        <para>An SCP that claims conformance to Level 2 (Full) support of the Storage Service Class may accept any Presentation Context negotiation of a SOP Class that specifies the Storage Service Class during the SOP Class Common Extended Negotiation, without asserting conformance to that SOP Class in its Conformance Statement.</para>
        <note>
          <para>The SCP may support storage of all SOP Classes of the Storage Service Class, preserving all Attributes as a Level 2 SCP.</para>
        </note>
        <para>An SCP that claims conformance to Level 2 (Full) support of a Related General SOP Class may accept any Presentation Context negotiation of a SOP Class that specifies that Related General SOP Class during the SOP Class Common Extended Negotiation, without asserting conformance to that specialized SOP Class in its Conformance Statement.</para>
        <note>
          <orderedlist>
            <listitem>
              <para>The term "specialized" in this section is used generically, including both Implementation-defined Specialized SOP Classes and Standard SOP Classes specified in <xref linkend="table_B.3-3" xrefstyle="select: label"/>.</para>
            </listitem>
            <listitem>
              <para>The SCP may handle instances of such specialized SOP Classes using the semantics of the Related General SOP Class, but preserving all additional (potentially Type 1 or 2) Attributes as a Level 2 SCP.</para>
            </listitem>
          </orderedlist>
        </note>
        <para>Level 2 (Full) Storage SCP Conformance is required for support of the Enhanced Multi-Frame Image Conversion Extended Negotiation of the Query/Retrieve Service Class, since effective use of that option requires the storage of Type 3 Attributes. See <xref linkend="sect_C.3.5" xrefstyle="select: label"/> New Instance Creation for Enhanced Multi-frame Image Conversion.</para>
        <para>At any level of conformance, the SCP of the Storage Service Class may modify the values of certain Attributes in order to coerce the SOP Instance into the Query Model of the SCP. The Attributes that may be modified are shown in <xref linkend="table_B.4-1" xrefstyle="select: label"/>.</para>
        <table frame="box" label="B.4-1" rules="all" xml:id="table_B.4-1">
          <caption>Attributes Subject to Coercion</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Attribute</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Tag</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Patient ID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0010,0020)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Study Instance UID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0020,000D)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Series Instance UID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0020,000E)</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>The SCP of the Storage Service Class may modify the values of Code Sequence Attributes to convert from one coding scheme into another. This includes changing from deprecated values of Coding Scheme Designator (0008,0102) or Code Value (0008,0100) to currently valid values.</para>
        <para>If an SCP performs such a modification, it shall return a C-STORE response with a status of Warning.</para>
        <note>
          <orderedlist>
            <listitem>
              <para>Modification of these Attributes may be necessary if the SCP is also an SCP of a Query/Retrieve SOP Classes. These SOP Classes are described in this Standard. For example, an MR scanner may be implemented to generate Study Instance UIDs for images generated on the MR. When these images are sent to an archive that is HIS/RIS aware, it may choose to change the UID of the study assigned to the study by the PACS. The mechanism by which it performs this coercion is implementation dependent.</para>
            </listitem>
            <listitem>
              <para>An SCP may, for instance, convert Coding Scheme Designator values "SNM3" to "SRT", in accordance with the DICOM conventions for SNOMED (see <olink targetdoc="PS3.16" targetptr="PS3.16" xrefstyle="select: labelnumber"/>).</para>
            </listitem>
            <listitem>
              <para>Modification of Attributes that may be used to reference a SOP Instance by another SOP Instance (such as Study Instance UID and Series Instance UID Attributes) will make that reference invalid. Modification of these Attributes is strongly discouraged.</para>
            </listitem>
            <listitem>
              <para>Other Attributes may be modified/corrected by an SCP of a Storage SOP Class.</para>
            </listitem>
            <listitem>
              <para>Modification of Attributes may affect digital signatures referencing the content of the SOP Instance.</para>
            </listitem>
          </orderedlist>
        </note>
        <para>Three levels of Digital Signature support are defined for an SCP that claims conformance to Level 2 (Full) storage support:</para>
        <itemizedlist>
          <listitem>
            <para>Signature Level 1. SCP may not preserve Digital Signatures and does not replace them.</para>
          </listitem>
          <listitem>
            <para>Signature Level 2. SCP does not preserve the integrity of incoming Digital Signatures, but does validate the signatures of SOP Instances being stored, takes implementation-specific measures for insuring the integrity of data stored, and will add replacement Digital Signatures before sending SOP Instances elsewhere.</para>
          </listitem>
          <listitem>
            <para>Signature Level 3. SCP does preserve the integrity of incoming Digital Signatures (i.e., is bit-preserving and stores and retrieves all Attributes regardless of whether they are defined in the IOD).</para>
          </listitem>
        </itemizedlist>
      </section>
      <section label="B.4.2" status="3" xml:id="sect_B.4.2">
        <title>Conformance as an SCU</title>
        <para>The SCU shall generate only C-STORE requests with SOP Instances that meet the requirements of the IOD associated with the SOP Class.</para>
        <section label="B.4.2.1" status="4" xml:id="sect_B.4.2.1">
          <title>SCU Fall-Back Behavior</title>
          <para>During Association Negotiation, an application may propose a specialized SOP Class and its related general SOP Class in separate Presentation Contexts as a Storage SCU. If the Association Acceptor rejects the specialized SOP Class Presentation Context, but accepts the related general SOP Class Presentation Context, the application may send instances of the specialized SOP Class as instances of the related general SOP Class. In this fall-back behavior, the SOP Class UID of the instance shall be the UID of the related general SOP Class, and any special semantics associated with the specialized SOP Class may be lost; the SOP Instance UID shall remain the same.</para>
          <note>
            <para>The SCU may include the SOP Class UID of the original intended specialized SOP Class in the Attribute Original Specialized SOP Class UID (0008,001B) of the instance sent under the related general SOP Class. In some cases, e.g., when all intermediate storage applications are Level 2 SCPs, this may allow an ultimate receiver of the instance to recast it as an instance of the specialized SOP Class IOD. However, this transformation is not guaranteed.</para>
          </note>
        </section>
      </section>
      <section label="B.4.3" status="3" xml:id="sect_B.4.3">
        <title>Conformance Statement Requirements</title>
        <para>An implementation may conform to a SOP Class of the Storage Service Class as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <section label="B.4.3.1" status="4" xml:id="sect_B.4.3.1">
          <title>Conformance Statement for an SCU</title>
          <para>The following issues shall be documented in the Conformance Statement of any implementation claiming conformance to the Storage SOP Class as an SCU:</para>
          <itemizedlist>
            <listitem>
              <para>The behavior of the SCU in the case of a successful C-STORE response status shall be described.</para>
            </listitem>
            <listitem>
              <para>The behavior of the SCU in each case of an unsuccessful C-STORE response status shall be described.</para>
            </listitem>
            <listitem>
              <para>The behavior of the SCU in the case of a Warning status received in response to a C-STORE operation.</para>
            </listitem>
            <listitem>
              <para>Whether extended negotiation is supported.</para>
            </listitem>
            <listitem>
              <para>The optional elements that may be included in Storage SOP Instances for each IOD supported shall be listed.</para>
            </listitem>
            <listitem>
              <para>The standard and privately defined Functional Groups that may be included in Storage SOP Instances for each Multi-frame IOD that support Functional Groups.</para>
            </listitem>
            <listitem>
              <para>The behavior of the SCU in the case of a C-STORE operation using a referenced pixel data transfer syntax such as JPIP Referenced Pixel Data Transfer Syntax shall be described. This includes the duration of validity of the reference</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="B.4.3.2" status="4" xml:id="sect_B.4.3.2">
          <title>Conformance Statement for an SCP</title>
          <para>The following issues shall be documented in the Conformance Statement of any implementation claiming conformance to the Storage Service Class as an SCP:</para>
          <itemizedlist>
            <listitem>
              <para>The level of conformance, as defined by <xref linkend="sect_B.4.1" xrefstyle="select: label"/>, shall be stated.</para>
            </listitem>
            <listitem>
              <para>The level of Digital Signature support, as defined by <xref linkend="sect_B.4.1" xrefstyle="select: label"/>, shall be stated.</para>
            </listitem>
            <listitem>
              <para>The optional elements that will be discarded (if any) shall be listed for each IOD supported.</para>
            </listitem>
            <listitem>
              <para>The Conformance Statement shall document the policies concerning the Attribute Lossy Image Compression (0028,2110).</para>
            </listitem>
            <listitem>
              <para>The behavior of the SCP in the case of a successful C-STORE operation shall be described. This includes the following:</para>
              <itemizedlist>
                <listitem>
                  <para>the access method for a stored SOP Instance</para>
                </listitem>
                <listitem>
                  <para>the duration of the storage</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para>The meaning of each case of an unsuccessful C-STORE response status shall be described, as well as appropriate recovery action.</para>
            </listitem>
            <listitem>
              <para>The meaning of each case of a warning C-STORE response status shall be described, as well as appropriate action.</para>
            </listitem>
            <listitem>
              <para>If the SCP performs coercion on any Attributes, this shall be stated, and the conditions under which it may occur shall be described.</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
      <section label="B.4.4" status="3" xml:id="sect_B.4.4">
        <title>Specialized Conformance</title>
        <para>Implementations may provide Specialized SOP Class conformance by providing a proper superset of the SOP Instances to be stored. Implementations providing Specialized SOP Class Conformance to one of the SOP Classes defined in this Annex shall be conformant as described in the following sections and shall include within their Conformance Statement information as described in the following sections.</para>
        <para>An implementation shall be permitted to conform as a Specialization of the standard SOP Class as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <section label="B.4.4.1" status="4" xml:id="sect_B.4.4.1">
          <title>Specialized SOP Class Identification</title>
          <para>Any implementation that specializes the standard SOP Class shall define its specialization as an Allomorphic subclass of the standard SOP Class. As such, the specialization shall have its own unique SOP Class identification.</para>
          <para>The Conformance Statement shall include a SOP Class Identification Statement as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>, declaring a SOP Name and SOP Class UID that identify the Specialized SOP Class. The SOP Name is not guaranteed to be unique (unless the implementer chooses to copyright it) but is provided for informal identification of the SOP Class. The SOP Class UID shall uniquely identify the Specialized SOP Class and conform to the DICOM UID requirements as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
        </section>
        <section label="B.4.4.2" status="4" xml:id="sect_B.4.4.2">
          <title>Specialized Information Object Definition</title>
          <para>The standard SOP Class may be specialized by supporting additional private Attributes. The SCU Operations Statement shall describe these specializations and be formatted as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>. Following this statement shall be the list of Attributes that may be sent or stored with SOP Instances.</para>
        </section>
      </section>
    </section>
    <section label="B.5" status="2" xml:id="sect_B.5">
      <title>Standard SOP Classes</title>
      <para>The SOP Classes in the Storage Service Class identify the Composite IODs to be stored. <xref linkend="table_B.5-1" xrefstyle="select: label"/> identifies Standard SOP Classes.</para>
      <table frame="box" label="B.5-1" rules="all" xml:id="table_B.5-1">
        <caption>Standard SOP Classes</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">SOP Class Name</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">SOP Class UID</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">IOD Specification (defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>)</emphasis>
              </para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Computed Radiography Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital X-Ray Image Storage - For Presentation</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.26" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.1" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital X-Ray Image Storage - For Processing</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.26" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.1" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital Mammography X-Ray Image Storage - For Presentation</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.27" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.2" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital Mammography X-Ray Image Storage - For Processing</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.2.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.27" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.2" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital Intra-Oral X-Ray Image Storage - For Presentation</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.28" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.3" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital Intra-Oral X-Ray Image Storage - For Processing</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.3.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.28" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.3" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>CT Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced CT Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.2.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.38.1" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.7" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Legacy Converted Enhanced CT Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.2.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.70" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.7" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ultrasound Multi-frame Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.3.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.7" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>MR Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced MR Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.4.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.36.2" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.6" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>MR Spectroscopy Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.4.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.36.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced MR Color Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.4.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.36.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Legacy Converted Enhanced MR Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.4.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.71" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.6" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ultrasound Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.6.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced US Volume Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.6.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.59" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Secondary Capture Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.7</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.8" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Multi-frame Single Bit Secondary Capture Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.7.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.8.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Multi-frame Grayscale Byte Secondary Capture Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.7.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.8.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Multi-frame Grayscale Word Secondary Capture Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.7.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.8.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Multi-frame True Color Secondary Capture Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.7.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.8.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>12-lead ECG Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>General ECG Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.1.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ambulatory ECG Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.1.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Hemodynamic Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.2.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Cardiac Electrophysiology Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.3.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.7" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Basic Voice Audio Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.4.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>General Audio Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.4.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.10" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Arterial Pulse Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.5.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.8" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Respiratory Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.6.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.9" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Grayscale Softcopy Presentation State Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.11.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Color Softcopy Presentation State Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.11.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Pseudo-Color Softcopy Presentation State Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.11.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Blending Softcopy Presentation State Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.11.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>XA/XRF Grayscale Softcopy Presentation State Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.11.5</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray Angiographic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.12.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.14" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced XA Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.12.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.47" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray Radiofluoroscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.12.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.16" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced XRF Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.12.2.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.48" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray 3D Angiographic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.13.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.53" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray 3D Craniofacial Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.13.1.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.54" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Breast Tomosynthesis Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.13.1.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.55" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Intravascular Optical Coherence Tomography Image Storage - For Presentation</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.14.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.66" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.13" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Intravascular Optical Coherence Tomography Image Storage - For Processing</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.14.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.66" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.13" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Nuclear Medicine Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.20</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Raw Data Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.37" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Spatial Registration Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.39.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Spatial Fiducials Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.40" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Deformable Spatial Registration Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.39.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Segmentation Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.51" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Surface Segmentation Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66.5</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.57" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Real World Value Mapping Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.67</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.46" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Surface Scan Mesh Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.68.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.68" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Surface Scan Point Cloud Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.68.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.69" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>VL Endoscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Video Endoscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>VL Microscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Video Microscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.2.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>VL Slide-Coordinates Microscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>VL Photographic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Video Photographic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.4.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.7" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Photography 8 Bit Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.5.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.41" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Photography 16 Bit Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.5.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.42" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Stereometric Relationship Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.5.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.43" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Tomography Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.5.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.52" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>VL Whole Slide Microscopy Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.6</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.8" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Lensometry Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Autorefraction Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Keratometry Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Subjective Refraction Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Visual Acuity Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.5</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Spectacle Prescription Report Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.6</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.9" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Axial Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.7</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Intraocular Lens Calculations Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.8</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.7" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Macular Grid Thickness and Volume Report</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.79.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.11" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Visual Field Static Perimetry Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.80.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.65" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Thickness Map Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.81.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.67" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Corneal Topography Map Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.82.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.73" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Basic Text SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.11</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.22</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Comprehensive SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.33</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Comprehensive 3D SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.34</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.13" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Procedure Log</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.40</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.7" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Mammography CAD SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.50</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Key Object Selection</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.59</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Chest CAD SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.65</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray Radiation Dose SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.67</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.8" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Colon CAD SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.69</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.10" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Implantation Plan SR Document Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.70</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.12" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Encapsulated PDF Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.104.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.45.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Encapsulated CDA Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.104.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.45.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Positron Emission Tomography Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.128</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.21" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced PET Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.130</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.56" xrefstyle="select: title"/>
              </para>
              <para>(see <xref linkend="sect_B.5.1.16" xrefstyle="select: label"/>)</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Legacy Converted Enhanced PET Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.128.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.72" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Basic Structured Display Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.131</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.17" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Dose Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.18" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Structure Set Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.19" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Beams Treatment Record Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.29" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Plan Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.5</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.20" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Brachy Treatment Record Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.6</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.30" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Treatment Summary Record Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.7</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.31" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Ion Plan Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.8</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.49" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Ion Beams Treatment Record Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.9</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.50" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Beams Delivery Instruction Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.34.7</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.64" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Generic Implant Template Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.43.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.61" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Implant Assembly Template Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.44.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.62" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Implant Template Group Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.45.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.63" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
        </tbody>
      </table>
      <section label="B.5.1" status="3" xml:id="sect_B.5.1">
        <title>Specialization for Standard SOP Classes</title>
        <section label="B.5.1.1" status="4" xml:id="sect_B.5.1.1">
          <title>Digital X-Ray Image Storage SOP Classes</title>
          <para>The Digital X-Ray Image Storage - For Presentation SOP Class shall use the DX IOD with an Enumerated Value of FOR PRESENTATION for Presentation Intent Type (0008,0068).</para>
          <para>The Digital X-Ray Image Storage - For Processing SOP Class shall use the DX IOD with an Enumerated Value of FOR PROCESSING for Presentation Intent Type (0008,0068).</para>
          <para>An SCU or SCP of the Digital X-Ray Image Storage - For Processing SOP Class shall also support the Digital X-Ray Image Storage - For Presentation SOP Class.</para>
          <note>
            <orderedlist>
              <listitem>
                <para>The intent of this requirement is to ensure a useful level of interoperability by avoiding the situation where an SCU might support only the Digital X-Ray Image Storage - For Processing SOP Class and an SCP only the Digital X-Ray Image Storage - For Presentation SOP Class, or vice versa. The burden is therefore to support the Digital X-Ray Image Storage - For Presentation SOP Class as a "baseline".</para>
              </listitem>
              <listitem>
                <para>The term "support" is used in this section in the sense that an SCU or SCP must be capable of sending or receiving the For Presentation SOP Class. There is no intent to imply that an SCU must always send an instance of the For Presentation SOP Class when an instance of the For Processing SOP Class is sent.</para>
                <para>Nor is there any intent to imply that during Association establishment, that a Presentation Context for the For Presentation SOP Class has to be proposed by the initiator. However, an association acceptor may reject a For Presentation SOP Class Presentation Context if it accepts a For Processing SOP Class Presentation Context, and prefers that SOP Class, in which case it may no longer be able to "pass on" the object later as an SCU unless it is able to generate a For Presentation object.</para>
                <para>It is not possible for an SCP to determine from proposed Presentation Contexts whether or not an SCU "supports" (is capable of sending) both For Processing and For Presentation SOP Class Instances. Such a determination requires a priori knowledge of the information contained in the Conformance Statement for the SCU, as well as how the SCU is configured and operated. An SCU that supports both SOP Classes may well choose to only propose one or the other during Association establishment, depending on which Instances it actually intends to send over that particular association (although the SCU must be capable of sending instances of the For Presentation SOP Class if the SCP does not accept the For Processing).</para>
                <para>The intent of the requirement is that if an SCU is only capable of sending the For Presentation SOP Class, any SCP will be guaranteed to be able to receive it. Conversely, if an SCP is only capable of receiving the For Presentation SOP Class, any SCU will be guaranteed to be able to send it.</para>
              </listitem>
            </orderedlist>
          </note>
        </section>
        <section label="B.5.1.2" status="4" xml:id="sect_B.5.1.2">
          <title>Digital Mammography X-Ray Image Storage SOP Classes</title>
          <para>The Digital Mammography X-Ray Image Storage - For Presentation SOP Class shall use the Digital Mammography IOD with an Enumerated Value of FOR PRESENTATION for Presentation Intent Type (0008,0068).</para>
          <para>The Digital Mammography X-Ray Image Storage - For Processing SOP Class shall use the Digital Mammography IOD with an Enumerated Value of FOR PROCESSING for Presentation Intent Type (0008,0068).</para>
          <para>An SCU or SCP of the Digital Mammography X-Ray Image Storage - For Processing SOP Class shall also support the Digital Mammography X-Ray Image Storage - For Presentation SOP Class.</para>
        </section>
        <section label="B.5.1.3" status="4" xml:id="sect_B.5.1.3">
          <title>Digital Intra-Oral X-Ray Image Storage SOP Classes</title>
          <para>The Digital Intra-Oral X-Ray Image Storage - For Presentation SOP Class shall use the Digital Intra-Oral X-Ray IOD with an Enumerated Value of FOR PRESENTATION for Presentation Intent Type (0008,0068).</para>
          <para>The Digital Intra-Oral X-Ray Image Storage - For Processing SOP Class shall use the Digital Intra-Oral X-Ray IOD with an Enumerated Value of FOR PROCESSING for Presentation Intent Type (0008,0068).</para>
          <para>An SCU or SCP of the Digital Intra-Oral X-Ray Image Storage - For Processing SOP Class shall also support the Digital Intra-Oral X-Ray Image Storage - For Presentation SOP Class.</para>
        </section>
        <section label="B.5.1.4" status="4" xml:id="sect_B.5.1.4">
          <title>Softcopy Presentation State Storage SOP Classes</title>
          <para>See <xref linkend="chapter_N" xrefstyle="template: Annex %n"/>.</para>
        </section>
        <section label="B.5.1.5" status="4" xml:id="sect_B.5.1.5">
          <title>Structured Reporting Storage SOP Classes</title>
          <para>The requirements of <xref linkend="chapter_O" xrefstyle="template: Annex %n"/> apply to the following SOP Classes:</para>
          <itemizedlist>
            <listitem>
              <para>Basic Text SR</para>
            </listitem>
            <listitem>
              <para>Enhanced SR, and SOP Classes for which it is the Related General SOP Class</para>
            </listitem>
            <listitem>
              <para>Comprehensive 3D SR, Comprehensive SR, and SOP Classes for which they are the Related General SOP Classes</para>
            </listitem>
            <listitem>
              <para>Mammography CAD SR</para>
            </listitem>
            <listitem>
              <para>Chest CAD SR</para>
            </listitem>
            <listitem>
              <para>Procedure Log</para>
            </listitem>
            <listitem>
              <para>X-Ray Radiation Dose SR</para>
            </listitem>
            <listitem>
              <para>Spectacle Prescription Report</para>
            </listitem>
            <listitem>
              <para>Colon CAD SR</para>
            </listitem>
            <listitem>
              <para>Macular Grid Thickness and Volume Report</para>
            </listitem>
            <listitem>
              <para>Implantation Plan SR Document</para>
            </listitem>
          </itemizedlist>
          <para><xref linkend="chapter_O" xrefstyle="template: Annex %n"/> requirements do not apply to the Key Object Selection Document SOP Class.</para>
        </section>
        <section label="B.5.1.6" status="4" xml:id="sect_B.5.1.6">
          <title>Enhanced MR Image Storage and Legacy Converted Enhanced MR Image Storage SOP Class</title>
          <para>An SCP of the Enhanced MR Image Storage or Legacy Converted Enhanced MR Image Storage SOP Class shall also support the Grayscale Softcopy Presentation State Storage SOP Class.</para>
          <note>
            <para>This requirement is present in order to allow the exchange of graphical annotations created by an acquisition or conversion device.</para>
          </note>
        </section>
        <section label="B.5.1.7" status="4" xml:id="sect_B.5.1.7">
          <title>Enhanced CT Image Storage and Legacy Converted Enhanced CT Image Storage SOP Class</title>
          <para>An SCP of the Enhanced CT Image Storage or Legacy Converted Enhanced CT Image Storage SOP Class shall also support the Grayscale Softcopy Presentation State Storage SOP Class.</para>
          <note>
            <para>This requirement is present in order to allow the exchange of graphical annotations created by an acquisition or conversion device.</para>
          </note>
        </section>
        <section label="B.5.1.8" status="4" xml:id="sect_B.5.1.8">
          <title>Enhanced MR Color Image Storage SOP Class</title>
          <para>An SCP of the Enhanced MR Image Storage SOP Class shall also support the Color Softcopy Presentation State Storage SOP Class.</para>
          <note>
            <para>This requirement is present in order to allow the exchange of graphical annotations created by an acquisition device.</para>
          </note>
        </section>
        <section label="B.5.1.9" status="4" xml:id="sect_B.5.1.9">
          <title>Basic Structured Display</title>
          <para>An SCU of the Basic Structured Display Storage SOP Class that creates SOP Instances of the Class shall identify in its Conformance Statement the Composite Storage SOP Classes and Softcopy Presentation State Storage SOP Classes that are also supported by the SCU, and may be referenced by Basic Structured Display SOP Instances it creates. It shall identify in its Conformance Statement the values it may use in the Attributes Image Box Layout Type (0072,0304) and Type of Synchronization (0072,0434).</para>
          <para>An SCP of the Basic Structured Display Storage SOP Class, when rendering SOP Instances of the Class, shall preserve the aspect ratio specified by the Nominal Screen Definition Sequence (0072,0102) Attributes Number of Vertical Pixels (0072,0104) and Number of Horizontal Pixels (0072,0106) without clipping.</para>
          <note>
            <orderedlist>
              <listitem>
                <para>The SCP is not required to display using the exact number of vertical and horizontal pixels. The SCP may use as much of its display screen as it desires, while maintaining the Structured Display aspect ratio.</para>
              </listitem>
              <listitem>
                <para>If the display screen has a different aspect ratio, the positioning of the display on the screen is unspecified (centered, left or right justified, top or bottom justified).</para>
              </listitem>
            </orderedlist>
          </note>
          <para>An SCP of the Basic Structured Display Storage SOP Class that is capable of rendering SOP Instances of the Class shall identify in its Conformance Statement the Composite Storage SOP Classes and Softcopy Presentation State Storage SOP Classes that are also supported by the SCP, and will be rendered when referenced by Basic Structured Display SOP Instances for display. It shall specify in its Conformance Statement the user display controls and interactions for the values of Image Box Layout Type (0072,0304) and Type of Synchronization (0072,0434) that it supports. It shall identify in its Conformance Statement its behavior when encountering a referenced Presentation State or other Composite Storage SOP Instance whose display it does not support, or an unsupported value of Image Box Layout Type or Type of Synchronization; such behavior shall include at a minimum a display to the user of the nature of the incompatibility.</para>
        </section>
        <section label="B.5.1.10" status="4" xml:id="sect_B.5.1.10">
          <title>Implant Template Storage SOP Classes</title>
          <para>A device that is a Generic Implant Template Storage, Implant Assembly Template Storage, or Implant Template Group Storage SOP Class SCU may modify information in a SOP Instance that it has previously sent or received. When this SOP Instance is modified and sent to an SCP, it shall be assigned a new SOP Instance UID if there is addition, removal or update of any Attribute within:</para>
          <itemizedlist>
            <listitem>
              <para>Generic Implant Template Description Module</para>
            </listitem>
            <listitem>
              <para>Generic Implant Template 2D Drawings Module</para>
            </listitem>
            <listitem>
              <para>Generic Implant Template 3D Models Module</para>
            </listitem>
            <listitem>
              <para>Generic Implant Template Mating Features Module</para>
            </listitem>
            <listitem>
              <para>Generic Implant Template Planning Landmarks Module</para>
            </listitem>
            <listitem>
              <para>Implant Assembly Template Module</para>
            </listitem>
            <listitem>
              <para>Implant Template Group Module</para>
            </listitem>
            <listitem>
              <para>Surface Mesh Module</para>
            </listitem>
          </itemizedlist>
          <para>Referential integrity between sets of related SOP instances shall be maintained.</para>
        </section>
        <section label="B.5.1.11" status="4" xml:id="sect_B.5.1.11">
          <title>Ophthalmic Axial Measurements Storage SOP Class</title>
          <para>Ophthalmic axial measurements devices are used in the preoperative assessment of every cataract surgery patient. Ophthalmic axial measurements SOP Classes support ophthalmic axial measurements devices.</para>
          <para>For a device that is both a SCU and a SCP of the Ophthalmic Axial Measurements Storage SOP Class, in addition to the behavior for the Storage Service Class specified in <xref linkend="sect_B.2.2" xrefstyle="select: label"/>, the following additional requirements are specified for Ophthalmic Axial Measurements Storage SOP Classes:</para>
          <itemizedlist>
            <listitem>
              <para>A SCP of this SOP Class shall support Level 2 Conformance as defined in <xref linkend="sect_B.4.1" xrefstyle="select: label"/>.</para>
            </listitem>
          </itemizedlist>
          <note>
            <para>This requirement means that all Type 1, Type 2, and Type 3 Attributes defined in the Information Object Definition and Private Attributes associated with the SOP Class will be stored and may be accessed.</para>
          </note>
        </section>
        <section label="B.5.1.12" status="4" xml:id="sect_B.5.1.12">
          <title>IOL Calculation Storage SOP Class</title>
          <para>IOL (intraocular lens) calculation is used in the preoperative assessment of every cataract surgery patient. IOL Calculation SOP Classes support IOL calculation software, which may be located either on ophthalmic axial measurement devices or on a separate computer.</para>
          <para>For a device that is both a SCU and a SCP of the IOL Calculation Storage SOP Class, in addition to the behavior for the Storage Service Class specified in <xref linkend="sect_B.2.2" xrefstyle="select: label"/>, the following additional requirements are specified for IOL Calculation Storage SOP Classes:</para>
          <itemizedlist>
            <listitem>
              <para>A SCP of this SOP Class shall support Level 2 Conformance as defined in <xref linkend="sect_B.4.1" xrefstyle="select: label"/>.</para>
            </listitem>
          </itemizedlist>
          <note>
            <para>This requirement means that all Type 1, Type 2, and Type 3 Attributes defined in the Information Object Definition and Private Attributes associated with the SOP Class will be stored and may be accessed.</para>
          </note>
        </section>
        <section label="B.5.1.13" status="4" xml:id="sect_B.5.1.13">
          <title>Intravascular OCT Image Storage SOP Classes</title>
          <para>The Intravascular OCT Image Storage - For Presentation SOP Class shall use the IVOCT IOD with an Enumerated Value of FOR PRESENTATION for Presentation Intent Type (0008,0068).</para>
          <para>The Intravascular OCT Image Storage - For Processing SOP Class shall use the IVOCT IOD with an Enumerated Value of FOR PROCESSING for Presentation Intent Type (0008,0068).</para>
          <para>An SCU or SCP of the Intravascular OCT Image Storage - For Processing SOP Class shall also support the Intravascular OCT Image Storage - For Presentation SOP Class.</para>
          <note>
            <orderedlist>
              <listitem>
                <para>The intent of this requirement is to ensure a useful level of interoperability by avoiding the situation where an SCU might support only the Intravascular OCT Image Storage - For Processing SOP Class and an SCP only the Intravascular OCT Image Storage - For Presentation SOP Class, or vice versa. The burden is therefore to support the Intravascular OCT Image Storage - For Presentation SOP Class as a "baseline".</para>
              </listitem>
              <listitem>
                <para>The term "support" is used in this section in the sense that an SCU or SCP must be capable of sending or receiving the For Presentation SOP Class. There is no intent to imply that an SCU must always send an instance of the For Presentation SOP Class when an instance of the For Processing SOP Class is sent.</para>
                <para>Nor is there any intent to imply that during Association establishment, that a Presentation Context for the For Presentation SOP Class has to be proposed by the initiator. However, an association acceptor may reject a For Presentation SOP Class Presentation Context if it accepts a For Processing SOP Class Presentation Context, and prefers that SOP Class, in which case it may no longer be able to "pass on" the object later as an SCU unless it is able to generate a For Presentation object.</para>
                <para>It is not possible for an SCP to determine from proposed Presentation Contexts whether or not an SCU "supports" (is capable of sending) both For Processing and For Presentation SOP Class Instances. Such a determination requires a priori knowledge of the information contained in the Conformance Statement for the SCU, as well as how the SCU is configured and operated. An SCU that supports both SOP Classes may well choose to only propose one or the other during Association establishment, depending on which Instances it actually intends to send over that particular association (although the SCU must be capable of sending instances of the For Presentation SOP Class if the SCP does not accept the For Processing).</para>
                <para>The intent of the requirement is that if an SCU is only capable of sending the For Presentation SOP Class, any SCP will be guaranteed to be able to receive it. Conversely, if an SCP is only capable of receiving the For Presentation SOP Class, any SCU will be guaranteed to be able to send it.</para>
              </listitem>
            </orderedlist>
          </note>
        </section>
        <section label="B.5.1.14" status="4" xml:id="sect_B.5.1.14">
          <title>Ophthalmic Thickness Map Storage SOP Class</title>
          <para>The Ophthalmic Thickness Map SOP Class encodes a topographic representation of the thickness/height measurements of the posterior eye.</para>
          <para>For a device that is both a SCU and a SCP of the Ophthalmic Thickness Map Storage SOP Class, in addition to the behavior for the Storage Service Class specified in <xref linkend="sect_B.2.2" xrefstyle="select: label"/>, the following additional requirements are specified for Ophthalmic Thickness Map Storage SOP Classes:</para>
          <itemizedlist>
            <listitem>
              <para>A SCP of this SOP Class shall support Level 2 Conformance as defined in <xref linkend="sect_B.4.1" xrefstyle="select: label"/>.</para>
            </listitem>
          </itemizedlist>
          <note>
            <para>This requirement means that all Type 1, Type 2, and Type 3 Attributes defined in the Information Object Definition and Private Attributes associated with the SOP Class will be stored and may be accessed.</para>
          </note>
        </section>
        <section label="B.5.1.15" status="4" xml:id="sect_B.5.1.15">
          <title>Enhanced PET Image Storage and Legacy Converted Enhanced PET Image Storage SOP Class</title>
          <para>An SCP of the Enhanced PET Image Storage or Legacy Converted Enhanced PET Image Storage SOP Class shall also support the Grayscale Softcopy Presentation State Storage SOP Class.</para>
          <note>
            <para>This requirement is present in order to allow the exchange of graphical annotations created by an acquisition or conversion device.</para>
          </note>
        </section>
        <section label="B.5.1.16" status="4" xml:id="sect_B.5.1.16">
          <title>Enhanced PET Image Storage SOP Classes</title>
          <para>An SCP of the Enhanced PET Image Storage SOP Class shall also support the Grayscale Softcopy Presentation State Storage SOP Class.</para>
          <note>
            <para>This requirement is present in order to allow the exchange of graphical annotations created by an acquisition device.</para>
          </note>
        </section>
        <section label="B.5.1.17" status="4" xml:id="sect_B.5.1.17">
          <title>Corneal Topography Map Storage SOP Class</title>
          <para>The Corneal Topography Map SOP Class encodes a topographic representation of the curvature and/or elevation measurements of corneal anterior and posterior surfaces (e.g., maps that display corneal curvatures, corneal elevations, and corneal power, etc.).</para>
          <para>For a device that is both a SCU and a SCP of the Corneal Topography Map Storage SOP Class, in addition to the behavior for the Storage Service Class specified in <xref linkend="sect_B.2.2" xrefstyle="select: label"/>, the following additional requirements are specified for Corneal Topography Map Storage SOP Classes:</para>
          <itemizedlist>
            <listitem>
              <para>A SCP of this SOP Class shall support Level 2 Conformance as defined in <xref linkend="sect_B.4.1" xrefstyle="select: label"/>.</para>
            </listitem>
          </itemizedlist>
          <note>
            <para>This requirement means that all Type 1, Type 2, and Type 3 Attributes defined in the Information Object Definition and Private Attributes associated with the SOP Class will be stored and may be accessed.</para>
          </note>
        </section>
      </section>
    </section>
    <section label="B.6" status="2" xml:id="sect_B.6">
      <title>Retired Standard SOP Classes</title>
      <para>The SOP Classes in <xref linkend="table_B.6-1" xrefstyle="select: label"/> were defined in previous versions of the DICOM Standard. They are now retired and have been replaced by new standard SOP Classes shown in <xref linkend="table_B.5-1" xrefstyle="select: label"/>.</para>
      <note>
        <para>Usage of the retired SOP Classes is permitted by DICOM. However, new implementations are strongly encouraged to implement the newer SOP Classes.</para>
      </note>
      <table frame="box" label="B.6-1" rules="all" xml:id="table_B.6-1">
        <caption>Retired Standard SOP Classes</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">SOP Class Name</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">SOP Class UID</emphasis>
              </para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Nuclear Medicine Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.5</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ultrasound Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.6</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ultrasound Multi-frame Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.3</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray Angiographic Bi-plane Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.12.3</para>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </chapter>
  <chapter label="C" status="1" xml:id="chapter_C">
    <title>Query/Retrieve Service Class (Normative)</title>
    <section label="C.1" status="2" xml:id="sect_C.1">
      <title>Overview</title>
      <section label="C.1.1" status="3" xml:id="sect_C.1.1">
        <title>Scope</title>
        <para>The Query/Retrieve Service Class defines an application-level class-of-service that facilitates the simple management of Composite Object Instances in a manner functionally similar to ACR-NEMA 300-1988. The types of queries that are allowed are not complex. This Service Class is not intended to provide a comprehensive generalized database query mechanism such as SQL. Instead, the Query/Retrieve Service Class is focused towards basic Composite Object Instance information queries using a small set of common Key Attributes.</para>
        <para>In addition, the Query/Retrieve Service Class provides the ability to retrieve/transfer a well-identified set of Composite Object Instances. The retrieve/transfer capability allows a DICOM AE to retrieve Composite Object Instances from a remote DICOM AE or request the remote DICOM AE to initiate a transfer of Composite Object Instances to another DICOM AE.</para>
        <note>
          <para>Functional similarity to ACR-NEMA 300-1988 facilitates the migration to DICOM.</para>
        </note>
        <para>An Enhanced Multi-Frame Image Conversion Extended Negotiation option allows the Query/Retrieve Service Class to access Classic single-frame images that have been converted to Enhanced multi-frame images, or vice-versa. This is achieved by providing alternative "views" of studies, such that:</para>
        <itemizedlist>
          <listitem>
            <para>the default view provides the images in the form they were received,</para>
          </listitem>
          <listitem>
            <para>a Classic single-frame "view" provides images as Classic single frame (that were received that way or have been converted from Enhanced multi-frame),</para>
          </listitem>
          <listitem>
            <para>an Enhanced multi-frame "view" provides images as Enhanced multi-frame (that were received that way or have been converted to Enhanced multi-frame).</para>
          </listitem>
        </itemizedlist>
        <para>A query or retrieval above the IMAGE level does not show or return duplicate information (two sets of images). The SCU may request the default, enhanced multi-frame or Classic single frame view. For each view, referential integrity is required to be consistent within the scope of the Patient and that view; i.e., references to UIDs will be converted in all Instances, not only within converted images.</para>
        <note>
          <orderedlist>
            <listitem>
              <para>The Classic single-frame view is not intended as an alternative to the Frame Level Retrieve SOP Classes defined in <xref linkend="chapter_Y" xrefstyle="template: Annex %n"/>. Enhanced Image Storage SOP Classes and Frame Level Retrieve SOP Classes should be used together since they support a unified view of the relationships between instances through a common set of UIDs.</para>
            </listitem>
            <listitem>
              <para>In the Enhanced view, Instances that have no Enhanced equivalent will be returned in their original form but with referential integrity related changes.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
      <section label="C.1.2" status="3" xml:id="sect_C.1.2">
        <title>Conventions</title>
        <para>The following conventions are used to define the types of keys used in Query/Retrieve Information Models.</para>
        <table frame="box" label="C.1.2-1" rules="all" xml:id="table_C.1.2-1">
          <caption>Key Type Conventions for Query/Retrieve Information Models</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Symbol</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Description</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para>U</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Unique Key Attribute</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Required Key Attribute</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Optional Key Attribute</para>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
      <section label="C.1.3" status="3" xml:id="sect_C.1.3">
        <title>Query/Retrieve Information Model</title>
        <para>In order to serve as an SCP of the Query/Retrieve Service Class, a DICOM AE possesses information about the Attributes of a number of stored Composite Object Instances. This information is organized into a well defined Query/Retrieve Information Model. The Query/Retrieve Information Model shall be a standard Query/Retrieve Information Model, as defined in this Annex of the DICOM Standard.</para>
        <para>Queries and Retrievals are implemented against well defined Information Models. A specific SOP Class of the Query/Retrieve Service Class consists of an Information Model Definition and a DIMSE-C Service Group. In this Service Class, the Information Model plays a role similar to an Information Object Definition (IOD) of most other DICOM Service Classes.</para>
      </section>
      <section label="C.1.4" status="3" xml:id="sect_C.1.4">
        <title>Service Definition</title>
        <para>Two peer DICOM AEs implement a SOP Class of the Query/Retrieve Service Class with one serving in the SCU role and one serving in the SCP role. SOP Classes of the Query/Retrieve Service Class are implemented using the DIMSE-C C-FIND, C-MOVE, and C-GET services as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <para>Both a baseline and extended behavior is defined for the DIMSE-C C-FIND, C-MOVE, and C-GET services. Baseline behavior specifies a minimum level of conformance for all implementations to facilitate interoperability. Extended behavior enhances the baseline behavior to provide additional features that may be negotiated independently at Association establishment time.</para>
        <para>The following descriptions of the DIMSE-C C-FIND, C-MOVE, and C-GET services provide a brief overview of the SCU/SCP semantics:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>A C-FIND service conveys the following semantics:</para>
            <itemizedlist>
              <listitem>
                <para>The SCU requests that the SCP perform a match of all the keys specified in the Identifier of the request, against the information it possesses, to the level (E.g. Patient, Study, Series, or Composite Object Instance) specified in the request.</para>
                <note>
                  <para>In this Annex, the term "Identifier" refers to the Identifier service parameter of the C-FIND, C-MOVE, or C-GET service as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
                </note>
              </listitem>
              <listitem>
                <para>The SCP generates a C-FIND response for each match with an Identifier containing the values of all key fields and all known Attributes requested. All such responses will contain a status of Pending. A status of Pending indicates that the process of matching is not complete.</para>
              </listitem>
              <listitem>
                <para>When the process of matching is complete a C-FIND response is sent with a status of Success and no Identifier.</para>
              </listitem>
              <listitem>
                <para>A Refused or Failed response to a C-FIND request indicates that the SCP is unable to process the request.</para>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-FIND service by issuing a C-FIND-CANCEL request at any time during the processing of the C-FIND service. The SCP will interrupt all matching and return a status of Canceled.</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para>A C-MOVE service conveys the following semantics:</para>
            <itemizedlist>
              <listitem>
                <para>The SCU supplies Unique Key values to identify an entity at the level of the retrieval. The SCP of the C-MOVE initiates C-STORE sub-operations for the corresponding storage SOP Instances identified by Unique Key values. These C-STORE sub-operations occur on a different Association than the C-MOVE service. The SCP role of the Query/Retrieve SOP Class and the SCU role of the Storage SOP Class may be performed by different applications that may or may not reside on the same system. Initiation mechanism of C-STORE sub-operations is outside of the scope of DICOM standard.</para>
                <note>
                  <para>This does not imply that they use the same AE Title. See <xref linkend="sect_C.6.1.2.2.2" xrefstyle="select: label"/> and <xref linkend="sect_C.6.2.2.2.2" xrefstyle="select: label"/> for the requirements to the C-MOVE SCP conformance.</para>
                </note>
              </listitem>
              <listitem>
                <para>The SCP may optionally generate responses to the C-MOVE with status equal to Pending during the processing of the C-STORE sub-operations. These C-MOVE responses indicate the number of Remaining C-STORE sub-operations and the number of C-STORE sub-operations returning the status of Success, Warning, and Failed.</para>
              </listitem>
              <listitem>
                <para>When the number of Remaining C-STORE sub-operations reaches zero, the SCP generates a final response with a status equal to Success, Warning, Failed, or Refused. This response may indicate the number of C-STORE sub-operations returning the status of Success, Warning, and Failed. If the status of a C-STORE sub-operation was Failed a UID List will be returned.</para>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-MOVE service by issuing a C-MOVE-CANCEL request at any time during the processing of the C-MOVE. The SCP terminates all incomplete C-STORE sub-operations and returns a status of Canceled.</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para>A C-GET service conveys the following semantics:</para>
            <itemizedlist>
              <listitem>
                <para>The SCU supplies Unique Key values to identify an entity at the level of the retrieval. The SCP generates C-STORE sub-operations for the corresponding storage SOP Instances identified by the Unique Key values. These C-STORE sub-operations occur on the same Association as the C-GET service and the SCU/SCP roles will be reversed for the C-STORE.</para>
              </listitem>
              <listitem>
                <para>The SCP may optionally generate responses to the C-GET with status equal to Pending during the processing of the C-STORE sub-operations. These C-GET responses indicate the number of Remaining C-STORE sub-operations and the number of C-STORE sub-operations returning the status of Success, Warning, and Failed.</para>
              </listitem>
              <listitem>
                <para>When the number of Remaining C-STORE sub-operations reaches zero, the SCP generates a final response with a status equal to Success, Warning, Failed, or Refused. This response may indicate the number of C-STORE sub-operations returning the status of Success, Warning, and Failed. If the status of a C-STORE sub-operation was Failed a UID List will be returned.</para>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-GET service by issuing a C-GET-CANCEL request at any time during the processing of the C-GET. The SCP terminates all incomplete C-STORE sub-operations and returns a status of Canceled.</para>
              </listitem>
            </itemizedlist>
          </listitem>
        </orderedlist>
      </section>
    </section>
    <section label="C.2" status="2" xml:id="sect_C.2">
      <title>Query/Retrieve Information Model Definition</title>
      <para>The Query/Retrieve Information Model is identified by the SOP Class negotiated at Association establishment time. The SOP Class is composed of both an Information Model and a DIMSE-C Service Group.</para>
      <note>
        <para>This SOP Class identifies the class of the Query/Retrieve Information Model (i.e., not the SOP Class of the stored SOP Instances for which the SCP has information).</para>
      </note>
      <para>Information Model Definitions for standard SOP Classes of the Query/Retrieve Service Class are defined in this Annex. A Query/Retrieve Information Model Definition contains:</para>
      <itemizedlist>
        <listitem>
          <para>Entity-Relationship Model Definition</para>
        </listitem>
        <listitem>
          <para>Key Attributes Definition</para>
        </listitem>
      </itemizedlist>
      <section label="C.2.1" status="3" xml:id="sect_C.2.1">
        <title>Entity-Relationship Model Definition</title>
        <para>For any Query/Retrieve Information Model, an Entity-Relationship Model defines a hierarchy of entities, with Attributes defined for each level in the hierarchy (e.g., Patient, Study, Series, Composite Object Instance).</para>
      </section>
      <section label="C.2.2" status="3" xml:id="sect_C.2.2">
        <title>Attributes Definition</title>
        <para>Attributes shall be defined at each level in the Entity-Relationship Model. An Identifier in a C-FIND, C-MOVE, or C-GET command shall contain values to be matched against the Attributes of the Entities in a Query/Retrieve Information Model. For any query, the set of entities for which Attributes are returned, shall be determined by the set of Key Attributes specified in the Identifier that have corresponding matches on entities managed by the SCP associated with the query.</para>
        <section label="C.2.2.1" status="4" xml:id="sect_C.2.2.1">
          <title>Attribute Types</title>
          <para>All Attributes of entities in a Query/Retrieve Information Model shall be either a Unique Key, Required Key, or Optional Key. The term Key Attributes refers to Unique, Required, and Optional Key Attributes.</para>
          <section label="C.2.2.1.1" status="5" xml:id="sect_C.2.2.1.1">
            <title>Unique Keys</title>
            <para>At each level in the Entity-Relationship Model, one Attribute shall be defined as a Unique Key. A single value in a Unique Key Attribute shall uniquely identify a single entity at a given level. That is, two entities at the same level may not have the same Unique Key value.</para>
            <para>C-FIND, C-MOVE, and C-GET SCPs shall support existence and matching of all Unique Keys defined by a Query/Retrieve Information Model. All entities managed by C-FIND, C-MOVE, and C-GET SCPs shall have a specific non-zero length Unique Key value.</para>
            <para>Unique Keys may be contained in the Identifier of a C-FIND request. Unique Keys shall be contained in the Identifier of C-MOVE and C-GET requests.</para>
          </section>
          <section label="C.2.2.1.2" status="5" xml:id="sect_C.2.2.1.2">
            <title>Required Keys</title>
            <para>At each level in the Entity-Relationship Model, a set of Attributes shall be defined as Required Keys. Required Keys imply the SCP of a C-FIND shall support matching based on a value contained in a Required Key of the C-FIND request. Multiple entities may have the same value for Required Keys. That is, a distinct value in a Required Key shall not necessarily identify a single entity at the level of the key.</para>
            <para>C-FIND SCPs shall support existence and matching of all Required Keys defined by a Query/Retrieve Information Model. If a C-FIND SCP manages an entity with a Required Key of zero length, the value is considered unknown and all matching against the zero length Required Key shall be considered a successful match.</para>
            <para>Required Keys may be contained in the Identifier of a C-FIND request. Required Keys shall not be contained in the Identifier of C-MOVE and C-GET requests.</para>
          </section>
          <section label="C.2.2.1.3" status="5" xml:id="sect_C.2.2.1.3">
            <title>Optional Keys</title>
            <para>At each level in the Entity-Relationship Model, a set of Attributes shall be defined as Optional Keys.</para>
            <para>Optional Keys contained in the Identifier of a C-FIND request may have three different types of behavior depending on support for existence and/or matching by the C-FIND SCP. If the C-FIND SCP:</para>
            <itemizedlist>
              <listitem>
                <para>does not support the existence of the Optional Key, then the Attribute shall not be returned in C-FIND responses</para>
              </listitem>
              <listitem>
                <para>supports the existence of the Optional Key but does not support matching on the Optional Key, then the Optional Key shall be processed in the same manner as a zero length Required Key. That is, the value specified to be matched for the Optional Key is ignored but a value may be returned by the SCP for this Optional Key.</para>
              </listitem>
              <listitem>
                <para>supports the existence and matching of the Optional Key, then the Optional Key shall be processed in the same manner as a Required Key.</para>
              </listitem>
            </itemizedlist>
            <note>
              <orderedlist>
                <listitem>
                  <para>C-FIND SCU may not assume an Optional Key with non-zero length will be processed in the same manner as a Required Key. The Conformance Statement of the C-FIND SCP shall list the Optional Keys that are supported.</para>
                </listitem>
                <listitem>
                  <para>Optional Keys are differentiated from Required Keys in that Optional Keys may or may not be supported for existence and/or matching by C-FIND SCPs. Whereas, Required Keys must always be supported by C-FIND SCPs.</para>
                </listitem>
              </orderedlist>
            </note>
            <para>Optional Keys may be contained in the Identifier of a C-FIND request. Optional Keys shall not be contained in the Identifier of C-MOVE and C-GET requests.</para>
          </section>
        </section>
        <section label="C.2.2.2" status="4" xml:id="sect_C.2.2.2">
          <title>Attribute Matching</title>
          <para>The following types of matching may be performed on Key Attributes in the Query/Retrieve Service Class:</para>
          <itemizedlist>
            <listitem>
              <para>Single Value Matching</para>
            </listitem>
            <listitem>
              <para>List of UID Matching</para>
            </listitem>
            <listitem>
              <para>Universal Matching</para>
            </listitem>
            <listitem>
              <para>Wild Card Matching</para>
            </listitem>
            <listitem>
              <para>Range Matching</para>
            </listitem>
            <listitem>
              <para>Sequence Matching</para>
            </listitem>
          </itemizedlist>
          <para>Matching requires special characters (i.e., "*","?","-", "=" and "\"), which need not be part of the character repertoire for the VR of the Key Attributes.</para>
          <note>
            <orderedlist>
              <listitem>
                <para>For example, the "-" character is not valid for the DA, DT and TM VRs but is used for range matching.</para>
              </listitem>
              <listitem>
                <para>When character sets other than the default character repertoire are used, then the rules in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> apply, such as with respect to the use of the 05/12 "\" (BACKSLASH) (in ISO IR 6) or 05/12 "¥" (YEN SIGN) (in ISO IR 14).</para>
              </listitem>
            </orderedlist>
          </note>
          <para>The total length of the Key Attribute may exceed the length as specified in the VR in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>. The Value Multiplicity (VM) may be larger than the VM specified in <olink targetdoc="PS3.6" targetptr="PS3.6" xrefstyle="select: labelnumber"/> for the Key Attribute, as defined for particular Matching Type.</para>
          <para>The Specific Character Set (0008,0005) Attribute may be present in the Identifier but is never matched. Rather, it specifies how other Attributes are encoded in the Request and Response Identifiers.</para>
          <para>It may influence how matching of other Attributes is performed. If Specific Character Set (0008,0005) is absent, then the default character repertoire shall be used. Specific Character Set (0008,0005) shall not have a zero length value.</para>
          <para>Specific Character Set (0008,0005) may have multiple values if escape sequences are used to switch between character repertoires within values.</para>
          <para>If the SCP does not support the value(s) of Specific Character Set (0008,0005) in the Request Identifier, then the manner in which matching is performed is undefined and shall be specified in the conformance statement.</para>
          <note>
            <orderedlist>
              <listitem>
                <para>If an SCU sends a Request Identifier with a single byte character set not supported by the SCP, then it is likely, but not required, that the SCP will treat unrecognized characters as wild cards and match only on characters in the default repertoire, and return a response in the default repertoire.</para>
              </listitem>
              <listitem>
                <para>Some Specific Character Set values are used with multi-component group person names (e.g., single-byte, ideographic and phonetic and phonetic component groups separated by an "=" (3DH) character), which may also affect the behavior of literal string matching.</para>
              </listitem>
            </orderedlist>
          </note>
          <para>The Timezone Offset From UTC (0008,0201) Attribute may be present in the Identifier but is not matched if Timezone query adjustment is negotiated. If Timezone query adjustment is negotiated, it specifies how date and time Attribute values are interpreted in the Request and Response Identifiers if those values lack a specific time zone offset specification.</para>
          <section label="C.2.2.2.1" status="5" xml:id="sect_C.2.2.2.1">
            <title>Single Value Matching</title>
            <para>If the value specified for a Key Attribute in a request is non-zero length and if it is:</para>
            <orderedlist numeration="loweralpha">
              <listitem>
                <para>not a date or time or datetime, contains no wild card characters</para>
              </listitem>
              <listitem>
                <para>a date or time or datetime, contains a single date or time or datetime with no "-"</para>
              </listitem>
            </orderedlist>
            <para>then single value matching shall be performed. Except for Attributes with a PN Value Representation, only entities with values that match exactly the value specified in the request shall match. This matching is case-sensitive, i.e., sensitive to the exact encoding of the key Attribute value in character sets where a letter may have multiple encodings (e.g., based on its case, its position in a word, or whether it is accented).</para>
            <para>For Attributes with a PN Value Representation (e.g., Patient Name (0010,0010)), an application may perform literal matching that is either case-sensitive, or that is insensitive to some or all aspects of case, position, accent, or other character encoding variants.</para>
            <note>
              <para>For multi-component names, the component group delimiter "=" (3DH) may be present in the Key Attribute value, but may give unexpected results if the SCP does not support matching on separate components but interprets the entire value literally as a single string. E.g., "Wang^XiaoDong=王^小東" may or may not match "Wang^XiaoDong" or "王^小東"; wild card matching without the component group delimiter, such as "*Wang^XiaoDong*" or "*王^小東 *" may be necessary.</para>
            </note>
            <para>If extended negotiation of fuzzy semantic matching rather than literal matching of PN Value Representation is successful, not only may matching be insensitive to case, position, accent, and character encoding, but in addition other techniques such as phonetic matching may be applied.</para>
            <para>If the Timezone Offset From UTC (0008,0201) Attribute is present in the Identifier and Timezone query adjustment was negotiated, it shall be used to adjust values of time Attributes (and associated date Attributes, if present) from the local timezone to UTC. It shall also adjust values of datetime Attributes that do not specify a timezone offset. The encoding and semantics of the Timezone Offset From UTC (0008,0201) Attribute shall be as defined in the SOP Common Module in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
            <para>The manner in which matching is performed is implementation dependent and shall be specified in the conformance statement.</para>
            <note>
              <orderedlist>
                <listitem>
                  <para>This definition implies that dates or times or datetimes are matched by their meaning, not as literal strings. For example:</para>
                  <itemizedlist>
                    <listitem>
                      <para>the DT "19980128103000.0000" matches "19980128103000"</para>
                    </listitem>
                    <listitem>
                      <para>the DT "19980128103000" with no timezone offset matches "19980128073000" with timezone offset "-0300"</para>
                    </listitem>
                    <listitem>
                      <para>the TM "2230" matches "223000"</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para>If an application is concerned about how single value matching of dates and times is performed by another application, it may consider using range matching instead, which is always performed by meaning, with both values in the range the same.</para>
                </listitem>
                <listitem>
                  <para>Exclusion of the "-" character for single value matching implies that a Key Attribute with DT Value Representation may not contain a negative offset from Universal Coordinated Time (UTC) if single value matching is intended. Use of the "-" character in date, time or datetime indicates range matching.</para>
                </listitem>
                <listitem>
                  <para>If an application is in a local time zone that has a negative offset then it cannot perform single value matching using a local time notation. Instead, it can convert the Key Attribute value to UTC and use an explicit suffix of "+0000".</para>
                </listitem>
                <listitem>
                  <para>Matching of PN Attributes may be accent-insensitive, as specified in the conformance statement. Accent-insensitive matching would successfully match, for instance, a query character "SMALL LETTER a" (06/01 in the default ISO-IR 6) with</para>
                  <itemizedlist mark="none">
                    <listitem>
                      <para>"SMALL LETTER a WITH GRAVE ACCENT" (14/00 in ISO-IR 100),</para>
                    </listitem>
                    <listitem>
                      <para>"SMALL LETTER a WITH TILDE" (14/03 in ISO-IR 100),</para>
                    </listitem>
                    <listitem>
                      <para>"SMALL LETTER a WITH BREVE" (14/03 in ISO-IR 101), and</para>
                    </listitem>
                    <listitem>
                      <para>"CAPITAL LETTER a WITH ACUTE ACCENT" (12/01 in ISO-IR 100) (if matching is also case-insensitive),</para>
                    </listitem>
                  </itemizedlist>
                  <para>but would not match 14/00 in ISO-IR 101, which is "SMALL LETTER r WITH ACUTE ACCENT". Matching to particular bit-combinations is specific to each supported character set (note the difference in meaning of 14/00), and should be described in the conformance statement.</para>
                </listitem>
                <listitem>
                  <para>An SCU application may elect to perform additional filtering of the responses by applying the matching rules itself. In the event that both the SCU and SCP are applying the matching rules, this process will be successful as long as literal matching is performed by both, and any additional SCU filtering is insensitive to case, position, accent, or other character encoding variants.</para>
                </listitem>
              </orderedlist>
            </note>
            <para>However if fuzzy semantic matching of PN Attributes has been negotiated, matching by the SCP may result in responses that are not obviously related to the request, hence care should be taken if any additional filtering of responses is performed by the SCU. For example, if phonetic matching is performed, a query for "Swain" might well return "Swayne", or if name component order insensitive matching is performed, a query for "Smith^Mary" might well return "Mary^Smith" or "Mary Smith" or "Smith, Mary". Fuzzy semantic matching may also take into account separate single-byte, ideographic and phonetic name component groups.</para>
          </section>
          <section label="C.2.2.2.2" status="5" xml:id="sect_C.2.2.2.2">
            <title>List of UID Matching</title>
            <para>A List of UIDs is encoded by using the value multiplicity operator, backslash ("\"), as a delimiter between UIDs. Each item in the list shall contain a single UID value. Each UID in the list contained in the Identifier of the request may generate a match.</para>
            <note>
              <para>A list of single values is encoded exactly as a VR of UI and a VM of Multiple (see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
            </note>
          </section>
          <section label="C.2.2.2.3" status="5" xml:id="sect_C.2.2.2.3">
            <title>Universal Matching</title>
            <para>If the value specified for a Key Attribute in a request is zero length, then all entities shall match this Attribute. An Attribute that contains a Universal Match specification in a C-FIND request provides a mechanism to request the selected Attribute value be returned in corresponding C-FIND responses.</para>
          </section>
          <section label="C.2.2.2.4" status="5" xml:id="sect_C.2.2.2.4">
            <title>Wild Card Matching</title>
            <para>If the Attribute is not a date, time, signed long, signed short, unsigned short, unsigned long, floating point single, floating point double, other byte string, other word string, unknown, Attribute tag, decimal string, integer string, age string or UID and the value specified in the request contains any occurrence of an "*" or a "?", then "*" shall match any sequence of characters (including a zero length value) and "?" shall match any single character. This matching is case sensitive, except for Attributes with an PN Value Representation (e.g., Patient Name (0010,0010)).</para>
            <para>For Attributes with a PN value representation, including the case of extended negotiation of fuzzy semantic matching, wild card matching is implementation dependent and shall be specified in the conformance statement.</para>
            <note>
              <orderedlist>
                <listitem>
                  <para>Wild card matching on a value of "*" is equivalent to universal matching.</para>
                </listitem>
                <listitem>
                  <para>The wild card matching method specified by DICOM might not be supported by some non-DICOM multi-byte character text processors.</para>
                </listitem>
                <listitem>
                  <para>For multi-component group names, the component group delimiter "=" (3DH) may be present in the Key Attribute value, but may give unexpected results if the SCP does not support matching on separate components but interprets the entire value literally. E.g., "*=*" or "*=*=*" may or may not return all strings, and hence is not equivalent to "*", nor to universal matching.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
          <section label="C.2.2.2.5" status="5" xml:id="sect_C.2.2.2.5">
            <title>Range Matching</title>
            <para>In the absence of extended negotiation, if the Attribute is a date, then:</para>
            <orderedlist numeration="loweralpha">
              <listitem>
                <para>A string of the form "&lt;date1&gt; - &lt;date2&gt;", where &lt;date1&gt; is less or equal to &lt;date2&gt;, shall match all occurrences of dates that fall between &lt;date1&gt; and &lt;date2&gt; inclusive</para>
              </listitem>
              <listitem>
                <para>A string of the form "- &lt;date1&gt;" shall match all occurrences of dates prior to and including &lt;date1&gt;</para>
              </listitem>
              <listitem>
                <para>A string of the form "&lt;date1&gt; -" shall match all occurrences of &lt;date1&gt; and subsequent dates</para>
              </listitem>
            </orderedlist>
            <para>In the absence of extended negotiation, if the Attribute is a time, then:</para>
            <orderedlist numeration="loweralpha">
              <listitem>
                <para>A string of the form "&lt;time1&gt; - &lt;time2&gt;", where &lt;time1&gt; is less or equal to &lt;time2&gt;, shall match all occurrences of times that fall between &lt;time1&gt; and &lt;time2&gt; inclusive</para>
              </listitem>
              <listitem>
                <para>A string of the form "- &lt;time1&gt;" shall match all occurrences of times prior to and including &lt;time1&gt;</para>
              </listitem>
              <listitem>
                <para>A string of the form "&lt;time1&gt; -" shall match all occurrences of &lt;time1&gt; and subsequent times</para>
              </listitem>
            </orderedlist>
            <para>If the Attribute is a datetime, then:</para>
            <orderedlist numeration="loweralpha">
              <listitem>
                <para>A string of the form "&lt;datetime1&gt; - &lt;datetime2&gt;", where &lt;datetime1&gt; is less or equal to &lt;datetime2&gt;, shall match all moments in time that fall between &lt;datetime1&gt; and &lt;datetime2&gt; inclusive</para>
              </listitem>
              <listitem>
                <para>A string of the form "- &lt;datetime1&gt;" shall match all moments in time prior to and including &lt;datetime1&gt;</para>
              </listitem>
              <listitem>
                <para>A string of the form "&lt;datetime1&gt; -" shall match all moments in time subsequent to and including &lt;datetime1&gt;</para>
              </listitem>
              <listitem>
                <para>The offset from Universal Coordinated Time, if present in the Value of the Attribute, shall be taken into account for the purposes of the match.</para>
              </listitem>
            </orderedlist>
            <para>If extended negotiation of combined datetime matching is successful, then a pair of Attributes that are a date and a time, both of which specify the same form of range matching, shall have the concatenated string values of each range matching component matched as if they were a single datetime Attribute.</para>
            <note>
              <para>For example, a Study Date of "20060705-20060707" and a Study Time of "1000-1800" will match the time period of July 5, 10am until July 7, 6pm, rather than the three time periods of 10am until 6pm on each of July 5, July 6 and July 7, as would be the case without extended negotiation.</para>
            </note>
            <para>Regardless of other extended negotiation, an application may use the value of Timezone Offset From UTC (0008,0201) to adjust values of time and datetime Attributes from the local timezone to UTC for matching. See <xref linkend="sect_C.2.2.2.1" xrefstyle="select: label"/>.</para>
            <note>
              <para>If extended negotiation of combined datetime matching is successful, the timezone offset may effect a change in date if the local time and UTC are on different sides of midnight.</para>
            </note>
            <para>Range matching is not defined for types of Attributes other than dates and times.</para>
          </section>
          <section label="C.2.2.2.6" status="5" xml:id="sect_C.2.2.2.6">
            <title>Sequence Matching</title>
            <para>If a Key Attribute in the Identifier of a C-FIND request needs to be matched against an Attribute structured as a Sequence of Items (Value Representation of Type SQ), the Key Attribute shall be structured as a Sequence of Items with a single Item. This Item may contain zero or more Item Key Attributes. Each Item Key Attribute matching shall be performed on an Item by Item basis. The types of matching defined in <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> shall be used: Single Value Matching, List of UID Matching, Universal Matching, Wild Card Matching, Range Matching and Sequence Matching (recursive Sequence matching).</para>
            <para>If all the Item Key Attributes match, for at least one of the Items of the Attribute against which the match is performed, a successful match is generated. A sequence of matching Items containing only the requested Attributes is returned in the corresponding C-FIND responses.</para>
            <para>If the Key Attribute in the Identifier of a C-FIND request contains no Key Item Attribute (zero-length Item Tag), then all entities shall match this Attribute. This provides a universal matching like mechanism to request that the selected Key Attribute value (the entire Sequence of Items) be returned in corresponding C-FIND responses.</para>
          </section>
        </section>
        <section label="C.2.2.3" status="4" xml:id="sect_C.2.2.3">
          <title>Matching Multiple Values</title>
          <para>When matching an Attribute that has a value multiplicity of greater than one, if any of the values match, then all values shall be returned.</para>
        </section>
      </section>
    </section>
    <section label="C.3" status="2" xml:id="sect_C.3">
      <title>Standard Query/Retrieve Information Models</title>
      <para>Three standard Query/Retrieve Information Models are defined in this Annex. Each Query/Retrieve Information Model is associated with a number of SOP Classes. The following three hierarchical Query/Retrieve Information Models are defined:</para>
      <itemizedlist>
        <listitem>
          <para>Patient Root</para>
        </listitem>
        <listitem>
          <para>Study Root</para>
        </listitem>
        <listitem>
          <para>Patient/Study Only</para>
        </listitem>
      </itemizedlist>
      <section label="C.3.1" status="3" xml:id="sect_C.3.1">
        <title>Patient Root Query/Retrieve Information Model</title>
        <para>The Patient Root Query/Retrieve Information Model is based upon a four level hierarchy:</para>
        <itemizedlist>
          <listitem>
            <para>Patient</para>
          </listitem>
          <listitem>
            <para>Study</para>
          </listitem>
          <listitem>
            <para>Series</para>
          </listitem>
          <listitem>
            <para>Composite Object Instance</para>
          </listitem>
        </itemizedlist>
        <para>The patient level is the top level and contains Attributes associated with the Patient Information Entity (IE) of the Composite IODs as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. Patients IEs are modality independent.</para>
        <para>The study level is below the patient level and contains Attributes associated with the Study IE of the Composite IODs as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. A study belongs to a single patient. A single patient may have multiple studies. Study IEs are modality independent.</para>
        <para>The series level is below the study level and contains Attributes associated with the Series, Frame of Reference and Equipment IEs of the Composite IODs as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. A series belongs to a single study. A single study may have multiple series. Series IEs are modality dependent. To accommodate this modality dependence, the set of Optional Keys at the series level includes all Attributes defined at the series level from any Composite IOD defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
        <para>The lowest level is the Composite Object Instance level and contains Attributes associated with the Composite object IE of the Composite IODs as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. A Composite Object Instance belongs to a single series. A single series may contain multiple Composite Object Instances. Most composite object IEs are modality dependent. To accommodate this potential modality dependence, the set of Optional Keys at the Composite Object Instance level includes all Attributes defined at the Composite Object Instance level from any Composite IOD defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="C.3.2" status="3" xml:id="sect_C.3.2">
        <title>Study Root Query/Retrieve Information Model</title>
        <para>The Study Root Query/Retrieve Information Model is identical to the Patient Root Query/Retrieve Information Model except the top level is the study level. Attributes of patients are considered to be Attributes of studies.</para>
      </section>
      <section label="C.3.3" status="3" xml:id="sect_C.3.3">
        <title>Patient/Study Only Query/Retrieve Information Model</title>
        <para>Retired. See PS 3.4-2004.</para>
      </section>
      <section label="C.3.4" status="3" xml:id="sect_C.3.4">
        <title>Additional Query/Retrieve Attributes</title>
        <para>Some optional Attributes that may be used in Query/Retrieve Information Models that are not Attributes of an Information Object Definition and, therefore, are not defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. These Attributes are defined in <xref linkend="table_C.3-1" xrefstyle="select: label"/>.</para>
        <table frame="box" label="C.3-1" rules="all" xml:id="table_C.3-1">
          <caption>Additional Query/Retrieve Attributes</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Attribute Name</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Tag</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Attribute Description</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Number of Patient Related Studies</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0020,1200)</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The number of studies that match the Patient level Query/Retrieve search criteria</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Number of Patient Related Series</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0020,1202)</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The number of series that match the Patient level Query/Retrieve search criteria</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Number of Patient Related Instances</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0020,1204)</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The number of Composite Object Instances that match the Patient level Query/Retrieve search criteria</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Number of Study Related Series</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0020,1206)</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The number of series that match the Study level Query/Retrieve search criteria</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Number of Series Related Instances</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0020,1209)</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The number of Composite Object Instances in a Series that match the Series level Query/Retrieve search criteria</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Number of Study Related Instances</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0020,1208)</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The number of Composite Object Instances that match the Study level Query/Retrieve search criteria</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Modalities in Study</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0008,0061)</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>All of the distinct values used for Modality (0008,0060) in the Series of the Study.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>SOP Classes in Study</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0008,0062)</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The SOP Classes contained in the Study.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Alternate Representation Sequence</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0008,3001)</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A Sequence of Items, each identifying an alternate encoding of an image that matches the Instance level Query/Retrieve search criteria (see <xref linkend="sect_C.6.1.1.5.1" xrefstyle="select: label"/>)</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>If the SCP manages images in multiple alternate encodings, only one of the alternate encodings of an image is included in the number of object instances.</para>
      </section>
      <section label="C.3.5" status="3" xml:id="sect_C.3.5">
        <title>New Instance Creation for Enhanced Multi-Frame Image Conversion</title>
        <para>When Query/Retrieve View (0008,0053) is present with a value of "CLASSIC" or "ENHANCED" in a C-FIND, C-MOVE or C-GET Request Identifier, then the Information Model against which the query or retrieval is performed and any SOP Instances that are retrieved shall be returned, constructed or converted according to the requirements in this section.</para>
        <para>There are no requirements with respect to when such instances are actually created or persisted, only that they be available on request. I.e., they may be created in advance (cached) or they may be created dynamically as required, as long as the process is deterministic in the sense that the same Attributes will be populated with the same values on successive queries and retrievals (including UIDs).</para>
        <note>
          <orderedlist>
            <listitem>
              <para>The UID generation process is required to be deterministic but it is important to remember that appending a suffix to an existing UID is not a valid approach to generating a new UID, unless the converter is the producer (owner of the root) of the original UID and knows that this is safe and the result will be unique.</para>
            </listitem>
            <listitem>
              <para>The cross-references between original and converted instances contain sufficient information to recover UIDs in the alternative form.</para>
            </listitem>
          </orderedlist>
        </note>
        <para>All instances for a Patient known to the SCP shall be converted as necessary to maintain referential integrity and to avoid information loss.</para>
        <note>
          <orderedlist>
            <listitem>
              <para>It is not permitted to fail to include a subset of instances within this scope, for example, the presentation states or key object selection documents, in the "ENHANCED" view, in order to avoid the effort of creating new instances with updated references required to maintain referential integrity. In other words, the total "information content" of any view will be no less than that of the default view.</para>
            </listitem>
            <listitem>
              <para>This does not mean that all instances need to be converted, since if they contain no such references, they can be left alone and included in the view. For example, a Classic single slice CT localizer image with no references can remain unchanged in the view as a CT Image Storage SOP Class with its existing SOP Instance UID and SOP Class and in its existing Series, and be referenced from converted instances, such as the axial images prescribed from it. An SCU cannot make any assumptions about what will or will not be converted, or in what order.</para>
            </listitem>
            <listitem>
              <para>It is understood that the requirements of this section are applicable to a single SCP; it is not possible to require all SCPs that perform conversion to perform it the same way, or create the same UIDs, etc.</para>
            </listitem>
          </orderedlist>
        </note>
        <para>In addition to the general requirements in this section, specific requirements apply to the following types of instance created:</para>
        <itemizedlist>
          <listitem>
            <para>Enhanced (true or legacy converted) multi-frame images that are created from Classic single frame images</para>
          </listitem>
          <listitem>
            <para>Classic single frame images that are created from Enhanced (true or legacy converted) multi-frame images</para>
          </listitem>
          <listitem>
            <para>Instances that contain references to the SOP Instance UIDs or Series Instance UIDs corresponding to either the converted single frame images, or other instances with such references</para>
          </listitem>
        </itemizedlist>
        <para>The general requirements are that:</para>
        <itemizedlist>
          <listitem>
            <para>The new Composite Instance shall have a new SOP Instance UID.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall be a valid SOP Instance (i.e., will comply with the IOD, Module and Attribute requirements for the Storage SOP Class).</para>
          </listitem>
        </itemizedlist>
        <para>- The new Composite Instance shall contain the Contributing Equipment Sequence (0018,A001). If the source Composite Instances already contain the Contributing Equipment Sequence with a consistent set of Item values (excluding Contribution DateTime (0018,A002)), then a new Item shall be appended to the copy of the sequence in the new Composite Instance; if the source Composite Instance does not contain the Contributing Equipment Sequence or the Item values (excluding Contribution DateTime (0018,A002)) differ between source instances, then Contributing Equipment Sequence shall be created, containing one new Item. In either case, the new Item shall describe the equipment that is creating the new Composite Instance, and the Purpose of Reference Code Sequence (0040,A170) within the Item shall be (ddddd1, DCM, "Enhanced Multi-frame Conversion Equipment") and the Contribution Description (0018,A003) shall be "Legacy Enhanced Image created from Classic Images", "Classic Image
  created from Enhanced Image", or "Updated UID references during Legacy Enhanced Classic conversion" as appropriate.</para>
        <itemizedlist>
          <listitem>
            <para>The new Composite Instance shall have the same Patient and Study level information as the source Instance, including the same Study Instance UID.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall have the same spatial and temporal Frame of Reference information as the source instance, if present (e.g., the Frame of Reference UID shall be the same).</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall be placed in a new Series (together with other new Composite Instances that share the same, new Series level information), with a new Series Instance UID. The Series Date (0008,0021) and Series Time (0008,0031) of all the Instances in the new Series shall be the earliest of the values in the source Composite Instances, if present.</para>
            <note>
              <orderedlist>
                <listitem>
                  <para>The new Series Date and Time shall NOT be that of when the conversion was performed, but shall reflect the values in the source images.</para>
                </listitem>
                <listitem>
                  <para>There is no standard requirement or mechanism defined to change or preserve other Series level Attributes, such as Series Number or Series Description. This is left to the discretion of the implementer, particularly in cases where instances from different Series are merged.</para>
                </listitem>
              </orderedlist>
            </note>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall have the same Items and Values of Request Attributes Sequence (0040,0275) as the source Composite Instances, if Request Attributes Sequence (0040,0275) is present in any of the source Composite Instances.</para>
          </listitem>
          <listitem>
            <para>If the new Composite Instance contains references to another entity for the same Patient (including, but not limited to, references to SOP Instances, Series, Studies or Frames of Reference), and the target of those references is also converted, then the references shall be changed to refer to the converted entity.</para>
            <note>
              <orderedlist>
                <listitem>
                  <para>For example, if the source instance refers to an instance in a Series, and the referenced instance is also converted, and hence placed in a new Series, then both the SOP Instance UID and the Series Reference UID in the hierarchical reference to the instance will need to be updated, as will the SOP Class UID of the referenced instance, if that has changed, as it likely will have.</para>
                </listitem>
                <listitem>
                  <para>The overall intent is to maintain referential integrity within the converted set of instances, within the scope of the same Patient. Since it is likely that most if not all non-image instances for a patient will reference images that will be converted, this means that most if not all non-image instances will also have to be "converted", for the purpose of updating such references. This referential integrity is required regardless of whether the initial request is for a subset of instances for the patient only, or not.</para>
                </listitem>
                <listitem>
                  <para>The UIDs referenced in Conversion Source Attributes Sequence (0020,9172) are not converted, since by definition, these reference instances in the "other" view; they should not exist in the source, but will be inserted (or be replaced, if previously converted) during conversion.</para>
                </listitem>
              </orderedlist>
            </note>
          </listitem>
        </itemizedlist>
        <para>The specific requirements for the conversion of single frame images to Enhanced Multi-frame images are:</para>
        <itemizedlist>
          <listitem>
            <para>The SOP Class of the new Composite Instance shall be the appropriate modality-specific Enhanced Image Storage SOP Class that is intended for de novo creation by an acquisition or post-processing device, unless the source images do not contain sufficient information to populate mandatory Attributes with standard Enumerated Values and Defined Terms or Coded Sequence Item values, in which case the appropriate modality-specific Legacy Converted Enhanced Image Storage SOP Class shall be used. The appropriate SOP Classes are defined in <xref linkend="table_C.3.5-1" xrefstyle="select: label"/>.</para>
            <note>
              <orderedlist>
                <listitem>
                  <para>For example, if the source images to be converted are of the CT Image Storage SOP Class, then the preferred new SOP Class is the Enhanced CT Image Storage SOP Class, but if this is not possible, the Legacy Converted Enhanced CT Image Storage SOP Class is used.</para>
                </listitem>
                <listitem>
                  <para>It is not intended that images from different modalities be combined in the same new Composite Instance. For example, it is not expected that CT and PET images would be combined in the same Instance, since the technique Attributes and the pixel data characteristics are quite distinct.</para>
                </listitem>
                <listitem>
                  <para>It is expected that as many single frame images will be combined into a single multi-frame image as is sensible, given the constrains on what Attributes must be identical as defined in this section, and depending on the type of images and the size of the resulting object. Different implementations may make different choices in this respect. For example, an application might choose to combine only images in the same Series, or with the same slice spacing, or the same values for Image Type, or with the same Image Orientation (Patient).</para>
                </listitem>
              </orderedlist>
            </note>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall not be contained in a Concatenation. This means that it shall not contain a Concatenation UID (0020,9161) Attribute or other Concatenation Attributes. If the existing Composite Instance contains such Attributes, they shall not be included in the new Composite Instance.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance contains only one set of Attributes for the Image Pixel Module, hence the contents of the Image Pixel Module shall either be identical in all source images, or the Pixel Data for each frame shall be converted as necessary to match the Image Pixel Module of the new Composite Instance.</para>
            <note>
              <orderedlist>
                <listitem>
                  <para>In particular this means that the values of Rows, Columns, Bits Stored, Bits Allocated, High Bit, Pixel Representation, Samples per Pixel, Photometric Interpretation and Planar Configuration applicable to all of the frames needs to be the same. In special cases, such as where Bits Stored is less than Bits Allocated but varies per frame, it may be safe to use the largest value for all the frames and ensure that any unused high bits are appropriately masked before encoding. It is not expected that source images with different numbers of Rows and Columns will be combined (by padding the periphery of images smaller than the largest); quite apart from not being the intended use case, this has the potential to greatly expand the size of the instance, and might also require adjustment of the Image Position (Patient) values.</para>
                </listitem>
                <listitem>
                  <para>Special attention should be given to the Pixel Padding Value and associated Attributes, in case these vary per frame in the source images, in which case the Pixel Data for some frames may need to be modified to be consistent with all the other frames.</para>
                </listitem>
                <listitem>
                  <para>It is possible to change the Image Pixel Module Attributes related to compressed Transfer Syntaxes (including lossy or irreversible compression) during conversion.</para>
                </listitem>
              </orderedlist>
            </note>
          </listitem>
          <listitem>
            <para>All mandatory Attributes of all mandatory Modules and Functional Group Macros of the SOP Class of the new Composite Instance shall be populated as required by the IOD. In this context, "mandatory" means either required or conditional where the condition is satisfied.</para>
            <note>
              <para>For example, if the source images to be converted are of the CT Image Storage SOP Class, and the new Composite Instance is of the Legacy Converted Enhanced CT Image Storage SOP Class, then it is required that the Pixel Measures Functional Group be populated from Pixel Spacing, that the Plane Position (Patient) Functional Group be populated from Image Position (Patient), etc. In addition, if Body Part Examined is present in the source images with a standard value, then the condition for the inclusion of the Frame Anatomy Functional Group is satisfied, and the value therein needs to be converted to the appropriate Anatomic Region Sequence code.</para>
            </note>
          </listitem>
          <listitem>
            <para>All optional Attributes, Modules and Functional Group Macros for which corresponding information is present in the source images in standard Attributes shall also be populated.</para>
          </listitem>
          <listitem>
            <para>All Attributes of the Overlay Module shall be removed and converted into a Grayscale or Color Softcopy Presentation State (depending on the value of Photometric Interpretation); if the Overlay uses high bits in the Pixel Data (7FE0,0010) these shall be extracted and encoded in Overlay Data (60xx,3000) in the Presentation State and shall be set to zero in the Pixel Data (7FE0,0010) Attribute in the converted image.</para>
            <note>
              <para>The extraction of Overlays from multiple frames may lead to a proliferation of GSPS Instances (one per converted frame), unless the converter recognizes commonality in the binary values of overlay bit planes and factors it out into fewer GSPS objects that each apply to multiple frames.</para>
            </note>
          </listitem>
          <listitem>
            <para>All Attributes of the Curve Module (retired, but formerly defined in DICOM) shall be removed; they may be converted into a Grayscale or Color Softcopy Presentation State (depending on the value of Photometric Interpretation) or a Waveform as appropriate, but this is not required.</para>
          </listitem>
          <listitem>
            <para>All Attributes of the Graphic Annotation Sequence (0070,0001) (not defined in Classic image IODs, but sometimes used in a Standard Extended SOP Class) shall be removed; they may be converted into a Grayscale or Color Softcopy Presentation State (depending on the value of Photometric Interpretation), but this is not required.</para>
          </listitem>
          <listitem>
            <para>All remaining Attributes in the source images (i.e., those that have not been used to populate mandatory or optional Attributes in Modules and Functional Groups), including Private Attributes, shall be copied into the top-level Data Set or the Unassigned Shared Converted Attributes Sequence (0020,9170) if they are present in all of the source images for the new Composite Instance, have the same number of values, and have the same values, otherwise they shall be copied into the Unassigned Per-Frame Converted Attributes Sequence (0020,9171).</para>
            <note>
              <para>The semantics of Private Attributes, or Standard Attributes used in a Standard Extended SOP Class, might not be maintained, being unknown to the converting application; for example, referential integrity of UIDs in Private Attributes might not be updated.</para>
            </note>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall contain references to the source Instances from which it was converted, encoded in the Conversion Source Reference Functional Group Macro.</para>
          </listitem>
        </itemizedlist>
        <para>The specific requirements for the conversion of Enhanced Multi-frame images to Classic single frame images are:</para>
        <itemizedlist>
          <listitem>
            <para>The SOP Class of the new Composite Instance shall be the appropriate modality-specific (Classic) Image Storage SOP Class that is intended for de novo creation by an acquisition or post-processing device.</para>
            <note>
              <para>For example, if the source images to be converted are of the Enhanced CT Image Storage SOP Class or the Legacy Converted Enhanced CT Image Storage SOP Class, then the new SOP Class is the CT Image Storage SOP Class.</para>
            </note>
          </listitem>
          <listitem>
            <para>All mandatory Attributes of the IOD of the SOP Class of the new Composite Instance shall be populated. In this context, "mandatory" means either required or conditional where the condition is satisfied.</para>
            <note>
              <para>For example, if the source images to be converted are of the Legacy Converted Enhanced CT Image Storage SOP Class, and the new Composite Instance is of the CT Image Storage SOP Class, then it is required that Pixel Spacing be populated from the Pixel Measures Functional Group, that Image Position (Patient) be populated from the Plane Position (Patient) Functional Group, etc.</para>
            </note>
          </listitem>
          <listitem>
            <para>All optional Attributes in Modules of the IOD for which corresponding information is present in the source images shall also be populated.</para>
          </listitem>
          <listitem>
            <para>All remaining Attributes in the source images (i.e., those that have not been used to populate mandatory or optional Attributes in Modules), including Private Attributes, shall be copied from the top-level Data Set and the Shared Functional Group Macro and the corresponding Item of the Per-Frame Functional Group Macro into the top-level Data Set of the new Composite Instance, including those in the Unassigned Shared Converted Attributes Sequence (0020,9170) and the corresponding Item of the Unassigned Per-Frame Converted Attributes Sequence (0020,9171) (which will result in a Standard Extended SOP Class).</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>Identifying Attributes, such as Series Number or Series Description, will be present in the Unassigned functional groups, and UIDs will be present in the Conversion Source Attributes Sequence, allowing, for example, the original Series organization to be recovered, whether or not a single Series was previously converted into a single Legacy Converted instance or it was split or merged with other Series.</para>
                </listitem>
                <listitem>
                  <para>The integrity of the set of Private Attributes recovered in this manner cannot be guaranteed to result in the correct function of any applications that depend on them, but the expectation is that this will be no better or worse than the impact of storing instances with private Attributes on any Storage SCP that may or may not reorganize and/or selectively preserve Private Attributes.</para>
                </listitem>
              </orderedlist>
            </note>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall contain references to the source Instances from which it was converted, encoded in the Conversion Source Attributes Sequence (0020,9172) in the SOP Common Module.</para>
          </listitem>
        </itemizedlist>
        <para>The specific requirements for the conversion of other instances are:</para>
        <itemizedlist>
          <listitem>
            <para>The new Composite Instance shall be an instance of the same SOP Class as the source Composite Instance.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall contain references to the source Instances from which it was converted, encoded in the Conversion Source Attributes Sequence (0020,9172) in the SOP Common Module.</para>
          </listitem>
        </itemizedlist>
        <table frame="box" label="C.3.5-1" rules="all" xml:id="table_C.3.5-1">
          <caption>Modality-Specific SOP Class Conversions</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Classic</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">True Enhanced</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Legacy Converted Enhanced</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>CT Image Storage</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Enhanced CT Image Storage</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Legacy Converted Enhanced CT Image Storage</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>MR Image Storage</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Enhanced MR Image Storage</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Legacy Converted Enhanced MR Image Storage</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>PET Image Storage</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Enhanced PET Image Storage</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Legacy Converted Enhanced PET Image Storage</para>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
    <section label="C.4" status="2" xml:id="sect_C.4">
      <title>DIMSE-C Service Groups</title>
      <para>Three DIMSE-C Services are used in the construction of SOP Classes of the Query/Retrieve Service Class. The following DIMSE-C operations are used:</para>
      <itemizedlist>
        <listitem>
          <para>C-FIND</para>
        </listitem>
        <listitem>
          <para>C-MOVE</para>
        </listitem>
        <listitem>
          <para>C-GET</para>
        </listitem>
      </itemizedlist>
      <section label="C.4.1" status="3" xml:id="sect_C.4.1">
        <title>C-FIND Operation</title>
        <para>SCPs of some SOP Classes of the Query/Retrieve Service Class may be capable of processing queries using the C-FIND operation as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. The C-FIND operation is the mechanism by which queries are performed. Matches against the keys present in the Identifier are returned in C-FIND responses.</para>
        <section label="C.4.1.1" status="4" xml:id="sect_C.4.1.1">
          <title>C-FIND Service Parameters</title>
          <section label="C.4.1.1.1" status="5" xml:id="sect_C.4.1.1.1">
            <title>SOP Class UID</title>
            <para>The SOP Class UID identifies the Query/Retrieve Information Model against which the C-FIND is to be performed. Support for the SOP Class UID is implied by the Abstract Syntax UID of the Presentation Context used by this C-FIND operation.</para>
          </section>
          <section label="C.4.1.1.2" status="5" xml:id="sect_C.4.1.1.2">
            <title>Priority</title>
            <para>The Priority Attribute defines the requested priority of the C-FIND operation with respect to other DIMSE operations being performed by the same SCP.</para>
            <para>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP.</para>
          </section>
          <section label="C.4.1.1.3" status="5" xml:id="sect_C.4.1.1.3">
            <title>Identifier</title>
            <para>Both the C-FIND request and response contain an Identifier encoded as a Data Set (see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
            <note>
              <para>The definition of a Data Set in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> specifically excludes the range of groups below group 0008, and this includes in particular Meta Information Header elements such as Transfer Syntax UID (0002,0010). The C-FIND request and identifier do not support a mechanism for ascertaining the manner in which an SCP might have encoded a stored image whether it be by requesting Transfer Syntax UID (0002,0010) or by any other mechanism.</para>
            </note>
            <section label="C.4.1.1.3.1" status="6" xml:id="sect_C.4.1.1.3.1">
              <title>Request Identifier Structure</title>
              <para>An Identifier in a C-FIND request shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Key Attributes values to be matched against the values of storage SOP Instances managed by the SCP.</para>
                </listitem>
                <listitem>
                  <para>Query/Retrieve Level (0008,0052), which defines the level of the query.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Query/Retrieve View (0008,0053). This Attribute may be included if Enhanced Multi-Frame Image Conversion has been accepted during Association Extended Negotiation. It shall not be included otherwise.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Request Identifier. It shall not be included otherwise.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Timezone Offset From UTC (0008,0201). This Attribute shall be included if Key Attributes of time are to be interpreted explicitly in the designated local time zone. It shall not be present otherwise, i.e., it shall not be sent with a zero-length value.</para>
                </listitem>
              </itemizedlist>
              <para>The Key Attributes and values allowable for the level of the query shall be defined in the SOP Class definition for the Query/Retrieve Information Model.</para>
            </section>
            <section label="C.4.1.1.3.2" status="6" xml:id="sect_C.4.1.1.3.2">
              <title>Response Identifier Structure</title>
              <para>The C-FIND response shall not contain Attributes that were not in the request or specified in this section.</para>
              <para>An Identifier in a C-FIND response shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Key Attributes with values corresponding to Key Attributes contained in the Identifier of the request.</para>
                  <note>
                    <orderedlist numeration="arabic">
                      <listitem>
                        <para>All Required Keys in the Request Identifier, as well as all Optional Keys in the Request Identifier that are supported by the SCP, will therefore be present in the Response Identifier.</para>
                      </listitem>
                      <listitem>
                        <para>Required Keys and supported Optional Keys in the Response Identifier will have zero length if the SCP has no value to send; i.e., there is no requirement that the SCP have a value for these, or create a dummy value.</para>
                      </listitem>
                      <listitem>
                        <para>The requirement that unsupported Optional Keys present in the Request Identifier not be included in the Response Identifier is specified in <xref linkend="sect_C.2.2.1.3" xrefstyle="select: label"/>.</para>
                      </listitem>
                    </orderedlist>
                  </note>
                </listitem>
                <listitem>
                  <para>Query/Retrieve Level (0008,0052), which defines the level of the query. The Query/Retrieve level shall be equal to the level specified in the request.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Response Identifier. It shall not be included otherwise. The C-FIND SCP is not required to return responses in the Specific Character Set requested by the SCU if that character set is not supported by the SCP. The SCP may return responses with a different Specific Character Set.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Timezone Offset From UTC (0008,0201). This Attribute shall be included if any Attributes of time in the Response Identifier are to be interpreted explicitly in the designated local time zone. It shall not be present otherwise, i.e., it shall not be sent with a zero-length value.</para>
                </listitem>
              </itemizedlist>
              <para>The C-FIND SCP is required to support either or both the Retrieve AE Title Data Element or the Storage Media File-Set ID/Storage Media File Set UID Data Elements. An Identifier in a C-FIND response shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Storage Media File-Set ID (0088,0130), which defines a user or implementation specific human readable Identifier that identifies the Storage Media on which the Composite Object Instance(s); reside. This element pertains to the set of Composite Object Instances available at the Query/Retrieve Level specified in the Identifier of the C-FIND request (e.g., Patient, Study, Series, Composite Object Instance). This Attribute shall be present if the Retrieve AE Title Data Element is not present. A null value (Data Element length of 0) is valid for all levels except the lowest level in the Information Model as defined by the SOP Class.</para>
                </listitem>
                <listitem>
                  <para>Storage Media File-Set UID (0088,0140), which uniquely identifies the Storage Media on which the Composite Object Instance(s) reside. This element pertains to the set of Composite Object Instances available at the Query/Retrieve Level specified in the Identifier of the C-FIND request (e.g., Patient, Study, Series, Composite Object Instance). This Attribute shall be present if the Retrieve AE Title Data Element is not present. A null value (Data Element length of 0) is valid for all levels except the lowest level in the Information Model as defined by the SOP Class.</para>
                  <note>
                    <para>The File-Set concepts are used in <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/>.</para>
                  </note>
                </listitem>
                <listitem>
                  <para>Retrieve AE Title (0008,0054), which defines a list of DICOM Application Entity Title(s) that identify the location from which the Composite Object Instance(s) may be retrieved on the network. This element pertains to the set of Composite Object Instances available at the Query/Retrieve Level specified in the Identifier of the C-FIND request (e.g., Patient, Study, Series, Composite Object Instance). This Attribute shall be present if the Storage Media File-Set ID and Storage Media File-Set UID elements are not present. The Application Entity named in this field shall support either the C-GET or C-MOVE SOP Class of the Query/Retrieve Service Class. A null value (Data Element length of 0) is valid for all levels except the lowest level in the Information Model as defined by the SOP Class.</para>
                  <note>
                    <orderedlist numeration="arabic">
                      <listitem>
                        <para>For example, a DICOM AE with the AE Title of "A" performs a C-FIND request to a DICOM AE with the AE Title of "B" with the Query/Retrieve level set to "STUDY". DICOM AE "B" determines that the Composite Object Instances for each matching study may be retrieved by itself and sets the Data Element Retrieve AE Title to "B".</para>
                      </listitem>
                      <listitem>
                        <para>File-Sets may not be defined at every Query/Retrieve Level. If the SCP supports the File-Set ID/File-Set UID option but does not define these Attributes at the Query/Retrieve Level specified in the C-FIND request it may return these Data Elements with a length of 0 to signify that the value is unknown. An SCU should reissue a C-FIND at a Query/Retrieve Level lower in the hierarchy.</para>
                      </listitem>
                      <listitem>
                        <para>The fact that the value of the Key Attribute is unknown to the SCP of the Query/Retrieve Service Class does not imply that it is not present in the underlying Information Object. Thus, a subsequent retrieval may cause a Storage of a SOP Instance that contains the value of the Attribute.</para>
                      </listitem>
                    </orderedlist>
                  </note>
                </listitem>
              </itemizedlist>
              <para>The C-FIND SCP may also, but is not required to, support the Instance Availability (0008,0056) Data Element. This Data Element shall not be included in a C-FIND request. An Identifier in a C-FIND response may contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Instance Availability (0008,0056), which defines how rapidly Composite Object Instance(s); become available for transmission after a C-MOVE or C-GET retrieval request. This element pertains to the set of Composite Object Instances available at the Query/Retrieve Level specified in the Identifier of the C-FIND request (e.g., Patient, Study, Series, Composite Object Instance). When some composite instances are less rapidly available than others, the availability of the least rapidly available shall be returned. If this Data Element is not returned, the availability is unknown or unspecified. A null value (Data Element length of 0) is not permitted. The Enumerated Values for this Data Element are:</para>
                  <itemizedlist>
                    <listitem>
                      <para>"ONLINE", which means the instances are immediately available,</para>
                    </listitem>
                    <listitem>
                      <para>"NEARLINE", which means the instances need to be retrieved from relatively slow media such as optical disk or tape, or require conversion that takes time,</para>
                    </listitem>
                    <listitem>
                      <para>"OFFLINE", which means the instances need to be retrieved by manual intervention,</para>
                    </listitem>
                    <listitem>
                      <para>"UNAVAILABLE", which means the instances cannot be retrieved. Note that SOP Instances that are unavailable may have an alternate representation that is available (see section <xref linkend="sect_C.6.1.1.5.1" xrefstyle="select: label"/>).</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </section>
          </section>
          <section label="C.4.1.1.4" status="5" xml:id="sect_C.4.1.1.4">
            <title>Status</title>
            <para><xref linkend="table_C.4-1" xrefstyle="select: label"/> defines the specific status code values that might be returned in a C-FIND response. General status code values and fields related to status code values are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <table frame="box" label="C.4-1" rules="all" xml:id="table_C.4-1">
              <caption>C-FIND Response Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status Codes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Related Fields</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A700</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Identifier does not match SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A900</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to process</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Cxxx</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancel</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matching terminated due to Cancel request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FE00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>None</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matching is complete - No final Identifier is supplied.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>None</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pending</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matches are continuing - Current Match is supplied and any Optional Keys were supported in the same manner as Required Keys.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Identifier</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matches are continuing - Warning that one or more Optional Keys were not supported for existence and/or matching for this Identifier.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF01</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Identifier</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
        <section label="C.4.1.2" status="4" xml:id="sect_C.4.1.2">
          <title>C-FIND SCU Behavior</title>
          <para>This Section discusses both the baseline and extended behavior of the C-FIND SCU.</para>
          <section label="C.4.1.2.1" status="5" xml:id="sect_C.4.1.2.1">
            <title>Baseline Behavior of SCU</title>
            <para>All C-FIND SCUs shall be capable of generating query requests that meet the requirements of the Hierarchical Search.</para>
            <para>The Identifier contained in a C-FIND request shall contain a single value in the Unique Key Attribute for each level above the Query/Retrieve level. No Required or Optional Keys shall be specified that are associated with levels above the Query/Retrieve level.</para>
            <para>The Unique Key Attribute associated with the Query/Retrieve level shall be contained in the C-FIND request and may specify Single Value Matching, Universal Value Matching, or List of UID Matching. In addition, Required and Optional Keys associated with the Query/Retrieve level may be contained in the Identifier.</para>
            <para>An SCU conveys the following semantics using the C-FIND request:</para>
            <itemizedlist>
              <listitem>
                <para>The SCU requests that the SCP perform a match of all keys specified in the Identifier of the request against the information it possesses down to the Query/Retrieve level specified in the request.</para>
                <note>
                  <orderedlist numeration="arabic">
                    <listitem>
                      <para>The SCU may not assume the SCP supports any Optional Keys. Hence, Optional Keys serve only to reduce network related overhead when they are supported by the SCP.</para>
                    </listitem>
                    <listitem>
                      <para>The SCU must be prepared to filter C-FIND responses when the SCP fails to support an Optional Key specified in the C-FIND request.</para>
                    </listitem>
                  </orderedlist>
                </note>
              </listitem>
              <listitem>
                <para>The SCU shall interpret Pending responses to convey the Attributes of a match of an Entity at the level of the query.</para>
              </listitem>
              <listitem>
                <para>The SCU shall interpret a response with a status equal to Success, Failed or Refused to convey the end of Pending responses.</para>
              </listitem>
              <listitem>
                <para>The SCU shall interpret a Refused or Failed response to a C-FIND request as an indication that the SCP is unable to process the request.</para>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-FIND service by issuing a C-FIND-CANCEL request at any time during the processing of the C-FIND. The SCU shall recognize a status of Canceled to indicate that the C-FIND-CANCEL was successful.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="C.4.1.2.2" status="5" xml:id="sect_C.4.1.2.2">
            <title>Extended Behavior of SCU</title>
            <para>Extended SCU behavior shall be negotiated at Association establishment time. If an option within the extended behavior is not agreed upon in the negotiation, then only baseline SCU behavior shall be performed with respect to that option. Extended SCU behavior includes all baseline behavior with the following option:</para>
            <itemizedlist>
              <listitem>
                <para>Relational-queries</para>
              </listitem>
              <listitem>
                <para>Enhanced Multi-Frame Image Conversion</para>
              </listitem>
            </itemizedlist>
            <para>More than one option may be agreed upon.</para>
            <section label="C.4.1.2.2.1" status="6" xml:id="sect_C.4.1.2.2.1">
              <title>Relational-Queries</title>
              <para>The C-FIND Service with relational-queries allows any combination of keys at any level in the hierarchy. The Unique Key Attribute associated with the Query/Retrieve level shall be contained in the C-FIND request and may specify Single Value Matching, Universal Value Matching, or List of UID Matching. Support for relational-queries removes the baseline restriction that a Unique Key shall be specified for all levels above the Query/Retrieve level in the C-FIND request.</para>
            </section>
            <section label="C.4.1.2.2.2" status="6" xml:id="sect_C.4.1.2.2.2">
              <title>Enhanced Multi-Frame Image Conversion</title>
              <para>The C-FIND Service with Enhanced Multi-Frame Image Conversion allows for selection of the default or an alternative view of the instances represented by the Information Model.</para>
              <para>Support for Enhanced Multi-Frame Image Conversion allows the SCU to specify the Query/Retrieve View (0008,0053) in the Request Identifier with a value of either "CLASSIC" or "ENHANCED".</para>
              <para>If Query/Retrieve View (0008,0053) is not present in the Request Identifier, then the SCU requests that the SCP perform a match of all keys specified in the Identifier of the request against the information about the instances that it possesses, as received.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "CLASSIC", then the SCU requests that the SCP perform a match of all keys specified in the Identifier of the request against the information about Classic single frame Instances (converted from Enhanced multi-frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "ENHANCED", then the SCU requests that the SCP perform a match of all keys specified in the Identifier of the request against the information about Enhanced multi-frame Instances (converted from Classic single frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>The SCU may assume that no duplicate information will be returned. For example, if an entire series of single frame instances can be converted to a separate series of converted instances, a STUDY level C-FIND will not return both series.</para>
                  </listitem>
                  <listitem>
                    <para>The Query Information Model is unchanged, and the same unique, required and optional keys are equally applicable to both views, except that the values for the SERIES and IMAGE level queries will be different and will depend on the converted instance content.</para>
                  </listitem>
                  <listitem>
                    <para>Unconverted instances, such as for other modalities like Ultrasound, will appear identical regardless of view.</para>
                  </listitem>
                  <listitem>
                    <para>Implementations may apply performance optimizations, such as pre-computing or caching the potential information against which CLASSIC and ENHANCED queries may be performed, in order to minimize significant delays between the query request and response caused by converting "on demand", but SCUs may need to consider the potential for a delayed response when configuring timeouts, etc.</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
          </section>
        </section>
        <section label="C.4.1.3" status="4" xml:id="sect_C.4.1.3">
          <title>C-FIND SCP Behavior</title>
          <para>This Section discusses both the baseline and extended behavior of the C-FIND SCP.</para>
          <section label="C.4.1.3.1" status="5" xml:id="sect_C.4.1.3.1">
            <title>Baseline Behavior of SCP</title>
            <para>All C-FIND SCPs shall be capable of processing queries that meet the requirements of the Hierarchical Search.</para>
            <para>An SCP conveys the following semantics with a C-FIND response:</para>
            <itemizedlist>
              <listitem>
                <para>The SCP is requested to perform a match of all the keys specified in the Identifier of the request, against the information it possesses, to the level specified in the request. Attribute matching is performed using the key values specified in the Identifier of the C-FIND request as defined in <xref linkend="sect_C.2" xrefstyle="select: label"/>.</para>
              </listitem>
              <listitem>
                <para>The SCP generates a C-FIND response for each match using the Hierarchical Search method. All such responses shall contain an Identifier whose Attributes contain values from a single match. All such responses shall contain a status of Pending.</para>
              </listitem>
              <listitem>
                <para>When all matches have been sent, the SCP generates a C-FIND response that contains a status of Success. A status of Success shall indicate that a response has been sent for each match known to the SCP.</para>
                <note>
                  <para>When there are no matches, then no responses with a status of Pending are sent, only a single response with a status of Success.</para>
                </note>
              </listitem>
              <listitem>
                <para>The SCP shall generate a response with a status of Refused or Failed if it is unable to process the request. A Refused or Failed response shall contain no Identifier.</para>
              </listitem>
              <listitem>
                <para>If the SCP receives C-FIND-CANCEL indication before it has completed the processing of the matches it shall interrupt the matching process and return a status of Canceled.</para>
              </listitem>
              <listitem>
                <para>If the SCP manages images in multiple alternate encodings (see <xref linkend="sect_C.6.1.1.5.1" xrefstyle="select: label"/>), only one of the alternate encodings of an image shall be included in the set of matches for a C-FIND request at the Instance level.</para>
                <note>
                  <para>For query of images with alternate encodings, the SCP may select the appropriately encoded Instance for the request response based on identity of the SCU or other factors.</para>
                </note>
              </listitem>
            </itemizedlist>
            <section label="C.4.1.3.1.1" status="6" xml:id="sect_C.4.1.3.1.1">
              <title>Hierarchical Search Method</title>
              <para>Starting at the top level in the Query/Retrieve Information Model, continuing until the level specified in the C-FIND request is reached, the following procedures are used to generate matches:</para>
              <orderedlist numeration="loweralpha">
                <listitem>
                  <para>If the current level is the level specified in the C-FIND request, then the key match strings contained in the Identifier of the C-FIND request are matched against the values of the Key Attributes for each entity at the current level. For each entity for which the Attributes match all of the specified match strings, construct an Identifier. This Identifier shall contain all of the Unique Keys at higher levels and all of the values of the Attributes for this entity that match those in the C-FIND request. Return a response for each such Identifier. If there are no matching keys, then there are no matches, return a response with a status equal to Success and with no Identifier.</para>
                </listitem>
                <listitem>
                  <para>Otherwise, if the current level is not the level specified in the C-FIND request and there is an entity matching the Unique Key Attribute value for this level specified in the C-FIND request, perform this procedure at the next level down in the hierarchy.</para>
                </listitem>
                <listitem>
                  <para>Otherwise there are no matches; return a response with a status equal to Success.</para>
                  <note>
                    <para>The above description specifies a recursive procedure. It may recur upon itself multiple times as it goes down the hierarchical levels, but at each level it recurs only once.</para>
                  </note>
                </listitem>
              </orderedlist>
            </section>
          </section>
          <section label="C.4.1.3.2" status="5" xml:id="sect_C.4.1.3.2">
            <title>Extended Behavior of SCP</title>
            <para>Extended SCP behavior shall be negotiated at Association establishment time. If an option within the extended behavior is not agreed upon in the negotiation, then only baseline SCP behavior shall be performed with respect to that option. Extended SCP behavior includes all baseline behavior with the following option:</para>
            <itemizedlist>
              <listitem>
                <para>Relational-queries</para>
              </listitem>
              <listitem>
                <para>Enhanced Multi-Frame Image Conversion</para>
              </listitem>
            </itemizedlist>
            <para>More than one option may be agreed upon.</para>
            <section label="C.4.1.3.2.1" status="6" xml:id="sect_C.4.1.3.2.1">
              <title>Relational-Queries</title>
              <para>The C-FIND Service with relational-queries allows any combination of keys at any level in the hierarchy. At the lowest level, a query using the relational-queries shall contain the Unique Key for that level with either a single value match, a wild card match, or a universal match. Support for relational-queries removes the baseline restriction that a Unique Key shall be specified for all levels above the Query/Retrieve level in the C-FIND request.</para>
              <para>The C-FIND SCP shall perform matching based on all keys specified in the C-FIND request regardless of the Query/Retrieve level.</para>
            </section>
            <section label="C.4.1.3.2.2" status="6" xml:id="sect_C.4.1.3.2.2">
              <title>Relational Search Method</title>
              <para>A query using the relational method may contain any combination of keys at any level in the hierarchy. Starting at the top level in the Query/Retrieve Information Model, continuing until the Query/Retrieve level specified in the C-FIND request is reached, the following procedures are used to generate matches:</para>
              <orderedlist numeration="loweralpha">
                <listitem>
                  <para>The key match strings contained in the Identifier of the C-FIND request are matched against the values of the Key Attributes for each entity at the current level.</para>
                </listitem>
                <listitem>
                  <para>If no Key Attribute is specified at the current level and the current level is not the level specified in the C-FIND request, the match shall be performed as if a wild card were specified for the Unique Key Attribute for the current level (i.e., all entities at the current level shall match).</para>
                </listitem>
                <listitem>
                  <para>If the current level is the level specified in the C-FIND request, then for each matching entity (a matching entity is one for which the Attributes match all of the specified match strings in the Key Attributes), construct an Identifier. This Identifier shall contain all of the Attributes generated by this procedure at higher levels on this recursion path and all of the values of the Key Attributes for this entity that match those in the C-FIND request.</para>
                </listitem>
                <listitem>
                  <para>Otherwise, if the current level is not the level specified in the C-FIND request, then for each matching entity construct a list of Attributes containing all of the matching Key Attributes and all Attributes that were prepared at the previous level for this entity. Then perform this procedure at the next level down in the hierarchy for each matching entity.</para>
                </listitem>
                <listitem>
                  <para>Otherwise, if there are no matches, return a response with status equal to Success and no Identifier.</para>
                </listitem>
              </orderedlist>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>The above description specifies a recursive procedure. It may recur upon itself multiple times as it goes down the hierarchical levels, and at each level, it may recur multiple times (one for each matching entity). This may result in a large number of Identifiers being generated.</para>
                  </listitem>
                  <listitem>
                    <para>It is not required that the above defined procedure be used to generate matches. It is expected that implementations will incorporate different algorithms for performing searches of the databases. For a given query, the set of matches shall be equivalent to that which would be generated by the above procedure.</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
            <section label="C.4.1.3.2.3" status="6" xml:id="sect_C.4.1.3.2.3">
              <title>Enhanced Multi-Frame Image Conversion</title>
              <para>If Query/Retrieve View (0008,0053) is not present in the Request Identifier, then the SCP shall perform a match of all keys specified in the Identifier of the request against the information about the instances that it possesses, as received.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "CLASSIC", then the SCP shall perform a match of all keys specified in the Identifier of the request against the information about Classic single frame Instances (converted from Enhanced multi-frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "ENHANCED", then the SCP shall perform a match of all keys specified in the Identifier of the request against the information about Enhanced multi-frame Instances (converted from Classic single frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>The SCP will not return information that is duplicated. For example, if an entire series of single frame instances can be converted to a separate series of converted instances, a STUDY level C-FIND will not return both series.</para>
                  </listitem>
                  <listitem>
                    <para>The Query Information Model is unchanged, and the same unique, required and optional keys are equally applicable to both views, except that the values for the SERIES and IMAGE level queries will be different and will depend on the converted instance content.</para>
                  </listitem>
                  <listitem>
                    <para>Unconverted instances, such as for other modalities like Ultrasound, will appear identical regardless of view.</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
          </section>
        </section>
      </section>
      <section label="C.4.2" status="3" xml:id="sect_C.4.2">
        <title>C-MOVE Operation</title>
        <para>SCUs of some SOP Classes of the Query/Retrieve Service Class may generate retrievals using the C-MOVE operation as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. The C-MOVE operation allows an application entity to instruct another application entity to transfer stored SOP Instances to another application entity using the C-STORE operation. Support for the C-MOVE service shall be agreed upon at Association establishment time by both the SCU and SCP of the C-MOVE in order for a C-MOVE operation to occur over the Association. The C-STORE sub-operations shall always be accomplished over an Association different from the Association that accomplishes the C-MOVE operation. Hence, the SCP of the Query/Retrieve Service Class serves as the SCU of the Storage Service Class.</para>
        <note>
          <para>The application entity that receives the stored SOP Instances may or may not be the originator of the C-MOVE operation.</para>
        </note>
        <para>A C-MOVE request may be performed to any level of the Query/Retrieve Information Model. However, the transfer of stored SOP Instances may not be performed at this level. The level at which the transfer is performed depends upon the SOP Class (see <xref linkend="sect_C.6" xrefstyle="select: label"/>).</para>
        <section label="C.4.2.1" status="4" xml:id="sect_C.4.2.1">
          <title>C-MOVE Service Parameters</title>
          <section label="C.4.2.1.1" status="5" xml:id="sect_C.4.2.1.1">
            <title>SOP Class UID</title>
            <para>The SOP Class UID identifies the Query/Retrieve Information Model against which the C-MOVE is to be performed. Support for the SOP Class UID is implied by the Abstract Syntax UID of the Presentation Context used by this C-MOVE operation.</para>
          </section>
          <section label="C.4.2.1.2" status="5" xml:id="sect_C.4.2.1.2">
            <title>Priority</title>
            <para>The Priority Attribute defines the requested priority of the C-MOVE operation and corresponding C-STORE sub-operations with respect to other DIMSE operations being performed by the same SCP.</para>
            <para>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing, and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP. The same priority shall be used for all C-STORE sub-operations.</para>
          </section>
          <section label="C.4.2.1.3" status="5" xml:id="sect_C.4.2.1.3">
            <title>Move Destination</title>
            <para>Move Destination specifies the Application Entity Title of the receiver of the C-STORE sub-operations.</para>
          </section>
          <section label="C.4.2.1.4" status="5" xml:id="sect_C.4.2.1.4">
            <title>Identifier</title>
            <para>The C-MOVE request shall contain an Identifier. The C-MOVE response shall conditionally contain an Identifier as required in <xref linkend="sect_C.4.2.1.4.2" xrefstyle="select: label"/>.</para>
            <note>
              <para>The Identifier is specified as U in the definition of the C-MOVE primitive in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> but is specialized for use with this service.</para>
            </note>
            <section label="C.4.2.1.4.1" status="6" xml:id="sect_C.4.2.1.4.1">
              <title>Request Identifier Structure</title>
              <para>An Identifier in a C-MOVE request shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Query/Retrieve Level (0008,0052), which defines the level of the retrieval</para>
                </listitem>
                <listitem>
                  <para>Unique Key Attributes, which may include Patient ID (0010,0020), Study Instance UIDs (0020,000D), Series Instance UIDs (0020,000E), and the SOP Instance UIDs (0008,0018)</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Query/Retrieve View (0008,0053). This Attribute may be included if Enhanced Multi-Frame Image Conversion has been accepted during Association Extended Negotiation. It shall not be included otherwise.</para>
                </listitem>
              </itemizedlist>
              <para>Specific Character Set (0008,0005) shall be present if Patient ID (0010,0020) is using a character set other than the default character repertoire.</para>
              <para>The Unique Keys at each level of the hierarchy and the values allowable for the level of the retrieval shall be defined in the SOP Class definition for the Query/Retrieve Information Model.</para>
              <note>
                <para>In the non-Relational behavior, more than one entity may be retrieved if the Query/Retrieve Level is IMAGE, SERIES or STUDY, using List of UID matching, but only Single Value Matching value may be specified for Patient ID (0010,0020).</para>
              </note>
            </section>
            <section label="C.4.2.1.4.2" status="6" xml:id="sect_C.4.2.1.4.2">
              <title>Response Identifier Structure</title>
              <para>The Failed SOP Instance UID List (0008,0058) specifies a list of UIDs of the C-STORE sub-operation SOP Instances for which this C-MOVE operation has failed. An Identifier in a C-MOVE response shall conditionally contain the Failed SOP Instance UID List (0008,0058) based on the C-MOVE response status value. If no C-STORE sub-operation failed, Failed SOP Instance UID List (0008,0058) is absent and therefore no Data Set shall be sent in the C-MOVE response.</para>
              <para>Specific Character Set (0008,0005) shall not be present.</para>
              <para>The Identifier in a C-MOVE response with a status of:</para>
              <itemizedlist>
                <listitem>
                  <para>Canceled, Failure, Refused, or Warning shall contain the Failed SOP Instance UID List Attribute</para>
                </listitem>
                <listitem>
                  <para>Pending shall not contain the Failed SOP Instance UID List Attribute (no Data Set)</para>
                </listitem>
              </itemizedlist>
            </section>
          </section>
          <section label="C.4.2.1.5" status="5" xml:id="sect_C.4.2.1.5">
            <title>Status</title>
            <para><xref linkend="table_C.4-2" xrefstyle="select: label"/> defines the specific status code values that might be returned in a C-MOVE response. General status code values and fields related to status code values are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <table frame="box" label="C.4-2" rules="all" xml:id="table_C.4-2">
              <caption>C-MOVE Response Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status Codes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Related Fields</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources - Unable to calculate number of matches</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A701</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources - Unable to perform sub-operations</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A702</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Move Destination unknown</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A801</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Identifier does not match SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A900</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to Process</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Cxxx</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancel</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations terminated due to Cancel Indication</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FE00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Warning</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations Complete - One or more Failures</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>B000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations Complete - No Failures</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pending</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations are continuing</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="C.4.2.1.6" status="5" xml:id="sect_C.4.2.1.6">
            <title>Number of Remaining Sub-Operations</title>
            <para>Inclusion of the Number of Remaining Sub-operations is conditional based upon the status in the C-MOVE response. The Number of Remaining Sub-operations specifies the number of Remaining C-STORE sub-operations necessary to complete the C-MOVE operation.</para>
            <para>A C-MOVE response with a status of:</para>
            <itemizedlist>
              <listitem>
                <para>Pending shall contain the Number of Remaining Sub-operations Attribute</para>
              </listitem>
              <listitem>
                <para>Canceled may contain the Number of Remaining Sub-operations Attribute</para>
              </listitem>
              <listitem>
                <para>Warning, Failure, or Success shall not contain the Number of Remaining Sub-operations Attribute</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="C.4.2.1.7" status="5" xml:id="sect_C.4.2.1.7">
            <title>Number of Completed Sub-Operations</title>
            <para>Inclusion of the Number of Completed Sub-operations is conditional based upon the status in the C-MOVE response. The Number of Completed sub-operations specifies the number of C-STORE sub-operations generated by the requested transfer that have completed successfully.</para>
            <para>A C-MOVE response with a status of:</para>
            <itemizedlist>
              <listitem>
                <para>Pending shall contain the Number of Completed Sub-operations Attribute</para>
              </listitem>
              <listitem>
                <para>Canceled, Warning, Failure, or Success may contain the Number of Completed Sub-operations Attribute</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="C.4.2.1.8" status="5" xml:id="sect_C.4.2.1.8">
            <title>Number of Failed Sub-Operations</title>
            <para>Inclusion of the Number of Failed Sub-operations is conditional based upon the status in the C-MOVE response. The Number of Failed sub-operations specifies the number of C-STORE sub-operations generated by the requested transfer that have Failed.</para>
            <para>A C-MOVE response with a status of:</para>
            <itemizedlist>
              <listitem>
                <para>Pending shall contain the Number of Failed Sub-operations Attribute</para>
              </listitem>
              <listitem>
                <para>Canceled, Warning, Failure, or Success may contain the Number of Failed Sub-operations Attribute</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="C.4.2.1.9" status="5" xml:id="sect_C.4.2.1.9">
            <title>Number of Warning Sub-Operations</title>
            <para>Inclusion of the Number of Warning Sub-operations is conditional based upon the status in the C-MOVE response. The Number of Warning sub-operations specifies the number of C-STORE sub-operations generated by the requested transfer that had a status of warning.</para>
            <para>A C-MOVE response with a status of:</para>
            <itemizedlist>
              <listitem>
                <para>Pending shall contain the Number of Warnings Sub-operations Attribute</para>
              </listitem>
              <listitem>
                <para>Canceled, Warning, Failure, or Success may contain the Number of Warning Sub-operations Attribute</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>
        <section label="C.4.2.2" status="4" xml:id="sect_C.4.2.2">
          <title>C-MOVE SCU Behavior</title>
          <para>This Section discusses both the baseline and extended behavior of the C-MOVE SCU.</para>
          <section label="C.4.2.2.1" status="5" xml:id="sect_C.4.2.2.1">
            <title>Baseline Behavior of SCU</title>
            <para>An SCU conveys the following semantics with a C-MOVE request:</para>
            <itemizedlist>
              <listitem>
                <para>The SCU shall supply a single value in the Unique Key Attribute for each level above the Query/Retrieve level. For the level of retrieve, the SCU shall supply a single value for one unique key if the level of retrieve is above the STUDY level and shall supply one UID, or a list of UIDs if a retrieval of several items is desired and the retrieve level is STUDY, SERIES or IMAGE. The SCU shall also supply a move destination. The move destination shall be the DICOM Application Entity Title of a DICOM Application Entity capable of serving as the SCP of the Storage Service Class.</para>
              </listitem>
              <listitem>
                <para>The SCU shall interpret responses to the C-MOVE with status equal to Pending during the processing of the C-STORE sub-operations. These responses shall indicate the number of Remaining, Completed, Failed, and Warning C-STORE sub-operations.</para>
              </listitem>
              <listitem>
                <para>The SCU shall interpret responses with a status equal to Success, Warning, Failure, or Refused as final responses. The final response shall indicate the number of Successful C-STORE sub-operations and the number of Failed C-STORE sub-operations resulting from the C-MOVE operation. The SCU shall interpret a status of:</para>
                <itemizedlist>
                  <listitem>
                    <para>Success to indicate that all sub-operations were successfully completed</para>
                  </listitem>
                  <listitem>
                    <para>Warning to indicate one or more sub-operations were successfully completed and one or more sub-operations were unsuccessful or had a status of warning, or all sub-operations had a status of warning</para>
                  </listitem>
                  <listitem>
                    <para>Failure or Refused to indicate all sub-operations were unsuccessful.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-MOVE service by issuing a C-MOVE-CANCEL request at any time during the processing of the C-MOVE. The SCU shall interpret a C-MOVE response with a status of Canceled to indicate the transfer was canceled. The C-MOVE response with a status of Canceled shall contain the number of Completed, Failed, and Warning C-STORE sub-operations. If present, the Remaining sub-operations count shall contain the number of C-STORE sub-operations that were not initiated due to the C-MOVE-CANCEL request.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="C.4.2.2.2" status="5" xml:id="sect_C.4.2.2.2">
            <title>Extended Behavior of SCU</title>
            <para>Extended SCU behavior shall be negotiated at Association establishment time. If an option within the extended behavior is not agreed upon in the negotiation, then only baseline SCU behavior shall be performed with respect to that option. Extended SCU behavior includes all baseline behavior with the following option:</para>
            <itemizedlist>
              <listitem>
                <para>Relational-retrieve</para>
              </listitem>
              <listitem>
                <para>Enhanced Multi-Frame Image Conversion</para>
              </listitem>
            </itemizedlist>
            <para>More than one option may be agreed upon.</para>
            <section label="C.4.2.2.2.1" status="6" xml:id="sect_C.4.2.2.2.1">
              <title>Relational-Retrieve</title>
              <para>The C-MOVE Service with relational-retrieve removes the restriction that the SCU supply Unique Key values for levels above the Query/Retrieve level to identify an entity at the level of the retrieval. Hence, the Identifier of a C-MOVE request may transfer:</para>
              <itemizedlist>
                <listitem>
                  <para>all Composite Object Instances related to a study by only providing a Study Instance UID (0020,000D)</para>
                </listitem>
                <listitem>
                  <para>all Composite Object Instances related to a series by only providing a Series Instance UID (0020,000E)</para>
                </listitem>
                <listitem>
                  <para>individual Composite Object Instances by only providing a list of SOP Instance UIDs (0008,0018)</para>
                </listitem>
              </itemizedlist>
            </section>
            <section label="C.4.2.2.2.2" status="6" xml:id="sect_C.4.2.2.2.2">
              <title>Enhanced Multi-Frame Image Conversion</title>
              <para>The C-MOVE Service with Enhanced Multi-Frame Image Conversion allows for selection of the default or an alternative view of the instances represented by the Information Model, and hence the retrieval of either the legacy or the converted images, together with any unconverted instances, all of which are required to be processed to maintain referential integrity within the scope of the Patient.</para>
              <para>Support for Enhanced Multi-Frame Image Conversion allows the SCU to specify the Attribute Query/Retrieve View (0008,0053) in the Request Identifier with a value of either "CLASSIC" or "ENHANCED".</para>
              <para>If Query/Retrieve View (0008,0053) is not present in the Request Identifier, then the SCU requests that the SCP provide all the requested instances it possesses, as received.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "CLASSIC", then the SCU requests that the SCP provide all the Classic single frame Instances (converted from Enhanced multi-frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "ENHANCED", then the SCU requests that the SCP provide all the Enhanced multi-frame Instances (converted from Classic single frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>The SCU may assume that no duplicate information will be provided. For example, if an entire series of single frame instances can be converted to a separate series of converted instances, a STUDY level C-MOVE will not provide both series.</para>
                  </listitem>
                  <listitem>
                    <para>The Query Information Model is unchanged, and the same unique keys are equally applicable to both views, except that the values for the SERIES and IMAGE level queries will be different and will depend on the converted instance content.</para>
                  </listitem>
                  <listitem>
                    <para>The Query/Retrieve View is still required in an IMAGE or SERIES level request identifier, even though the requested unique key(s) are unambiguous, and the view is in a sense "redundant", because the conversion that created the requested instances may not have been executed yet. It is not permitted to specify a view that is inconsistent with the requested unique key(s).</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
          </section>
        </section>
        <section label="C.4.2.3" status="4" xml:id="sect_C.4.2.3">
          <title>C-MOVE SCP Behavior</title>
          <para>This section discusses both the baseline and extended behavior of the C-MOVE SCP.</para>
          <section label="C.4.2.3.1" status="5" xml:id="sect_C.4.2.3.1">
            <title>Baseline Behavior of SCP</title>
            <para>An SCP conveys the following semantics with a C-MOVE response:</para>
            <itemizedlist>
              <listitem>
                <para>The SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-MOVE request. The SCP shall initiate C-STORE sub-operations for the corresponding storage SOP Instances. These C-STORE sub-operations shall occur on a different Association (that may already exist) from the C-MOVE operation. The SCP of the Query/Retrieve Service Class shall serve as an SCU of the Storage Service Class.</para>
              </listitem>
              <listitem>
                <para>The SCP shall either reuse an established and compatible Association or establish a new Association for the C-STORE sub-operations. The SCP shall initiate C-STORE sub-operations over that Association for all stored SOP Instances related to the Patient ID, List of Study Instance UIDs, List of Series Instance UIDs, or List of SOP Instance UIDs depending on the Query/Retrieve level specified in the C-MOVE request. A sub-operation is considered Failed if the SCP is unable to negotiate an appropriate presentation context for a given stored SOP Instance.</para>
              </listitem>
              <listitem>
                <para>Optionally, the SCP may generate responses to the C-MOVE with status equal to Pending during the processing of the C-STORE sub-operations. These responses shall indicate the Remaining, Completed, Failed, and Warning C-STORE sub-operations.</para>
              </listitem>
              <listitem>
                <para>When the number of Remaining sub-operations reaches zero, the SCP shall generate a final response with a status equal to Success, Warning, Failure, or Refused. This response shall indicate the number of Completed sub-operations, the number of Failed sub-operations, and the number of sub-operations with Warning Status. The status contained in the C-MOVE response shall contain:</para>
                <itemizedlist>
                  <listitem>
                    <para>Success if all sub-operations were successfully completed</para>
                  </listitem>
                  <listitem>
                    <para>Warning if one or more sub-operations were successfully completed and one or more sub-operations were unsuccessful or had a warning status</para>
                  </listitem>
                  <listitem>
                    <para>Warning if all sub-operations had a warning status</para>
                  </listitem>
                  <listitem>
                    <para>Failure or Refused if all sub-operations were unsuccessful</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>The SCP may receive a C-MOVE-CANCEL request at any time during the processing of the C-MOVE. The SCP shall interrupt all C-STORE sub-operation processing and return a status of Canceled in the C-MOVE response. The C-MOVE response with a status of Canceled shall contain the number of Completed, Failed, and Warning C-STORE sub-operations. If present, the Remaining sub-operations count shall contain the number of C-STORE sub-operations that were not initiated due to the C-MOVE-CANCEL request.</para>
              </listitem>
              <listitem>
                <para>If the SCP manages images in multiple alternate encodings (see <xref linkend="sect_C.6.1.1.5.1" xrefstyle="select: label"/>), only one of the alternate encodings of an image shall be included in the set of object instances retrieved by a C-MOVE request at the Patient, Study, or Series level.</para>
                <note>
                  <para>For retrieval of images with alternate encodings using a C-MOVE request at the Patient, Study, or Series level, the SCP may select the appropriately encoded Instance for the retrieval based on identity of the SCU, transfer syntaxes accepted in the C-STORE Association Negotiation, or other factors.</para>
                </note>
              </listitem>
            </itemizedlist>
            <note>
              <para>If the association on which the C-MOVE operation was issued is abnormally terminated, then it will not be possible to issue any further pending responses nor a final response, nor will C-MOVE-CANCEL requests be received. The behavior of the C-MOVE SCP acting as a C-STORE SCU is undefined in this condition. Specifically, whether or not any uncompleted C-STORE sub-operations continue is undefined.</para>
            </note>
          </section>
          <section label="C.4.2.3.2" status="5" xml:id="sect_C.4.2.3.2">
            <title>Extended Behavior of SCP</title>
            <para>Extended SCP behavior shall be negotiated at Association establishment time. If an option within the extended behavior is not agreed upon in the negotiation, then only baseline SCP behavior shall be performed with respect to that option. Extended SCP behavior includes all baseline behavior with the following option:</para>
            <itemizedlist>
              <listitem>
                <para>Relational-retrieve</para>
              </listitem>
              <listitem>
                <para>Enhanced Multi-Frame Image Conversion</para>
              </listitem>
            </itemizedlist>
            <para>More than one option may be agreed upon.</para>
            <section label="C.4.2.3.2.1" status="6" xml:id="sect_C.4.2.3.2.1">
              <title>Relational-Retrieve</title>
              <para>The C-MOVE Service with relational-retrieve removes the restriction that the SCU supply Unique Key values for levels above the Query/Retrieve level to help identify an entity at the level of the retrieval. Hence, the Identifier of a C-MOVE request may specify the transfer of:</para>
              <itemizedlist>
                <listitem>
                  <para>all Composite Object Instances related to a study by only providing a Study Instance UID (0020,000D)</para>
                </listitem>
                <listitem>
                  <para>all Composite Object Instances related to a series by only providing a Series Instance UID (0020,000E)</para>
                </listitem>
                <listitem>
                  <para>individual Composite Object Instances by only providing a list of SOP Instance UIDs (0008,0018)</para>
                </listitem>
              </itemizedlist>
            </section>
            <section label="C.4.2.3.2.2" status="6" xml:id="sect_C.4.2.3.2.2">
              <title>Enhanced Multi-Frame Image Conversion</title>
              <para>If Query/Retrieve View (0008,0053) is not present in the Request Identifier, then the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-MOVE request that correspond to the instances it possesses, as received, and shall initiate C-STORE sub-operations for all the corresponding storage SOP Instances.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "CLASSIC", then the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-MOVE request that correspond to the Classic single frame Instances (converted from Enhanced multi-frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted, and shall initiate C-STORE sub-operations for all the corresponding storage SOP Instances.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "ENHANCED", then the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-MOVE request that correspond to the Enhanced multi-frame Instances (converted from Classic single frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted, and shall initiate C-STORE sub-operations for all the corresponding storage SOP Instances.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>The SCP will not send information that is duplicated to the C-STORE SCP. For example, if an entire series of single frame instances can be converted to a separate series of converted instances, a STUDY level C-MOVE will not send both series.</para>
                  </listitem>
                  <listitem>
                    <para>The C-STORE SCP will need to support the necessary SOP Classes for converted instances, otherwise the C-STORE sub-operations will fail in the normal manner and this will be reflected in the C-MOVE responses.</para>
                  </listitem>
                  <listitem>
                    <para>The Query Information Model is unchanged, and the same unique, required and optional keys are equally applicable to both views, except that the values for the SERIES and IMAGE level queries will be different and will depend on the converted instance content.</para>
                  </listitem>
                  <listitem>
                    <para>The Query/Retrieve View is still required in an IMAGE or SERIES level request identifier, even though the requested unique key(s) are unambiguous.</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
          </section>
        </section>
      </section>
      <section label="C.4.3" status="3" xml:id="sect_C.4.3">
        <title>C-GET Operation</title>
        <para>SCUs of some SOP Classes of the Query/Retrieve Service Class may generate retrievals using the C-GET operation as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. The C-GET operation allows an application entity to instruct another application entity to transfer stored SOP Instances to the initiating application entity using the C-STORE operation. Support for the C-GET service shall be agreed upon at Association establishment time by both the SCU and SCP of the C-GET in order for a C-GET operation to occur over the Association. The C-STORE Sub-operations shall be accomplished on the same Association as the C-GET operation. Hence, the SCP of the Query/Retrieve Service Class serves as the SCU of the Storage Service Class.</para>
        <note>
          <para>The application entity that receives the stored SOP Instances is always the originator of the C-GET operation.</para>
        </note>
        <para>A C-GET request may be performed to any level of the Query/Retrieve Information Model. However, the transfer of stored SOP Instances may not be performed at this level. The level at which the transfer is performed depends upon the SOP Class.</para>
        <section label="C.4.3.1" status="4" xml:id="sect_C.4.3.1">
          <title>C-GET Service Parameters</title>
          <section label="C.4.3.1.1" status="5" xml:id="sect_C.4.3.1.1">
            <title>SOP Class UID</title>
            <para>The SOP Class UID identifies the Query/Retrieve Information Model against which the C-GET is to be performed. Support for the SOP Class UID is implied by the Abstract Syntax UID of the Presentation Context used by this C-GET operation.</para>
          </section>
          <section label="C.4.3.1.2" status="5" xml:id="sect_C.4.3.1.2">
            <title>Priority</title>
            <para>The Priority Attribute defines the requested priority of the C-GET operation and corresponding C-STORE sub-operations with respect to other DIMSE operations being performed by the same SCP.</para>
            <para>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing, and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP. The same priority shall be used for all C-STORE sub-operations.</para>
          </section>
          <section label="C.4.3.1.3" status="5" xml:id="sect_C.4.3.1.3">
            <title>Identifier</title>
            <para>The C-GET request shall contain an Identifier. The C-GET response shall conditionally contain an Identifier as required in <xref linkend="sect_C.4.3.1.3.2" xrefstyle="select: label"/>.</para>
            <note>
              <para>The Identifier is specified as U in the definition of the C-GET primitive in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> but is specialized for use with this service.</para>
            </note>
            <section label="C.4.3.1.3.1" status="6" xml:id="sect_C.4.3.1.3.1">
              <title>Request Identifier Structure</title>
              <para>An Identifier in a C-GET request shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Query/Retrieve Level (0008,0052), which defines the level of the retrieval</para>
                </listitem>
                <listitem>
                  <para>Unique Key Attributes, which may include Patient ID (0010,0020), Study Instance UIDs (0020,000D) Series Instance UIDs (0020,000E), and SOP Instance UIDs (0008,0018)</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Query/Retrieve View (0008,0053). This Attribute may be included if Enhanced Multi-Frame Image Conversion has been accepted during Association Extended Negotiation. It shall not be included otherwise.</para>
                </listitem>
              </itemizedlist>
              <para>Specific Character Set (0008,0005) shall be present if Patient ID (0010,0020) is using a character set other than the default character repertoire.</para>
              <para>The Unique Keys at each level of the hierarchy and the values allowable for the level of the retrieval shall be defined in the SOP Class definition for the Query/Retrieve Information Model.</para>
              <note>
                <para>In the non-Relational behavior, more than one entity may be retrieved if the Query/Retrieve Level is IMAGE, SERIES or STUDY, using List of UID matching, but only Single Value Matching value may be specified for Patient ID (0010,0020).</para>
              </note>
            </section>
            <section label="C.4.3.1.3.2" status="6" xml:id="sect_C.4.3.1.3.2">
              <title>Response Identifier Structure</title>
              <para>The Failed SOP Instance UID List (0008,0058) specifies a list of UIDs of the C-STORE sub-operation SOP Instances for which this C-GET operation has failed. An Identifier in a C-GET response shall conditionally contain the Failed SOP Instance UID List (0008,0058) based on the C-GET response. If no C-STORE sub-operation failed, Failed SOP Instance UID List (0008,0058) is absent and therefore no Data Set shall be sent in the C-GET response.</para>
              <para>Specific Character Set (0008,0005) shall not be present.</para>
              <para>The Identifier in a C-GET response with a status of:</para>
              <itemizedlist>
                <listitem>
                  <para>Canceled, Failure, Refused, or Warning shall contain the Failed SOP Instance UID List Attribute</para>
                </listitem>
                <listitem>
                  <para>Pending shall not contain the Failed SOP Instance UID List Attribute (no Data Set)</para>
                </listitem>
              </itemizedlist>
            </section>
          </section>
          <section label="C.4.3.1.4" status="5" xml:id="sect_C.4.3.1.4">
            <title>Status</title>
            <para><xref linkend="table_C.4-3" xrefstyle="select: label"/> defines the specific status code values that might be returned in a C-GET response. General status code values and fields related to status code values are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <table frame="box" label="C.4-3" rules="all" xml:id="table_C.4-3">
              <caption>C-GET Response Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status Codes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Related Fields</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources - Unable to calculate number of matches</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A701</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources - Unable to perform sub-operations</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A702</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Identifier does not match SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A900</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to process</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Cxxx</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancel</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations terminated due to Cancel Indication</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FE00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Warning</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations Complete - One or more Failures or Warnings</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>B000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations Complete - No Failures or Warnings</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pending</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations are continuing</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="C.4.3.1.5" status="5" xml:id="sect_C.4.3.1.5">
            <title>Number of Remaining Sub-Operations</title>
            <para>Inclusion of the Number of Remaining Sub-operations is conditional based upon the status in the C-GET response. The Number of Remaining Sub-operations specifies the number of Remaining C-STORE sub-operations necessary to complete the C-GET operation.</para>
            <para>A C-GET response with a status of:</para>
            <itemizedlist>
              <listitem>
                <para>Pending shall contain the Number of Remaining Sub-operations Attribute</para>
              </listitem>
              <listitem>
                <para>Canceled may contain the Number of Remaining Sub-operations Attribute</para>
              </listitem>
              <listitem>
                <para>Warning, Failure, or Success shall not contain the Number of Remaining Sub-operations Attribute.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="C.4.3.1.6" status="5" xml:id="sect_C.4.3.1.6">
            <title>Number of Completed Sub-Operations</title>
            <para>Inclusion of the Number of Completed Sub-operations is conditional based upon the status in the C-GET response. The Number of Completed Sub-operations specifies the number of C-STORE sub-operations generated by the requested transfer that have completed successfully.</para>
            <para>A C-GET response with a status of:</para>
            <itemizedlist>
              <listitem>
                <para>Pending shall contain the Number of Completed Sub-operations Attribute</para>
              </listitem>
              <listitem>
                <para>Canceled, Warning, Failure, or Success may contain the Number of Completed Sub-operations Attribute</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="C.4.3.1.7" status="5" xml:id="sect_C.4.3.1.7">
            <title>Number of Failed Sub-Operations</title>
            <para>Inclusion of the Number of Failed Sub-operations is conditional based upon the status in the C-GET response. The Number of Failed Sub-operations specifies the number of C-STORE sub-operations generated by the requested transfer that have Failed.</para>
            <para>A C-GET response with a status of:</para>
            <itemizedlist>
              <listitem>
                <para>Pending shall contain the Number of Failed Sub-operations Attribute</para>
              </listitem>
              <listitem>
                <para>Canceled, Warning, Failure, or Success may contain the Number of Failed Sub-operations Attribute</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="C.4.3.1.8" status="5" xml:id="sect_C.4.3.1.8">
            <title>Number of Warning Sub-Operations</title>
            <para>Inclusion of the Number of Warning Sub-operations is conditional based upon the status in the C-GET response. The Number of Warning Sub-operations specifies the number of C-STORE sub-operations generated by the requested transfer that had a status of Warning.</para>
            <para>A C-GET response with a status of:</para>
            <itemizedlist>
              <listitem>
                <para>Pending shall contain the Number of Warning Sub-operations Attribute</para>
              </listitem>
              <listitem>
                <para>Canceled, Warning, Failure, or Success may contain the Number of Warning Sub-operations Attribute</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>
        <section label="C.4.3.2" status="4" xml:id="sect_C.4.3.2">
          <title>C-GET SCU Behavior</title>
          <para>This Section discusses both the baseline and extended behavior of the C-GET SCU.</para>
          <section label="C.4.3.2.1" status="5" xml:id="sect_C.4.3.2.1">
            <title>Baseline Behavior of SCU</title>
            <para>An SCU conveys the following semantics with a C-GET request:</para>
            <itemizedlist>
              <listitem>
                <para>The SCU shall have proposed sufficient presentation contexts at Association establishment time to accommodate expected C-STORE sub-operations that shall occur over the same Association. The SCU of the Query/Retrieve Service Class shall serve as the SCP of the Storage Service Class.</para>
              </listitem>
              <listitem>
                <para>The SCU shall supply a single value in the Unique Key Attribute for each level above the Query/Retrieve level. For the level of retrieve, the SCU shall supply a single value for one unique key if the level of the retrieve is above the STUDY level and shall supply one UID, or a list of UIDs if a retrieval of several items is desired and the retrieve level is STUDY, SERIES or IMAGE.</para>
              </listitem>
              <listitem>
                <para>The SCU shall interpret C-GET responses with status equal to Pending during the processing of the C-STORE sub-operations. These responses shall indicate the number of Remaining, Completed, Failed, Warning C-STORE sub-operations.</para>
              </listitem>
              <listitem>
                <para>The SCU shall interpret a C-GET response with a status equal to Success, Warning, Failure, or Refused as a final response. The final response shall indicate the number of Completed sub-operations and the number of Failed C-STORE sub-operations resulting from the C-GET operation. The SCU shall interpret a status of:</para>
                <itemizedlist>
                  <listitem>
                    <para>Success to indicate that all sub-operations were successfully completed</para>
                  </listitem>
                  <listitem>
                    <para>Warning to indicate one or more sub-operations were successfully completed and one or more unsuccessful or all sub-operations had a status of warning</para>
                  </listitem>
                  <listitem>
                    <para>Failure or Refused to indicate all sub-operations were unsuccessful</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-GET operation by issuing a C-GET-CANCEL request at any time during the processing of the C-GET request. A C-GET response with a status of Canceled shall indicate to the SCU that the retrieve was canceled. Optionally, the C-GET response with a status of Canceled shall indicate the number of Completed, Failed, and Warning C-STORE sub-operations. If present, the Remaining sub-operations count shall contain the number of C-STORE sub-operations that were not initiated due to the C-GET-CANCEL request.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="C.4.3.2.2" status="5" xml:id="sect_C.4.3.2.2">
            <title>Extended Behavior of SCU</title>
            <para>Extended SCU behavior shall be negotiated at Association establishment time. If an option within the extended behavior is not agreed upon in the negotiation, then only baseline SCU behavior shall be supported with respect to that option. Extended SCU behavior includes all baseline behavior with the following option:</para>
            <itemizedlist>
              <listitem>
                <para>Relational-retrieve</para>
              </listitem>
              <listitem>
                <para>Enhanced Multi-Frame Image Conversion</para>
              </listitem>
            </itemizedlist>
            <para>More than one option may be agreed upon.</para>
            <section label="C.4.3.2.2.1" status="6" xml:id="sect_C.4.3.2.2.1">
              <title>Relational-Retrieve</title>
              <para>The C-GET Service with relational-retrieve removes the restriction that the SCU supply Unique Key values for levels above the Query/Retrieve level to help identify an entity at the level of the retrieval. Hence, the Identifier of a C-GET request may retrieve:</para>
              <itemizedlist>
                <listitem>
                  <para>all Composite Object Instances related to a study by providing a Study Instance UID (0020,000D)</para>
                </listitem>
                <listitem>
                  <para>all Composite Object Instances related to a series by providing a Series Instance UID (0020,000E)</para>
                </listitem>
                <listitem>
                  <para>individual Composite Object Instances by providing a list of SOP Instance UIDs (0008,0018)</para>
                </listitem>
              </itemizedlist>
            </section>
            <section label="C.4.3.2.2.2" status="6" xml:id="sect_C.4.3.2.2.2">
              <title>Enhanced Multi-Frame Image Conversion</title>
              <para>The C-GET Service with Enhanced Multi-Frame Image Conversion allows for selection of the default or an alternative view of the instances represented by the Information Model, and hence the retrieval of either the legacy or the converted images, together with any unconverted instances, all of which are required to be processed to maintain referential integrity within the scope of the Patient.</para>
              <para>Support for Enhanced Multi-Frame Image Conversion allows the SCU to specify the Attribute Query/Retrieve View (0008,0053) in the Request Identifier with a value of either "CLASSIC" or "ENHANCED".</para>
              <para>If Query/Retrieve View (0008,0053) is not present in the Request Identifier, then the SCU requests that the SCP retrieve all the requested instances it possesses, as received.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "CLASSIC", then the SCU requests that the SCP retrieve all the Classic single frame Instances (converted from Enhanced multi-frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "ENHANCED", then the SCU requests that the SCP retrieve all the Enhanced multi-frame Instances (converted from Classic single frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>The C-GET SCU acting as a C-STORE SCP may assume that no duplicate information will be provided. For example, if an entire series of single frame instances can be converted to a separate series of converted instances, a STUDY level C-GET will not return both series.</para>
                  </listitem>
                  <listitem>
                    <para>The C-GET SCU acting as a C-STORE SCP will need to support the necessary SOP Classes for converted instances, otherwise the C-STORE sub-operations will fail in the normal manner and this will be reflected in the C-GET responses.</para>
                  </listitem>
                  <listitem>
                    <para>The Query Information Model is unchanged, and the same unique, required and optional keys are equally applicable to both views, except that the values for the SERIES and IMAGE level queries will be different and will depend on the converted instance content.</para>
                  </listitem>
                  <listitem>
                    <para>The Query/Retrieve View is still required in an IMAGE or SERIES level request identifier, even though the requested unique key (s) are unambiguous, and the view is in a sense "redundant", because the conversion that created the requested instances may not have been executed yet. It is not permitted to specify a view that is inconsistent with the requested unique key(s).</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
          </section>
        </section>
        <section label="C.4.3.3" status="4" xml:id="sect_C.4.3.3">
          <title>C-GET SCP Behavior</title>
          <para>This Section discusses both the baseline and extended behavior of the C-GET SCP.</para>
          <section label="C.4.3.3.1" status="5" xml:id="sect_C.4.3.3.1">
            <title>Baseline Behavior of SCP</title>
            <para>An SCP conveys the following semantics with a C-GET response:</para>
            <itemizedlist>
              <listitem>
                <para>The SCP shall identify a set of Entities at the level of the retrieval based upon the values in the Unique Keys in the Identifier of the C-GET request. The SCP shall initiate C-STORE sub-operations for the corresponding storage SOP Instances. The SCP of the Query/Retrieve Service Class shall serve as an SCU of the Storage Service Class.</para>
              </listitem>
              <listitem>
                <para>The SCP shall initiate C-STORE sub-operations over the same Association for all stored SOP Instances related to the Patient ID, List of Study Instance UIDs, List of Series Instance UIDs, or List of SOP Instance UIDs depending on the Query/Retrieve level specified in the C-GET request</para>
              </listitem>
              <listitem>
                <para>A sub-operation is considered Failed if the SCP is unable to initiate a C-STORE sub-operation because the Query/Retrieve SCU did not offer an appropriate presentation context for a given stored SOP Instance.</para>
              </listitem>
              <listitem>
                <para>Optionally, the SCP may generate responses to the C-GET with status equal to Pending during the processing of the C-STORE sub-operations. These responses shall indicate the number of Remaining, Completed, Failure, and Warning C-STORE sub-operations.</para>
              </listitem>
              <listitem>
                <para>When the number of Remaining sub-operations reaches zero, the SCP shall generate a final response with a status equal to Success, Warning, Failed, or Refused. The status contained in the C-GET response shall contain:</para>
                <itemizedlist>
                  <listitem>
                    <para>Success if all sub-operations were successfully completed</para>
                  </listitem>
                  <listitem>
                    <para>Warning if one or more sub-operations were successfully completed and one or more sub-operations were unsuccessful or had a status of warning</para>
                  </listitem>
                  <listitem>
                    <para>Warning if all sub-operations had a status of Warning</para>
                  </listitem>
                  <listitem>
                    <para>Failure or Refused if all sub-operations were unsuccessful</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>The SCP may receive a C-GET-CANCEL request at any time during the processing of the C-GET request. The SCP shall interrupt all C-STORE sub-operation processing and return a status of Canceled in the C-GET response. The C-GET response with a status of Canceled shall contain the number of Completed, Failed, and Warning C-STORE sub-operations. If present, the Remaining sub-operations count shall contain the number of C-STORE sub-operations that were not initiated due to the C-GET-CANCEL request.</para>
              </listitem>
              <listitem>
                <para>If the SCP manages images in multiple alternate encodings (see <xref linkend="sect_C.6.1.1.5.1" xrefstyle="select: label"/>), only one of the alternate encodings of an image shall be included in the set of object instances retrieved by a C-GET request at the Patient, Study, or Series level.</para>
                <note>
                  <para>For retrieval of images with alternate encodings using a C-GET request at the Patient, Study, or Series level, the SCP may select the appropriately encoded Instance for the retrieval based on identity of the SCU, transfer syntaxes accepted in the C-STORE Association Negotiation, or other factors.</para>
                </note>
              </listitem>
            </itemizedlist>
          </section>
          <section label="C.4.3.3.2" status="5" xml:id="sect_C.4.3.3.2">
            <title>Extended Behavior of SCP</title>
            <para>Extended SCP behavior shall be negotiated at Association establishment time. If an option within the extended behavior is not agreed upon in the negotiation, then only baseline SCP behavior shall be performed with respect to that option. Extended SCP behavior includes all baseline behavior with the following option:</para>
            <itemizedlist>
              <listitem>
                <para>Relational-retrieve</para>
              </listitem>
              <listitem>
                <para>Enhanced Multi-Frame Image Conversion</para>
              </listitem>
            </itemizedlist>
            <para>More than one option may be agreed upon.</para>
            <section label="C.4.3.3.2.1" status="6" xml:id="sect_C.4.3.3.2.1">
              <title>Relational-Retrieve</title>
              <para>The C-GET Service with relational-retrieve removes the restriction that the SCU supply Unique Key values for levels above the Query/Retrieve level to help identify an entity at the level of the retrieval. Hence, the Identifier of a C-GET request may retrieve:</para>
              <itemizedlist>
                <listitem>
                  <para>all Composite Object Instances related to a study by providing a Study Instance UID</para>
                </listitem>
                <listitem>
                  <para>all Composite Object Instances related to a series by providing a Series Instance UID</para>
                </listitem>
                <listitem>
                  <para>individual Composite Object Instances by providing a list of SOP Instance UIDs</para>
                </listitem>
              </itemizedlist>
            </section>
            <section label="C.4.3.3.2.2" status="6" xml:id="sect_C.4.3.3.2.2">
              <title>Enhanced Multi-Frame Image Conversion</title>
              <para>If Query/Retrieve View (0008,0053) is not present in the Request Identifier, then the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-GET request that correspond to the instances it possesses, as received, and shall initiate C-STORE sub-operations for all the corresponding storage SOP Instances.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "CLASSIC", then the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-GET request that correspond to the Classic single frame Instances (converted from Enhanced multi-frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted, and shall initiate C-STORE sub-operations for all the corresponding storage SOP Instances.</para>
              <para>If Query/Retrieve View (0008,0053) is present with a value of "ENHANCED", then the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-GET request that correspond to the Enhanced multi-frame Instances (converted from Classic single frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted, and shall initiate C-STORE sub-operations for all the corresponding storage SOP Instances.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>The C-GET SCP acting as a C-STORE SCU will not send information that is duplicated to the C-GET SCU acting as a C-STORE SCP. For example, if an entire series of single frame instances can be converted to a separate series of converted instances, a STUDY level C-GET will not send both series.</para>
                  </listitem>
                  <listitem>
                    <para>The Query Information Model is unchanged, and the same unique, required and optional keys are equally applicable to both views, except that the values for the SERIES and IMAGE level queries will be different and will depend on the converted instance content.</para>
                  </listitem>
                  <listitem>
                    <para>The Query/Retrieve View is still required in an IMAGE or SERIES level request identifier, even though the requested unique key(s) are unambiguous.</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
          </section>
        </section>
      </section>
    </section>
    <section label="C.5" status="2" xml:id="sect_C.5">
      <title>Association Negotiation</title>
      <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. AEs supporting DICOM Query/Retrieve SOP Classes utilize Association establishment negotiation by defining the use of Application Association Information. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for an overview of Association negotiation.</para>
      <para>SOP Classes of the Query/Retrieve Service Class, which include query services based on the C-FIND operation, may use SOP Class Extended Negotiation Sub-Item to negotiate options such as Relational-queries and Enhanced Multi-Frame Image Conversion.</para>
      <para>SOP Classes of the Query/Retrieve Service Class, which include retrieval services based on the C-MOVE and C-GET operations, may use the SOP Class Extended Negotiation Sub-Item to negotiate relational-retrieval and Enhanced Multi-Frame Image Conversion.</para>
      <para>SOP Classes of the Query/Retrieve Service Class, which include retrieval services based on the C-GET operation, use the SCP/SCU Role Selection Sub-Item to identify the SOP Classes that may be used for retrieval.</para>
      <section label="C.5.1" status="3" xml:id="sect_C.5.1">
        <title>Association Negotiation for C-FIND SOP Classes</title>
        <para>The following negotiation rules apply to DICOM SOP Classes and Specialized DICOM SOP Classes of the Query/Retrieve Service Class that include the C-FIND operation.</para>
        <para>The Association-requester (query SCU role) shall convey in the A-ASSOCIATE request:</para>
        <itemizedlist>
          <listitem>
            <para>one Abstract Syntax, in a Presentation Context, for each query based SOP Class supported</para>
          </listitem>
          <listitem>
            <para>optionally, one SOP Class Extended Negotiation Sub-Item, for each query based SOP Class</para>
          </listitem>
        </itemizedlist>
        <para>The Association-acceptor (query SCP role) of an A-ASSOCIATE request shall accept:</para>
        <itemizedlist>
          <listitem>
            <para>one Abstract Syntax, in a Presentation Context, for each query based SOP Class supported</para>
          </listitem>
          <listitem>
            <para>optionally, one SOP Class Extended Negotiation Sub-Item, for each query based SOP Class</para>
          </listitem>
        </itemizedlist>
        <section label="C.5.1.1" status="4" xml:id="sect_C.5.1.1">
          <title>SOP Class Extended Negotiation</title>
          <para>The SOP Class Extended Negotiation allows, at Association establishment, peer DICOM AEs to exchange application Association information defined by specific SOP Classes. This is achieved by defining the Service-class-application-information field. The Service-class-application-information field is used to define support for relational-queries, combined date time matching, fuzzy semantic matching of person names, timezone query adjustment and Enhanced Multi-Frame Image Conversion.</para>
          <para>This negotiation is optional. If absent, the default conditions shall be:</para>
          <itemizedlist>
            <listitem>
              <para>no relational-query support</para>
            </listitem>
            <listitem>
              <para>separate (independent) range matching of date and time Attributes</para>
            </listitem>
            <listitem>
              <para>literal matching of person names with case sensitivity unspecified</para>
            </listitem>
            <listitem>
              <para>timezone query adjustment unspecified</para>
            </listitem>
            <listitem>
              <para>no Enhanced Multi-Frame Image Conversion support</para>
            </listitem>
          </itemizedlist>
          <para>The Association-requester, for each SOP Class, may use one SOP Class Extended Negotiation Sub-Item. The SOP Class is identified by the corresponding Abstract Syntax Name (as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>) followed by the Service-class-application-information field. This field defines one or more sub-fields:</para>
          <itemizedlist>
            <listitem>
              <para>relational-query support by the Association-requester</para>
            </listitem>
            <listitem>
              <para>combined date and time range matching by the Association-requester</para>
            </listitem>
            <listitem>
              <para>literal or fuzzy semantic matching of person names by the Association-requester</para>
            </listitem>
            <listitem>
              <para>timezone query adjustment by the Association-requester</para>
            </listitem>
            <listitem>
              <para>Enhanced Multi-Frame Image Conversion support by the Association-requester</para>
            </listitem>
          </itemizedlist>
          <para>The Association-acceptor shall return a single byte field (single sub-field) if offered a single byte field (single sub-field) by the Association-requester. The Association-acceptor may return either a single byte field (single sub-field) or a multiple byte field if offered a multiple byte field by the Association-requester. A one byte response to a multiple byte request means that the missing sub-fields shall be treated as 0 values.</para>
          <note>
            <para>The restriction to return only a single byte field if that was all that was offered is because the original DICOM standard only contained one byte and older systems may not be expecting more.</para>
          </note>
          <para>The Association-acceptor, for each sub-field of the SOP Class Extended Negotiation Sub-Item offered, either accepts the Association-requester proposal by returning the same value (1) or turns down the proposal by returning the value (0).</para>
          <para>If the SOP Class Extended Negotiation Sub-Item is not returned by the Association-acceptor then relational-queries are not supported over the Association (default condition).</para>
          <para>If the SOP Class Extended Negotiation Sub-Items do not exist in the A-ASSOCIATE indication they shall be omitted in the A-ASSOCIATE response.</para>
          <section label="C.5.1.1.1" status="5" xml:id="sect_C.5.1.1.1">
            <title>SOP Class Extended Negotiation Sub-Item Structure (A-ASSOCIATE-RQ)</title>
            <para>The SOP Class Extended Negotiation Sub-Item consists of a sequence of mandatory fields as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. <xref linkend="table_C.5-1" xrefstyle="select: label"/> defines the Service-class-application-information field for DICOM Query/Retrieve SOP Classes and Specialized DICOM Query/Retrieve SOP Classes that include the C-FIND operation. This field may be either one or more bytes in length (i.e., item bytes 2, 3, 4 and 5 are optional).</para>
            <table frame="box" label="C.5-1" rules="all" xml:id="table_C.5-1">
              <caption>SOP Class Extended Negotiation Sub-Item (Service-Class-Application-Information Field) - A-ASSOCIATE-RQ</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Item Bytes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Field Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description of Field</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Relational-queries</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines relational-query support by the Association-requester. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - relational queries not supported</para>
                    <para>1 - relational queries supported</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Date-time matching</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not combined date and time Attribute range matching is requested by the Association-requester. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - combined matching not requested</para>
                    <para>1 - combined matching requested</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Fuzzy semantic matching of person names</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not fuzzy semantic person name Attribute matching is requested by the Association-requester. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - fuzzy semantic matching not requested</para>
                    <para>1 - fuzzy semantic matching requested</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>4</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Timezone query adjustment</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not the Attribute Timezone Offset From UTC (0008,0201) shall be used to adjust the query meaning for time and datetime fields in queries. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - Timezone query adjustment not requested</para>
                    <para>1 - Timezone query adjustment requested</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>5</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Enhanced Multi-Frame Image Conversion</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not the Attribute Query/Retrieve View (0008,0053) shall be used to adjust the view returned in queries to consider conversion to or from Enhanced Multi-Frame Images. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - Query/Retrieve View not supported</para>
                    <para>1 - Query/Retrieve View supported</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="C.5.1.1.2" status="5" xml:id="sect_C.5.1.1.2">
            <title>SOP Class Extended Negotiation Sub-Item Structure (A-ASSOCIATE-AC)</title>
            <para>The SOP Class Extended Negotiation Sub-Item is made of a sequence of mandatory fields as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. <xref linkend="table_C.5-2" xrefstyle="select: label"/> defines the Service-class-application-information field for DICOM Query/Retrieve SOP Classes and Specialized DICOM Query/Retrieve SOP Classes that include the C-FIND operation. This field may be either one or more bytes in length (i.e., item bytes 2, 3, 4 and 5 are optional).</para>
            <table frame="box" label="C.5-2" rules="all" xml:id="table_C.5-2">
              <caption>SOP Class Extended Negotiation Sub-Item (Service-Class-Application-Information Field) - A-ASSOCIATE-AC</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Item Bytes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Field Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description of Field</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Relational-queries</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines relational-query support for the Association-acceptor. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - relational-queries not supported</para>
                    <para>1 - relational-queries supported</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Date-time matching</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not combined date and time Attribute range matching will be performed by the Association-acceptor. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - combined matching not performed</para>
                    <para>1 - combined matching performed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Fuzzy semantic matching of person names</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not fuzzy semantic person name Attribute matching will be performed by the Association-acceptor. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - fuzzy semantic matching not performed</para>
                    <para>1 - fuzzy semantic matching performed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>4</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Timezone query adjustment</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not the Attribute Timezone Offset From UTC (0008,0201) shall be used to adjust the query meaning for time and datetime fields in queries. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - Timezone adjustment of queries not performed</para>
                    <para>1 - Timezone adjustment of queries performed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>5</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Enhanced Multi-Frame Image Conversion</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not the Attribute Query/Retrieve View (0008,0053) shall be used to adjust the view returned in queries to consider conversion to or from Enhanced Multi-Frame Images. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - Query/Retrieve View not supported</para>
                    <para>1 - Query/Retrieve View supported</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
      </section>
      <section label="C.5.2" status="3" xml:id="sect_C.5.2">
        <title>Association Negotiation for C-MOVE SOP Classes</title>
        <para>The following negotiation rules apply to DICOM SOP Classes and Specialized DICOM SOP Classes of the Query/Retrieve Service Class that include the C-MOVE operation.</para>
        <para>The Association-requester (retrieval SCU role) shall convey in the A-ASSOCIATE request:</para>
        <itemizedlist>
          <listitem>
            <para>one Abstract Syntax, in a Presentation Context, for each retrieval based SOP Class supported</para>
          </listitem>
          <listitem>
            <para>optionally, one SOP Class Extended Negotiation Sub-Item, for each retrieval based SOP Class</para>
          </listitem>
        </itemizedlist>
        <para>The Association-acceptor (retrieval SCP role) of an A-ASSOCIATE request shall accept:</para>
        <itemizedlist>
          <listitem>
            <para>one Abstract Syntax, in a Presentation Context, for each retrieval based SOP Class supported</para>
          </listitem>
          <listitem>
            <para>optionally, one SOP Class Extended Negotiation Sub-Item, for each retrieval based SOP Class</para>
          </listitem>
        </itemizedlist>
        <section label="C.5.2.1" status="4" xml:id="sect_C.5.2.1">
          <title>SOP Class Extended Negotiation</title>
          <para>The SOP Class Extended Negotiation allows, at Association establishment, peer DICOM AEs to exchange application Association information defined by specific SOP Classes. This is achieved by defining the Service-class-application-information field. The Service-class-application-information field is used to define support for relational-retrievals.</para>
          <para>This negotiation is optional. If absent, the default condition shall be:</para>
          <itemizedlist>
            <listitem>
              <para>no relational-retrieval support</para>
            </listitem>
            <listitem>
              <para>no Enhanced Multi-Frame Image Conversion support</para>
            </listitem>
          </itemizedlist>
          <para>The Association-requester, for each SOP Class, may use one SOP Class Extended Negotiation Sub-Item. The SOP Class is identified by the corresponding Abstract Syntax Name (as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>) followed by the Service-class-application-information field. This field defines:</para>
          <itemizedlist>
            <listitem>
              <para>relational-retrieval support by the Association-requester</para>
            </listitem>
            <listitem>
              <para>Enhanced Multi-Frame Image Conversion support by the Association-requester</para>
            </listitem>
          </itemizedlist>
          <para>The Association-acceptor shall return a single byte field (single sub-field) if offered a single byte field (single sub-field) by the Association-requester. The Association-acceptor may return either a single byte field (single sub-field) or a multiple byte field if offered a multiple byte field by the Association-requester. A one byte response to a multiple byte request means that the missing sub-fields shall be treated as 0 values.</para>
          <note>
            <para>The restriction to return only a single byte field if that was all that was offered is because the original DICOM standard only contained one byte and older systems may not be expecting more.</para>
          </note>
          <para>The Association-acceptor, for each SOP Class Extended Negotiation Sub-Item offered, either accepts the Association-requester proposal by returning the same value (1) or turns down the proposal by returning the value (0).</para>
          <para>If the SOP Class Extended Negotiation Sub-Item is not returned by the Association-acceptor then relational-retrievals and Enhanced Multi-Frame Image Conversion are not supported (default condition).</para>
          <para>If the SOP Class Extended Negotiation Sub-Items do not exist in the A-ASSOCIATE indication they shall be omitted in the A-ASSOCIATE response.</para>
          <section label="C.5.2.1.1" status="5" xml:id="sect_C.5.2.1.1">
            <title>SOP Class Extended Negotiation Sub-Item Structure (A-ASSOCIATE-RQ)</title>
            <para>The SOP Class Extended Negotiation Sub-Item consists of a sequence of mandatory fields as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. <xref linkend="table_C.5-3" xrefstyle="select: label"/> defines the Service-class-application-information field for DICOM Query/Retrieve SOP Classes and Specialized DICOM Query/Retrieve SOP Classes that include the C-MOVE and C-GET operations.</para>
            <table frame="box" label="C.5-3" rules="all" xml:id="table_C.5-3">
              <caption>SOP Class Extended Negotiation Sub-Item (Service-Class-Application-Information Field) - A-ASSOCIATE-RQ</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Item Bytes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Field Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description of Field</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Relational-retrieval</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines relational-retrieval support by the Association-requester. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - relational-retrieval not supported</para>
                    <para>1 - relational-retrieval supported</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Enhanced Multi-Frame Image Conversion</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not the Attribute Query/Retrieve View (0008,0053) shall be used to adjust the view returned in queries to consider conversion to or from Enhanced Multi-Frame Images. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - Query/Retrieve View not supported</para>
                    <para>1 - Query/Retrieve View supported</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="C.5.2.1.2" status="5" xml:id="sect_C.5.2.1.2">
            <title>SOP Class Extended Negotiation Sub-Item Structure (A-ASSOCIATE-AC)</title>
            <para>The SOP Class Extended Negotiation Sub-Item consists of a sequence of mandatory fields as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. <xref linkend="table_C.5-4" xrefstyle="select: label"/> defines the Service-class-application-information field for DICOM Query/Retrieve SOP Classes and Specialized DICOM Query/Retrieve SOP Classes that include the C-MOVE and C-GET operations.</para>
            <table frame="box" label="C.5-4" rules="all" xml:id="table_C.5-4">
              <caption>SOP Class Extended Negotiation Sub-Item (Service-Class-Application-Information Field) - A-ASSOCIATE-AC</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Item Bytes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Field Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description of Field</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Relational-retrieval</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines relational-retrieval support for the Association-acceptor. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - relational-retrievals not supported</para>
                    <para>1 - relational-retrievals supported</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Enhanced Multi-Frame Image Conversion</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not the Attribute Query/Retrieve View (0008,0053) shall be used to adjust the view returned in queries to consider conversion to or from Enhanced Multi-Frame Images. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - Query/Retrieve View not supported</para>
                    <para>1 - Query/Retrieve View supported</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
      </section>
      <section label="C.5.3" status="3" xml:id="sect_C.5.3">
        <title>Association Negotiation for C-GET SOP Classes</title>
        <para>When an SCP performs the C-GET operation it induces a C-STORE operation for the purpose of transmitting composite SOP Instances for Storage. This induced C-STORE operation (called a sub-operation) requires a switch from the C-GET Presentation Context to a Presentation Context that supports the specific C-STORE sub-operation.</para>
        <para>The following negotiation rules apply to retrieval based DICOM Query/Retrieve SOP Classes and Specialized DICOM Query/Retrieve SOP Classes that include the C-GET operation.</para>
        <para>The Association-requester (retrieve SCU role) in the A-ASSOCIATE request shall convey:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>C-GET operation support with:</para>
            <itemizedlist>
              <listitem>
                <para>one Abstract Syntax, in a Presentation Context, for each SOP Class supported</para>
              </listitem>
              <listitem>
                <para>and optionally, one SOP Class Extended Negotiation Sub-Item, for each retrieval based SOP Class</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para>Induced Storage sub-operation support where the SOP Class (in the retrieval SCU role) is acting as a Storage SOP Class in the SCP Role. See <xref linkend="figure_C.5-1" xrefstyle="select: label"/>. For each supported Storage SOP Class, the A-ASSOCIATE request contains:</para>
            <itemizedlist>
              <listitem>
                <para>one Abstract Syntax in a Presentation Context</para>
              </listitem>
              <listitem>
                <para>one SCP/SCU Role Selection Negotiation Sub-item with the SCP-role field set to indicate support of the SCP role. The SCP/SCU Role Selection Negotiation shall be used as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
              </listitem>
            </itemizedlist>
          </listitem>
        </orderedlist>
        <para>
          <figure label="C.5-1" pgwide="1" xml:id="figure_C.5-1">
            <title>An Example of the Sub-Operation SCU/SCP Roles</title>
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/PS3.4_C.5-1.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image008.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
        <note>
          <para>This negotiation does not place any requirements on the SCU-flag of the SCP/SCU Role Selection Negotiation Sub-Item. It may be set if the Association-requester supports the Storage Service Class in the SCU role.</para>
        </note>
        <para>The Association-acceptor (retrieve SCP role) in the A-ASSOCIATE response shall convey:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>C-GET operation support with:</para>
            <itemizedlist>
              <listitem>
                <para>one Abstract Syntax, in a Presentation Context, for each SOP Class supported</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para>Induced Storage sub-operation support where the SOP Class (using the retrieval SCP role) is acting as a Storage SOP Class in the SCU Role. See <xref linkend="figure_C.5-1" xrefstyle="select: label"/>. For each supported Storage SOP Class, the A-ASSOCIATE response contains both:</para>
            <itemizedlist>
              <listitem>
                <para>one Abstract Syntax, in a Presentation Context</para>
              </listitem>
              <listitem>
                <para>one SCP/SCU Role Selection Negotiation Sub-item with the SCP-role field set to indicate the acceptance of the Association-requester's support of the SCP role. The SCP/SCU Role Selection Negotiation shall be used as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
              </listitem>
            </itemizedlist>
          </listitem>
        </orderedlist>
        <note>
          <para>The negotiation does not place any requirements on the SCU-flag of the SCP/SCU Role Selection Negotiation Sub-Item. It may be set if the Association-acceptor accepts the Storage SCP role. <xref linkend="figure_C.5-2" xrefstyle="select: label"/> illustrates an example of the retrieve (C-GET) negotiation.</para>
        </note>
        <para><xref linkend="figure_C.5-2" xrefstyle="select: label"/> illustrates an example of the retrieve (C-GET) negotiation.</para>
        <section label="C.5.3.1" status="4" xml:id="sect_C.5.3.1">
          <title>SOP Class Extended Negotiation</title>
          <para>The SOP Class Extended Negotiation allows, at Association establishment, peer DICOM AEs to exchange application Association information defined by specific SOP Classes.</para>
          <para>This is achieved by defining the Service-class-application-information field. The Service-class-application-information field is used to define support for relational-retrievals and alternative views for Enhanced Multi-Frame Image Conversion.</para>
          <para>
            <figure label="C.5-2" pgwide="1" xml:id="figure_C.5-2">
              <title>An Example of the Retrieve (C-GET) Negotiation</title>
              <mediaobject>
                <imageobject>
                  <imagedata fileref="figures/PS3.4_C.5-2.svg"/>
                  <!--<imagedata fileref="part04_fromword_files/image010.png"/>-->
                </imageobject>
              </mediaobject>
            </figure>
          </para>
          <para>Extended negotiation for SOP Classes based on the retrieval services that include C-GET operations is identical to the negotiation defined for C-MOVE, which is defined in <xref linkend="sect_C.5.2.1" xrefstyle="select: label"/> of this Annex.</para>
          <para>Extended negotiation for the SOP Classes of the Storage Service Class (for the C-STORE sub-operation) is defined in <xref linkend="chapter_B" xrefstyle="template: Annex %n"/>.</para>
        </section>
      </section>
    </section>
    <section label="C.6" status="2" xml:id="sect_C.6">
      <title>SOP Class Definitions</title>
      <section label="C.6.1" status="3" xml:id="sect_C.6.1">
        <title>Patient Root SOP Class Group</title>
        <para>In the Patient Root Query/Retrieve Information Model, the information is arranged into four levels that correspond to one of the four values in element (0008,0052) shown in <xref linkend="table_C.6.1-1" xrefstyle="select: label"/>.</para>
        <table frame="box" label="C.6.1-1" rules="all" xml:id="table_C.6.1-1">
          <caption>Query/Retrieve Level Values for Patient Root</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Query/Retrieve Level</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Value in (0008,0052)</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Patient Information</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>PATIENT</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Study Information</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>STUDY</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Series Information</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>SERIES</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Composite Object Instance Information</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>IMAGE</para>
              </td>
            </tr>
          </tbody>
        </table>
        <note>
          <para>The use of the word "Images" rather than "Composite Object Instances" is historical to allow backward compatibility with previous versions of the standard. It should not be taken to mean that Composite Object Instances of other than image type are not included at the level indicated by the value IMAGE.</para>
        </note>
        <section label="C.6.1.1" status="4" xml:id="sect_C.6.1.1">
          <title>Patient Root Query/Retrieve Information Model</title>
          <section label="C.6.1.1.1" status="5" xml:id="sect_C.6.1.1.1">
            <title>E/R Model</title>
            <para>The Patient Root Query/Retrieve Information Model may be represented by the entity relationship diagram shown in <xref linkend="figure_C.6-1" xrefstyle="select: label"/>.</para>
            <para>
              <figure label="C.6-1" pgwide="1" xml:id="figure_C.6-1">
                <title>Patient Root Query/Retrieve Information Model E/R Diagram</title>
                <mediaobject>
                  <imageobject>
                    <imagedata fileref="figures/PS3.4_C.6-1.svg"/>
                    <!--<imagedata fileref="part04_fromword_files/image012.png"/>-->
                  </imageobject>
                </mediaobject>
              </figure>
            </para>
          </section>
          <section label="C.6.1.1.2" status="5" xml:id="sect_C.6.1.1.2">
            <title>Patient Level</title>
            <para><xref linkend="table_C.6-1" xrefstyle="select: label"/> defines the Attributes at the Patient Query/Retrieve level of the Patient Root Query/Retrieve Information Model.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>A description of the Attributes of this Information Model is contained in <xref linkend="sect_C.3" xrefstyle="select: label"/> of this part.</para>
                </listitem>
                <listitem>
                  <para>Although the Patient ID may not be globally unique, the Study Instance UID is globally unique ensuring that no two studies may be misidentified.</para>
                </listitem>
              </orderedlist>
            </note>
            <table frame="box" label="C.6-1" rules="all" xml:id="table_C.6-1">
              <caption>Patient Level Attributes for the Patient Root Query/Retrieve Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0021)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Patient Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1120)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Birth Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Birth Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Sex</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Other Patient Ids</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1000)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Other Patient Names</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Ethnic Group</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,2160)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient Comments</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,4000)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Patient Related Studies</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1200)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Patient Related Series</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1202)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Patient Related Instances</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1204)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes at Patient Level</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="C.6.1.1.3" status="5" xml:id="sect_C.6.1.1.3">
            <title>Study Level</title>
            <para><xref linkend="table_C.6-2" xrefstyle="select: label"/> defines the keys at the Study Information level of the Patient Root Query/Retrieve Information Model.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>A description of the Attributes of this Information Model is contained in <xref linkend="sect_C.3" xrefstyle="select: label"/> of this Part.</para>
                </listitem>
                <listitem>
                  <para>Although the Patient ID may not be globally unique, the Study Instance UID is globally unique ensuring that no two studies may be misidentified.</para>
                </listitem>
              </orderedlist>
            </note>
            <table frame="box" label="C.6-2" rules="all" xml:id="table_C.6-2">
              <caption>Study Level Keys for the Patient Root Query/Retrieve Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Accession Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0050)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Modalities in Study</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0061)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Classes in Study</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0062)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referring Physician's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0090)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Procedure Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Name of Physician(s) Reading Study</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Admitting Diagnoses Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1080)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Study Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1110)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Age</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Size</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Weight</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Occupation</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,2180)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Additional Patient History</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,21B0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Other Study Numbers</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1070)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Study Related Series</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1206)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Study Related Instances</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1208)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes at Study Level</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="C.6.1.1.4" status="5" xml:id="sect_C.6.1.1.4">
            <title>Series Level</title>
            <para><xref linkend="table_C.6-3" xrefstyle="select: label"/> defines the keys at the Series Information level of the Patient Root Query/Retrieve Information Model.</para>
            <table frame="box" label="C.6-3" rules="all" xml:id="table_C.6-3">
              <caption>Series Level Attributes for the Patient Root Query/Retrieve Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Modality</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Series Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,0011)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Series Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Series Related Instances</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1209)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All Other Attributes at Series Level</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <note>
              <para>The Attribute Number of Series Related Instances is an optional key. It is, however recognized as a broadly needed key and return Attribute, which SCPs are strongly encouraged to support.</para>
            </note>
          </section>
          <section label="C.6.1.1.5" status="5" xml:id="sect_C.6.1.1.5">
            <title>Composite Object Instance Level</title>
            <para><xref linkend="table_C.6-4" xrefstyle="select: label"/> defines the keys at the Composite Object Instance Information level of the Patient Root Query/Retrieve Information Model.</para>
            <table frame="box" label="C.6-4" rules="all" xml:id="table_C.6-4">
              <caption>Composite Object Instance Level Keys for the Patient Root Query/Retrieve Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Instance Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,0013)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0018)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0016)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Alternate Representation Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,3001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Series Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Purpose of Reference Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A170)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Related General SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,001A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Concept Name Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A043)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Content Template Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A504)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Template Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,DB00)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Mapping Resource</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0105)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Container Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0512)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specimen Description Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0560)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Specimen Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0551)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Specimen UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0554)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All Other Attributes at Composite Object Instance Level</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>SOP Class UID (0008,0016) is an optional key, but it is strongly recommended that it always be returned by all SCPs, if matching is requested.</para>
                </listitem>
                <listitem>
                  <para>The Concept Name Code Sequence (0040,A043) and Content Template Sequence (0040,A504) are optional keys that are useful for identifying instances of various Structured Reporting Storage SOP Classes. It is strongly recommended that these keys be supported by the SCP for query against such instances.</para>
                </listitem>
              </orderedlist>
            </note>
            <section label="C.6.1.1.5.1" status="6" xml:id="sect_C.6.1.1.5.1">
              <title>Alternate Representation Sequence</title>
              <para>The Alternate Representation Sequence (0008,3001) encodes a reference to an alternate encoding of the composite image identified in the Query response item. This alternate encoding may utilize a different SOP Class or have different image quality characteristics, but it shall be the same image.</para>
              <note>
                <para>The Alternate Representation Sequence (0008,3001) allows the query response about an original image to reference a lossy compressed version, and vice versa.</para>
              </note>
              <para>An image may be lossy compressed, e.g., for long-term archive purposes, and its SOP Instance UID changed. An application processing a SOP Instance that references the original image UID, e.g., a Structured Report, may query the C-FIND SCP for the image. The SCP returns a reference to an accessible version of the image even if the original SOP Instance is no longer available.</para>
              <para>The Alternate Representation Sequence (0008,3001), if present in a Query Request Identifier, shall be zero-length, or shall contain a single zero-length Item. That is, only Universal Matching is defined for this Attribute.</para>
              <para>The Alternate Representation Sequence (0008,3001), if present in the Query Response Identifier, may include zero or more Items. Each Alternate Representation Sequence Item in the Query Response Identifier shall include</para>
              <itemizedlist>
                <listitem>
                  <para>the Series Instance UID (0020,000E) if the alternately encoded image is in a different Series.</para>
                </listitem>
                <listitem>
                  <para>the SOP Class UID (0008,0016) and SOP Instance UID (0008,0018) of the alternately encoded image.</para>
                </listitem>
                <listitem>
                  <para>the Purpose of Reference Code Sequence (0040,A170), which shall describe the nature of the alternate encoding of the image. The Purpose of Reference Code Sequence (0040,A170) shall include only one Item. The Baseline Context Group for this Code Sequence is CID 7205.</para>
                </listitem>
              </itemizedlist>
            </section>
          </section>
          <section label="C.6.1.1.6" status="5" xml:id="sect_C.6.1.1.6">
            <title>Scope of the C-GET and C-MOVE Commands and Sub-Operations</title>
            <para>A C-MOVE or C-GET request may be performed to any level of the Query/Retrieve Model. However, the transfer of Stored SOP Instances shall always take place at the Composite Object Instance level. A C-MOVE or C-GET where the Query/Retrieve level is the:</para>
            <itemizedlist>
              <listitem>
                <para>PATIENT level indicates that all Composite Object Instances related to a Patient shall be transferred.</para>
              </listitem>
              <listitem>
                <para>STUDY level indicates that all Composite Object Instances related to a Study shall be transferred.</para>
              </listitem>
              <listitem>
                <para>SERIES level indicates that all Composite Object Instances related to a Series shall be transferred.</para>
              </listitem>
              <listitem>
                <para>IMAGE level indicates that selected individual Composite Object Instances shall be transferred.</para>
              </listitem>
            </itemizedlist>
            <note>
              <para>In the Baseline behavior, more than one entity may be retrieved if the Query/Retrieve Level is IMAGE, SERIES or STUDY, using List of UID matching, but only Single Value Matching value may be specified for Patient ID (0010,0020).</para>
            </note>
          </section>
        </section>
        <section label="C.6.1.2" status="4" xml:id="sect_C.6.1.2">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to one of the SOP Classes of the Patient Root SOP Class Group as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="C.6.1.2.1" status="5" xml:id="sect_C.6.1.2.1">
            <title>SCU Conformance</title>
            <section label="C.6.1.2.1.1" status="6" xml:id="sect_C.6.1.2.1.1">
              <title>C-FIND SCU Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group shall support queries against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.1.1" xrefstyle="select: label"/> using the baseline C-FIND SCU Behavior described in <xref linkend="sect_C.4.1.2" xrefstyle="select: label"/>.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCU shall state in its Conformance Statement whether it supports Optional Keys. If it supports Optional Keys, then it shall list the Optional Keys that it supports.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCU shall state in its Conformance Statement whether it may generate Relational-queries. If it supports Relational-queries, then it shall also support extended negotiation of relational-queries.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCU shall state in its Conformance Statement whether or not it supports extended negotiation of combined date-time matching and/or fuzzy semantic matching of person names.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCU shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) and Timezone Offset From UTC (0008,0201) when encoding queries and interpreting responses.</para>
            </section>
            <section label="C.6.1.2.1.2" status="6" xml:id="sect_C.6.1.2.1.2">
              <title>C-MOVE SCU Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCU shall support transfers against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.1.1" xrefstyle="select: label"/> using the C-MOVE SCU Behavior described in <xref linkend="sect_C.4.2.2" xrefstyle="select: label"/>.</para>
            </section>
            <section label="C.6.1.2.1.3" status="6" xml:id="sect_C.6.1.2.1.3">
              <title>C-GET SCU Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCU shall support retrievals against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.1.1" xrefstyle="select: label"/> using the C-GET SCU Behavior described in <xref linkend="sect_C.4.3.2" xrefstyle="select: label"/>.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCU, which generates retrievals using the C-GET operation, shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C-GET.</para>
            </section>
          </section>
          <section label="C.6.1.2.2" status="5" xml:id="sect_C.6.1.2.2">
            <title>SCP Conformance</title>
            <section label="C.6.1.2.2.1" status="6" xml:id="sect_C.6.1.2.2.1">
              <title>C-FIND SCP Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group shall support queries against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.1.1" xrefstyle="select: label"/> using the C-FIND SCP Behavior described in <xref linkend="sect_C.4.1.3" xrefstyle="select: label"/>.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCP shall state in its Conformance Statement whether it supports Optional Keys. If it supports Optional Keys, then it shall list the Optional Keys that it supports.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCP shall state in its Conformance Statement whether it supports Relational-queries. If it supports Relational-queries, then it shall also support extended negotiation of relational-queries.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCP shall state in its Conformance Statement whether or not it supports extended negotiation of combined date-time matching and/or fuzzy semantic matching of person names. If fuzzy semantic matching of person names is supported, then the mechanism for fuzzy semantic matching shall be specified.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCP shall state in its Conformance Statement whether it supports case-insensitive matching for PN VR Attributes and list Attributes for which this applies.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCP shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) and Timezone Offset From UTC (0008,0201) when interpreting queries, performing matching and encoding responses.</para>
            </section>
            <section label="C.6.1.2.2.2" status="6" xml:id="sect_C.6.1.2.2.2">
              <title>C-MOVE SCP Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCP shall support transfers against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.1.1" xrefstyle="select: label"/> using the C-MOVE SCP Behavior described in <xref linkend="sect_C.4.2.3" xrefstyle="select: label"/>.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCP, which generates transfers using the C-MOVE operation shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C-MOVE.</para>
            </section>
            <section label="C.6.1.2.2.3" status="6" xml:id="sect_C.6.1.2.2.3">
              <title>C-GET SCP Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCP shall support retrievals against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.1.1" xrefstyle="select: label"/> using the C-GET SCP Behavior described in <xref linkend="sect_C.4.3.3" xrefstyle="select: label"/>.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Patient Root SOP Class Group as an SCP, which generates retrievals using the C-GET operation, shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C-GET.</para>
            </section>
          </section>
        </section>
        <section label="C.6.1.3" status="4" xml:id="sect_C.6.1.3">
          <title>SOP Classes</title>
          <para>The SOP Classes in the Patient Root Query SOP Class Group of the Query/Retrieve Service Class identify the Patient Root Query/Retrieve Information Model, and the DIMSE-C operations supported. The Standard SOP Classes are listed in <xref linkend="table_C.6.1.3-1" xrefstyle="select: label"/>.</para>
          <table frame="box" label="C.6.1.3-1" rules="all" xml:id="table_C.6.1.3-1">
            <caption>SOP Classes for Patient Root Query/Retrieve</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class UID</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Patient Root Query/Retrieve Information Model - FIND</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.1.2.1.1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Patient Root Query/Retrieve Information Model - MOVE</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.1.2.1.2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Patient Root Query/Retrieve Information Model - GET</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.1.2.1.3</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="C.6.2" status="3" xml:id="sect_C.6.2">
        <title>Study Root SOP Class Group</title>
        <para>In the Study Root Query/Retrieve Information Model, the information is arranged into three levels that correspond to one of the three values in element (0008,0052) shown in <xref linkend="table_C.6.2-1" xrefstyle="select: label"/>.</para>
        <table frame="box" label="C.6.2-1" rules="all" xml:id="table_C.6.2-1">
          <caption>Query/Retrieve Level Values for Study Root</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Query/Retrieve Level</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Value in (0008,0052)</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Study Information</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>STUDY</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Series Information</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>SERIES</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Composite Object Instance Information</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>IMAGE</para>
              </td>
            </tr>
          </tbody>
        </table>
        <note>
          <para>The use of the word "Images" rather than "Composite Object Instances" is historical to allow backward compatibility with previous versions of the standard. It should not be taken to mean that Composite Object Instances of other than image type are not included at the level indicated by the value IMAGE.</para>
        </note>
        <section label="C.6.2.1" status="4" xml:id="sect_C.6.2.1">
          <title>Study Root Query/Retrieve Information Model</title>
          <section label="C.6.2.1.1" status="5" xml:id="sect_C.6.2.1.1">
            <title>E/R Model</title>
            <para>The Study Root Query/Retrieve Information Model may be represented by the entity relationship diagram shown in <xref linkend="figure_C.6-2" xrefstyle="select: label"/>.</para>
            <para>
              <figure label="C.6-2" pgwide="1" xml:id="figure_C.6-2">
                <title>Study Root Query/Retrieve Information Model E/R Diagram</title>
                <mediaobject>
                  <imageobject>
                    <imagedata fileref="figures/PS3.4_C.6-2.svg"/>
                    <!--<imagedata fileref="part04_fromword_files/image014.png"/>-->
                  </imageobject>
                </mediaobject>
              </figure>
            </para>
          </section>
          <section label="C.6.2.1.2" status="5" xml:id="sect_C.6.2.1.2">
            <title>Study Level</title>
            <para><xref linkend="table_C.6-5" xrefstyle="select: label"/> defines the keys at the Study Information level of the Study Root Query/Retrieve Information Model.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>A description of the Attributes of this Information Model is contained in <xref linkend="sect_C.3" xrefstyle="select: label"/>.</para>
                </listitem>
                <listitem>
                  <para>Although the Patient ID may not be globally unique, the Study Instance UID is globally unique ensuring that no two studies may be misidentified.</para>
                </listitem>
              </orderedlist>
            </note>
            <table frame="box" label="C.6-5" rules="all" xml:id="table_C.6-5">
              <caption>Study Level Keys for the Study Root Query/Retrieve Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Accession Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0050)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Modalities in Study</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0061)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Classes in Study</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0062)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referring Physician's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0090)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Procedure Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Name of Physician(s) Reading Study</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Admitting Diagnoses Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1080)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Study Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1110)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Patient Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1120)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0021)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Birth Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Birth Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Sex</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Other Patient Ids</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1000)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Other Patient Names</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Age</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Size</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Weight</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Ethnic Group</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,2160)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Occupation</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,2180)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Additional Patient History</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,21B0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient Comments</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,4000)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Other Study Numbers</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1070)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Patient Related Studies</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1200)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Patient Related Series</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1202)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Patient Related Instances</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1204)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Study Related Series</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1206)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Study Related Instances</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,1208)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes at Study Level</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <note>
              <para>The use of the word "Images" rather than "Composite Object Instances" is historical, and should not be taken to mean that Composite Object Instances of other than image type are not included in the number.</para>
            </note>
          </section>
          <section label="C.6.2.1.3" status="5" xml:id="sect_C.6.2.1.3">
            <title>Series Level</title>
            <para>Attributes for the Series Level of the Study Root Query/Retrieve Information Model are the same as the Attributes for the Series Level of the Patient Root Query/Retrieve Information Model described in <xref linkend="sect_C.6.1.1.4" xrefstyle="select: label"/>.</para>
          </section>
          <section label="C.6.2.1.4" status="5" xml:id="sect_C.6.2.1.4">
            <title>Composite Object Instance Level</title>
            <para>Attributes for the Composite Object Instance Level of the Study Root Query/Retrieve Information Model are the same as the Attributes for the Composite Object Instance Level of the Patient Root Query/Retrieve Information Model described in <xref linkend="sect_C.6.1.1.5" xrefstyle="select: label"/>.</para>
          </section>
          <section label="C.6.2.1.5" status="5" xml:id="sect_C.6.2.1.5">
            <title>Scope of the Get and Move Commands and Sub-Operations</title>
            <para>A C-MOVE or C-GET request may be performed to any level of the Query/Retrieve Model. However, the transfer of Stored SOP Instances shall always take place at the Composite Object Instance level. A C-MOVE or C-GET where the Query/Retrieve level is the:</para>
            <itemizedlist>
              <listitem>
                <para>STUDY level indicates that all Composite Object Instances related to a Study shall be transferred</para>
              </listitem>
              <listitem>
                <para>SERIES level indicates that all Composite Object Instances related to a Series shall be transferred</para>
              </listitem>
              <listitem>
                <para>IMAGE level indicates that selected individual Composite Object Instances shall be transferred</para>
              </listitem>
            </itemizedlist>
            <note>
              <para>In the Baseline behavior, more than one entity may be retrieved if the Query/Retrieve Level is IMAGE, SERIES or STUDY, using List of UID matching,</para>
            </note>
          </section>
        </section>
        <section label="C.6.2.2" status="4" xml:id="sect_C.6.2.2">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to one of the SOP Classes of the Study Hierarchy SOP Class Group as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="C.6.2.2.1" status="5" xml:id="sect_C.6.2.2.1">
            <title>SCU Conformance</title>
            <section label="C.6.2.2.1.1" status="6" xml:id="sect_C.6.2.2.1.1">
              <title>C-FIND SCU Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group shall support queries against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.2.1" xrefstyle="select: label"/> using the C-FIND SCU behavior described in <xref linkend="sect_C.4.1.2" xrefstyle="select: label"/>.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCU shall state in its Conformance Statement whether it supports Optional Keys. If it supports Optional Keys, then it shall list the Optional Keys that it supports.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCU shall be capable of generating queries using the Hierarchical Search. It shall not generate queries using Relational-queries unless the Relational-queries option has been successfully negotiated.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCU shall state in its Conformance Statement whether it may generate Relational-queries. If it supports Relational Search, then it shall also support extended negotiation of relational-queries.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCU shall state in its Conformance Statement whether or not it supports extended negotiation of combined date-time matching and/or fuzzy semantic matching of person names.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCU shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) and Timezone Offset From UTC (0008,0201) when encoding queries and interpreting responses.</para>
            </section>
            <section label="C.6.2.2.1.2" status="6" xml:id="sect_C.6.2.2.1.2">
              <title>C-MOVE SCU Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCU shall support transfers against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.2.1" xrefstyle="select: label"/> using the C-MOVE SCU Behavior described in <xref linkend="sect_C.4.2.2" xrefstyle="select: label"/>.</para>
            </section>
            <section label="C.6.2.2.1.3" status="6" xml:id="sect_C.6.2.2.1.3">
              <title>C-GET SCU Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCU shall support retrievals against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.2.1" xrefstyle="select: label"/> using the C-GET SCU Behavior described in <xref linkend="sect_C.4.3.2" xrefstyle="select: label"/>.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCU, which generates retrievals using the C-GET operation shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C-GET.</para>
            </section>
          </section>
          <section label="C.6.2.2.2" status="5" xml:id="sect_C.6.2.2.2">
            <title>SCP Conformance</title>
            <section label="C.6.2.2.2.1" status="6" xml:id="sect_C.6.2.2.2.1">
              <title>C-FIND SCP Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group shall support queries against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.2.1" xrefstyle="select: label"/> using the C-FIND SCP behavior described in <xref linkend="sect_C.4.1.3" xrefstyle="select: label"/>.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCP shall state in its Conformance Statement whether it supports Optional Keys. If it supports Optional Keys, then it shall list the Optional Keys that it supports.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCP shall state in its Conformance Statement whether it supports Relational Search. If it supports Relational Search, then it shall also support extended negotiation of relational-queries.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCP shall state in its Conformance Statement whether or not it supports extended negotiation of combined date-time matching and/or fuzzy semantic matching of person names. If fuzzy semantic matching of person names is supported, then the mechanism for fuzzy semantic matching shall be specified.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCP shall state in its Conformance Statement whether it supports case-insensitive matching for PN VR Attributes and list Attributes for which this applies.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCP shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) and Timezone Offset From UTC (0008,0201) when interpreting queries, performing matching and encoding responses.</para>
            </section>
            <section label="C.6.2.2.2.2" status="6" xml:id="sect_C.6.2.2.2.2">
              <title>C-MOVE SCP Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCP shall support transfers against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.2.1" xrefstyle="select: label"/> using the C-MOVE SCP Behavior described in <xref linkend="sect_C.4.2.3" xrefstyle="select: label"/>.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCP, which generates transfers using the C-MOVE operation shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C-MOVE.</para>
            </section>
            <section label="C.6.2.2.2.3" status="6" xml:id="sect_C.6.2.2.2.3">
              <title>C-GET SCP Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCP shall support retrievals against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.2.1" xrefstyle="select: label"/> using the C-GET SCP Behavior described in <xref linkend="sect_C.4.3.3" xrefstyle="select: label"/>.</para>
              <para>An implementation that conforms to one of the SOP Classes of the Study Root SOP Class Group as an SCP, which generates retrievals using the C-GET operation shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C-GET.</para>
            </section>
          </section>
        </section>
        <section label="C.6.2.3" status="4" xml:id="sect_C.6.2.3">
          <title>SOP Classes</title>
          <para>The SOP Classes in the Study Root SOP Class Group of the Query/Retrieve Service Class identify the Study Root Query/Retrieve Information Model, and the DIMSE-C operations supported. The Standard SOP Classes are listed in <xref linkend="table_C.6.2.3-1" xrefstyle="select: label"/>.</para>
          <table frame="box" label="C.6.2.3-1" rules="all" xml:id="table_C.6.2.3-1">
            <caption>SOP Classes for Study Root Query/Retrieve</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class UID</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Study Root Query/Retrieve Information Model - FIND</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.1.2.2.1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Study Root Query/Retrieve Information Model - MOVE</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.1.2.2.2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Study Root Query/Retrieve Information Model - GET</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.1.2.2.3</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="C.6.3" status="3" xml:id="sect_C.6.3">
        <title>Patient/Study Only SOP Class Group</title>
        <para>Retired. See PS 3.4-2004.</para>
      </section>
    </section>
  </chapter>
  <chapter label="D" status="1" xml:id="chapter_D">
    <title>Study Content Notification Service Class (Normative)</title>
    <para>Retired. See PS 3.4-2004.</para>
  </chapter>
  <chapter label="E" status="1" xml:id="chapter_E">
    <title>Patient Management Service Class (Normative)</title>
    <para>Retired. See PS 3.4-2004.</para>
  </chapter>
  <chapter label="F" status="1" xml:id="chapter_F">
    <title>Procedure Step SOP Classes (Normative)</title>
    <section label="F.1" status="2" xml:id="sect_F.1">
      <title>Overview</title>
      <para>This Annex defines the Procedure Step SOP Classes.</para>
      <note>
        <para>This Annex formerly defined a Study Management Service Class that has been retired. See PS 3.4-2004.</para>
      </note>
      <section label="F.1.1" status="3" xml:id="sect_F.1.1">
        <title>Scope</title>
        <para>Retired. See PS 3.4-2004.</para>
      </section>
      <section label="F.1.2" status="3" xml:id="sect_F.1.2">
        <title>Study Management Functional Model</title>
        <para>Retired. See PS 3.4-2004.</para>
      </section>
      <section label="F.1.3" status="3" xml:id="sect_F.1.3">
        <title>Study Management Information Model</title>
        <para>Retired. See PS 3.4-2004.</para>
      </section>
      <section label="F.1.4" status="3" xml:id="sect_F.1.4">
        <title>Study Management States</title>
        <para>Retired. See PS 3.4-2004.</para>
      </section>
      <section label="F.1.5" status="3" xml:id="sect_F.1.5">
        <title>Modality Performed Procedure Step Management States</title>
        <para>The state information related to the Modality Performed Procedure Step is specified by the Modality Performed Procedure Step IOD in the Attribute Performed Procedure Step Status (0040,0252).</para>
        <para>The Performed Procedure Step Object represents only the "performed" segment of the real-world procedure step and not the "scheduled" segment. The number of events is therefore limited; all events are initiated by the modality. The state "DISCONTINUED" means canceled or unsuccessfully terminated, which may happen when the performance of a Procedure Step has been started but cannot be finished by the modality. The modality shall convey this state change to the information system (the SCP), to allow the information system to reschedule or cancel the related Procedure Step. The state "COMPLETED" means that the acquisition of Composite SOP Instances has been successfully completed and the SCU has provided all required Attribute values for the Performed Procedure Step.</para>
        <para><xref linkend="table_F.1-3" xrefstyle="select: label"/> describes the valid Modality Performed Procedure Step states.</para>
        <table frame="box" label="F.1-3" rules="all" xml:id="table_F.1-3">
          <caption>Modality Performed Procedure Step States</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">State</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Description</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>In Progress</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Modality Performed Procedure Step created and execution in progress</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Discontinued</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Execution of Modality Performed Procedure Step canceled by modality</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Completed</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Modality Performed Procedure Step completed</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para><xref linkend="table_F.1-4" xrefstyle="select: label"/> defines the valid state transitions for the Performed Procedure Steps. For each of the above defined states the valid state resulting from the occurrence of events is specified. These state transitions are managed by the Modality Performed Procedure Step SOP Class.</para>
        <table frame="box" label="F.1-4" rules="all" xml:id="table_F.1-4">
          <caption>Modality Performed Procedure Step State Transition Diagram</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1"/>
              <th align="center" colspan="3" rowspan="1">
                <para>States</para>
              </th>
            </tr>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>Events</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>In Progress</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Discontinued</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Completed</para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Performed Procedure Step Discontinued</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Discontinued</para>
              </td>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Performed Procedure Step Completed</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Completed</para>
              </td>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
            </tr>
          </tbody>
        </table>
      </section>
      <section label="F.1.6" status="3" xml:id="sect_F.1.6">
        <title>General Purpose Scheduled Procedure Step Management States (Retired)</title>
        <para>Retired. See PS 3.4-2011.</para>
      </section>
      <section label="F.1.7" status="3" xml:id="sect_F.1.7">
        <title>General Purpose Performed Procedure Step Management States (Retired)</title>
        <para>Retired. See PS 3.4-2011.</para>
      </section>
    </section>
    <section label="F.2" status="2" xml:id="sect_F.2">
      <title>Conformance Overview</title>
      <para>The application-level services addressed by this Service Class Definition are specified via the following distinct SOP Classes:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Modality Performed Procedure Step SOP Class</para>
        </listitem>
        <listitem>
          <para>Modality Performed Procedure Step Notification SOP Class</para>
        </listitem>
        <listitem>
          <para>Modality Performed Procedure Step Retrieve SOP Class</para>
        </listitem>
      </orderedlist>
      <para>Each SOP Class operates on a subset of the Modality Performed Procedure Step IOD and specifies the Attributes, operations, notifications, and behavior applicable to the SOP Class. Conformance of Application Entities shall be defined by selecting one or more of the Study and Study Component Management SOP and Meta SOP Classes. For each SOP Class conformance requirements shall be specified in terms of the Service Class Provider (SCP) and the Service Class User (SCU).</para>
      <section label="F.2.1" status="3" xml:id="sect_F.2.1">
        <title>Association Negotiation</title>
        <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. The Association negotiation procedure specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> shall be used to negotiate the supported SOP Classes.</para>
        <para>Support for the SCP/SCU role selection negotiation is mandatory. The SOP Class Extended Negotiation shall not be supported.</para>
        <note>
          <para>Event notification is a process that logically extends across multiple Associations. SCP implementations should support a local table of SCUs to which event notifications are to be sent.</para>
        </note>
      </section>
    </section>
    <section label="F.3" status="2" xml:id="sect_F.3">
      <title>Detached Study Management SOP Class(Retired)</title>
      <para>Retired. See PS 3.4-2004.</para>
    </section>
    <section label="F.4" status="2" xml:id="sect_F.4">
      <title>Study Component Management SOP Class(Retired)</title>
      <para>Retired. See PS 3.4-2004.</para>
    </section>
    <section label="F.5" status="2" xml:id="sect_F.5">
      <title>Study Management Meta SOP Class(Retired)</title>
      <para>Retired. See PS 3.4-2004.</para>
    </section>
    <section label="F.6" status="2" xml:id="sect_F.6">
      <title>Specialized SOP Class Conformance(Retired)</title>
      <para>Retired. See PS 3.4-2004.</para>
    </section>
    <section label="F.7" status="2" xml:id="sect_F.7">
      <title>Modality Performed Procedure Step SOP Class</title>
      <section label="F.7.1" status="3" xml:id="sect_F.7.1">
        <title>DIMSE Service Group</title>
        <para>The DIMSE Services shown in <xref linkend="table_F.7.1-1" xrefstyle="select: label"/> are applicable to the Modality Performed Procedure Step IOD under the Modality Performed Procedure Step SOP Class.</para>
        <table frame="box" label="F.7.1-1" rules="all" xml:id="table_F.7.1-1">
          <caption>DIMSE Service Group</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">DIMSE Service Element</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Usage SCU/SCP</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-CREATE</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-SET</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>The DIMSE Services and Protocols are specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/></para>
      </section>
      <section label="F.7.2" status="3" xml:id="sect_F.7.2">
        <title>Operations</title>
        <para>The Application Entity that claims conformance to this SOP Class as an SCU shall be permitted to invoke the following operations and the Application Entity that claims conformance as an SCP shall be capable of providing the following operations.</para>
        <section label="F.7.2.1" status="4" xml:id="sect_F.7.2.1">
          <title>Create Modality Performed Procedure Step SOP Instance</title>
          <para>This operation allows an SCU to create an instance of the Modality Performed Procedure Step SOP Class and provide information about a specific real-world Performed Procedure Step that is under control of the SCU. This operation shall be invoked through the DIMSE N-CREATE Service.</para>
          <para>Note : The modality should inform the Information System as soon as possible that the performance of the Procedure Step has been started by sending the N-CREATE Service Request. This allows an SCP of the Modality Worklist SOP Class (if supported) to update the Modality Worklist. Some of the Attribute values are already known at the beginning of the Procedure Step, they are required to be sent in the N-CREATE command. Other mandatory Attributes are known only at the end of the Performed Procedure Step, they are assigned a value in the N-SET command.</para>
          <para>The same SOP Instance UID is shared by all three Modality Performed Procedure Step SOP Classes. This means that the SOP Instance created and set using the services of the Modality Performed Procedure Step SOP Class can be retrieved using its SOP Instance UID within the service of the Modality Performed Procedure Step Retrieve SOP Class. Changes in its state can be notified by using its SOP Instance UID within the service of the Modality Performed Procedure Step Notification SOP Class. The SOP Class UID specified in the DIMSE N-CREATE and N-SET request primitives shall be the UID of the Modality Performed Procedure Step SOP Class.</para>
          <para>The Modality Performed Procedure Step SOP Instance UID shall not be used to identify a SOP Instance of the Study Component Service Class.</para>
          <section label="F.7.2.1.1" status="5" xml:id="sect_F.7.2.1.1">
            <title>Modality Performed Procedure Step Subset Specification</title>
            <para>The Application Entity that claims conformance to this SOP Class as an SCU must provide all Required Attributes as specified in <xref linkend="table_F.7.2-1" xrefstyle="select: label"/>. Optional Attributes maintained by the SCP may be provided as well. The Application Entity that claims conformance as an SCP to this SOP Class shall support the subset of the Modality Performed Procedure Step Attributes specified in <xref linkend="table_F.7.2-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="F.7.2-1" rules="all" xml:id="table_F.7.2-1">
              <caption>Modality Performed Procedure Step SOP Class N-CREATE, N-SET and Final State Attributes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-CREATE (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-SET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Requirement Type Final State (see Note 1)</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(Required if an extended or replacement character set is used)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(Required if an extended or replacement character set is used in an Attribute that is set)</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para><emphasis role="bold">Performed Procedure Step Relationship</emphasis></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Step Attribute Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0270)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Study Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Study Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1110)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Accession Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0050)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Issuer of Accession Number Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0051)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is not present; may be present otherwise</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Local Namespace Entity ID (0040,0031) is not present; may be present otherwise.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is present.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Placer Order Number/Imaging Service Request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,2016)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Order Placer Identifier Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0026)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is not present; may be present otherwise</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Local Namespace Entity ID (0040,0031) is not present; may be present otherwise..</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is present.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Filler Order Number/Imaging Service Request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,2017)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Order Filler Identifier Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0027)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is not present; may be present otherwise</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Local Namespace Entity ID (0040,0031) is not present; may be present otherwise..</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is present.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Procedure ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Procedure Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1064)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Procedure Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Procedure Step ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0009)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Procedure Step Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0007)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Protocol Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0008)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;All other Attributes from Scheduled Protocol Code Sequence</emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0021)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID Qualifiers Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0024)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is present.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;All other Attributes of Issuer of Patient ID Qualifiers Sequence</emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Birth Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Sex</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Patient Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1120)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Admission ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Admission ID Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0014)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is not present; may be present otherwise</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Local Namespace Entity ID (0040,0031) is not present; may be present otherwise..</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is present.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Service Episode ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Service Episode ID Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0064)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is not present; may be present otherwise</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Local Namespace Entity ID (0040,0031) is not present; may be present otherwise..</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is present.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Service Episode Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0062)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para><emphasis role="bold">Performed Procedure Step Information</emphasis></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0253)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Station AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0241)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Station Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0242)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Location</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0243)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Start Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0244)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Start Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0245)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Status</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0252)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0254)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Type Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0255)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Procedure Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Reason For Performed Procedure Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1012)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step End Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0250)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step End Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0251)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Comments on the Performed Procedure Step</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0280)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Discontinuation Reason Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0281)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para><emphasis role="bold">Image Acquisition Results</emphasis></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Modality</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Protocol Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0260)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">&gt;All other Attributes from Performed Protocol Code Sequence</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Series Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0340)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                    <para>(see note 2)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performing Physician's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1050)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Protocol Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0018,1030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Operators' Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1070)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Series Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Series Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,103E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Retrieve AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0054)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Archive Requested</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A494)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Image Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>See <xref linkend="sect_F.7.2.2.2" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Container Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0512)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Specimen Description Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0560)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Specimen Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0551)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Specimen UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0554)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Non-Image Composite SOP Instance Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0220)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>See <xref linkend="sect_F.7.2.2.2" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">&gt;All other Attributes from Performed Series Sequence</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from Radiation Dose Module and Billing and Material Code Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
              </tbody>
            </table>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>The requirement for the final state is that which applies at the time that the Performed Procedure Step Status (0040,0252) is N-SET to a value of COMPLETED or DISCONTINUED, as described in <xref linkend="sect_F.7.2.2.2" xrefstyle="select: label"/>. It is only described if it is different from the SCP requirement for the N-CREATE.</para>
                </listitem>
                <listitem>
                  <para>The Performed Series Sequence (0040,0340) may not be empty (zero length) at the time that the Performed Procedure Step Status (0040,0252) is N-SET to a value of COMPLETED or DISCONTINUED. In other words a Series must exist for every Performed Procedure Step, though it may contain no Images or Non-Image Composite objects, if none were created, as described in <xref linkend="sect_F.7.2.2.2" xrefstyle="select: label"/>.</para>
                </listitem>
                <listitem>
                  <para>Attributes (0040,1006) Placer Order Number/Procedure and (0040,1007) Filler Order Number/Procedure were previously defined in DICOM. They are now retired (see PS3.3-1998).</para>
                </listitem>
                <listitem>
                  <para>Attributes (0040,2006) and (0040,2007) were previously defined in DICOM. They are now retired (see PS3.3-1998).</para>
                </listitem>
                <listitem>
                  <para>Only Attributes that are specified in a SOP Instance at N-CREATE may later be updated through the N-SET. If an SCU wishes to use the PPS Discontinuation Reason Code Sequence (0040,0281), it must create that Attribute (zero-length) during MPPS N-CREATE.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
          <section label="F.7.2.1.2" status="5" xml:id="sect_F.7.2.1.2">
            <title>Service Class User</title>
            <para>The SCU shall specify in the N-CREATE request primitive the Class and Instance UIDs of the Modality Performed Procedure Step SOP Instance that is created and for which Attribute Values are to be provided.</para>
            <note>
              <para>This requirement facilitates the inclusion of relevant Attributes in the Composite SOP Instances generated during the Performed Procedure Step.</para>
            </note>
            <para>The SCU shall provide Attribute values for the Modality Performed Procedure Step SOP Class Attributes as specified in <xref linkend="table_F.7.2-1" xrefstyle="select: label"/>. Additionally, values may be provided for optional Modality Performed Procedure Step IOD Attributes that are supported by the SCP. The encoding rules for Modality Performed Procedure Step Attributes are specified in the N-CREATE request primitive specification in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <para>The SCU shall be capable of providing all required Attribute values to the SCP in the N-CREATE request primitive. The SCU may provide Attribute values for optional Attributes that are not maintained by the SCP. In such case the SCU shall function properly regardless of whether the SCP accepts values for those Attributes or not.</para>
            <para>All Attributes shall be created before they can be set. Sequence Attributes shall be created before they can be filled. Sequence Item Attributes shall not be created at zero length.</para>
            <note>
              <para>Not all the Attributes that can be created can be set afterward (see <xref linkend="table_F.7.2-1" xrefstyle="select: label"/>).</para>
            </note>
            <para>The SCU shall only send the N-CREATE request primitive with the value for the Attribute "Performed Procedure Step Status" (0040,0252) set to "IN PROGRESS".</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>It is assumed but not required that the SCU (the modality) received the Study Instance UID within the scope of the Basic Worklist Management SOP Class.</para>
                </listitem>
                <listitem>
                  <para>If the SCU has grouped multiple Requested Procedures into a single performed step the Study Instance UID (0020,000D) Attribute within the Scheduled Step Attributes Sequence (0040,0270) may be the Study Instance UID (0020,000D) for the study that contains all images and non-image composite instances created during performance of the current step. This value may be generated by the SCU and may be the same for all items of the sequence. In addition, the Referenced Study Sequence (0008,1110) may contain the Study Instance UIDs from the Requested Procedures being grouped. If Referenced Study Sequence (0008,1110) is present with an Item, the SOP Class UID of the Detached Study Management SOP Class (Retired) may be used in Referenced SOP Class UID (0008,1150).</para>
                </listitem>
                <listitem>
                  <para>If the SCU does not have available Scheduled Procedure Step data applicable to the current step, the SCU may generate a value for the Study Instance UID (0020,000D) Attribute within the Scheduled Step Attributes Sequence (0040,0270). This value of the Study Instance UID (0020,000D) may be stored in all images and non-image composite SOP instances created during performance of this step. All other Attributes within the Scheduled Step Attribute Sequence (0040,0270) may be set to zero length for 2/2 requirement types or absent for 3/3 requirement types (see <xref linkend="table_F.7.2-1" xrefstyle="select: label"/>).</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
          <section label="F.7.2.1.3" status="5" xml:id="sect_F.7.2.1.3">
            <title>Service Class Provider</title>
            <para>The N-CREATE operation allows the SCU to provide to the SCP selected Attribute values for a specific Modality Performed Procedure Step SOP Instance. This operation shall be invoked through the use of the DIMSE N-CREATE Service used in conjunction with the appropriate Modality Performed Procedure Step SOP Instance.</para>
            <para>The SCP shall return, via the N-CREATE response primitive, the N-CREATE Response Status Code applicable to the associated request.</para>
            <para>The SCP shall accept N-CREATE request primitives only if the value of the Attribute "Performed Procedure Step Status" (0040,0252) is "IN PROGRESS". If the Performed Procedure Step Status Attribute has another value, the SCP shall set the failure status code "Invalid Attribute value" (Code: 0106H) with an Attribute List.</para>
            <note>
              <para>The SCP may update the scheduling information on which the Modality Worklist is based, including the values of Study Date (0008,0020) and Study Time (0008,0030) using the earliest corresponding values of Performed Procedure Step Date (0040,0244) and Performed Procedure Step Time (0040,0245), in order to achieve consistency of Study level Attributes when multiple procedure steps are performed on different devices.</para>
            </note>
          </section>
          <section label="F.7.2.1.4" status="5" xml:id="sect_F.7.2.1.4">
            <title>Status Codes</title>
            <para>There are no specific status codes. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for response status codes.</para>
          </section>
        </section>
        <section label="F.7.2.2" status="4" xml:id="sect_F.7.2.2">
          <title>Set Modality Performed Procedure Step Information</title>
          <para>This operation allows an SCU to set Attribute Values of an instance of the Modality Performed Procedure Step SOP Class and provide information about a specific real-world Modality Performed Procedure Step that is under control of the SCU. This operation shall be invoked through the DIMSE N-SET Service.</para>
          <section label="F.7.2.2.1" status="5" xml:id="sect_F.7.2.2.1">
            <title>Modality Performed Procedure Step IOD Subset Specification</title>
            <para>The Application Entity that claims conformance to this SOP Class as an SCU may choose to modify a subset of the Attributes maintained by the SCP. The Application Entity that claims conformance as an SCP to this SOP Class shall support the subset of the Modality Performed Procedure Step Attributes specified in <xref linkend="table_F.7.2-1" xrefstyle="select: label"/>.</para>
            <para>The character set used for Attribute Values updated using the N-SET shall be the same as that specified by the N-CREATE Request Primitive.</para>
          </section>
          <section label="F.7.2.2.2" status="5" xml:id="sect_F.7.2.2.2">
            <title>Service Class User</title>
            <para>The SCU shall specify in the N-SET request primitive the UID of the Modality Performed Procedure Step SOP Instance for which it wants to set Attribute Values.</para>
            <para>The SCU shall be permitted to set Attribute values for any Modality Performed Procedure Step SOP Class Attribute specified in <xref linkend="table_F.7.2-1" xrefstyle="select: label"/>. The SCU shall specify the list of Modality Performed Procedure Step SOP Class Attributes for which it wants to set the Attribute Values. The SCU shall provide, with one or more N-SET request primitives, the Attribute values specified in <xref linkend="table_F.7.2-1" xrefstyle="select: label"/>. The encoding rules for Modality Performed Procedure Step Attributes are specified in the N-SET request primitive specification in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. The SCU shall only set Attribute Values that are already created with an N-CREATE request.</para>
            <para>The SCU shall not send N-SET request primitives for a Modality Performed Procedure Step SOP Instance after a N-SET request primitive with a value for the Attribute "Performed Procedure Step Status" (0040,0252) is "COMPLETED" or "DISCONTINUED" has been sent.</para>
            <para>If Sequences are included in a N-SET command, all Items of a Sequence are to be included in the command and not only the Items to be updated.</para>
            <para>Once the Modality Performed Procedure Step Status (0040,0252) has been set to "COMPLETED" or "DISCONTINUED" the SCU shall no longer modify the Modality Performed Procedure Step SOP Instance, and shall not create new Composite SOP Instances as part of the same Modality Performed Procedure Step SOP Instance.</para>
            <note>
              <para>A Modality that wishes to continue or resume creating Composite SOP Instances may create a new Modality Performed Procedure Step.</para>
            </note>
            <para>Before or when Modality Performed Procedure Step Status (0040,0252) is set to "COMPLETED" or "DISCONTINUED" the SCU shall have created or set all the Attributes according to the requirements in the Final State column of <xref linkend="table_F.7.2-1" xrefstyle="select: label"/>.</para>
            <para>Before or when Modality Performed Procedure Step Status (0040,0252) is set to "COMPLETED" or "DISCONTINUED" the SCU shall have sent to the SCP a list of all Image SOP Instances and all Non-Image Composite SOP Instances created during the Procedure Step in Referenced Image Sequence (0008,1140) and Referenced Non-Image Composite SOP Instance Sequence (0040,0220) respectively.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>The intent is that a completed or discontinued Modality Performed Procedure Step entity will contain a complete list of all the Images and Non-Image Composite SOP Instances that were created.</para>
                </listitem>
                <listitem>
                  <para>The distinction between the list of images and non-images is present for historic reasons only, and has no semantic significance.</para>
                </listitem>
              </orderedlist>
            </note>
            <para>The Modality Performed Procedure Step Status (0040,0252) shall not be set to "COMPLETED" or "DISCONTINUED" if the list contains neither Image references nor Non-Image Composite SOP Instance references, unless no such Instances were created.</para>
          </section>
          <section label="F.7.2.2.3" status="5" xml:id="sect_F.7.2.2.3">
            <title>Service Class Provider</title>
            <para>The N-SET operation allows the SCU to request that the SCP update selected Attribute values for a specific Modality Performed Procedure Step SOP Instance. This operation shall be invoked through the use of the DIMSE N-SET Service used in conjunction with the appropriate Modality Performed Procedure Step SOP Instance. The N-SET value for Specific Character Set (0008,0005) does not replace the previous value. The SCP shall appropriately modify its internal representation so that subsequent operations reflect the combination of the character sets in use by the Attributes in this N-SET and those used by Attributes that have not been modified.</para>
            <note>
              <para>The SCP may need to convert the text for instance to the Unicode character set. If the SCP is not able to perform a necessary conversion it may return the Invalid Attribute value error code (0106H).</para>
            </note>
            <para>The SCP shall return, via the N-SET response primitive, the N-SET Response Status Code applicable to the associated request. Contingent on the N-SET Response Status, the SCP shall update the Referenced Performed Procedure Step Attributes.</para>
            <para>The SCP shall accept N-SET request primitives only if the value of the already existing Attribute "Performed Procedure Step Status" (0040,0252) is "IN PROGRESS". If the already existing Performed Procedure Step Status Attribute has another value, the SCP shall set the failure status code "Processing failure" (Code: 0110H) with a Specific Error Comment (see <xref linkend="sect_F.7.2.2.4" xrefstyle="select: label"/>).</para>
            <para>The SCP may itself modify any Attributes of the Modality Performed Procedure Step SOP Instance only after the "Performed Procedure Step Status" (0040,0252) has been set to "COMPLETED" or "DISCONTINUED".</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>Such coercion of Attributes by the SCP may be necessary to correct, for example, patient identification information or incorrectly selected scheduling information. Such an operation is not permitted to the SCU by the requirements described in <xref linkend="table_F.7.2-1" xrefstyle="select: label"/>, which might create a new Modality Performed Procedure Step SOP Instance to achieve the same objective.</para>
                </listitem>
                <listitem>
                  <para>Under exceptional circumstances, it may be necessary for the SCP to itself set the Performed Procedure Step Status (0040,0252) to COMPLETED or DISCONTINUED, for example if the Modality has failed. When the Modality recovers, subsequent N-SETs may fail.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
          <section label="F.7.2.2.4" status="5" xml:id="sect_F.7.2.2.4">
            <title>Status Codes</title>
            <para>The specific error comment that may be returned as a status code in a N-SET-RSP is defined in <xref linkend="table_F.7.2-2" xrefstyle="select: label"/>. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for additional response status codes.</para>
            <table frame="box" label="F.7.2-2" rules="all" xml:id="table_F.7.2-2">
              <caption>N-SET Status</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status Code</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Error Comment (0000,0902)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Error ID (0000,0903)</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Processing Failure</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0110</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Object may no longer be updated</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A710</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
      </section>
      <section label="F.7.3" status="3" xml:id="sect_F.7.3">
        <title>Modality Performed Procedure Step SOP Class UID</title>
        <para>The Modality Performed Procedure Step SOP Class shall be uniquely identified by the Modality Performed Procedure Step SOP Class UID that shall have the value "1.2.840.10008.3.1.2.3.3".</para>
      </section>
      <section label="F.7.4" status="3" xml:id="sect_F.7.4">
        <title>Conformance Requirements</title>
        <para>Implementations providing conformance to the Modality Performed Procedure Step SOP Class shall be conformant as described in the following sections and shall include within their Conformance Statement information as described below.</para>
        <para>An implementation may conform to this SOP Class as an SCU or as an SCP. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <section label="F.7.4.1" status="4" xml:id="sect_F.7.4.1">
          <title>SCU Conformance</title>
          <para>An implementation that is conformant to this SOP Class as an SCU shall meet conformance requirements for the operations that it invokes.</para>
          <section label="F.7.4.1.1" status="5" xml:id="sect_F.7.4.1.1">
            <title>Operations</title>
            <para>Any Attributes for which Attribute Values may be provided (using the N-CREATE Service) by the SCU shall be enumerated in the Conformance Statement.</para>
            <para>Any Attributes for which Attribute Values may be provided (using the N-SET Service) by the SCU shall be enumerated in the Conformance Statement.</para>
            <para>An implementation that conforms to this SOP Class as an SCU shall specify under which conditions during the performance of the real-world Performed Procedure Step it will create the SOP Class Instance and under which conditions it will set the status value to COMPLETED and DISCONTINUED.</para>
            <para>An implementation that conforms to this SOP Class as an SCU shall specify what strategy it applies to group Storage SOP Class Instances referenced in a Performed Procedure Step.</para>
            <note>
              <para>For example, whether or not Radiation Dose SR instances are sent within the same Performed Procedure Step as the images to which it applies, or a different Performed Procedure Step. See the discussion of the MPPS in the DICOM real-world model in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
            </note>
          </section>
        </section>
        <section label="F.7.4.2" status="4" xml:id="sect_F.7.4.2">
          <title>SCP Conformance</title>
          <para>An implementation that is conformant to this SOP Class as an SCP shall meet conformance requirements for the operations that it performs.</para>
          <section label="F.7.4.2.1" status="5" xml:id="sect_F.7.4.2.1">
            <title>Operations</title>
            <para>Any Attributes for which Attribute Values may be provided (using the N-CREATE Service) by the SCU shall be enumerated in the Conformance Statement.</para>
            <para>Any Attributes for which Attribute Values may be updated (using the N-SET Service) by the SCU shall be enumerated in the Conformance Statement.</para>
            <para>The Conformance Statement shall also provide information on the behavior of the SCP at the following occurrences:</para>
            <itemizedlist>
              <listitem>
                <para>The creation of a new Instance of the Modality Performed Procedure Step SOP Class with the status "IN PROGRESS". The result of that process on the scheduling information and on the Attributes values of the Modality Worklist SOP Class shall be specified.</para>
              </listitem>
              <listitem>
                <para>The update of the Attribute "Performed Procedure Step Status", i.e., the change from the state "IN PROGRESS" to "DISCONTINUED" or to "COMPLETED".</para>
              </listitem>
              <listitem>
                <para>Which Attributes the SCP may coerce after the state has been set to "IN PROGRESS" or "DISCONTINUED" or to "COMPLETED".</para>
              </listitem>
              <listitem>
                <para>For how long the Modality Performed Procedure Step SOP Instance will persist on the SCP.</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>
      </section>
    </section>
    <section label="F.8" status="2" xml:id="sect_F.8">
      <title>Modality Performed Procedure Step Retrieve SOP Class</title>
      <section label="F.8.1" status="3" xml:id="sect_F.8.1">
        <title>DIMSE Service Group</title>
        <para>The DIMSE Services shown in <xref linkend="table_F.8.1-1" xrefstyle="select: label"/> are applicable to the Modality Performed Procedure Step IOD under the Modality Performed Procedure Step Retrieve SOP Class.</para>
        <table frame="box" label="F.8.1-1" rules="all" xml:id="table_F.8.1-1">
          <caption>DIMSE Service Group</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">DIMSE Service Element</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Usage SCU/SCP</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-GET</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>The DIMSE Services and Protocols are specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. If the Modality Performed Procedure Step Object is no longer available the Request Primitive will be answered with a Failure Status message "No Such Object Instance".</para>
      </section>
      <section label="F.8.2" status="3" xml:id="sect_F.8.2">
        <title>Operations</title>
        <para>The Application Entity that claims conformance to this SOP Class as an SCU shall be permitted to invoke the following operations and the Application Entity that claims conformance as an SCP shall be capable of providing the following operations.</para>
        <section label="F.8.2.1" status="4" xml:id="sect_F.8.2.1">
          <title>Get Performed Procedure Step Information</title>
          <para>This operation allows an SCU to get information about a specific real-world Performed Procedure Step that is represented as a Modality Performed Procedure Step Retrieve SOP Instance by a Modality Performed Procedure Step Retrieve SCP. The operation is performed on a Modality Performed Procedure Step IOD. This operation shall be invoked through the DIMSE N-GET Service used in conjunction with the appropriate Modality Performed Procedure Step Retrieve SOP Instance.</para>
          <para>The same SOP Instance UID is shared by all three Modality Performed Procedure Step SOP Classes. This means that the SOP Instance created and set using the services of the Modality Performed Procedure Step SOP Class can be retrieved using its SOP Instance UID within the service of the Modality Performed Procedure Step Retrieve SOP Class. Changes in its state can be notified by using its SOP Instance UID within the service of the Modality Performed Procedure Step Notification SOP Class. The SOP Class UID specified in the DIMSE N-GET request primitive shall be the UID of the Modality Performed Procedure Step Retrieve SOP Class.</para>
          <para>The Modality Performed Procedure Retrieve Step SOP Instance UID shall not be used to identify a SOP Instance of the Study Component Service Class.</para>
          <note>
            <para>An Application Entity may support the SCU role of the Modality Performed Procedure Step Retrieve SOP Class in order to obtain information about Performed Procedure Steps created by other Application Entities.</para>
          </note>
          <section label="F.8.2.1.1" status="5" xml:id="sect_F.8.2.1.1">
            <title>Modality Performed Procedure Step Retrieve IOD Subset Specifications</title>
            <para>The Application Entity that claims conformance to this SOP Class as an SCU may choose to interpret the Attribute values maintained by the SCP that the SCU receives via the operation of this SOP Class. The Application Entity that claims conformance as an SCP to this Modality Performed Procedure Step Retrieve SOP Class shall support the subset of the Modality Performed Procedure Step Retrieve Attributes specified in <xref linkend="table_F.8.2-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="F.8.2-1" rules="all" xml:id="table_F.8.2-1">
              <caption>Modality Performed Procedure Step Retrieve SOP Class N-GET Attributes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Requirement Type (SCU/SCP)</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1C</para>
                    <para>(Required if an extended or replacement character set is used)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="3" rowspan="1">
                    <para><emphasis role="bold">Performed Procedure Step Relationship</emphasis></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Step Attributes Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0270)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Study Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Study Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1110)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Accession Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0050)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Issuer of Accession Number Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0051)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Placer Order Number/Imaging Service Request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,2016)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Order Placer Identifier Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0026)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Filler Order Number/Imaging Service Request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,2017)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Order Filler Identifier Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0027)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Procedure Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1064)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Procedure Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Procedure ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Procedure Step ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0009)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Procedure Step Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0007)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Protocol Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0008)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">&gt;&gt;All other Attributes from Scheduled Protocol Code Sequence</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0021)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID Qualifiers Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0024)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>Required if Universal Entity ID (0040,0032) is present.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;All other Attributes of Issuer of Patient ID Qualifiers Sequence</emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Birth Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Sex</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Patient Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1120)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Admission ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Admission ID Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0014)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Service Episode ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Service Episode ID Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0064)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Service Episode Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0062)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="3" rowspan="1">
                    <para><emphasis role="bold">Performed Procedure Step Information</emphasis></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Station AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0241)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Station Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0242)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Location</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0243)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Start Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0244)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Start Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0245)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0253)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Status</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0252)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step End Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0250)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step End Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0251)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0254)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Type Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0255)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Procedure Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Comments on the Performed Procedure Step</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0280)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Procedure Step Discontinuation Reason Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0281)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="3" rowspan="1">
                    <para><emphasis role="bold">Image Acquisition Results</emphasis></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Series Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0340)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performing Physician's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1050)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Protocol Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0018,1030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Operators' Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1070)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Series Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Series Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,103E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Retrieve AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0054)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Image Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Non-Image Composite SOP Instance Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0220)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">&gt;All other Attributes from Performed Series Sequence</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Modality</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Performed Protocol Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0260)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">&gt;All other Attributes from Performed Protocol Code Sequence</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from Radiation Dose Module and Billing and Material Code Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>Attributes (0040,1006) Placer Order Number/Procedure and (0040,1007) Filler Order Number/Procedure were previously defined in DICOM. They are now retired (see PS3.3-1998).</para>
                </listitem>
                <listitem>
                  <para>Attributes (0040,2006) and (0040,2007) were previously defined in DICOM. They are now retired (see PS3.3-1998).</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
          <section label="F.8.2.1.2" status="5" xml:id="sect_F.8.2.1.2">
            <title>Service Class User</title>
            <para>The SCU uses the N-GET Service Element to request the SCP to get a Modality Performed Procedure Step Retrieve SOP Instance. The SCU shall specify in the N-GET request primitive the UID of the SOP Instance to be retrieved, which is a UID of a Modality Performed Procedure Step SOP Instance. The SCU shall be permitted to request that Attribute Values be returned for any Modality Performed Procedure Step Retrieve SOP Class Attribute specified in <xref linkend="table_F.8.2-1" xrefstyle="select: label"/>. Additionally values may be requested for optional Modality Performed Procedure Step IOD Attributes.</para>
            <para>The SCU shall specify the list of Modality Performed Procedure Step Retrieve SOP Class Attributes for which values are to be returned. The encoding rules for Modality Performed Procedure Step Attributes are specified in the N-GET request primitive specification in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <para>In an N-GET operation, the values of Attributes that are defined within a Sequence of Items shall not be requested by an SCU.</para>
            <para>The SCU shall be capable of receiving all requested Attribute Values provided by the SCP in response to the N-GET indication primitive. The SCU may request Attribute Values for optional Attributes that are not maintained by the SCP. In such a case, the SCU shall function properly regardless of whether the SCP returns values for those Attributes or not. This Service Class Specification places no requirements on what the SCU shall do as a result of receiving this information.</para>
            <note>
              <para>In order to accurately interpret the character set used for the Attribute Values returned, it is recommended that the Attribute Value for the Specific Character Set (0008,0005) be requested in the N-GET request primitive.</para>
            </note>
          </section>
          <section label="F.8.2.1.3" status="5" xml:id="sect_F.8.2.1.3">
            <title>Service Class Provider</title>
            <para>The N-GET operation allows the SCU to request from the SCP selected Attribute values for a specific Modality Performed Procedure Step SOP Instance via a Modality Performed Procedure Step Retrieve SOP Instance. This operation shall be invoked through the use of the DIMSE N-GET Service used in conjunction with the appropriate Modality Performed Procedure Step Retrieve SOP Instance that equals the Modality Performed Procedure SOP Instance. The SCP shall retrieve the selected Attribute values from the indicated Modality Performed Procedure Step SOP Instance.</para>
            <para>The SCP shall return, via the N-GET response primitive, the N-GET Response Status Code applicable to the associated request. A Failure Code shall indicate that the SCP has not retrieved the SOP Instance. Contingent on the N-GET Response Status, the SCP shall return, via the N-GET response primitive, Attribute Values for all requested Attributes maintained by the SCP.</para>
          </section>
          <section label="F.8.2.1.4" status="5" xml:id="sect_F.8.2.1.4">
            <title>Status Codes</title>
            <para>The status values that are specific for this SOP Class and DIMSE Service are defined in <xref linkend="table_F.8.2-2" xrefstyle="select: label"/>. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for additional response status codes.</para>
            <table frame="box" label="F.8.2-2" rules="all" xml:id="table_F.8.2-2">
              <caption>Response Status</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Response Status Code</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Warning</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Requested optional Attributes are not supported</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0001</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
      </section>
      <section label="F.8.3" status="3" xml:id="sect_F.8.3">
        <title>Modality Performed Procedure Step Retrieve SOP Class UID</title>
        <para>The Modality Performed Procedure Step Retrieve SOP Class shall be uniquely identified by the Modality Performed Procedure Step Retrieve SOP Class UID that shall have the value "1.2.840.10008.3.1.2.3.4".</para>
      </section>
      <section label="F.8.4" status="3" xml:id="sect_F.8.4">
        <title>Conformance Requirements</title>
        <para>Implementations providing conformance to the Modality Performed Procedure Step Retrieve SOP Class shall be conformant as described in the following sections and shall include within their Conformance Statement information as described below.</para>
        <para>An implementation may conform to this SOP Class as an SCU or as an SCP. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="chapter_A" xrefstyle="template: Annex %n “%t”"/>.</para>
        <section label="F.8.4.1" status="4" xml:id="sect_F.8.4.1">
          <title>SCU Conformance</title>
          <para>An implementation that is conformant to this SOP Class as an SCU shall meet conformance requirements for the operations that it invokes.</para>
          <section label="F.8.4.1.1" status="5" xml:id="sect_F.8.4.1.1">
            <title>Operations</title>
            <para>Any Attributes for which Attribute Values may be requested (using the N-GET Service) by the SCU shall be enumerated in the SCU Operations Statement. The SCU Operations Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="chapter_A" xrefstyle="template: Annex %n “%t”"/>.</para>
          </section>
        </section>
        <section label="F.8.4.2" status="4" xml:id="sect_F.8.4.2">
          <title>SCP Conformance</title>
          <para>An implementation that is conformant to this SOP Class as an SCP shall meet conformance requirements for the operations that it performs.</para>
          <section label="F.8.4.2.1" status="5" xml:id="sect_F.8.4.2.1">
            <title>Operations</title>
            <para>Any Attributes for which Attribute Values may be requested (using the N-GET Service) by the SCU shall be enumerated in the SCP Operations Statement. The SCP Operations Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="chapter_A" xrefstyle="template: Annex %n “%t”"/>.</para>
          </section>
        </section>
      </section>
    </section>
    <section label="F.9" status="2" xml:id="sect_F.9">
      <title>Modality Performed Procedure Step Notification SOP Class</title>
      <para>The Modality Performed Procedure Step Notification SOP Class is intended for those Application Entities requiring notifications of Modality Performed Procedure Step's changes in state.</para>
      <para>An Application Entity may choose to take some actions based upon a notification or request for information but is in no way required to do so.</para>
      <note>
        <orderedlist numeration="arabic">
          <listitem>
            <para>For example, in one configuration, an IS could be responsible for maintaining data related to performed procedure steps. A PACS reviewing workstation may need to display the images for any study viewed. In order for the PACS to link the images to the study, a PACS may receive a notification whenever a procedure step has been performed. In such a configuration the IS is the SCP and the PACS is the SCU. When the PACS receives this notification, it may link the images and the performed procedure step to the study within its internal database or may choose to take no action.</para>
          </listitem>
          <listitem>
            <para>The terms IS and PACS used in the previous example are provided for clarification purposes only. This document does not define nor constrain the purpose or role of any IS, PACS or acquisition Application Entity conforming to this Service Class Specification.</para>
          </listitem>
        </orderedlist>
      </note>
      <section label="F.9.1" status="3" xml:id="sect_F.9.1">
        <title>DIMSE Service Group</title>
        <para><xref linkend="table_F.9.1-1" xrefstyle="select: label"/> shows the DIMSE-N Services applicable to the Modality Performed Procedure Step IOD under the Modality Performed Procedure Step Notification SOP Class.</para>
        <para>The DIMSE-N Services and Protocol are specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <table frame="box" label="F.9.1-1" rules="all" xml:id="table_F.9.1-1">
          <caption>DIMSE-N Service Group</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">DIMSE Service Element</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Usage SCU/SCP</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-EVENT-REPORT</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
      <section label="F.9.2" status="3" xml:id="sect_F.9.2">
        <title>Notifications</title>
        <para>The Application Entity that claims conformance as an SCU to this SOP Class shall be permitted to receive the following notification. The Application Entity that claims conformance as an SCP to this SOP Class shall be capable of providing the notifications defined in <xref linkend="table_F.9.2-1" xrefstyle="select: label"/>.</para>
        <table frame="box" label="F.9.2-1" rules="all" xml:id="table_F.9.2-1">
          <caption>Performed Procedure Step Notification Event Information</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Event Type Name</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Event Type ID</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Attribute</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Tag</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Req. Type SCU/SCP</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Performed Procedure Step In Progress</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Performed Procedure Step Completed</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>2</para>
              </td>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Performed Procedure Step Discontinued</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>3</para>
              </td>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Performed Procedure Step Updated</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>4</para>
              </td>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1">
                <para>An Update event shall not be used to notify changes in Performed Procedure Step Status (0040,0252).</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Performed Procedure Step Deleted</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>5</para>
              </td>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="left" colspan="1" rowspan="1"/>
            </tr>
          </tbody>
        </table>
        <note>
          <para>The Notification Event Information contains no Attributes, beyond those defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. An SCU receiving a Notification and requiring further information may also be an SCU of the Modality Performed Procedure Step Retrieval SOP Class and may use the Affected SOP Instance UID (0000,1000) to perform an N-GET of the Modality Performed Procedure Step SOP Instance.</para>
        </note>
        <section label="F.9.2.1" status="4" xml:id="sect_F.9.2.1">
          <title>Receive Modality Performed Procedure Step Event Notification</title>
          <para>This notification allows an SCU to receive from the SCP an unsolicited notification of a change in a Modality Performed Procedure Step SOP Instance. These notifications shall be invoked by the SCP through the use of the DIMSE N-EVENT-REPORT Service used in conjunction with the related Modality Performed Procedure Step SOP Instance.</para>
          <para>The SCU shall return, via the N-EVENT-REPORT response primitive, the N-EVENT-REPORT Response Status Code applicable to the associated request. The SCU shall accept all Attributes included in any notification. This Service Class Specification places no requirements on what the SCU shall do as a result of receiving this information.</para>
          <para>The same SOP Instance UID is shared by all three Modality Performed Procedure Step SOP Classes. This means that the SOP Instance created and set using the services of the Modality Performed Procedure Step SOP Class can be retrieved using its SOP Instance UID within the service of the Modality Performed Procedure Step Retrieve SOP Class. Changes in its state can be notified by using its SOP Instance UID within the request primitive of the Modality Performed Procedure Step Notification SOP Class.</para>
          <para>The Modality Performed Procedure Step Notification SOP Instance UID shall not be used to identify a SOP Instance of the Study Component Service Class.</para>
        </section>
        <section label="F.9.2.2" status="4" xml:id="sect_F.9.2.2">
          <title>Provide Modality Performed Procedure Step Event Notification</title>
          <para>These notifications allow an SCU to receive from the SCP an unsolicited notification of a change in the state of a real-world performed procedure step. This notification shall be invoked by the SCP through the use of the DIMSE N-EVENT-REPORT Service used in conjunction with the related Modality Performed Procedure Step SOP Instance.</para>
          <para>The SCP shall specify in the N-EVENT-REPORT request primitive the UID of the Modality Performed Procedure Step SOP Instance with which the event is associated and the Event Type ID. The Affected SOP Class UID specified in the DIMSE N-EVENT-REPORT request primitive shall be the UID of the Modality Performed Procedure Step Notification SOP Class.</para>
          <note>
            <para>The encoding of Notification Event Information is defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
          </note>
        </section>
        <section label="F.9.2.3" status="4" xml:id="sect_F.9.2.3">
          <title>Status Codes</title>
          <para>There are no specific status codes. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for response status codes.</para>
        </section>
      </section>
      <section label="F.9.3" status="3" xml:id="sect_F.9.3">
        <title>Modality Performed Procedure Step Notification SOP Class UID</title>
        <para>The Modality Performed Procedure Step Notification SOP Class shall be uniquely identified by the Modality Performed Procedure Step Notification SOP Class UID that shall have the value "1.2.840.10008.3.1.2.3.5".</para>
      </section>
      <section label="F.9.4" status="3" xml:id="sect_F.9.4">
        <title>Conformance Requirements</title>
        <para>Implementations providing Standard SOP Class Conformance to the Modality Performed Procedure Step Notification SOP Class shall be conformant as described in the following sections and shall include within their Conformance Statement information as described in the following sections.</para>
        <para>An implementation may conform to this SOP Class as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <section label="F.9.4.1" status="4" xml:id="sect_F.9.4.1">
          <title>SCU Conformance</title>
          <para>An implementation that is conformant to this SOP Class as an SCU shall meet conformance requirements for the:</para>
          <itemizedlist>
            <listitem>
              <para>notifications that it receives</para>
            </listitem>
          </itemizedlist>
          <section label="F.9.4.1.1" status="5" xml:id="sect_F.9.4.1.1">
            <title>Notifications</title>
            <para>All standard event types for which notifications may be requested by the SCU shall be enumerated in the SCU Notifications Statement. The SCU Notifications Statement shall include an enumerated list of the event types supported:</para>
            <itemizedlist>
              <listitem>
                <para>Performed Procedure Step In Progress</para>
              </listitem>
              <listitem>
                <para>Performed Procedure Step Completed</para>
              </listitem>
              <listitem>
                <para>Performed Procedure Step Discontinued</para>
              </listitem>
              <listitem>
                <para>Performed Procedure Step Updated</para>
              </listitem>
              <listitem>
                <para>Performed Procedure Step Deleted</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>
        <section label="F.9.4.2" status="4" xml:id="sect_F.9.4.2">
          <title>SCP Conformance</title>
          <para>An implementation that is conformant to this SOP Class as an SCP shall meet conformance requirements for:</para>
          <itemizedlist>
            <listitem>
              <para>notifications that it invokes</para>
            </listitem>
          </itemizedlist>
          <section label="F.9.4.2.1" status="5" xml:id="sect_F.9.4.2.1">
            <title>Notifications</title>
            <para>Any optional Attributes that may be included in Standard notifications to the SCU shall be enumerated in the SCP Notifications Statement. The SCP Notifications Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>. Following this statement shall be the list of event types and optional Attributes.</para>
          </section>
        </section>
      </section>
    </section>
    <section label="F.10" status="2" xml:id="sect_F.10">
      <title>General Purpose Scheduled Procedure Step SOP Class (Retired)</title>
      <para>Retired. See PS3.4-2011.</para>
    </section>
    <section label="F.11" status="2" xml:id="sect_F.11">
      <title>General Purpose Performed Procedure Step SOP Class(Retired)</title>
      <para>Retired. See PS3.4-2011.</para>
    </section>
  </chapter>
  <chapter label="G" status="1" xml:id="chapter_G">
    <title>Results Management Service Class (Normative)</title>
    <para>Retired. See PS3.4-2004.</para>
  </chapter>
  <chapter label="H" status="1" xml:id="chapter_H">
    <title>Print Management Service Class (Normative)</title>
    <section label="H.1" status="2" xml:id="sect_H.1">
      <title>Scope</title>
      <para>The Print Management Service Class defines an application-level class-of-service that facilitates the printing of images and image related data on a hard copy medium.</para>
      <note>
        <para>The DICOM Print Management Service Class covers the general cases of printing medical images in standardized layouts. An application can obtain more flexible layout, annotation, and formatting either by direct manipulation of the pixel matrices used in DICOM Print Management, or by utilizing page descriptions written in a page description language (such as Postscript or PDF) that are communicated to the printing system using commonly available protocols. These other page descriptions languages are not communicated using DICOM protocols and their use is outside the scope of the DICOM Standard.</para>
      </note>
    </section>
    <section label="H.2" status="2" xml:id="sect_H.2">
      <title>Print Management Model</title>
      <section label="H.2.1" status="3" xml:id="sect_H.2.1">
        <title>Print Management Data Flow Model</title>
        <section label="H.2.1.1" status="4" xml:id="sect_H.2.1.1">
          <title>Global Data Flow Model</title>
          <para>The Print Management Data Flow Model (<xref linkend="figure_H.2-1" xrefstyle="select: label"/>) consists of three main processes:</para>
          <itemizedlist>
            <listitem>
              <para>Film Session Management process</para>
            </listitem>
            <listitem>
              <para>Print process</para>
            </listitem>
          </itemizedlist>
          <note>
            <para>The Standard uses the word film as a general name for different types of hard copy media (e.g., photographic film, paper).</para>
          </note>
          <para>
            <figure label="H.2-1" pgwide="1" xml:id="figure_H.2-1">
              <title>Print Management Data Flow Model</title>
              <mediaobject>
                <imageobject>
                  <imagedata fileref="figures/PS3.4_H.2-1.svg"/>
                  <!--<imagedata fileref="part04_fromword_files/image016.png"/>-->
                </imageobject>
              </mediaobject>
            </figure>
          </para>
          <para>The Film Session Management process is responsible for acquiring all the information that is required to print the film session. The film session is the atomic work package of the Print Management Application and contains one or more films related in a user defined way (e.g., belonging to the same exam, patient) that are originated from one host (e.g., workstation, diagnostic modality) and that are printed on one hard copy printer.</para>
          <para>Each film consists of one or more images and zero or more film related annotations. An annotation consists of one or more lines of text.</para>
          <para>Each image consists of pixel data and zero or more overlay planes. The user controls the look of the film by assigning values to print parameters.</para>
          <para>Print parameters are defined at film session, film, image and annotation levels. The parameter level determines the scope of operation of the print parameters (e.g., print parameters of the image level are valid for the corresponding image).</para>
          <para>The inputs of the Film Session Management process are:</para>
          <itemizedlist>
            <listitem>
              <para>set of images and image related data</para>
            </listitem>
            <listitem>
              <para>presentation data that describes the visual look of the films</para>
            </listitem>
          </itemizedlist>
          <para>The output of the Film Session Management process is the Print Job, which contains all the information to print the film session.</para>
          <para>The Print process prints a set of films, based on the information in the Print Job. The Print process is implementation specific and its management is beyond the scope of the DICOM standard.</para>
        </section>
        <section label="H.2.1.2" status="4" xml:id="sect_H.2.1.2">
          <title>Grayscale Transformations</title>
          <para>The Print Management Service Class supports two grayscale transformations and spatial transformations that converts an original image into a printed image.</para>
          <para>The sequence of spatial transformations (e.g., magnification and merging of annotation with images) and their relationships with the grayscale transformations are implementation specific and fall beyond the scope of the DICOM Standard.</para>
          <para>The sequence of grayscale transformations is important for achieving consistent image quality because of the non-orthogonal nature of the different transformations. <xref linkend="figure_H.2-2" xrefstyle="select: label"/> describes the sequence of grayscale transformations.</para>
          <note>
            <para>This section previously described Modality LUT and VOI LUT transformations in more detail. Since Referenced Print SOP Classes have been retired, these descriptions no longer apply to the Print Management Service Class. See PS 3.4-1998.</para>
          </note>
          <para>
            <figure label="H.2-2" pgwide="1" xml:id="figure_H.2-2">
              <title>Print Management Data Flow Model</title>
              <mediaobject>
                <imageobject>
                  <imagedata fileref="figures/PS3.4_H.2-2.svg"/>
                  <!--<imagedata fileref="part04_fromword_files/image018.png"/>-->
                </imageobject>
              </mediaobject>
            </figure>
          </para>
          <section label="H.2.1.2.1" status="5" xml:id="sect_H.2.1.2.1">
            <title>Modality and User Specific Transformations</title>
            <para>Examples of these transformations are Modality LUT, Mask Subtraction, and VOI LUT.</para>
            <para>The Modality LUT transforms manufacturer dependent pixel values into pixel values that are meaningful for the modality and are manufacturer independent.</para>
            <para>The VOI LUT transforms the modality pixel values into pixel values that are meaningful for the user or the application. For example it selects of a range of pixel values to be optimized for display, such as soft tissue or bone windows in a CT image.</para>
          </section>
          <section label="H.2.1.2.2" status="5" xml:id="sect_H.2.1.2.2">
            <title>Polarity</title>
            <para>Polarity specifies whether minimum input pixel values shall be displayed as black or white. If Polarity (2020,0020) is NORMAL then the pixels will be displayed as specified by Photometric Interpretation; if Polarity is REVERSE then the pixels will be displayed with the opposite polarity as specified by Photometric Interpretation.</para>
            <para>Polarity (2020,0020) is an Attribute of the Image Box IOD.</para>
          </section>
          <section label="H.2.1.2.3" status="5" xml:id="sect_H.2.1.2.3">
            <title>Presentation LUT</title>
            <para>The Presentation LUT transforms the polarity pixel values into Presentation Values (P-Values), which are meaningful for display of the images. P-Values are approximately related to human perceptual response. They are intended to facilitate consistent display with common input for both hardcopy and softcopy display devices and be independent of the specific class or characteristics of the display device. It is used to realize image display tailored for specific modalities, applications, and user preferences</para>
            <para>In the Print Management Service Class, the Presentation LUT is part of the Presentation LUT IOD.</para>
            <para>Hardcopy devices convert P-Values into optical density for printing. This conversion depends on desired image D-max and D-min. It also depends on expected viewing conditions such as lightbox intensity for transparency films. The conversion to printed density is specified in the Presentation LUT SOP Class.</para>
            <para>If the modality desires to natively specify P-Values as its output, it can negotiate for support of the Presentation LUT, but specify a LUT that is an identity function. The identity function informs the display device that no further translation is necessary.</para>
            <note>
              <para>Performing this translation in the printer prevents potential loss of precision (detail) that would occur if this translation were to be performed on many of the existing 8-bit modalities.</para>
            </note>
          </section>
        </section>
      </section>
      <section label="H.2.2" status="3" xml:id="sect_H.2.2">
        <title>Print Management Service Class Structure</title>
        <para>The Print Management Service Class Structure is shown in <xref linkend="figure_H.2-3" xrefstyle="select: label"/>.</para>
        <para>The Print Management SCU and Print Management SCP are peer DICOM Print Management Application Entities. The Application Entity of the Print Management SCP corresponds with one or more hard copy printers. If the SCP Application Entity corresponds with multiple printers then the SCP Application Entity selects for each Print Job the printer where the Print Job will be printed.</para>
        <para>
          <figure label="H.2-3" pgwide="1" xml:id="figure_H.2-3">
            <title>Print Management Service Class Structure</title>
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/PS3.4_H.2-3.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image020.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
        <para>The Print Management SCU and Print Management SCP establish an Association by using the Association Services of the OSI Upper Layer Service. During Association establishment, the DICOM Print Management Application Entities negotiate the supported SOP Classes. The negotiation procedure is defined in <xref linkend="sect_H.5" xrefstyle="select: label"/>.</para>
        <para><xref linkend="figure_H.2-4" xrefstyle="select: label"/> shows alternative configurations for printing images and image related data from one host to multiple printers.</para>
        <itemizedlist>
          <listitem>
            <para>Configuration 1: one SCU Application Entity corresponds with the host and one SCP Application Entity corresponds with multiple printers. The SCU has no control over the print parameters of each printer and over the print destination of the Print Job.</para>
          </listitem>
          <listitem>
            <para>Configuration 2: one SCU Application Entity corresponds with the host and one Application Entity SCP corresponds with each printer. The SCU has explicit control over the print parameters of each printer and over the print destination of the Print Job. Each SCP Application Entity has one Association with the SCU Application Entity and is identified by its Application Entity title.</para>
          </listitem>
        </itemizedlist>
        <para>
          <figure label="H.2-4" pgwide="1" xml:id="figure_H.2-4">
            <title>Configurations for Printing On Multiple Printers</title>
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/PS3.4_H.2-4.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image022.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
      </section>
      <section label="H.2.3" status="3" xml:id="sect_H.2.3">
        <title>Print Management SOP Classes</title>
        <para>The Print Management SCU controls the Print Process by manipulating the Print Management SOP Classes by means of the DIMSE Services. The Print Management SOP Classes are managed by the Print Management SCP.</para>
        <para>The Print Management SOP Classes are classified as follows:</para>
        <itemizedlist>
          <listitem>
            <para>Content related SOP Classes: these SOP Classes are an abstraction of the contents of a film (e.g., pixel data, text string). The content related SOP Classes correspond with the Image related SOP Classes, which are described in <xref linkend="sect_H.4" xrefstyle="select: label"/> of this Part.</para>
          </listitem>
          <listitem>
            <para>Presentation related SOP Classes: these SOP Classes are an abstraction of the presentation of a film (e.g., layout information) and are defined by Normalized IODs and Normalized DIMSE-N Services. The presentation related SOP Classes are defined in <xref linkend="sect_H.4" xrefstyle="select: label"/> of this Part.</para>
          </listitem>
          <listitem>
            <para>Printer related SOP Classes: these SOP Classes are an abstraction of the printer configuration and status and are defined by Normalized IODs. The Printer SOP Class is defined in <xref linkend="sect_H.4" xrefstyle="select: label"/> of this Part.</para>
          </listitem>
        </itemizedlist>
      </section>
      <section label="H.2.4" status="3" xml:id="sect_H.2.4">
        <title>Usage Specifications</title>
        <para>The building blocks of SOP Classes are Modules and DIMSE Services. The Modules contain related Attributes, which are Mandatory(M) or Optional (U). The usage may be different for the SCU and SCP. The usage is specified as a pair of letters: the former indicating the SCU usage, the latter indicating the SCP usage.</para>
        <para>DIMSE Services may be Mandatory (M) or Optional (U) as specified in Section 5.4 of this Part.</para>
        <para>The meaning and behavior of the usage specification for Attributes for the Print Management Service Class are:</para>
        <variablelist>
          <varlistentry>
            <term>M/M</term>
            <listitem>
              <para>The SCU shall provide a value for the Attribute. If the SCU does not supply a value, the SCP shall return a Failure status ("Missing Attribute," code 0120H). The SCP shall support at least one value of the Attribute. If the SCP does not support the value specified by the SCU, it shall return a Failure status ("Invalid Attribute Value," code 0106H).</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>-/M</term>
            <listitem>
              <para>The SCU's usage of the Attribute is undefined. The SCP shall support at least one value of the Attribute.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>U/M</term>
            <listitem>
              <para>The SCU may provide a value for the Attribute. If the SCP does not support the value specified by the SCU, it shall return either a Failure status ("Invalid Attribute Value", code 0106H) or return a Warning status ("Attribute Value Out of Range", code 0116H). In the case of Warning status, the SCP will apply the default value as defined in the SCP Conformance Statement.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>U/U</term>
            <listitem>
              <para>The SCU may provide a value for the Attribute. If the SCP does not support the value specified by the SCU, but does support the Attribute, it shall return either a Failure status ("Invalid Attribute Value", code 0106H) or a Warning status ("Attribute Value out of Range", code 0116H.). In the case of Warning status, the SCP will apply the default value as defined in the SCP Conformance Statement.</para>
            </listitem>
          </varlistentry>
        </variablelist>
        <para>If the SCP does not support the Attribute specified by the SCU, it shall return either a Failure status ("No Such Attribute", code 0105H) or return a Warning status ("Attribute List Error", code 0107H.)). In the case of Warning status, the behavior of the SCP is defined in the SCP Conformance Statement.</para>
        <para>If the usage type designation is modified by a "C" (e.g., MC/M) the specification stated above shall be modified to include the requirement that the Attribute shall be supported if the specified condition is met.</para>
      </section>
      <section label="H.2.5" status="3" xml:id="sect_H.2.5">
        <title>Status Code Categories</title>
        <para>For every operation requested on a SOP class of the print management service class, a status code will be returned. These status codes are grouped into success, warning or failure categories.</para>
        <note>
          <para>These status codes categories are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>:</para>
          <itemizedlist mark="none">
            <listitem>
              <para>Success - indicates that the SCP performed the requested operation as requested.</para>
            </listitem>
            <listitem>
              <para>Warning - indicates that the SCP has received the request and will process it. However, immediate processing of the request, or processing in the way specified by the SCU, may not be possible. The SCP expects to be able to complete the request without further action by the SCU across the DICOM interface. The exact behavior of the SCP is described in the Conformance Statement.</para>
            </listitem>
            <listitem>
              <para>Failure - indicates that the SCP is unable to perform the request. The request will not be processed unless it is repeated by the SCU at a later time. The exact behavior of the SCP is described in the Conformance Statement.</para>
            </listitem>
          </itemizedlist>
        </note>
      </section>
    </section>
    <section label="H.3" status="2" xml:id="sect_H.3">
      <title>Print Management Conformance</title>
      <section label="H.3.1" status="3" xml:id="sect_H.3.1">
        <title>Scope</title>
        <para>Print Management conformance is defined in terms of supported Meta SOP Classes, which correspond with the mandatory functionality, and of supported optional SOP Classes, which correspond with additional functionality.</para>
        <para>A Meta SOP Class corresponds with a pre-defined group of SOP Classes. The following Print Management Meta SOP Classes are defined:</para>
        <itemizedlist>
          <listitem>
            <para>Basic Grayscale Print Management Meta SOP Class</para>
          </listitem>
          <listitem>
            <para>Basic Color Print Management Meta SOP Class</para>
          </listitem>
        </itemizedlist>
        <para>All SCUs and SCPs of the Print Management Service Class shall support at least one of the Basic Print Management Meta SOP Classes.</para>
        <para>In addition the other Meta SOP Classes or optional SOP Classes may be supported.</para>
        <para>The Meta SOP Class level negotiation is used to define a minimum set of print functions; the SOP Class level negotiation is used to define additional functions.</para>
        <para>If multiple Meta SOP Classes and one or more optional SOP Classes are negotiated, the SCP shall support all the optional SOP Classes in conjunction with all the Meta SOP Classes.</para>
        <para>At association setup, the negotiation process between the Print Management SCU and SCP shall occur for</para>
        <itemizedlist>
          <listitem>
            <para>one or more of the Meta SOP Classes and zero or more of the optional SOP Classes specified in <xref linkend="sect_H.3.3.2" xrefstyle="select: label"/>; or</para>
          </listitem>
          <listitem>
            <para>one or more of the Printer, Print Job, and Printer Configuration Retrieval SOP Classes.</para>
          </listitem>
        </itemizedlist>
        <note>
          <para>It is possible for an SCP to support Associations for printing and to also support additional Associations for the sole purpose of exchanging status information about the printer.</para>
        </note>
      </section>
      <section label="H.3.2" status="3" xml:id="sect_H.3.2">
        <title>Print Management Meta SOP Classes</title>
        <section label="H.3.2.1" status="4" xml:id="sect_H.3.2.1">
          <title>Description</title>
          <para>The Basic Print Management Meta SOP Classes correspond with the minimum functionality that an implementation of the Print Management Service Class shall support. The Basic Print Management Meta SOP Classes support the following mandatory features:</para>
          <itemizedlist>
            <listitem>
              <para>preformatted grayscale images or preformatted color images; preformatted images are images where annotation, graphics, overlays are burned in</para>
            </listitem>
            <listitem>
              <para>pre-defined film layouts (image display formats)</para>
            </listitem>
            <listitem>
              <para>basic presentation parameters on film session, film box and image box level</para>
            </listitem>
            <listitem>
              <para>basic device management</para>
            </listitem>
          </itemizedlist>
          <para>The optional SOP Classes described in <xref linkend="sect_H.3.3" xrefstyle="select: label"/> may be used with the Basic Print Management Meta SOP Classes.</para>
          <para>The following features are optional for SCUs and SCPs:</para>
          <itemizedlist>
            <listitem>
              <para>Film box annotation</para>
            </listitem>
            <listitem>
              <para>Presentation LUT</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="H.3.2.2" status="4" xml:id="sect_H.3.2.2">
          <title>Meta SOP Class Definitions</title>
          <section label="H.3.2.2.1" status="5" xml:id="sect_H.3.2.2.1">
            <title>Basic Grayscale Print Management Meta SOP Class</title>
            <para>The Meta SOP Class is defined by the following set of supported SOP Classes.</para>
            <table frame="box" label="H.3.2.2.1-1" rules="all" xml:id="table_H.3.2.2.1-1">
              <caption>SOP Classes of Basic Grayscale Print Management Meta SOP Class</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">SOP Class Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Reference</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Basic Film Session SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>
                      <xref linkend="sect_H.4.1" xrefstyle="select: labelnumber"/>
                    </para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>M/M</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Basic Film Box SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>
                      <xref linkend="sect_H.4.2" xrefstyle="select: labelnumber"/>
                    </para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>M/M</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Basic Grayscale Image Box SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>
                      <xref linkend="sect_H.4.3.1" xrefstyle="select: labelnumber"/>
                    </para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>M/M</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Printer SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>
                      <xref linkend="sect_H.4.6" xrefstyle="select: labelnumber"/>
                    </para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>M/M</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <note>
              <para>The image pixel data are part of the Basic Grayscale Image Box SOP Class</para>
            </note>
            <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
            <para>The Basic Grayscale Print Management Meta SOP Class UID has the value "1.2.840.10008.5.1.1.9".</para>
          </section>
          <section label="H.3.2.2.2" status="5" xml:id="sect_H.3.2.2.2">
            <title>Basic Color Print Management Meta SOP Class</title>
            <para>The Meta SOP Class is defined by the following set of supported SOP Classes.</para>
            <table frame="box" label="H.3.2.2.2-1" rules="all" xml:id="table_H.3.2.2.2-1">
              <caption>SOP Classes of Basic Color Print Management Meta SOP Class</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">SOP Class Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Reference</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Basic Film Session SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>
                      <xref linkend="sect_H.4.1" xrefstyle="select: labelnumber"/>
                    </para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>M/M</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Basic Film Box SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>
                      <xref linkend="sect_H.4.2" xrefstyle="select: labelnumber"/>
                    </para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>M/M</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Basic Color Image Box SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>
                      <xref linkend="sect_H.4.3.2" xrefstyle="select: labelnumber"/>
                    </para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>M/M</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Printer SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>
                      <xref linkend="sect_H.4.6" xrefstyle="select: labelnumber"/>
                    </para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>M/M</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <note>
              <para>The image pixel data are part of the Basic Color Image Box SOP Class</para>
            </note>
            <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
            <para>The Basic Color Print Management Meta SOP Class UID has the value "1.2.840.10008.5.1.1.18".</para>
          </section>
          <section label="H.3.2.2.3" status="5" xml:id="sect_H.3.2.2.3">
            <title>Referenced Grayscale Print Management Meta SOP Class (Retired)</title>
            <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-1998.</para>
          </section>
          <section label="H.3.2.2.4" status="5" xml:id="sect_H.3.2.2.4">
            <title>Referenced Color Print Management Meta SOP Class (Retired)</title>
            <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-1998.</para>
          </section>
          <section label="H.3.2.2.5" status="5" xml:id="sect_H.3.2.2.5">
            <title>Pull Stored Print Management Meta SOP Class(Retired)</title>
            <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-2004.</para>
          </section>
        </section>
      </section>
      <section label="H.3.3" status="3" xml:id="sect_H.3.3">
        <title>Optional SOP Classes</title>
        <section label="H.3.3.1" status="4" xml:id="sect_H.3.3.1">
          <title>Description</title>
          <para>The optional SOP Classes address functionality beyond that of the Print Management Meta SOP Classes. One or more optional SOP Classes may be used in addition to the Print Management Meta SOP Classes.</para>
          <para>The following functionality is supported by the optional SOP Classes:</para>
          <itemizedlist>
            <listitem>
              <para>annotation (text associated with a sheet of film)</para>
            </listitem>
            <listitem>
              <para>tracking the printing of the print session</para>
            </listitem>
            <listitem>
              <para>retrieval of printer configuration information</para>
            </listitem>
            <listitem>
              <para>Presentation LUTs</para>
            </listitem>
          </itemizedlist>
          <para>Use of these optional SOP Classes allows an SCU to provide information to be printed with or on an image without burning the information into the image pixels. If these optional SOP Classes are not supported by both the SCU and SCP, then only the information burnt in to the image pixels before they are sent to the SCP will be printed. If the optional SOP Classes are not supported, the SCU is responsible for burning all expected text or graphics into the image pixels.</para>
        </section>
        <section label="H.3.3.2" status="4" xml:id="sect_H.3.3.2">
          <title>List of Optional SOP Classes</title>
          <para>The following optional SOP Classes may be used in conjunction with the Basic Print Management Meta SOP Classes specified in <xref linkend="sect_H.3.2.2" xrefstyle="select: label"/>.</para>
          <table frame="box" label="H.3.3.2-1" rules="all" xml:id="table_H.3.3.2-1">
            <caption>List of Optional SOP Classes for Basic Print Management Meta SOP Classes</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Reference</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Usage SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Basic Annotation Box SOP Class</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <xref linkend="sect_H.4.4" xrefstyle="select: labelnumber"/>
                  </para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/U</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Print Job SOP Class</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <xref linkend="sect_H.4.5" xrefstyle="select: labelnumber"/>
                  </para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/U</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Presentation LUT SOP Class</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <xref linkend="sect_H.4.9" xrefstyle="select: labelnumber"/>
                  </para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/U</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Printer Configuration Retrieval SOP Class</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <xref linkend="sect_H.4.11" xrefstyle="select: labelnumber"/>
                  </para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/U</para>
                </td>
              </tr>
            </tbody>
          </table>
          <note>
            <para>Negotiation of the Presentation LUT SOP Class does not imply any behavior in the SCP. Behavior is explicit when the Presentation LUT SOP Class is created and referenced at either the Film Session, Film Box, or Image Box levels.</para>
          </note>
        </section>
      </section>
      <section label="H.3.4" status="3" xml:id="sect_H.3.4">
        <title>Conformance Statement</title>
        <para>The implementation Conformance Statement of these SOP Classes shall follow <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <para>The SCU Conformance Statement shall specify the following items:</para>
        <itemizedlist>
          <listitem>
            <para>maximum number of supported Associations at the same time</para>
          </listitem>
          <listitem>
            <para>list of supported SOP Classes and Meta SOP Classes</para>
          </listitem>
          <listitem>
            <para>for each of the supported SOP and Meta SOP Classes:</para>
          </listitem>
          <listitem>
            <para>list of supported optional SOP Class Attributes and DIMSE Service Elements</para>
          </listitem>
          <listitem>
            <para>for each supported Attribute (mandatory and optional Attribute), the valid range of values</para>
          </listitem>
        </itemizedlist>
        <para>The SCP Conformance Statement shall specify the following items:</para>
        <itemizedlist>
          <listitem>
            <para>maximum number of supported Associations at the same time</para>
          </listitem>
          <listitem>
            <para>list of supported SOP Classes and Meta SOP Classes</para>
          </listitem>
          <listitem>
            <para>minimum and maximum number of printable pixel matrix per supported film size</para>
          </listitem>
          <listitem>
            <para>for each of the supported SOP Classes:</para>
          </listitem>
          <listitem>
            <para>list of supported optional SOP Class Attributes and DIMSE Service Elements</para>
          </listitem>
          <listitem>
            <para>for each supported Attribute (mandatory and optional Attribute) :</para>
          </listitem>
          <listitem>
            <para>valid range of values</para>
          </listitem>
          <listitem>
            <para>default value if no value is supplied by the SCU</para>
          </listitem>
          <listitem>
            <para>status code (Failure or Warning) if SCU supplies a value that is out of range</para>
          </listitem>
          <listitem>
            <para>for each supported DIMSE Service, the SCP behavior for all specific status codes</para>
          </listitem>
          <listitem>
            <para>description of each supported custom Image Display Format (2010,0010) e.g., position and dimensions of each composing image box, numbering scheme of the image positions</para>
          </listitem>
          <listitem>
            <para>description of each supported Annotation Display Format ID (2010,0030) e.g., position and dimensions of annotation box, font, number of characters</para>
          </listitem>
          <listitem>
            <para>description of each supported configuration table (e.g., identification, content)</para>
          </listitem>
          <listitem>
            <para>if the SCP supports N-ACTION for the Film Session SOP Class then the SCP shall specify the maximum number of collated films</para>
          </listitem>
          <listitem>
            <para>in the case of grayscale printers that print color images, the behavior of printing color images</para>
          </listitem>
          <listitem>
            <para>if cropping of images is supported, the algorithm for removing rows and columns from the image</para>
          </listitem>
        </itemizedlist>
      </section>
    </section>
    <section label="H.4" status="2" xml:id="sect_H.4">
      <title>Print Management SOP Class Definitions</title>
      <section label="H.4.1" status="3" xml:id="sect_H.4.1">
        <title>Basic Film Session SOP Class</title>
        <section label="H.4.1.1" status="4" xml:id="sect_H.4.1.1">
          <title>IOD Description</title>
          <para>The Basic Film Session IOD describes the presentation parameters that are common for all the films of a film session (e.g., number of films, film destination)</para>
          <para>The Basic Film Session SOP Instance refers to one or more Basic Film Box SOP Instances.</para>
        </section>
        <section label="H.4.1.2" status="4" xml:id="sect_H.4.1.2">
          <title>DIMSE Service Group</title>
          <para>The DIMSE Services applicable to the IOD are shown in <xref linkend="table_H.4-1" xrefstyle="select: label"/>.</para>
          <table frame="box" label="H.4-1" rules="all" xml:id="table_H.4-1">
            <caption>DIMSE Service Group</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">DIMSE Service Element</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Usage SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-CREATE</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>M/M</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-SET</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/M</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-DELETE</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/M</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-ACTION</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/U</para>
                </td>
              </tr>
            </tbody>
          </table>
          <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
          <para>This Section describes the behavior of the DIMSE Services that are specific for this IOD. The general behavior of the DIMSE Services is specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
          <section label="H.4.1.2.1" status="5" xml:id="sect_H.4.1.2.1">
            <title>N-CREATE</title>
            <para>The N-CREATE is used to create an instance of the Basic Film Session SOP Class.</para>
            <section label="H.4.1.2.1.1" status="6" xml:id="sect_H.4.1.2.1.1">
              <title>Attributes</title>
              <para>The Attribute list of the N-CREATE is defined as shown in <xref linkend="table_H.4-2" xrefstyle="select: label"/>.</para>
              <table frame="box" label="H.4-2" rules="all" xml:id="table_H.4-2">
                <caption>N-CREATE Attribute List</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute Name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Specific Character Set</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,0005)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Number of Copies</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0010)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Print Priority</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0020)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Medium Type</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Destination</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0040)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Session Label</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Memory Allocation</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0060)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Owner ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0160)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>The memory allocation Attribute allows the SCU to reserve sufficient memory to store the "working" film session hierarchy as well the "copied" film session hierarchy in the Print Job in order to prevent deadlock situations.</para>
                  </listitem>
                  <listitem>
                    <para>Owner ID (2100,0160) is a user option for the Basic Film Session.</para>
                  </listitem>
                </orderedlist>
              </note>
              <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
              <para>Within the film session, the allocated memory is consumed as SOP Instances are created and is freed for reuse as SOP Instances are deleted. All the allocated memory shall be released following termination of the Association or deletion of the Film Session SOP Instance.</para>
            </section>
            <section label="H.4.1.2.1.2" status="6" xml:id="sect_H.4.1.2.1.2">
              <title>Status</title>
              <para>The status values that are specific for this SOP Class are defined as follows.</para>
              <table frame="box" label="H.4.1.2.1.2-1" rules="all" xml:id="table_H.4.1.2.1.2">
                <caption>Status Values for Basic Film Session SOP Class</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Status</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Meaning</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Code</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Success</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film session successfully created</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>0000</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Warning</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Memory allocation not supported</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B600</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <note>
                <para>The status code "0106H" (Invalid Attribute Value) indicates that the requested memory allocation can not be provided; the status code "0213H" (Resource limitation) indicates that the requested allocation can temporarily not be provided.</para>
              </note>
            </section>
            <section label="H.4.1.2.1.3" status="6" xml:id="sect_H.4.1.2.1.3">
              <title>Behavior</title>
              <para>The SCU uses the N-CREATE to request the SCP to create a Basic Film Session SOP Instance. The SCU shall initialize Attributes of the SOP Class as specified in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
              <para>The SCP shall create the SOP Instance and shall initialize Attributes of the SOP Class as specified in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
              <para>The SCP shall return the status code of the requested SOP Instance creation. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
              <para>The Basic Film Session SOP Instances shall be created before the Film Box SOP Instances are created.</para>
              <para>At any time the SCU/SCP shall only support one Basic Film Session SOP Instance on an Association.</para>
              <note>
                <para>Multiple film sessions may be handled by establishing multiple Associations.</para>
              </note>
              <para>Terminating the Association will effectively perform an N-DELETE on an opened film session. See Note in <xref linkend="sect_H.4.1.2.3.2" xrefstyle="select: label"/>.</para>
            </section>
          </section>
          <section label="H.4.1.2.2" status="5" xml:id="sect_H.4.1.2.2">
            <title>N-SET</title>
            <para>The N-SET may be used to update an instance of the Basic Film Session SOP Class.</para>
            <section label="H.4.1.2.2.1" status="6" xml:id="sect_H.4.1.2.2.1">
              <title>Attributes</title>
              <para>All Attributes and usage in <xref linkend="table_H.4-2" xrefstyle="select: label"/> apply to N-SET.</para>
            </section>
            <section label="H.4.1.2.2.2" status="6" xml:id="sect_H.4.1.2.2.2">
              <title>Status</title>
              <para>The status values that are specific for this SOP Class are defined in <xref linkend="sect_H.4.1.2.1.2" xrefstyle="select: label"/>.</para>
            </section>
            <section label="H.4.1.2.2.3" status="6" xml:id="sect_H.4.1.2.2.3">
              <title>Behavior</title>
              <para>The SCU uses the N-SET to request the SCP to update a Basic Film Session SOP Instance. The SCU shall specify the SOP Instance UID to be updated and shall specify the list of Attributes for which the Attribute Values are to be set.</para>
              <para>The SCP shall set new values for the specified Attributes of the specified SOP Instance.</para>
              <para>The SCP shall return the status code of the requested SOP Instance update. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/></para>
            </section>
          </section>
          <section label="H.4.1.2.3" status="5" xml:id="sect_H.4.1.2.3">
            <title>N-DELETE</title>
            <para>The N-DELETE is used to delete the complete Basic Film Session SOP Instance hierarchy. As a result, all references to Image SOP Instances within the film session are deleted.</para>
            <para>The Basic Film Session SOP Instance hierarchy consists of one Basic Film Session SOP Instance, one or more Basic Film Box SOP Instances, one or more Image Box SOP Instances, zero or more Basic Annotation Box SOP Instances, zero or more Presentation LUT SOP Instances, and zero or more Basic Print Image Overlay Box SOP instances.</para>
            <note>
              <para>The Basic Film Session SOP Instance hierarchy can be visualized as a reversed tree with the Basic Film Session SOP Instance as the root and the Image Box SOP Instances as the leaves.</para>
            </note>
            <section label="H.4.1.2.3.1" status="6" xml:id="sect_H.4.1.2.3.1">
              <title>Status</title>
              <para>There are no specific status codes.</para>
            </section>
            <section label="H.4.1.2.3.2" status="6" xml:id="sect_H.4.1.2.3.2">
              <title>Behavior</title>
              <para>The SCU uses the N-DELETE to request the SCP to delete the Basic Film Session SOP Instance hierarchy. The SCU shall specify in the N-DELETE request primitive of the SOP Instance UID of the Basic Film Session (root).</para>
              <para>The SCP shall delete the specified SOP Instance hierarchy.</para>
              <para>The SCP shall not delete SOP Instances in the hierarchy as long as there are outstanding references to these SOP Instances</para>
              <note>
                <para>It is beyond the scope of the Standard to specify when the SCP actually deletes SOP Instances with outstanding references.</para>
              </note>
              <para>The SCP shall return the status code of the requested SOP Instance deletion. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
            </section>
          </section>
          <section label="H.4.1.2.4" status="5" xml:id="sect_H.4.1.2.4">
            <title>N-ACTION</title>
            <para>The N-ACTION is used to print the film session; i.e., to print all the films that belong to the film session.</para>
            <para>If multiple copies of the film session have been requested, the SCP shall collate the copies. This means that if two copies of four films has been specified, the printed sequence is 12341234.</para>
            <section label="H.4.1.2.4.1" status="6" xml:id="sect_H.4.1.2.4.1">
              <title>Attributes</title>
              <para>The arguments of the N-ACTION are defined in <xref linkend="table_H.4-3" xrefstyle="select: label"/>.</para>
              <para>The Action Reply argument is encoded as a DICOM Data Set. The Data Set only contains the Attribute Referenced Print Job Sequence (2100,0500), which includes the Referenced SOP Class UID (0008,1150) and the Referenced SOP Instance UID (0008,1155).</para>
              <para>If the SCP supports the Print Job SOP Class, the Action Reply argument is contained in the N-ACTION response. Otherwise, the Action Reply is not contained in the N-ACTION response.</para>
              <table frame="box" label="H.4-3" rules="all" xml:id="table_H.4-3">
                <caption>N-ACTION Arguments</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Action Type Name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Action Type ID</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Print</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>1</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Referenced Print Job Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0500)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>Required if Print Job SOP is supported</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Class UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1150)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>Required if Referenced Print Job Sequence (2100,0500) is present</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Instance UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1155)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>Required if Referenced Print Job Sequence (2100,0500) is present</para>
                    </td>
                  </tr>
                </tbody>
              </table>
            </section>
            <section label="H.4.1.2.4.2" status="6" xml:id="sect_H.4.1.2.4.2">
              <title>Status</title>
              <para>The status values that are specific for this SOP Class are defined in <xref linkend="table_H.4-4" xrefstyle="select: label"/>.</para>
              <table frame="box" label="H.4-4" rules="all" xml:id="table_H.4-4">
                <caption>SOP Class Status Values</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Status</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Meaning</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Code</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Success</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film belonging to the film session are accepted for printing; if supported, the Print Job SOP Instance is created</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>0000</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Warning</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film session printing (collation) is not supported</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B601</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Session SOP Instance hierarchy does not contain Image Box SOP Instances (empty page)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B602</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Image size is larger than image box size, the image has been demagnified.</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B604</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Image size is larger than the Image Box size. The Image has been cropped to fit.</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B609</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Image size or Combined Print Image size is larger than the Image Box size. Image or Combined Print Image has been decimated to fit.</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B60A</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Failure</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Session SOP Instance hierarchy does not contain Film Box SOP Instances</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>C600</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Unable to create Print Job SOP Instance; print queue is full</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>C601</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Image size is larger than image box size</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>C603</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Combined Print Image size is larger than the Image Box size</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>C613</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <note>
                <para>Previous versions of the DICOM Standard defined the status code of C604. This code was specified for the case of an image position collision. Since image position collision is not a possible state, the code has been retired.</para>
              </note>
            </section>
            <section label="H.4.1.2.4.3" status="6" xml:id="sect_H.4.1.2.4.3">
              <title>Behavior</title>
              <para>The SCU uses the N-ACTION to request the SCP to print all the films belonging to the identified film session.</para>
              <para>The SCP shall make a copy of the "working" Basic Film Session SOP Instance hierarchy, which contains all the information to control the Print Process. Hence the SCU may further update the "working" SOP Instance hierarchy without affecting the result of previous print requests. The execution of the Print Process is monitored by the Print Job SOP Instance (if supported by the SCP) and the Printer SOP Class.</para>
              <para>If the SCP supports the Print Job SOP Class then the SCP shall create a Print Job SOP Instance, which contains the copy of the "working" Basic Film Session SOP Instance hierarchy and shall return the Print Job SOP Class/Instance UID pair in the Attribute Referenced Print Job Sequence of the Action Reply argument.</para>
              <note>
                <para>If the SCP supports the Print Job SOP Class, it creates a single Print Job for all the films of the film session.</para>
              </note>
              <para>The SCP shall return the status code of the requested operation. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
              <para>The N-ACTION shall be issued only if the Basic Film Session SOP Instance hierarchy contains at least one Film Box SOP Instance.</para>
            </section>
          </section>
        </section>
        <section label="H.4.1.3" status="4" xml:id="sect_H.4.1.3">
          <title>SOP Class Definition and UID</title>
          <para>The Basic Film Session SOP Class UID shall have the value "1.2.840.10008.5.1.1.1".</para>
        </section>
      </section>
      <section label="H.4.2" status="3" xml:id="sect_H.4.2">
        <title>Basic Film Box SOP Class</title>
        <section label="H.4.2.1" status="4" xml:id="sect_H.4.2.1">
          <title>IOD Description</title>
          <para>The Basic Film Box IOD is an abstraction of the presentation of one film of the film session. The Basic Film Box IOD describes the presentation parameters that are common for all images on a given sheet of film.</para>
          <para>The Basic Film Box SOP Instance refers to one or more Image Box SOP Instances, zero or more film related Annotation Box SOP Instances, and zero or one Presentation LUT SOP Instance.</para>
        </section>
        <section label="H.4.2.2" status="4" xml:id="sect_H.4.2.2">
          <title>DIMSE Service Group</title>
          <para><xref linkend="table_H.4-5" xrefstyle="select: label"/> shows DIMSE Services applicable to the IOD.</para>
          <table frame="box" label="H.4-5" rules="all" xml:id="table_H.4-5">
            <caption>DIMSE Service Group</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">DIMSE Service Element</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Usage SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-CREATE</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>M/M</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-ACTION</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>M/M</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-DELETE</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/M</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-SET</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/U</para>
                </td>
              </tr>
            </tbody>
          </table>
          <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
          <para>This Section describes the behavior of the DIMSE Services that are specific for this IOD. The general behavior of the DIMSE Services is specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
          <section label="H.4.2.2.1" status="5" xml:id="sect_H.4.2.2.1">
            <title>N-CREATE</title>
            <para>The N-CREATE is used to create an instance of the Basic Film Box SOP Class.</para>
            <section label="H.4.2.2.1.1" status="6" xml:id="sect_H.4.2.2.1.1">
              <title>Attributes</title>
              <para>The Attribute list of the N-CREATE is shown in <xref linkend="table_H.4-6" xrefstyle="select: label"/>.</para>
              <table frame="box" label="H.4-6" rules="all" xml:id="table_H.4-6">
                <caption>N-CREATE Attribute List</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute Name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Image Display Format</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0010)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>M/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Referenced Film Session Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0500)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>M/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Class UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1150)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>M/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Instance UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1155)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>M/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Referenced Image Box Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0510)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Class UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1150)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Instance UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1155)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Referenced Basic Annotation Box Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0520)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>(Required if optional Annotation SOP was negotiated)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Class UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1150)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>(Required if sequence is present)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Instance UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1155)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>(Required if sequence is present)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Orientation</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0040)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Size ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Magnification Type</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0060)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Max Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0130)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Configuration Information</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0150)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Referenced Presentation LUT Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2050,0500)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/MC</para>
                      <para>(Required if Presentation LUT is supported)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Class UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1150)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/MC</para>
                      <para>(Required if sequence is present)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Instance UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1155)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/MC</para>
                      <para>(Required if sequence is present)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Annotation Display Format ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Smoothing Type</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0080)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Border Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0100)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Empty Image Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0110)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Min Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0120)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Trim</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0140)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Illumination</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,015E)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/MC</para>
                      <para>(Required if Presentation LUT is supported)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Reflected Ambient Light</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0160)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/MC</para>
                      <para>(Required if Presentation LUT is supported)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Requested Resolution ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2020,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>ICC Profile</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0028,2000)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
              <para>If the Illumination (2010,015E) and Reflected Ambient Light (2010,0160) values, respectively termed L0 and La, are not created, the following default values are recommended for grayscale printing:</para>
              <itemizedlist mark="none">
                <listitem>
                  <para>For transmissive film: L0 = 2000 cd/m<superscript>2</superscript>. La = 10 cd/m<superscript>2</superscript>.</para>
                </listitem>
                <listitem>
                  <para>For reflective media: L0 = 150 cd/m<superscript>2</superscript>.</para>
                </listitem>
              </itemizedlist>
              <para>The ICC Profile (0028,2000) Attribute shall only be used to describe the color space of images for color printing, i.e., in conjunction with the Basic Color Image Box SOP Class. It shall not be used with the Basic Grayscale Image Box SOP Class.</para>
            </section>
            <section label="H.4.2.2.1.2" status="6" xml:id="sect_H.4.2.2.1.2">
              <title>Status</title>
              <para>The status values that are specific for this SOP Class are defined as follows:</para>
              <table frame="box" label="H.4.2.2.1.2-1" rules="all" xml:id="table_H.4.2.2.1.2-1">
                <caption>Status Values for Basic Film Box SOP Class</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Status</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Meaning</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Code</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Success</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Box successfully created</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>0000</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Warning</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Requested Min Density or Max Density outside of printer's operating range. The printer will use its respective minimum or maximum density value instead.</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B605</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Failure</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>There is an existing Film Box that has not been printed and N-ACTION at the Film Session level is not supported. A new Film Box will not be created when a previous Film Box has not been printed.</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>C616</para>
                    </td>
                  </tr>
                </tbody>
              </table>
            </section>
            <section label="H.4.2.2.1.3" status="6" xml:id="sect_H.4.2.2.1.3">
              <title>Behavior</title>
              <para>The SCU uses the N-CREATE to request the SCP to create a Basic Film Box SOP Instance. The SCU shall initialize Attributes of the SOP Class as specified in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
              <para>The SCP shall create the SOP Instance and shall initialize Attributes of the SOP Class as specified in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
              <note>
                <para>If there exists a Film Box SOP Instance that has not been printed and the SCP does not support N-ACTION on the Film Session, then the SCP should fail the N-CREATE of the new SOP Instance.</para>
              </note>
              <para>Upon the creation of the Basic Film Box SOP Instance, the SCP shall append the SOP Class/Instance UID pair of the created Basic Film Box SOP Instance to the Attribute Referenced Film Box Sequence (2000,0500) of the parent Basic Film Session SOP Instance to link the Basic Film Box SOP Instance to the Basic Film Session SOP Instance.</para>
              <para>The SCP shall create Image Box SOP Instances of the appropriate Image Box SOP Class for each image box as defined by the Attribute Image Display Format (2010,0010). The SOP Class of the created Image Box SOP Instance depends on the Meta SOP Class context. For example the Grayscale Image Box SOP Class is related to the Basic Grayscale Print Management Meta SOP Class. The Meta SOP Class context is conveyed by the Presentation Context ID that corresponds with the Meta SOP Class and is defined at Association setup.</para>
              <para>The SCP shall append the SOP Class/Instance UID pair of the created Image Box SOP Instance to the Referenced Image Box Sequence Attribute of the parent Basic Film Box SOP Instance to link each Image Box SOP Instance to the Basic Film Box SOP Instance. The SCP returns the list of Image Box SOP Class/Instance UID pairs in the Attribute Referenced Image Box Sequence (2010,0510) of the N-CREATE response message.</para>
              <para>If supported, the SCP shall create Basic Annotation Box SOP Instances for each Annotation Box defined by the Attribute Annotation Display Format ID and shall append the SOP Class/Instance UID pair of the created Basic Annotation Box SOP Instance to the Referenced Annotation Box Sequence Attribute of the parent Basic Film Box SOP Instance to link each Basic Annotation Box SOP Instance to the Basic Film Box SOP Instance. The SCP returns the list of Basic Annotation Box SOP Class/Instance UID pairs in the Attribute Referenced Annotation Box Sequence of the N-CREATE response message. The Annotation Boxes shall support the same character sets as the Basic Film Box.</para>
              <para>The character set supported by the Film Box shall be the same as the character set of the Basic Film Session.</para>
              <para>The SCP shall return the status code of the requested SOP Instance creation. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
            </section>
          </section>
          <section label="H.4.2.2.2" status="5" xml:id="sect_H.4.2.2.2">
            <title>N-SET</title>
            <para>The N-SET may be used to update the last created instance of the Basic Film Box SOP Class.</para>
            <section label="H.4.2.2.2.1" status="6" xml:id="sect_H.4.2.2.2.1">
              <title>Attributes</title>
              <para>The Attributes that may be updated are shown in <xref linkend="table_H.4-7" xrefstyle="select: label"/>.</para>
              <table frame="box" label="H.4-7" rules="all" xml:id="table_H.4-7">
                <caption>N-SET Attributes</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute Name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Magnification Type</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0060)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Max Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0130)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Configuration Information</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0150)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Referenced Presentation LUT Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2050,0500)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/MC</para>
                      <para>(Required if Presentation LUT is supported)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Class UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1150)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/MC</para>
                      <para>(Required if sequence is present)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Instance UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1155)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/MC</para>
                      <para>(Required if sequence is present)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Smoothing Type</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0080)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Border Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0100)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Empty Image Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0110)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Min Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0120)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Trim</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0140)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Illumination</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,015E)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/MC</para>
                      <para>(Required if Presentation LUT is supported)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Reflected Ambient Light</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0160)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/MC</para>
                      <para>(Required if Presentation LUT is supported)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>ICC Profile</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0028,2000)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
            </section>
            <section label="H.4.2.2.2.2" status="6" xml:id="sect_H.4.2.2.2.2">
              <title>Status</title>
              <para>The status values that are specific for this SOP Class are defined in <xref linkend="sect_H.4.2.2.1.2" xrefstyle="select: label"/>.</para>
            </section>
            <section label="H.4.2.2.2.3" status="6" xml:id="sect_H.4.2.2.2.3">
              <title>Behavior</title>
              <para>The SCU uses the N-SET to request the SCP to update a Basic Film Box SOP Instance. The SCU shall only specify the SOP Instance UID of the last created Basic Film Box SOP Instance in the N-SET request primitive, and shall specify the list of Attributes for which the Attribute Values are to be set.</para>
              <para>The SCP shall set new values for the specified Attributes of the specified SOP Instance.</para>
              <para>The SCP shall return the status code of the requested SOP Instance update. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
            </section>
          </section>
          <section label="H.4.2.2.3" status="5" xml:id="sect_H.4.2.2.3">
            <title>N-DELETE</title>
            <para>The N-DELETE is used to delete the last created Basic Film Box SOP Instance hierarchy. As a result all the information describing the last film is deleted.</para>
            <para>The Basic Film Box SOP Instance hierarchy consists of one Basic Film Box SOP Instance, one or more Image Box SOP Instances, zero or more Basic Annotation Box SOP Instances, zero or more Presentation LUT SOP Instances, and zero or more Basic Print Image Overlay Box SOP instances.</para>
            <note>
              <para>There is no provision in the DICOM Standard to delete previously created Film Box SOP Instances.</para>
            </note>
            <section label="H.4.2.2.3.1" status="6" xml:id="sect_H.4.2.2.3.1">
              <title>Behavior</title>
              <para>The SCU uses the N-DELETE to request the SCP to delete the Basic Film Box SOP Instance hierarchy. The SCU shall specify in the N-DELETE request primitive the SOP Instance UID of the last created Basic Film Box (root).</para>
              <para>The SCP shall delete the specified SOP Instance hierarchy and shall remove the UID of the deleted Basic Film Box SOP Instance from the list of SOP Instance UIDs of the Film Box UIDs Attribute of the parent Basic Film Session SOP Instance.</para>
              <para>The SCP shall return the status code of the requested SOP Instance hierarchy deletion. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
              <para>The SCP shall not delete SOP Instances in the hierarchy as long as there are outstanding references to these SOP Instances</para>
              <note>
                <para>It is beyond the scope of the Standard to specify when the SCP actually deletes the Image SOP Instances with outstanding references.</para>
              </note>
            </section>
          </section>
          <section label="H.4.2.2.4" status="5" xml:id="sect_H.4.2.2.4">
            <title>N-ACTION</title>
            <para>The N-ACTION is used to print one or more copies of the last created instance of the Film Box.</para>
            <section label="H.4.2.2.4.1" status="6" xml:id="sect_H.4.2.2.4.1">
              <title>Attributes</title>
              <para>The arguments of the N-ACTION are defined as shown in <xref linkend="table_H.4-8" xrefstyle="select: label"/>.</para>
              <para>The Action Reply argument is encoded as a DICOM Data Set. The Data Set only contains the Attribute Referenced Print Job Sequence (2100,0500), which includes the Referenced SOP Class UID (0008,1150) and the Referenced SOP Instance UID (0008,1155).</para>
              <para>If the SCP supports the Print Job SOP Class, the Action Reply argument is contained in the N-ACTION response. Otherwise, the Action Reply is not contained in the N-ACTION response.</para>
              <table frame="box" label="H.4-8" rules="all" xml:id="table_H.4-8">
                <caption>N-ACTION Arguments</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Action Type Name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Action Type ID</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag
                      </emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Print</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>1</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Referenced Print Job Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0500)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>Required if Print Job SOP is supported</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Class UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1150)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>Required if Referenced Print Job Sequence (2100,0500) is present</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Referenced SOP Instance UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1155)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>Required if Referenced Print Job Sequence (2100,0500) is present</para>
                    </td>
                  </tr>
                </tbody>
              </table>
            </section>
            <section label="H.4.2.2.4.2" status="6" xml:id="sect_H.4.2.2.4.2">
              <title>Status</title>
              <para>The status values that are specific for this SOP Class are defined as shown in <xref linkend="table_H.4-9" xrefstyle="select: label"/>.</para>
              <table frame="box" label="H.4-9" rules="all" xml:id="table_H.4-9">
                <caption>Status Values</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Status</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Meaning</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Code</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Success</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film accepted for printing; if supported, the Print Job SOP Instance is created</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>0000</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Warning</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Box SOP Instance hierarchy does not contain Image Box SOP Instances (empty page)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B603</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Image size is larger than image box size, the image has been demagnified.</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B604</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Image size is larger than the Image Box size. The Image has been cropped to fit.</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B609</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Image size or Combined Print Image size is larger than the Image Box size. Image or Combined Print Image has been decimated to fit.</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B60A</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Failure</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Unable to create Print Job SOP Instance; print queue is full</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>C602</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Image size is larger than image box size</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>C603</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Combined Print Image size is larger than the Image Box size</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>C613</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <note>
                <para>Previous versions of the DICOM Standard defined the status code of C604. This code was specified for the case of an image position collision. Since image position collision is not a possible state, the code has been retired.</para>
              </note>
            </section>
            <section label="H.4.2.2.4.3" status="6" xml:id="sect_H.4.2.2.4.3">
              <title>Behavior</title>
              <para>The SCU uses the N-ACTION to request the SCP to print one or more copies of a single film of the film session. The SCU shall only specify the SOP Instance UID of the last created Basic Film Box SOP Instance in the N-ACTION request primitive.</para>
              <para>The SCP shall make a copy of the "working" Basic Film Session SOP Instance and the "working" Basic Film Box SOP Instance hierarchy, which contains all the information to control the Print Process. Hence the SCU may further update the "working" SOP Instances without affecting the result of previous print requests. The execution of the Print Process is monitored by the Print Job SOP Class (if supported by the SCP) and the Printer SOP Class.</para>
              <para>If the SCP supports the Print Job SOP Class then the SCP shall create a Print Job SOP Instance, which contains the copy of the "working" Basic Film Session SOP Instance hierarchy and shall return the Print Job SOP Class/Instance UID pair in the Attribute Referenced Print Job Sequence of the Action Reply argument.</para>
              <para>The SCP shall return the status code of the requested operation. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
            </section>
          </section>
        </section>
        <section label="H.4.2.3" status="4" xml:id="sect_H.4.2.3">
          <title>SOP Class Definition and UID</title>
          <para>The Basic Film Box SOP Class UID shall have the value "1.2.840.10008.5.1.1.2".</para>
        </section>
      </section>
      <section label="H.4.3" status="3" xml:id="sect_H.4.3">
        <title>Image Box SOP Classes</title>
        <section label="H.4.3.1" status="4" xml:id="sect_H.4.3.1">
          <title>Basic Grayscale Image Box SOP Class</title>
          <section label="H.4.3.1.1" status="5" xml:id="sect_H.4.3.1.1">
            <title>IOD Description</title>
            <para>The Basic Image Box IOD is an abstraction of the presentation of an image and image related data in the image area of a film. The Basic Image Box IOD describes the presentation parameters and image pixel data that apply to a single image of a sheet of film.</para>
            <para>The Basic Grayscale Image Box SOP Instance is created by the SCP at the time the Basic Film Box SOP Instance is created, based on the value of the Basic Film Box Attribute Image Display Format (2010,0010).</para>
            <para>The Basic Grayscale Image Box SOP Instance refers to zero or one Image Overlay Box SOP Instance and zero or one Presentation LUT SOP Instance.</para>
          </section>
          <section label="H.4.3.1.2" status="5" xml:id="sect_H.4.3.1.2">
            <title>DIMSE Service Group</title>
            <para>The DIMSE Services applicable to the IOD are shown below.</para>
            <table frame="box" label="H.4.3.1.2-1" rules="all" xml:id="table_H.4.3.1.2-1">
              <caption>DIMSE Services Applicable to Basic Grayscale Image Box</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">DIMSE Service Element</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>N-SET</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>M/M</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
            <note>
              <para>There is no N-CREATE because Instances of the Basic Grayscale Image Box SOP Class are created by the SCP as a result of the N-CREATE of the Film Box SOP Instance.</para>
            </note>
            <para>This Section describes the behavior of the DIMSE Services that are specific for this IOD. The general behavior of the DIMSE Services is specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <section label="H.4.3.1.2.1" status="6" xml:id="sect_H.4.3.1.2.1">
              <title>N-SET</title>
              <para>The N-SET may be used to update an instance of the Basic Grayscale Image Box SOP Class.</para>
              <section label="H.4.3.1.2.1.1" status="7" xml:id="sect_H.4.3.1.2.1.1">
                <title>Attributes</title>
                <para>The Attributes that may be updated are shown in <xref linkend="table_H.4-10" xrefstyle="select: label"/>.</para>
                <table frame="box" label="H.4-10" rules="all" xml:id="table_H.4-10">
                  <caption>N-SET Attributes</caption>
                  <thead>
                    <tr valign="top">
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Attribute Name</emphasis>
                        </para>
                      </th>
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Tag</emphasis>
                        </para>
                      </th>
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Usage SCU/SCP</emphasis>
                        </para>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image Box Position</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2020,0010)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Basic Grayscale Image Sequence</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2020,0110)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Samples Per Pixel</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0002)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Photometric Interpretation</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0004)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Rows</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0010)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Columns</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0011)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Pixel Aspect Ratio</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0034)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>MC/M</para>
                        <para>(Required if the aspect ration is not 1\1)</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Bits Allocated</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0100)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Bits Stored</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0101)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;High Bit</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0102)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Pixel Representation</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0103)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Pixel Data</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(7FE0,0010)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Polarity</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2020,0020)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Magnification Type</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2010,0060)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Smoothing Type</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2010,0080)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Min Density</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2010,0120)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Max Density</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2010,0130)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Configuration Information</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2010,0150)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Requested Image Size</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2020,0030)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Requested Decimate/Crop Behavior</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2020,0040)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Referenced Presentation LUT Sequence</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2050,0500)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt; Referenced SOP Class UID</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0008,1150)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt; Referenced SOP Instance UID</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0008,1155)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
                <para>The values of Magnification Type (2010,0060) and Smoothing Type (2010,0080) of a particular image box override the values of Magnification Type and Smoothing Type of the film box.</para>
                <para>Values for Referenced Presentation LUT Sequence override any Presentation LUT that may have been set at the Basic Film Box. Values for Min/Max Density override any Density values that may have been set at the Basic Film Box.</para>
              </section>
              <section label="H.4.3.1.2.1.2" status="7" xml:id="sect_H.4.3.1.2.1.2">
                <title>Status</title>
                <para>The status values that are specific for this SOP Class are defined as follows.</para>
                <table frame="box" label="H.4.3.1.2.1.2-1" rules="all" xml:id="table_H.4.3.1.2.1.2-1">
                  <caption>Status Values for Basic Grayscale Image Box SOP Class</caption>
                  <thead>
                    <tr valign="top">
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Status</emphasis>
                        </para>
                      </th>
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Meaning</emphasis>
                        </para>
                      </th>
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Code</emphasis>
                        </para>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Success</para>
                      </td>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image successfully stored in Image Box</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>0000</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Warning</para>
                      </td>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image size larger than image box size, the image has been demagnified.</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>B604</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1"/>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Requested Min Density or Max Density outside of printer's operating range. The printer will use its respective minimum or maximum density value instead.</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>B605</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1"/>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image size is larger than the Image Box size. The Image has been cropped to fit.</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>B609</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1"/>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image size or Combined Print Image size is larger than the Image Box size. The Image or Combined Print Image has been decimated to fit.</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>B60A</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Failure</para>
                      </td>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image size is larger than image box size</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>C603</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1"/>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Insufficient memory in printer to store the image</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>C605</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1"/>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Combined Print Image size is larger than the Image Box size</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>C613</para>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
              <section label="H.4.3.1.2.1.3" status="7" xml:id="sect_H.4.3.1.2.1.3">
                <title>Behavior</title>
                <para>The SCU uses the N-SET to request the SCP to update a Basic Grayscale Image Box SOP Instance. The SCU shall only specify the SOP Instance UID of a Basic Grayscale Image Box belonging to the last created Film Box SOP Instance and shall specify the list of Attributes for which the Attribute Values are to be set.</para>
                <para>To instruct the SCP to erase the image in the image position, the SCU shall set a zero length and no value in the Attribute Basic Grayscale Image Sequence (2020,0110).</para>
                <para>The SCP shall set new values for the specified Attributes of the specified SOP Instance.</para>
                <note>
                  <para>The image in this N-SET supersedes any image previously set in the Image Box.</para>
                </note>
                <para>The SCP shall return the status code of the requested SOP Instance update. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
                <para>If Requested Decimate/Crop Behavior (2020,0040) specifies DECIMATE, Magnification Type (2010,0060) specifies NONE, and the image is too large to fit the Image Box, the SCP shall fail the N-SET.</para>
              </section>
            </section>
          </section>
          <section label="H.4.3.1.3" status="5" xml:id="sect_H.4.3.1.3">
            <title>SOP Class Definition and UID</title>
            <para>The Basic Grayscale Image Box SOP Class UID shall have the value "1.2.840.10008.5.1.1.4".</para>
          </section>
        </section>
        <section label="H.4.3.2" status="4" xml:id="sect_H.4.3.2">
          <title>Basic Color Image Box SOP Class</title>
          <section label="H.4.3.2.1" status="5" xml:id="sect_H.4.3.2.1">
            <title>IOD Description</title>
            <para>The Basic Image Box IOD is an abstraction of the presentation of an image and image related data in the image area of a film. The Basic Image Box IOD describes the presentation parameters and image pixel data that apply to a single image of a sheet of film.</para>
            <para>The Basic Color Image Box SOP Instance is created by the SCP at the time the Basic Film Box SOP Instance is created, based on the value of the Basic Film Box Attribute Image Display Format (2010,0010).</para>
            <para>The Basic Color Image Box SOP Instance refers to zero or one Image Overlay Box SOP Instance.</para>
          </section>
          <section label="H.4.3.2.2" status="5" xml:id="sect_H.4.3.2.2">
            <title>DIMSE Service Group</title>
            <para>The following DIMSE Services are applicable to the IOD.</para>
            <table frame="box" label="H.4.3.2.2-1" rules="all" xml:id="table_H.4.3.2.2-1">
              <caption>DIMSE Services Applicable to Basic Color Image Box</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">DIMSE Service element</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>N-SET</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>M/M</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
            <note>
              <para>There is no N-CREATE because Instances of the Basic Color Image Box SOP Class are created by the SCP as a result of the N-CREATE of the Film Box SOP Instance.</para>
            </note>
            <para>This Section describes the behavior of the DIMSE Services that are specific for this IOD. The general behavior of the DIMSE Services is specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <section label="H.4.3.2.2.1" status="6" xml:id="sect_H.4.3.2.2.1">
              <title>N-SET</title>
              <para>The N-SET may be used to update an instance of the Basic Color Image Box SOP Class.</para>
              <section label="H.4.3.2.2.1.1" status="7" xml:id="sect_H.4.3.2.2.1.1">
                <title>Attributes</title>
                <para>The Attributes that may be updated are shown in <xref linkend="table_H.4-11" xrefstyle="select: label"/>.</para>
                <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
                <para>The values of Magnification Type (2010,0060) and Smoothing Type (2010,0080) of a particular image box override the values of Magnification Type and Smoothing Type of the film box.</para>
                <table frame="box" label="H.4-11" rules="all" xml:id="table_H.4-11">
                  <caption>N-SET Attributes</caption>
                  <thead>
                    <tr valign="top">
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Attribute Name</emphasis>
                        </para>
                      </th>
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Tag</emphasis>
                        </para>
                      </th>
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Usage SCU/SCP</emphasis>
                        </para>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image Box Position</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2020,0010)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Basic Color Image Sequence</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2020,0111)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Samples Per Pixel</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0002)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Photometric Interpretation</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0004)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Planar Configuration</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0006)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Rows</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0010)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Columns</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0011)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Pixel Aspect Ratio</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0034)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>MC/M</para>
                        <para>(Required if the aspect ration is not 1\1)</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Bits Allocated</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0100)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Bits Stored</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0101)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;High Bit</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0102)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Pixel Representation</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(0028,0103)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>&gt;Pixel Data</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(7FE0,0010)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>M/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Polarity</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2020,0020)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/M</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Magnification Type</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2010,0060)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Smoothing Type</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2010,0080)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Requested Image Size</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2020,0030)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Requested Decimate/Crop Behavior</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>(2020,0040)</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>U/U</para>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
              <section label="H.4.3.2.2.1.2" status="7" xml:id="sect_H.4.3.2.2.1.2">
                <title>Status</title>
                <para>The status values that are specific for this SOP Class are defined as follows.</para>
                <table frame="box" label="H.4.3.2.2.1.2-1" rules="all" xml:id="table_H.4.3.2.2.1.2-1">
                  <caption>Status Values for Basic Color Image Box SOP Class</caption>
                  <thead>
                    <tr valign="top">
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Status</emphasis>
                        </para>
                      </th>
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Meaning</emphasis>
                        </para>
                      </th>
                      <th align="center" colspan="1" rowspan="1">
                        <para>
                          <emphasis role="bold">Code</emphasis>
                        </para>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Warning</para>
                      </td>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image size larger than image box size, the image has been demagnified.</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>B604</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1"/>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image size is larger than the Image Box size. The Image has been cropped to fit.</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>B609</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1"/>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image size or Combined Print Image size is larger than the Image Box size. The Image or Combined Print Image has been decimated to fit.</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>B60A</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1">
                        <para>Failure</para>
                      </td>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Image size is larger than image box size</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>C603</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1"/>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Insufficient memory in printer to store the image</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>C605</para>
                      </td>
                    </tr>
                    <tr valign="top">
                      <td align="left" colspan="1" rowspan="1"/>
                      <td align="left" colspan="1" rowspan="1">
                        <para>Combined Print Image size is larger than the Image Box size</para>
                      </td>
                      <td align="center" colspan="1" rowspan="1">
                        <para>C613</para>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
              <section label="H.4.3.2.2.1.3" status="7" xml:id="sect_H.4.3.2.2.1.3">
                <title>Behavior</title>
                <para>The SCU uses the N-SET to request the SCP to update a Basic Color Image Box SOP Instance. The SCU shall only specify the SOP Instance UID of a Basic Color Image Box belonging to the last created Film Box SOP Instance and shall specify the list of Attributes for which the Attribute Values are to be set.</para>
                <para>To instruct the SCP to erase the image in the image position, the SCU shall set a zero length and no value in the Attribute Basic Color Image Sequence (2020,0111).</para>
                <para>The SCP shall set new values for the specified Attributes of the specified SOP Instance.</para>
                <note>
                  <para>The image in this N-SET supersedes any image previously set in the Image Box.</para>
                </note>
                <para>The SCP shall return the status code of the requested SOP Instance update. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
                <para>If Requested Decimate/Crop Behavior (2020,0040) specifies DECIMATE, Magnification Type (2010,0060) specifies NONE, and the image is too large to fit the Image Box, the SCP shall fail the N-SET.</para>
                <para>The color characteristics of the Pixel Data (7FE0,0010) in the Basic Color Image Box may be described by an ICC Input Device Profile specified in the Film Box, in which case the same profile shall apply to all the Image Boxes in the same Film Box. See <xref linkend="sect_H.4.2.2.1" xrefstyle="select: label"/> and <xref linkend="sect_H.4.2.2.2" xrefstyle="select: label"/>.</para>
              </section>
            </section>
          </section>
          <section label="H.4.3.2.3" status="5" xml:id="sect_H.4.3.2.3">
            <title>SOP Class Definition and UID</title>
            <para>The Basic Color Image Box SOP Class UID shall have the value "1.2.840.10008.5.1.1.4.1".</para>
          </section>
        </section>
        <section label="H.4.3.3" status="4" xml:id="sect_H.4.3.3">
          <title>Referenced Image Box SOP Class (Retired)</title>
          <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-1998.</para>
        </section>
      </section>
      <section label="H.4.4" status="3" xml:id="sect_H.4.4">
        <title>Basic Annotation Box SOP Class</title>
        <section label="H.4.4.1" status="4" xml:id="sect_H.4.4.1">
          <title>IOD Description</title>
          <para>The Basic Annotation Box IOD is an abstraction of the presentation of an annotation (e.g., text string) on a film. The Basic Annotation Box IOD describes the most used text related presentation parameters.</para>
          <para>The Basic Annotation Box SOP Instance is created by the SCP at the time the Basic Film Box SOP Instance is created, based on the value of the Attribute Annotation Display Format ID (2010,0030) of the Basic Film Box.</para>
        </section>
        <section label="H.4.4.2" status="4" xml:id="sect_H.4.4.2">
          <title>DIMSE Service Group</title>
          <para>The DIMSE Services that are applicable to the IOD are shown below.</para>
          <table frame="box" label="H.4.4.2-1" rules="all" xml:id="table_H.4.4.2">
            <caption>DIMSE Services Applicable to Basic Annotation Box</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">DIMSE Service Element</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Usage SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-SET</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/M</para>
                </td>
              </tr>
            </tbody>
          </table>
          <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
          <note>
            <para>There is no N-CREATE because the Instances of the Basic Annotation Box SOP Class are created by the Film Box SOP Instance.</para>
          </note>
          <para>This Section describes the behavior of the DIMSE Services that are specific for this IOD. The general behavior of the DIMSE Services is specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
          <section label="H.4.4.2.1" status="5" xml:id="sect_H.4.4.2.1">
            <title>N-SET</title>
            <para>The N-SET is used to update the Basic Annotation Box SOP Instance.</para>
            <section label="H.4.4.2.1.1" status="6" xml:id="sect_H.4.4.2.1.1">
              <title>Attributes</title>
              <para>The Attributes that may be updated are shown in <xref linkend="table_H.4-13" xrefstyle="select: label"/>.</para>
              <table frame="box" label="H.4-13" rules="all" xml:id="table_H.4-13">
                <caption>N-SET Attributes</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Annotation position</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2030,0010)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>M/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Text String</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2030,0020)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
            </section>
            <section label="H.4.4.2.1.2" status="6" xml:id="sect_H.4.4.2.1.2">
              <title>Status</title>
              <para>There are no specific status codes.</para>
            </section>
            <section label="H.4.4.2.1.3" status="6" xml:id="sect_H.4.4.2.1.3">
              <title>Behavior</title>
              <para>The SCU uses the N-SET to request the SCP to update a Basic Annotation Box SOP Instance. The SCU shall only specify the SOP Instance UID of the Basic Annotation Box belonging to the last created Film Box SOP Instance in the N-SET request primitive, and shall specify the list of Attributes for which the Attribute Values are to be set. The SCU may erase the text string by setting a zero length value in the Attribute Text String (2030,0020).</para>
              <para>The SCP shall set new values for the specified Attributes of the specified SOP Instance.</para>
              <para>The SCP shall return the status code of the requested SOP Instance update. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
            </section>
          </section>
        </section>
        <section label="H.4.4.3" status="4" xml:id="sect_H.4.4.3">
          <title>SOP Class Definition and UID</title>
          <para>The Basic Annotation Box SOP Class UID shall have the value "1.2.840.10008.5.1.1.15".</para>
        </section>
      </section>
      <section label="H.4.5" status="3" xml:id="sect_H.4.5">
        <title>Print Job SOP Class</title>
        <section label="H.4.5.1" status="4" xml:id="sect_H.4.5.1">
          <title>IOD Description</title>
          <para>The Print Job IOD is an abstraction of the Print Job transaction and is the basic information entity to monitor the execution of the Print Process. A Print Job contains one film or multiple films, all belonging to the same film session.</para>
          <para>The Print Job SOP Class is created by N-ACTION operation of the Film Session SOP Class, Film Box SOP Class, or Pull Print Request SOP Class. The Print Job SOP Instance is deleted after the films are printed or after a failure condition.</para>
        </section>
        <section label="H.4.5.2" status="4" xml:id="sect_H.4.5.2">
          <title>DIMSE Service Group</title>
          <para>The DIMSE Services that are applicable to the IOD are shown below.</para>
          <table frame="box" label="H.4.5.2-1" rules="all" xml:id="table_H.4.5.2-1">
            <caption>DIMSE Services Applicable to Print Job</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">DIMSE Service Element</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Usage SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-EVENT-REPORT</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>M/M</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-GET</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/M</para>
                </td>
              </tr>
            </tbody>
          </table>
          <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
          <para>This Section describes the behavior of the DIMSE Services that are specific for this IOD. The general behavior of the DIMSE Services is specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
          <section label="H.4.5.2.1" status="5" xml:id="sect_H.4.5.2.1">
            <title>N-EVENT-REPORT</title>
            <para>The N-EVENT-REPORT is used to report execution status changes to the SCU in an asynchronous way.</para>
            <section label="H.4.5.2.1.1" status="6" xml:id="sect_H.4.5.2.1.1">
              <title>Attributes</title>
              <para>The arguments of the N-EVENT-REPORT are defined as shown in <xref linkend="table_H.4-14" xrefstyle="select: label"/>.</para>
              <note>
                <para>The encoding of Notification Event Information is defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
              </note>
              <table frame="box" label="H.4-14" rules="all" xml:id="table_H.4-14">
                <caption>Notification Event Information</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Event Type Name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Event Type ID</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Pending</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>1</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Execution Status Info</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Session Label</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printing</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>2</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Execution Status Info</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Session Label</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Done</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>3</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Execution Status Info</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Session Label</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Failure</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>4</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Execution Status Info</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Session Label</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                </tbody>
              </table>
            </section>
            <section label="H.4.5.2.1.2" status="6" xml:id="sect_H.4.5.2.1.2">
              <title>Behavior</title>
              <para>The SCP uses the N-EVENT-REPORT to inform the SCU about each execution change. The SCP shall only use the N-EVENT-REPORT within the context of the Association in which the Print Job SOP Instance was created.</para>
              <note>
                <para>If SCU wants to monitor the complete execution process of a Print Job, then the SCU should only release the Association after the receipt of the event type Done or Failure.</para>
              </note>
              <para>The SCU shall return the confirmation from the N-EVENT-REPORT operation.</para>
              <para>If the Event Type Name = Failure or Pending then the error/pending condition is stored in the Execution Status Info argument. The possible values of the Execution Status Info argument are defined in <xref linkend="sect_H.4.5.3" xrefstyle="select: label"/>.</para>
              <para>If the Event Type Name = Failure or Done then the SCP shall delete the Print Job SOP Instance after receiving a confirmation from the SCU.</para>
            </section>
          </section>
          <section label="H.4.5.2.2" status="5" xml:id="sect_H.4.5.2.2">
            <title>N-GET</title>
            <para>The N-GET is used to retrieve an instance of the Print Job SOP Class.</para>
            <section label="H.4.5.2.2.1" status="6" xml:id="sect_H.4.5.2.2.1">
              <title>Attributes</title>
              <para>The Attributes that may be retrieved are shown in <xref linkend="table_H.4-15" xrefstyle="select: label"/>.</para>
              <table frame="box" label="H.4-15" rules="all" xml:id="table_H.4-15">
                <caption>N-GET Attributes</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute Name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Execution Status</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0020)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Execution Status Info</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Print Priority</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0020)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Creation Date</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0040)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Creation Time</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Originator</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2100,0070)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
            </section>
            <section label="H.4.5.2.2.2" status="6" xml:id="sect_H.4.5.2.2.2">
              <title>Behavior</title>
              <para>The SCU uses the N-GET to request the SCP to get a Print Job SOP Instance. The SCU shall specify in the N-GET request primitive the UID of the SOP Instance to be retrieved.</para>
              <para>The SCP shall return the values for the specified Attributes of the specified SOP Instance.</para>
              <para>The SCP shall return the status code of the requested SOP Instance retrieval. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
            </section>
          </section>
        </section>
        <section label="H.4.5.3" status="4" xml:id="sect_H.4.5.3">
          <title>Execution Status Information</title>
          <para>Status Information is defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. Implementation specific warning and error codes shall be defined in the Conformance Statement.</para>
        </section>
        <section label="H.4.5.4" status="4" xml:id="sect_H.4.5.4">
          <title>SOP Class Definition and UID</title>
          <para>The Print Job SOP Class UID shall have the value "1.2.840.10008.5.1.1.14".</para>
        </section>
      </section>
      <section label="H.4.6" status="3" xml:id="sect_H.4.6">
        <title>Printer SOP Class</title>
        <section label="H.4.6.1" status="4" xml:id="sect_H.4.6.1">
          <title>IOD Description</title>
          <para>The Printer IOD is an abstraction of the hard copy printer and is the basic Information Entity to monitor the status of the printer.</para>
          <para>The Printer SOP Instance is created by the SCP during start-up of the hard copy printer and has a well-known SOP Instance UID.</para>
        </section>
        <section label="H.4.6.2" status="4" xml:id="sect_H.4.6.2">
          <title>DIMSE Service Group</title>
          <para>The DIMSE Services that are applicable to the IOD are shown below.</para>
          <table frame="box" label="H.4.6.2-1" rules="all" xml:id="table_H.4.6.2-1">
            <caption>DIMSE Services Applicable to Printer</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">DIMSE Service Element</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Usage SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-EVENT-REPORT</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>M/M</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-GET</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/M</para>
                </td>
              </tr>
            </tbody>
          </table>
          <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
          <para>This Section describes the behavior of the DIMSE Services that are specific for this IOD. The general behavior of the DIMSE Services is specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
          <section label="H.4.6.2.1" status="5" xml:id="sect_H.4.6.2.1">
            <title>N-EVENT-REPORT</title>
            <para>The N-EVENT-REPORT is used to report the changes of the printer status in an asynchronous way.</para>
            <section label="H.4.6.2.1.1" status="6" xml:id="sect_H.4.6.2.1.1">
              <title>Attributes</title>
              <para>The arguments of the N-EVENT-REPORT are defined as shown in <xref linkend="table_H.4-16" xrefstyle="select: label"/>.</para>
              <note>
                <para>The encoding of Notification Event Information is defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
              </note>
              <table frame="box" label="H.4-16" rules="all" xml:id="table_H.4-16">
                <caption>Notification Event Information</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Event Type Name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Event Type ID</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Normal</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>1</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Warning</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>2</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Status Info</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0020)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Destination</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0040)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Failure</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>3</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Status Info</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0020)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Film Destination</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0040)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1"/>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                </tbody>
              </table>
            </section>
            <section label="H.4.6.2.1.2" status="6" xml:id="sect_H.4.6.2.1.2">
              <title>Behavior</title>
              <para>The SCP shall use the N-EVENT-REPORT to inform the SCU about each execution change. The SCP shall send the events to all SCUs with which the SCP has an Association that is using the printer for which the status changes.</para>
              <para>The SCU shall return the confirmation of the N-EVENT-REPORT operation.</para>
              <para>If the Event Type Name = Warning or Failure then the warning/failure condition is stored in the Printer Status Info argument. The possible values the Printer Status Info argument are defined in <xref linkend="sect_H.4.6.3" xrefstyle="select: label"/>.</para>
            </section>
          </section>
          <section label="H.4.6.2.2" status="5" xml:id="sect_H.4.6.2.2">
            <title>N-GET</title>
            <para>The N-GET is used to retrieve an instance of the Printer SOP Class.</para>
            <section label="H.4.6.2.2.1" status="6" xml:id="sect_H.4.6.2.2.1">
              <title>Attributes</title>
              <para>The Attributes that may be retrieved are shown in <xref linkend="table_H.4-17" xrefstyle="select: label"/>.</para>
              <table frame="box" label="H.4-17" rules="all" xml:id="table_H.4-17">
                <caption>N-GET Attributes</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Status</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0010)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Status Info</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0020)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Manufacturer</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,0070)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Manufacturer Model Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1090)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Device Serial Number</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0018,1000)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Software Versions</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0018,1020)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Date Last Calibration</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0018,1200)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Last Calibration</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0018,1201)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
            </section>
            <section label="H.4.6.2.2.2" status="6" xml:id="sect_H.4.6.2.2.2">
              <title>Behavior</title>
              <para>The SCU uses the N-GET to request the SCP to get a Printer SOP Instance. The SCU shall specify in the N-GET request primitive the UID of the SOP Instance to be retrieved.</para>
              <para>The SCP shall return the values for the specified Attributes of the specified SOP Instance.</para>
              <para>The SCP shall return the status code of the requested SOP Instance retrieval. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
            </section>
          </section>
        </section>
        <section label="H.4.6.3" status="4" xml:id="sect_H.4.6.3">
          <title>Printer Status Information</title>
          <para>Status Information is defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. Implementation specific warning and error codes shall be defined in the Conformance Statement.</para>
        </section>
        <section label="H.4.6.4" status="4" xml:id="sect_H.4.6.4">
          <title>SOP Class Definition and UID</title>
          <para>The Printer SOP Class UID shall have the value "1.2.840.10008.5.1.1.16".</para>
        </section>
        <section label="H.4.6.5" status="4" xml:id="sect_H.4.6.5">
          <title>Reserved Identifications</title>
          <para>The well-known UID of the Printer SOP Instance shall have the value "1.2.840.10008.5.1.1.17".</para>
        </section>
      </section>
      <section label="H.4.7" status="3" xml:id="sect_H.4.7">
        <title>VOI LUT Box SOP Class(Retired)</title>
        <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-1998.</para>
      </section>
      <section label="H.4.8" status="3" xml:id="sect_H.4.8">
        <title>Image Overlay Box SOP Class(Retired)</title>
        <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-1998.</para>
      </section>
      <section label="H.4.9" status="3" xml:id="sect_H.4.9">
        <title>Presentation LUT SOP Class</title>
        <section label="H.4.9.1" status="4" xml:id="sect_H.4.9.1">
          <title>Information Object Description</title>
          <para>The Presentation LUT Information Object is an abstraction of a Presentation LUT (see <xref linkend="sect_H.2.1.1" xrefstyle="select: label"/>). The objective of the Presentation LUT is to realize image display tailored for specific modalities, applications, and user preferences. It is used to prepare image pixel data for display on devices that conform to the Grayscale Standard Display Function defined in <olink targetdoc="PS3.14" targetptr="PS3.14" xrefstyle="select: labelnumber"/>.</para>
          <note>
            <para>The density range to be printed, Min Density to Max Density, is specified at either the Film Box or the Image Box. As follows from the definition for Min Density and Max Density in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>, if the requested minimum density is lower than the minimum printer density, or the requested maximum density is greater than the maximum printer density, the printer will use its minimum or maximum density, respectively, when computing the standard response.</para>
          </note>
          <para>The output of the Presentation LUT is Presentation Values (P-Values). P-Values are approximately related to human perceptual response. They are intended to facilitate common input for both hardcopy and softcopy display devices. P-Values are intended to be independent of the specific class or characteristics of the display device.</para>
          <para>The Presentation LUT is not intended to alter the appearance of the pixel values, as specified as specified by the Photometric Interpretation (0028,0004) and Polarity (2020,0020).</para>
          <para>The Basic Film Box Information Object, the Basic Image Box Information Object and the Referenced Image Box Object reference the Presentation LUT.</para>
          <para>If the Configuration Information Attribute (2010,0150) of the Basic Film Box IOD contains information similar to the Presentation LUT, then the Presentation LUT Attributes shall take precedence.</para>
          <section label="H.4.9.1.1" status="5" xml:id="sect_H.4.9.1.1">
            <title>Mapping of P-Values to Optical Density</title>
            <para>The mathematical definition of the Grayscale Standard Display Function and mapping of P-Values to optical density for reflective and transmissive printers is contained in <olink targetdoc="PS3.14" targetptr="PS3.14" xrefstyle="select: labelnumber"/>.</para>
          </section>
        </section>
        <section label="H.4.9.2" status="4" xml:id="sect_H.4.9.2">
          <title>DIMSE Service Group</title>
          <para>The following DIMSE Services are applicable to the association related Presentation LUT Information Object:</para>
          <table frame="box" label="H.4.9.2-1" rules="all" xml:id="table_H.4.9.2-1">
            <caption>DIMSE Services Are Applicable to Presentation LUT</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">DIMSE Service Element</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Usage SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-CREATE</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>M/M</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-DELETE</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U/M</para>
                </td>
              </tr>
            </tbody>
          </table>
          <para>The meaning of the Usage SCU/SCP is described in section <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
          <para>This section describes the behavior of the DIMSE Services, which are specific for this Information Object. The general behavior of the DIMSE services is specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
          <section label="H.4.9.2.1" status="5" xml:id="sect_H.4.9.2.1">
            <title>N-CREATE</title>
            <para>The N-CREATE Service Element is used to create an instance of the Presentation LUT SOP Class.</para>
            <section label="H.4.9.2.1.1" status="6" xml:id="sect_H.4.9.2.1.1">
              <title>Attributes</title>
              <para>The Attribute list of the N-CREATE Service Element is defined as shown in <xref linkend="table_H.4-23" xrefstyle="select: label"/>.</para>
              <table frame="box" label="H.4-23" rules="all" xml:id="table_H.4-23">
                <caption>N-CREATE Attribute List</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Presentation LUT Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2050,0010)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>MC/M</para>
                      <para>(Required if Presentation LUT Shape (2050,0020) is not present. Not allowed otherwise.)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;LUT Descriptor</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0028,3002)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>MC/M</para>
                      <para>(Required if sequence is present).</para>
                      <para>See <xref linkend="sect_H.4.9.2.1.1.1" xrefstyle="select: label"/>.</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;LUT Explanation</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0028,3003)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/U</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;LUT Data</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0028,3006)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>MC/M</para>
                      <para>(Required if sequence is present)</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Presentation LUT Shape</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2050,0020)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>MC/M</para>
                      <para>(Required if Presentation LUT Sequence (2050,0010) is not present. Not allowed otherwise.)</para>
                      <para>SCPs shall support the Enumerated Values IDENTITY and LIN&#xA0;OD</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <section label="H.4.9.2.1.1.1" status="7" xml:id="sect_H.4.9.2.1.1.1">
                <title>LUT Descriptor</title>
                <para>The first value (number of entries in the LUT) shall be equal to:</para>
                <itemizedlist mark="none">
                  <listitem>
                    <para>256 if Bits Stored = 8,</para>
                  </listitem>
                  <listitem>
                    <para>4096 if Bits Stored = 12.</para>
                  </listitem>
                </itemizedlist>
                <para>The second value shall be equal to 0.</para>
                <para>The third value (number of bits for each LUT entry) shall be 10-16.</para>
                <para>See the definition in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> for further explanation.</para>
              </section>
            </section>
            <section label="H.4.9.2.1.2" status="6" xml:id="sect_H.4.9.2.1.2">
              <title>Status</title>
              <para>The status values that are specific for this SOP Class are defined as follows:</para>
              <table frame="box" label="H.4.9.2.1.2-1" rules="all" xml:id="table_H.4.9.2.1.2-1">
                <caption>Status Values for Presentation LUT SOP Class</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Status</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Meaning</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Code</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Success</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Presentation LUT successfully created</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>0000</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Warning</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para>Requested Min Density or Max Density outside of printer's operating range. The printer will use its respective minimum or maximum density value instead.</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>B605</para>
                    </td>
                  </tr>
                </tbody>
              </table>
            </section>
            <section label="H.4.9.2.1.3" status="6" xml:id="sect_H.4.9.2.1.3">
              <title>Behavior</title>
              <para>The SCU uses the N-CREATE Service Element to request the SCP to create a Presentation LUT SOP Instance. The SCU shall initialize Attributes of the SOP Class as specified in section <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
              <para>The SCU shall create the Presentation LUT prior to referencing it from the Film Box or the Image Box.</para>
              <para>The Presentation LUT persists in the SCP as long as the Association in which it was created is open or an explicit N-DELETE is issued by the SCU.</para>
              <para>The SCP shall return the status code of the requested SOP Instance creation. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
              <para>The SCP shall use the Grayscale Standard Display Function as specified in <olink targetdoc="PS3.14" targetptr="PS3.14" xrefstyle="select: labelnumber"/> to convert the output of the Presentation LUT to density for printing. If the SCU specifies values for Illumination (2010,015E) and/or Reflected Ambient Light (2010,0160), these values shall be used instead of the default or configured values of the SCP. If these values are not supplied, the SCP shall use its default or configured values. (see <xref linkend="sect_H.4.2.2.1.1" xrefstyle="select: label"/> for suggested defaults).</para>
            </section>
          </section>
          <section label="H.4.9.2.2" status="5" xml:id="sect_H.4.9.2.2">
            <title>N-DELETE</title>
            <para>The N-DELETE Service Element is used to delete the Presentation LUT SOP Instance.</para>
            <section label="H.4.9.2.2.1" status="6" xml:id="sect_H.4.9.2.2.1">
              <title>Status</title>
              <para>There are no specific error codes</para>
            </section>
            <section label="H.4.9.2.2.2" status="6" xml:id="sect_H.4.9.2.2.2">
              <title>Behavior</title>
              <para>The SCU uses the N-DELETE Service Element to request the SCP to delete the Presentation LUT SOP Instance. The SCU shall specify the Presentation LUT SOP Instance UID.</para>
              <para>The SCP shall not delete a Presentation LUT SOP Instance as long as there are outstanding references to it. Otherwise, it shall delete the specified Presentation LUT SOP Instance. The N-DELETE of a Presentation LUT will prevent the SCU from further referencing it. The SCU shall not reference a previously deleted Presentation LUT. The SCP shall return the status code of the requested Presentation LUT SOP Instance deletion. The meaning of success, warning, and failure status codes is defined in <xref linkend="sect_H.2.5" xrefstyle="select: label"/>.</para>
            </section>
          </section>
          <section label="H.4.9.2.4" status="5" xml:id="sect_H.4.9.2.4">
            <title>SOP Class Definition and UID</title>
            <para>The Presentation LUT SOP Class UID is "1.2.840.10008.5.1.1.23".</para>
          </section>
        </section>
      </section>
      <section label="H.4.10" status="3" xml:id="sect_H.4.10">
        <title>Pull Print Request SOP Class(Retired)</title>
        <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-2004.</para>
      </section>
      <section label="H.4.11" status="3" xml:id="sect_H.4.11">
        <title>Printer Configuration Retrieval SOP Class</title>
        <section label="H.4.11.1" status="4" xml:id="sect_H.4.11.1">
          <title>IOD Description</title>
          <para>The Printer Configuration IOD is an abstraction of the hard copy printer and is the basic Information Entity to retrieve key imaging characteristics of the printer</para>
          <para>The Printer Configuration Retrieval SOP Instance is created by the SCP during start-up of the hard copy printer and has a well-known SOP Instance UID.</para>
        </section>
        <section label="H.4.11.2" status="4" xml:id="sect_H.4.11.2">
          <title>DIMSE Service Group</title>
          <para>The DIMSE Services that are applicable to the IOD are shown in <xref linkend="table_H.4.11.2-1" xrefstyle="select: label"/>.</para>
          <table frame="box" label="H.4.11.2-1" rules="all" xml:id="table_H.4.11.2-1">
            <caption>IOD DIMSE Services</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">DIMSE Service Element</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Usage SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>N-GET</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>M/M</para>
                </td>
              </tr>
            </tbody>
          </table>
          <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
          <para>This Section describes the behavior of the DIMSE Service that are specific for this IOD. The general behavior of the DIMSE Services is specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
          <section label="H.4.11.2.2" status="5" xml:id="sect_H.4.11.2.2">
            <title>N-GET</title>
            <para>The N-GET is used to retrieve an instance of the Printer Configuration Retrieval SOP Class.</para>
            <section label="H.4.11.2.2.1" status="6" xml:id="sect_H.4.11.2.2.1">
              <title>Attributes</title>
              <para>The Attributes that are retrieved are shown in <xref linkend="table_H.4-26" xrefstyle="select: label"/>.</para>
              <table frame="box" label="H.4-26" rules="all" xml:id="table_H.4-26">
                <caption>N-GET Attributes</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Attribute Name</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Tag</emphasis>
                      </para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para>
                        <emphasis role="bold">Usage SCU/SCP</emphasis>
                      </para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>Printer Configuration Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,001E)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>U/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;SOP Classes Supported</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,115A)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Maximum Memory Allocation</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0061)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Memory Bit Depth</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,00A0)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Printing Bit Depth</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,00A1)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Media Installed Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,00A2)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Item Number</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0020,0019)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Medium Type</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Film Size ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Min Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0120)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>Required if Sequence is Present and Min Density is known</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Max Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0130)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Other Media Available Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,00A4)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Medium Type</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Film Size ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Min Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0120)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>Required if Sequence is Present and Min Density is known</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Max Density</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0130)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Supported Image Display Formats Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2000,00A8)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Rows</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0028,0010)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>Required if all Image Boxes in the Display Format have the same number of rows and columns</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Columns</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0028,0011)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/MC</para>
                      <para>Required if all Image Boxes in the Display Format have the same number of rows and columns</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Image Display Format</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0010)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Film Orientation</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0040)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Film Size ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0050)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Printer Resolution ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0052)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Printer Pixel Spacing</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0376)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;&gt;Requested Image Size Flag</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2020,00A0)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Default Printer Resolution ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0054)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Default Magnification Type</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,00A6)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Other Magnification Types Available</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,00A7)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Default Smoothing Type</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,00A8)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Other Smoothing Types Available</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,00A9)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Configuration Information Description</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0152)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Maximum Collated Films</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2010,0154)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Decimate/Crop Result</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2020,00A2)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Manufacturer</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,0070)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Manufacturer Model Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(0008,1090)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para>&gt;Printer Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>(2110,0030)</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para>-/M</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
            </section>
            <section label="H.4.11.2.2.2" status="6" xml:id="sect_H.4.11.2.2.2">
              <title>Behavior</title>
              <para>The SCU uses the N-GET to request the SCP to get a Printer Configuration Retrieval SOP Instance. The SCU shall specify in the N-GET request primitive the UID of the SOP Instance to be retrieved.</para>
              <para>The SCP shall return the values for the specified Attributes of the specified SOP Instance.</para>
              <para>The SCP shall return the status code of the requested SOP Instance retrieval.</para>
              <para>A Failure status code shall indicate that the SCP has not retrieved the SOP Instance.</para>
            </section>
          </section>
        </section>
        <section label="H.4.11.3" status="4" xml:id="sect_H.4.11.3">
          <title>SOP Class Definition and UID</title>
          <para>The Printer Configuration Retrieval SOP Class UID is "1.2.840.10008.5.1.1.16.376".</para>
        </section>
        <section label="H.4.11.4" status="4" xml:id="sect_H.4.11.4">
          <title>Reserved Identifications</title>
          <para>The well-known UID of the Printer Configuration Retrieval SOP Instance is "1.2.840.10008.5.1.1.17.376".</para>
        </section>
      </section>
      <section label="H.4.12" status="3" xml:id="sect_H.4.12">
        <title>Basic Print Image Overlay Box SOP Class(Retired)</title>
        <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-2004.</para>
      </section>
    </section>
    <section label="H.5" status="2" xml:id="sect_H.5">
      <title>Association Negotiation</title>
      <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. The Association negotiation procedure is used to negotiate the supported SOP Classes or Meta SOP Classes. <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> specifies the Association procedures.</para>
      <para>The negotiation procedure is used to negotiate the supported Meta SOP Classes and the supported optional SOP Classes. The SCU and SCP shall support at least one Meta SOP Class UID (e.g., Basic Grayscale Print Management Meta SOP Class) and may support additional optional SOP Classes.</para>
      <para>The Print Management Service Class does not support extended negotiation.</para>
      <para>The SCU shall specify in the A-ASSOCIATE request one Abstract Syntax, in a Presentation Context, for each supported SOP Class or Meta SOP Class.</para>
      <para>If the Association is released or aborted then all the SOP Instances except the Print Job SOP Instance and the Printer SOP Instance are deleted.</para>
      <note>
        <para>Pending Print Jobs will still be printed after the release or abortion of the Association.</para>
      </note>
    </section>
    <section label="H.6" status="2" xml:id="sect_H.6">
      <title>Example of Print Management SCU Session (Informative)</title>
      <section label="H.6.1" status="3" xml:id="sect_H.6.1">
        <title>Simple Example</title>
        <para>Moved to <olink targetdoc="PS3.17" targetptr="PS3.17" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="H.6.2" status="3" xml:id="sect_H.6.2">
        <title>Advanced Example(Retired)</title>
        <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-1998.</para>
      </section>
    </section>
    <section label="H.7" status="2" xml:id="sect_H.7">
      <title>Example of the Pull Print Request Meta SOP Class (Informative)</title>
      <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-2004.</para>
    </section>
    <section label="H.8" status="2" xml:id="sect_H.8">
      <title>Overlay Examples (Informative)</title>
      <para>This section was previously defined in DICOM. It is now retired. See PS 3.4-2004.</para>
    </section>
  </chapter>
  <chapter label="I" status="1" xml:id="chapter_I">
    <title>Media Storage Service Class (Normative)</title>
    <section label="I.1" status="2" xml:id="sect_I.1">
      <title>Overview</title>
      <section label="I.1.1" status="3" xml:id="sect_I.1.1">
        <title>Scope</title>
        <para>The Media Storage Service Class defines an application-level class-of-service that facilitates the simple transfer of images and associated information between DICOM AEs by means of Storage Media. It supports:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>The Interchange of images and a wide range of associated information.</para>
          </listitem>
        </orderedlist>
      </section>
      <section label="I.1.2" status="3" xml:id="sect_I.1.2">
        <title>Service Definition</title>
        <para>DICOM AEs implement a SOP Class of the Media Storage Service Class by supporting one or more roles among the three roles FSC, FSR or FSU. SOP Classes of the Media Storage Service Class are implemented using the Media Storage Operations (M-WRITE, M-READ, M-DELETE, M-INQUIRE FILE-SET and M-INQUIRE FILE). The services provided by these Operations are defined in <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/>.</para>
      </section>
    </section>
    <section label="I.2" status="2" xml:id="sect_I.2">
      <title>Behavior</title>
      <para>This Section discusses the FSC, FSR and FSU behavior for SOP Classes of the Media Storage Service Class.</para>
      <section label="I.2.1" status="3" xml:id="sect_I.2.1">
        <title>Behavior of an FSC</title>
        <para>The FSC shall be able to create a DICOMDIR File containing the Media Storage Directory SOP Class for the created File-set and create zero or more Files belonging to the File-set by invoking M-WRITE Operations with SOP Instances that meet the requirements of the corresponding IOD. It is the responsibility of the FSC to ensure that the M-WRITE results in the creation of a correctly formatted DICOM File. The manner in which this is achieved is beyond the scope of the DICOM Standard.</para>
        <para>The FSC shall support the Media Storage Operation M-INQUIRE FILE-SET and may optionally support the M-INQUIRE FILE.</para>
      </section>
      <section label="I.2.2" status="3" xml:id="sect_I.2.2">
        <title>Behavior of an FSR</title>
        <para>The FSR shall be able to recognize a File-set and the corresponding DICOMDIR containing the Media Storage Directory SOP Class. A valid File-set may contain only a DICOMDIR and no other files. If a File-set contains other files with stored SOP Instance, the FSR shall be capable of invoking M-READ Operations to access the content of the Files of the File-set. The manner in which this is achieved is beyond the scope of the DICOM Standard.</para>
        <para>The FSR shall support the Media Storage Operation M-INQUIRE FILE and may optionally support the M-INQUIRE FILE-SET.</para>
      </section>
      <section label="I.2.3" status="3" xml:id="sect_I.2.3">
        <title>Behavior of an FSU</title>
        <para>The FSU shall be able to recognize a File-set and the corresponding DICOMDIR containing the Media Storage Directory SOP Class. A valid File-set may contain only a DICOMDIR and no other files. If a File-set contains other files with stored SOP Instances, the FSU shall be capable of invoking M-READ Operations to access the content of the Files of the File-set. The manner in which this is achieved is beyond the scope of the DICOM Standard.</para>
        <para>The FSU shall support the Media Storage Operation M-INQUIRE FILE and the M-INQUIRE FILE-SET.</para>
        <para>The FSU shall be able to create one or more new Files belonging to the File-set by invoking M-WRITE Operations with SOP Instances that meet the requirements of the corresponding IOD. It is the responsibility of the FSU to ensure that the M-WRITE results in the creation of a correctly formatted DICOM File. The manner in which this is achieved is beyond the scope of the DICOM Standard. The FSU shall be able to update the contents of the DICOMDIR File by using M-DELETE and or M-WRITE Operations.</para>
      </section>
    </section>
    <section label="I.3" status="2" xml:id="sect_I.3">
      <title>Conformance</title>
      <section label="I.3.1" status="3" xml:id="sect_I.3.1">
        <title>Conformance as an FSC</title>
        <para>An implementation that conforms to one of the SOP Classes of the Media Storage Service Class:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>shall meet the requirements specified in <xref linkend="sect_I.2.1" xrefstyle="select: label"/>;</para>
          </listitem>
          <listitem>
            <para>shall meet the requirements specified in <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/>;</para>
          </listitem>
          <listitem>
            <para>shall perform M-WRITE Operations according to the SOP Class specification identified by the SOP Class UID in the Meta File Information;</para>
          </listitem>
          <listitem>
            <para>shall support the Media Storage Directory SOP Class (stored in the DICOMDIR File).</para>
          </listitem>
        </orderedlist>
      </section>
      <section label="I.3.2" status="3" xml:id="sect_I.3.2">
        <title>Conformance as an FSR</title>
        <para>An implementation that conforms to one of the SOP Classes of the Media Storage Service Class:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>shall meet the requirements specified in <xref linkend="sect_I.2.2" xrefstyle="select: label"/>;</para>
          </listitem>
          <listitem>
            <para>shall meet the requirements specified in <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/>;</para>
          </listitem>
          <listitem>
            <para>shall perform M-READ Operations according to the SOP Class specification identified by the SOP Class UID in the Meta File Information. M-READ of non-supported SOP Classes shall simply result in ignoring such stored Data Sets;</para>
          </listitem>
          <listitem>
            <para>shall read DICOMDIR Files without a Directory Information Module or with a Directory Information Module including Directory Records of a Type not supported by the implementation.</para>
          </listitem>
        </orderedlist>
      </section>
      <section label="I.3.3" status="3" xml:id="sect_I.3.3">
        <title>Conformance as an FSU</title>
        <para>An implementation that conforms to one of the SOP Classes of the Media Storage Service Class:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>shall meet the requirements specified in <xref linkend="sect_I.2.3" xrefstyle="select: label"/>;</para>
          </listitem>
          <listitem>
            <para>shall meet the requirements specified in <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/>;</para>
          </listitem>
          <listitem>
            <para>shall perform M-READ Operations according to the SOP Class specification identified by the SOP Class UID in the Meta File Information. M-READ of unsupported SOP Classes shall simply result in ignoring such stored Data Sets;</para>
          </listitem>
          <listitem>
            <para>shall perform M-WRITE Operations according to the SOP Class specification identified by the SOP Class UID in the Meta File Information;</para>
          </listitem>
          <listitem>
            <para>shall support the Media Storage Directory SOP Class (stored in the DICOMDIR File). Directories containing a Directory Information Module shall be updated by an FSU. Directories containing no Directory Information Module shall not be updated by an FSU;</para>
          </listitem>
          <listitem>
            <para>shall read DICOMDIR Files without a Directory Information Module or with a Directory Information Module including Directory Records of a Type not supported by the implementation.</para>
          </listitem>
        </orderedlist>
      </section>
      <section label="I.3.4" status="3" xml:id="sect_I.3.4">
        <title>Conformance Statement Requirements</title>
        <para>An implementation of the Media Storage Service Class may support one or more Roles as specified in <xref linkend="table_I.3-1" xrefstyle="select: label"/>. In addition, the implementation may conform to one or more of the SOP Classes of the Media Storage Service Class defined in <xref linkend="sect_I.4" xrefstyle="select: label"/>. The Conformance Statement shall be in the format defined by <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <table frame="box" label="I.3-1" rules="all" xml:id="table_I.3-1">
          <caption>Allowed Combinations of Roles</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Roles</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">FSR</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">FSC</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">FSU</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>With a Directory Information Module</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Allowed</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Allowed</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Allowed Directory shall be updated</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>With no Directory Information Module</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Allowed</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Allowed</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Allowed Directory shall not be updated</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>The following aspects shall be documented in the Conformance Statement of any implementation claiming conformance to one of the Media Storage SOP Classes:</para>
        <itemizedlist>
          <listitem>
            <para>the subset of the Basic Directory Information Object Model supported;</para>
          </listitem>
          <listitem>
            <para>When the Directory Information Module is created or updated (Directory Information Module supported), the optional standard keys that may be included in Directory Records shall be documented. Private Keys and Private Records may also be documented;</para>
          </listitem>
        </itemizedlist>
      </section>
      <section label="I.3.5" status="3" xml:id="sect_I.3.5">
        <title>Standard Extended, Specialized, and Private Conformance</title>
        <para>In addition to Standard Media Storage SOP Classes, implementations may support Standard Extended, Specialized and/or Private SOP Classes as defined by <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <para>For all three types of SOP Classes, implementations shall be permitted to conform as an FSC, FSR, both or as an FSU. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
      </section>
    </section>
    <section label="I.4" status="2" xml:id="sect_I.4">
      <title>Media Storage Standard SOP Classes</title>
      <para>The SOP Classes in the Media Storage Service Class identify the Composite and Normalized IODs to be stored. The following Standard SOP Classes are identified in <xref linkend="table_I.4-1" xrefstyle="select: label"/></para>
      <table frame="box" label="I.4-1" rules="all" xml:id="table_I.4-1">
        <caption>Media Storage Standard SOP Classes</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">SOP Class Name</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">SOP Class UID</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">IOD Specification (defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>)</emphasis>
              </para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Media Storage Directory Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.1.3.10</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_F.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Computed Radiography Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital X-Ray Image Storage - For Presentation</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.26" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital X-Ray Image Storage - For Processing</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.26" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital Mammography X-Ray Image Storage - For Presentation</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.27" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital Mammography X-Ray Image Storage - For Processing</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.2.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.27" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital Intra-Oral X-Ray Image Storage - For Presentation</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.28" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Digital Intra-Oral X-Ray Image Storage - For Processing</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.1.3.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.28" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>CT Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced CT Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.2.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.38.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Legacy Converted Enhanced CT Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.2.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.70" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ultrasound Multi-frame Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.3.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.7" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>MR Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced MR Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.4.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.36.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>MR Spectroscopy Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.4.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.36.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced MR Color Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.4.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.36.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Legacy Converted Enhanced MR Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.4.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.71" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ultrasound Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.6.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced US Volume Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.6.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.59" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Secondary Capture Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.7</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.8" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Multi-frame Single Bit Secondary Capture Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.7.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.8.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Multi-frame Grayscale Byte Secondary Capture Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.7.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.8.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Multi-frame Grayscale Word Secondary Capture Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.7.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.8.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Multi-frame True Color Secondary Capture Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.7.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.8.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>12-lead ECG Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>General ECG Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.1.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ambulatory ECG Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.1.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Hemodynamic Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.2.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Cardiac Electrophysiology Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.3.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.7" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Basic Voice Audio Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.4.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>General Audio Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.4.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.10" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Arterial Pulse Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.5.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.8" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Respiratory Waveform Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.9.6.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.34.9" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Grayscale Softcopy Presentation State Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.11.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Color Softcopy Presentation State Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.11.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Pseudo-Color Softcopy Presentation State Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.11.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Blending Softcopy Presentation State Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.11.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>XA/XRF Grayscale Softcopy Presentation State Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.11.5</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray Angiographic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.12.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.14" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced XA Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.12.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.47" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray Radiofluoroscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.12.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.16" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced XRF Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.12.2.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.48" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray 3D Angiographic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.13.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.53" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray 3D Craniofacial Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.13.1.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.54" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Breast Tomosynthesis Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.13.1.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.55" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Intravascular Optical Coherence Tomography Image Storage - For Presentation</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.14.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.66" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Intravascular Optical Coherence Tomography Image Storage - For Processing</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.14.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.66" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Nuclear Medicine Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.20</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Raw Data Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.37" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Spatial Registration Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.39.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Spatial Fiducials Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.40" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Deformable Spatial Registration Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.39.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Segmentation Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.51" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Surface Segmentation Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.66.5</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.57" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Real World Value Mapping Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.67</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.46" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Surface Scan Mesh Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.68.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.68" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Surface Scan Point Cloud Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.68.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.69" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>VL Endoscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Video Endoscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.1.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>VL Microscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Video Microscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.2.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>VL Slide-Coordinates Microscopic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>VL Photographic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Video Photographic Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.4.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.7" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Photography 8 Bit Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.5.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.41" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Photography 16 Bit Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.5.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.42" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Stereometric Relationship Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.5.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.43" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Tomography Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.5.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.52" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>VL Whole Slide Microscopy Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.77.1.6</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.32.8" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Lensometry Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Autorefraction Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Keratometry Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Subjective Refraction Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Visual Acuity Storage Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.5</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Spectacle Prescription Report Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.6</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.9" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Axial Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.7</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Intraocular Lens Calculations Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.78.8</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.60.7" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Macular Grid Thickness and Volume Report</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.79.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.11" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Visual Field Static Perimetry Measurements Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.80.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.65" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ophthalmic Thickness Map Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.81.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.67" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Corneal Topography Map Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.82.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.73" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Basic Text SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.11</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.22</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Comprehensive SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.33</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.3" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Comprehensive 3D SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.34</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.13" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Procedure Log</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.40</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.7" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Mammography CAD SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.50</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Key Object Selection Document</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.59</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.4" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Chest CAD SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.65</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.6" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray Radiation Dose SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.67</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.8" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Colon CAD SR</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.69</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.10" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Implantation Plan SR Document Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.88.70</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.35.12" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Encapsulated PDF Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.104.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.45.1" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Encapsulated CDA Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.104.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.45.2" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Positron Emission Tomography Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.128</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.21" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Enhanced PET Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.130</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.56" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Legacy Converted Enhanced PET Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.128.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.72" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Basic Structured Display Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.131</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.33.5" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.17" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Dose Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.2</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.18" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Structure Set Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.3</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.19" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Beams Treatment Record Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.4</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.29" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Plan Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.5</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.20" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Brachy Treatment Record Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.6</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.30" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Treatment Summary Record Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.7</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.31" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Ion Plan Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.8</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.49" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Ion Beams Treatment Record Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.481.9</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.50" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>RT Beams Delivery Instruction Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.34.7</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.64" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Hanging Protocol Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.38.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.44" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Color Palette Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.39.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.58" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Generic Implant Template Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.43.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.61" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Implant Assembly Template Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.44.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.62" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Implant Template Group Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.45.1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>
                <olink targetdoc="PS3.3" targetptr="sect_A.63" xrefstyle="select: title"/>
              </para>
            </td>
          </tr>
        </tbody>
      </table>
      <note>
        <orderedlist numeration="arabic">
          <listitem>
            <para>Except for the Media Storage Directory SOP Classes, the above listed Media Storage Standard SOP Classes are assigned the same UID Value as the corresponding network communication SOP Classes. This was done to simplify UID assignment. Although these SOP Classes are based on different Operations, the context of their usage should unambiguously distinguish a Media Storage SOP Class from a Network communication SOP Class.</para>
          </listitem>
          <listitem>
            <para>The storage of Normalized Print SOP Instances on media was previously defined in DICOM. They have been retired. See PS 3.4-1998.</para>
          </listitem>
          <listitem>
            <para>The storage of Detached and Standalone SOP Instances on media was previously defined in DICOM. They have been retired. See PS 3.4-2004</para>
          </listitem>
        </orderedlist>
      </note>
      <section label="I.4.1" status="3" xml:id="sect_I.4.1">
        <title>Specialization for Standard SOP Classes</title>
        <section label="I.4.1.1" status="4" xml:id="sect_I.4.1.1">
          <title>Softcopy Presentation State Storage SOP Classes</title>
          <para>See <xref linkend="chapter_N" xrefstyle="template: Annex %n"/>.</para>
        </section>
        <section label="I.4.1.2" status="4" xml:id="sect_I.4.1.2">
          <title>Structured Reporting Storage SOP Classes</title>
          <para>The requirements of <xref linkend="chapter_O" xrefstyle="template: Annex %n"/> apply to the following SOP Classes:</para>
          <itemizedlist>
            <listitem>
              <para>Basic Text SR</para>
            </listitem>
            <listitem>
              <para>Enhanced SR</para>
            </listitem>
            <listitem>
              <para>Comprehensive SR</para>
            </listitem>
            <listitem>
              <para>Comprehensive 3D SR</para>
            </listitem>
            <listitem>
              <para>Mammography CAD SR</para>
            </listitem>
            <listitem>
              <para>Chest CAD SR</para>
            </listitem>
            <listitem>
              <para>Procedure Log</para>
            </listitem>
            <listitem>
              <para>X-Ray Radiation Dose SR</para>
            </listitem>
            <listitem>
              <para>Spectacle Prescription Report</para>
            </listitem>
            <listitem>
              <para>Colon CAD SR</para>
            </listitem>
            <listitem>
              <para>Macular Grid Thickness and Volume Report</para>
            </listitem>
            <listitem>
              <para>Implantation Plan SR Document</para>
            </listitem>
          </itemizedlist>
          <para><xref linkend="chapter_O" xrefstyle="template: Annex %n"/> requirements do not apply to the Key Object Selection Document SOP Class.</para>
        </section>
      </section>
    </section>
    <section label="I.5" status="2" xml:id="sect_I.5">
      <title>Retired Standard SOP Classes</title>
      <para>The SOP Classes in <xref linkend="table_I.5-1" xrefstyle="select: label"/> were defined in previous versions of the DICOM Standard. They are now retired and have been replaced by new standard SOP Classes shown in <xref linkend="table_I.4-1" xrefstyle="select: label"/>.</para>
      <note>
        <para>Usage of the retired SOP Classes is permitted by DICOM. However, new implementations are strongly encouraged to implement the newer SOP Classes.</para>
      </note>
      <table frame="box" label="I.5-1" rules="all" xml:id="table_I.5-1">
        <caption>Retired Standard SOP Classes</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">SOP Class Name</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">SOP Class UID</emphasis>
              </para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Nuclear Medicine Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.5</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ultrasound Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.6</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>Ultrasound Multi-frame Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.3</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>X-Ray Angiographic Bi-plane Image Storage</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>1.2.840.10008.5.1.4.1.1.12.3</para>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </chapter>
  <chapter label="J" status="1" xml:id="chapter_J">
    <title>Storage Commitment Service Class (Normative)</title>
    <section label="J.1" status="2" xml:id="sect_J.1">
      <title>Overview</title>
      <section label="J.1.1" status="3" xml:id="sect_J.1.1">
        <title>Scope</title>
        <para>The mechanism currently defined in DICOM for network based storage of SOP Instances, the Storage Service Class, allows a Service Class User (SCU) to transmit images and other Composite SOP Instances to a Service Class Provider (SCP). However, the Storage Service Class does not specify that the SCP explicitly take responsibility for the safekeeping of data into account. That is, there is no commitment that the SCP will do more than accept the transmitted SOP Instances. In order to have medical image management in addition to medical image communication, there is a need for a Service Class within DICOM that ensures that there is an explicitly defined commitment to store the SOP Instances.</para>
        <para>The Storage Commitment Service Class defines an application-level class-of-service that facilitates this commitment to storage. The Storage Commitment Service Class enables an Application Entity (AE) acting as an SCU to request another Application Entity (AE) acting as an SCP to make the commitment for the safekeeping of the SOP Instances (i.e., that the SOP Instances will be kept for an implementation specific period of time and can be retrieved). The AE where such SOP Instances can later be retrieved may be the SCP where storage commitment was accepted or it may be distinct from that SCP.</para>
        <para>The SCP implementation defines how it provides its commitment to storage. Certain SCPs may commit to permanently store the SOP Instances (e.g., an archive system) while other SCPs may commit to provide storage of the SOP Instances for a limited amount of time. The SCP is required to document in its Conformance Statement the nature of its commitment to storage (e.g., duration of storage, retrieve capabilities and latency, capacity).</para>
        <para>The possession of a link to access pixel data shall not be sufficient for the SCP to commit to storage. A copy of the entire pixel data is required.</para>
        <note>
          <para>This situation may arise in the context of a JPIP Referenced Pixel Data Transfer Syntax.</para>
        </note>
        <para>Once the SCP has accepted the commitment to store the SOP Instances, the SCU may decide that it is appropriate to delete its copies of the SOP Instances. These types of policies are outside the scope of this Standard, however, the SCU is required to document these policies in its Conformance Statement.</para>
      </section>
      <section label="J.1.2" status="3" xml:id="sect_J.1.2">
        <title>Models Overview</title>
        <para>The request for storage commitment can be accomplished using the Push Model.</para>
        <para>The Push model expects an SCU to transmit SOP Instances to an SCP using an appropriate mechanism outside the scope of this Service Class. Storage commitment is then initiated by transmitting a Storage Commitment Request containing references to a set of one or more SOP Instances. Success or failure of storage commitment is subsequently indicated via a notification from the SCP to the SCU.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>A Pull Model was defined in earlier versions, but has been retired. See PS 3.4-2001.</para>
            </listitem>
            <listitem>
              <para>As indicated, the mechanisms used to transfer SOP Instances from an SCU to an SCP are outside the scope of this Service Class. However, typical mechanisms are found in the Storage Service Class, the Query/Retrieve Service Class, or Media Exchange.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
    </section>
    <section label="J.2" status="2" xml:id="sect_J.2">
      <title>Conformance Overview</title>
      <para>The application-level services addressed by this Service Class are specified via the Storage Commitment Push Model SOP Class.:</para>
      <para>An SCP implementation of the Storage Commitment Service Class shall support the Storage Commitment Push Model SOP Class.</para>
      <para>The SOP Class specifies Attributes, operations, notifications, and behavior applicable to the SOP Class. The conformance requirements shall be specified in terms of the Service Class Provider (SCP) and the Service Class User (SCU).</para>
      <para>The Storage Commitment Service Class uses the Storage Commitment IOD as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> and the N-ACTION and N-EVENT-REPORT DIMSE Services specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      <section label="J.2.1" status="3" xml:id="sect_J.2.1">
        <title>Association Negotiation</title>
        <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. The Association negotiation rules as specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> shall be used to negotiate the supported SOP Classes.</para>
        <para>Support for the SCP/SCU role selection negotiation is mandatory. The SOP Class Extended Negotiation shall not be supported.</para>
        <para>An SCP implementation of the Storage Commitment Service Class shall support the Storage Commitment Push Model SOP Class.</para>
      </section>
    </section>
    <section label="J.3" status="2" xml:id="sect_J.3">
      <title>Storage Commitment Push Model SOP Class</title>
      <para>The Storage Commitment Push Model SOP Class is intended for those Application Entities requiring storage commitment where the SCU determines the time at which the SOP Instances are transmitted. The SCU transmits the SOP Instances to the SCP using an appropriate mechanism. The request for storage commitment is transmitted to the SCP together with a list of references to one or more SOP Instances. Success or failure of storage commitment is subsequently indicated by a notification from the SCP to the SCU.</para>
      <section label="J.3.1" status="3" xml:id="sect_J.3.1">
        <title>DIMSE Service Group</title>
        <para>The DIMSE-N Services applicable to the Storage Commitment Push Model SOP Class are shown in <xref linkend="table_J.3.1-1" xrefstyle="select: label"/>.</para>
        <table frame="box" label="J.3.1-1" rules="all" xml:id="table_J.3.1-1">
          <caption>IOD DIMSE Services</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">DIMSE Service Element</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Usage SCU/SCP</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-EVENT-REPORT</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>The DIMSE-N Services and Protocol are specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="J.3.2" status="3" xml:id="sect_J.3.2">
        <title>Operations</title>
        <para>The DICOM AEs that claim conformance to this SOP Class as an SCU shall invoke the N-ACTION operation. The DICOM AEs that claim conformance to this SOP Class as an SCP shall support the N-ACTION operation.</para>
        <section label="J.3.2.1" status="4" xml:id="sect_J.3.2.1">
          <title>Storage Commitment Request</title>
          <para>The Storage Commitment Request operation allows an SCU to request an SCP to commit to the safekeeping of a set of SOP Instances. This operation shall be invoked through the N-ACTION primitive.</para>
          <section label="J.3.2.1.1" status="5" xml:id="sect_J.3.2.1.1">
            <title>Action Information</title>
            <para>The DICOM AEs that claim conformance to this SOP Class as an SCU and/or an SCP shall support the Action Types and Action Information as specified in <xref linkend="table_J.3-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="J.3-1" rules="all" xml:id="table_J.3-1">
              <caption>Storage Commitment Request - Action Information</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Action Type Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Action Type ID</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Request Storage Commitment</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Transaction UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1195)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Storage Media File-Set ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0130)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_J.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Storage Media File-Set UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_J.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced SOP Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1199)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>See <xref linkend="sect_J.3.2.1.1.3" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Storage Media File-Set ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0130)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_J.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Storage Media File-Set UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_J.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <section label="J.3.2.1.1.1" status="6" xml:id="sect_J.3.2.1.1.1">
              <title>Storage Media File Set ID Attributes</title>
              <para>If present, the Storage Media File-Set ID (0088,0130) and Storage Media File-Set UID (0088,0140) shall appear either outside the Referenced SOP Sequence (0008,1199), or within one or more Items within that sequence, but not both. If they appear outside of the sequence, then all of the SOP Instances within the sequence shall be retrievable from the specified Storage Media File-Set. If they appear within an Item of that sequence, then the SOP Instance referenced to by that Item shall be retrievable from the specified Storage Media File-Set.</para>
            </section>
            <section label="J.3.2.1.1.2" status="6" xml:id="sect_J.3.2.1.1.2">
              <title>Referenced Performed Procedure Step Sequence Attribute (Retired)</title>
              <para>Referenced Performed Procedure Step Sequence (0008,1111) was included in earlier versions, but its use here has been retired. See PS 3.4-2001, in which the Attribute was formerly known as Referenced Study Component Sequence.</para>
              <note>
                <para>This section formerly specified a means of referencing a Study Component that has been completed and semantics that the list of images in the commitment request represented a complete set. This section has been retired since the Modality Performed Procedure Step SOP Classes provide the same facility in a more appropriate service.</para>
              </note>
            </section>
            <section label="J.3.2.1.1.3" status="6" xml:id="sect_J.3.2.1.1.3">
              <title>SOP Instance Reference</title>
              <para>A SOP Instance may be referenced only once within the Referenced SOP Sequence (0008,1199).</para>
            </section>
          </section>
          <section label="J.3.2.1.2" status="5" xml:id="sect_J.3.2.1.2">
            <title>Service Class User Behavior</title>
            <para>The SCU shall use the N-ACTION primitive to request the SCP the safekeeping of a set of SOP Instances. The SOP Instances are referenced in the Action Information as specified in <xref linkend="table_J.3-1" xrefstyle="select: label"/>. The Action Type ID shall be set to 1 specifying the request for storage commitment.</para>
            <para>The SCU shall supply the Transaction UID Attribute (0008,1195) to uniquely identify each Storage Commitment Request. The value of the Transaction UID Attribute will be included by the SCP in the Storage Commitment Result (see <xref linkend="sect_J.3.3.1" xrefstyle="select: label"/>). Use of the Transaction UID Attribute allows the SCU to match requests and results that may occur over the same or different Associations.</para>
            <para>The N-ACTION primitive shall contain the well-known Storage Commitment Push Model SOP Instance UID (defined in <xref linkend="sect_J.3.5" xrefstyle="select: label"/>) in its Requested SOP Instance UID parameter.</para>
            <note>
              <para>In the usage described here, there is no explicit creation of a SOP Instance upon which an N-ACTION primitive may operate. Instead, the N-ACTION primitive operates upon a constant well-known SOP Instance. This SOP Instance is conceptually created during start up of each Storage Commitment Service Class SCP Application.</para>
            </note>
            <para>Upon receipt of a successful N-ACTION Response Status Code from the SCP, the SCU now knows that the SCP has received the N-ACTION request. Upon receipt of any other N-ACTION Response Status Code from the SCP, the SCU now knows that the SCP will not process the request and therefore will not commit to the storage of the SOP Instances referenced by the Storage Commitment Request. The actions taken by the SCU upon receiving the status is beyond the scope of this Standard. Upon receipt of a failure status, the Transaction UID is no longer active and shall not be reused for other transactions.</para>
            <para>At any time after receipt of the N-ACTION-Response, the SCU may release the association on which it sent the N-ACTION-Request.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>Failure of storage commitment will be signaled via the N-EVENT-REPORT primitive.</para>
                </listitem>
                <listitem>
                  <para>In situations where the SOP Instance(s) are transferred via Media Interchange, the Storage Commitment Request may fail because the piece of Media containing the referenced SOP Instance(s) may not yet have been read. Attributes (0088,0130) File-Set ID and (0088,0140) File-Set UID may or may not be present in the case of Media Interchange. They may be provided to facilitate identification of the media containing the transferred SOP Instance(s) by the Storage Commitment SCP.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
          <section label="J.3.2.1.3" status="5" xml:id="sect_J.3.2.1.3">
            <title>Service Class Provider Behavior</title>
            <para>Upon receipt of the N-ACTION request, the SCP shall return, via the N-ACTION response primitive, the N-ACTION Response Status Code applicable to the associated request. A success status conveys that the SCP has successfully received the request. A failure status conveys that the SCP is not processing the request.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>Failure of storage commitment will be signaled via the N-EVENT-REPORT primitive.</para>
                </listitem>
                <listitem>
                  <para>When a Storage Commitment Request is received by an SCP it may immediately assess the list of references for which Storage Commitment is requested and return an N-EVENT-REPORT. In situations where the SOP Instance(s) are transferred via Media Interchange, the N-EVENT-REPORT may fail because the piece of Media containing the referenced SOP Instance(s) may not yet have been read. Attributes (0088,0130) File-Set ID and (0088,0140) File-Set UID may or may not be present in the case of Media Interchange. They may be used to facilitate identification of the media containing the transferred SOP Instance(s) by the Storage Commitment SCP.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
          <section label="J.3.2.1.4" status="5" xml:id="sect_J.3.2.1.4">
            <title>Status Codes</title>
            <para>No Service Class specific status values are defined for the N-ACTION Service. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for general response status codes.</para>
          </section>
        </section>
      </section>
      <section label="J.3.3" status="3" xml:id="sect_J.3.3">
        <title>Notifications</title>
        <para>The DICOM AEs that claim conformance to this SOP Class as an SCP shall invoke the N-EVENT-REPORT request. The DICOM AEs that claim conformance to this SOP Class as an SCU shall be capable of receiving the N-EVENT-REPORT request.</para>
        <section label="J.3.3.1" status="4" xml:id="sect_J.3.3.1">
          <title>Storage Commitment Result</title>
          <para>The Storage Commitment Result notification allows an SCP to inform the SCU whether or not it has accepted storage commitment responsibility for the SOP Instances referenced by a Storage Commitment Request. This notification is also used to convey error information (i.e., storage commitment could not be achieved for one or more of the referenced SOP Instances). This notification shall be invoked through the N-EVENT-REPORT primitive.</para>
          <section label="J.3.3.1.1" status="5" xml:id="sect_J.3.3.1.1">
            <title>Event Information</title>
            <para>The DICOM AEs that claim conformance to this SOP Class as an SCU and/or an SCP shall support the Event Types and Event Information as specified in <xref linkend="table_J.3-2" xrefstyle="select: label"/>.</para>
            <table frame="box" label="J.3-2" rules="all" xml:id="table_J.3-2">
              <caption>Storage Commitment Result - Event Information</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Event Type Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Event Type ID</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Storage Commitment Request Successful</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Transaction UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1195)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Retrieve AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0054)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Storage Media File-Set ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0130)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.2" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Storage Media File-Set UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.2" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced SOP Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1199)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Retrieve AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0054)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Storage Media File-Set ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0130)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.2" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Storage Media File-Set UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.2" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Storage Commitment Request Complete - Failures Exist</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Transaction UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1195)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Retrieve AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0054)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Storage Media File-Set ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0130)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.2" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Storage Media File-Set UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.2" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced SOP Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1199)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1C</para>
                    <para>This Attribute shall be provided if storage commitment for one or more SOP Instances has been successful</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Retrieve AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0054)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Storage Media File-Set ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0130)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.2" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Storage Media File-Set UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                    <para>See <xref linkend="sect_J.3.3.1.1.2" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failed SOP Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1198)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Failure Reason</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1197)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <section label="J.3.3.1.1.1" status="6" xml:id="sect_J.3.3.1.1.1">
              <title>Retrieve AE Title Attribute</title>
              <para>If present, the Retrieve AE Title (0008,0054) shall appear either outside the Referenced SOP Sequence (0008,1199), or within one or more Items within that sequence, but not both. If they appear outside of the sequence, then all of the SOP Instances within the sequence shall be retrievable from the specified Retrieve AE Title. If they appear within an Item of that sequence, then the SOP Instance referenced to by that Item shall be retrievable from the specified Retrieve AE Title.</para>
            </section>
            <section label="J.3.3.1.1.2" status="6" xml:id="sect_J.3.3.1.1.2">
              <title>Storage Media File Set ID Attributes</title>
              <para>If present, the Storage Media File-Set ID (0088,0130) and Storage Media File-Set UID (0088,0140) shall appear either outside the Referenced SOP Sequence (0008,1199), or within one or more Items within that sequence, but not both. If they appear outside of the sequence, then all of the SOP Instances within the sequence shall be retrievable from the specified Storage Media File-Set. If they appear within an Item of that sequence, then the SOP Instance referenced to by that Item shall be retrievable from the specified Storage Media File-Set.</para>
            </section>
          </section>
          <section label="J.3.3.1.2" status="5" xml:id="sect_J.3.3.1.2">
            <title>Service Class Provider Behavior</title>
            <para>If the SCP determines that it has successfully completed storage commitment for all the SOP Instances referenced by a Storage Commitment Request, the SCP shall issue an N-EVENT-REPORT with the Event Type ID set to 1 (storage commitment request successful). This event shall include references to the successfully stored SOP Instances. The SCP shall store the referenced SOP Instances in accordance with Level 2 as defined in the Storage Service Class (i.e., all Attributes, including Private Attributes). The Storage Service Class is defined in <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>. After the N-EVENT-REPORT has been sent, the Transaction UID is no longer active and shall not be reused for other transactions.</para>
            <para>If it is determined that storage commitment could not be achieved for one or more referenced SOP Instances, the SCP shall issue an N-EVENT-REPORT with the Event Type ID set to 2 (storage commitment request complete - failure exists) conveying that the SCP does not commit to store all SOP Instances. This event shall include references to the failed SOP Instances together with references to those SOP Instances that have been successfully stored. For each failed SOP Instance the reason for failure shall be described by the Failure Reason Attribute. After the N-EVENT-REPORT has been sent, the Transaction UID is no longer active and shall not be reused for other transactions.</para>
            <para>The complete set of SOP Instances referenced by the Referenced SOP Sequence (0008,1199) Attribute, in the initiating N-ACTION, shall be present in both Event Types either in the Referenced SOP Sequence (0008,1199) or in the Failed SOP Sequence (0008,1198).</para>
            <para>The N-EVENT-REPORT shall include the same Transaction UID Attribute (0008,1195) value as contained in the initiating N-ACTION.</para>
            <para>An SCP shall be capable of issuing the N-EVENT-REPORT on a different association than the one on which the N-ACTION operation was performed.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>The SCP may attempt to issue the N-EVENT-REPORT on the same Association, but this operation may fail because the SCU is free to release at any time the Association on which it sent the N-ACTION-Request. As DICOM defaults the association requestor to the SCU role, the SCP (i.e., the association requester) negotiates an SCP role using the SCU/SCP role negotiation (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>).</para>
                </listitem>
                <listitem>
                  <para>When responding on a different Association, the SCP must use the same AE Title as it used on the original Association, because the DICOM Standard defines a Service between two peer applications, each identified by an AE Title. Thus the SCP should be consistently identified for all Associations in the particular instance of the Storage Commitment Service.</para>
                </listitem>
                <listitem>
                  <para>The optional Attributes Retrieve AE Title (0008,0054), Storage Media File-Set ID (0088,0130) and Storage Media File-Set UID (0088,0140) within the Event Information allows an SCP to indicate the location where it has stored SOP Instances for safekeeping. For example, the SCP could relay SOP Instances to a third Application Entity using this Service Class, in which case it can use the Retrieve AE Title Attribute to indicate the real location of the data. Another example is if the SCP stores data on media, it can indicate this using the Storage Media File-Set ID and UID Attributes.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
          <section label="J.3.3.1.3" status="5" xml:id="sect_J.3.3.1.3">
            <title>Service Class User Behavior</title>
            <para>An SCU shall be capable of receiving an N-EVENT-REPORT on a different association than the one on which the N-ACTION operation was performed.</para>
            <note>
              <para>To receive this N-EVENT-REPORT, the SCU accepts an association where the SCP role is proposed by the Storage Commitment SCP acting as an association requestor.</para>
            </note>
            <para>The SCU shall return, via the N-EVENT-REPORT response primitive, the N-EVENT-REPORT Response Status Code applicable to the associated request. The actions taken by the SCU upon receiving the N-EVENT-REPORT are beyond the scope of this Standard but are stated in its Conformance Statement.</para>
            <note>
              <para>In the case where the SCP indicates that it cannot achieve storage commitment for some SOP Instances, the SCU might, for example, re-send the failed SOP Instances to the SCP (via the Storage Service Class) and then re-transmit the N-ACTION request. However, this behavior is beyond the scope of this Standard.</para>
            </note>
          </section>
          <section label="J.3.3.1.4" status="5" xml:id="sect_J.3.3.1.4">
            <title>Status Codes</title>
            <para>No Service Class specific status values are defined for the N-EVENT-REPORT Service. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for general response status codes.</para>
            <note>
              <para>This Section refers to status codes returned by the N-EVENT-REPORT response primitive. The Failure Reason Attribute returned in the Storage Commitment Result - Event Information (see <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>) are described in the Storage Commitment IOD.</para>
            </note>
          </section>
        </section>
      </section>
      <section label="J.3.4" status="3" xml:id="sect_J.3.4">
        <title>Storage Commitment Push Model SOP Class UID</title>
        <para>The Storage Commitment Push Model SOP Class shall be uniquely identified by the Storage Commitment Push Model SOP Class UID, which shall have the value "1.2.840.10008.1.20.1".</para>
      </section>
      <section label="J.3.5" status="3" xml:id="sect_J.3.5">
        <title>Storage Commitment Push Model Reserved Identification</title>
        <para>The well-known UID of the Storage Commitment Push Model SOP Instance shall have the value "1.2.840.10008.1.20.1.1".</para>
      </section>
      <section label="J.3.6" status="3" xml:id="sect_J.3.6">
        <title>Conformance Requirements</title>
        <para>Implementations claiming Standard SOP Class Conformance to the Storage Commitment Push Model SOP Class shall be conformant as described in this Section and shall include within their Conformance Statement information as described in this Section and sub-Sections.</para>
        <para>An implementation may claim conformance to this SOP Class as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <section label="J.3.6.1" status="4" xml:id="sect_J.3.6.1">
          <title>SCU Conformance</title>
          <para>An implementation that is conformant to this SOP Class as an SCU shall meet conformance requirements for</para>
          <itemizedlist>
            <listitem>
              <para>the operations and actions that it invokes</para>
            </listitem>
            <listitem>
              <para>the notifications that it receives.</para>
            </listitem>
          </itemizedlist>
          <para>The mechanisms used by the SCU to transfer SOP Instances to the SCP shall be documented.</para>
          <section label="J.3.6.1.1" status="5" xml:id="sect_J.3.6.1.1">
            <title>Operations</title>
            <para>The SCU shall document in the SCU Operations Statement the actions and behavior that cause the SCU to generate an N-ACTION primitive (Storage Commitment Request).</para>
            <para>The SCU shall specify the SOP Class UIDs for which it may request storage commitment.</para>
            <para>The SCU shall specify the duration of applicability of the Transaction UID. This may be specified as a time limit or a policy that defines the end of a transaction (e.g., how long will the SCU wait for a N-EVENT-REPORT).</para>
            <para>The SCU shall specify if it supports the optional Storage Media File-Set ID &amp; UID Attributes in the N-ACTION. If these Attributes are supported, the SCU shall also specify which Storage Media Application Profiles are supported.</para>
            <para>The SCU Operations Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/></para>
          </section>
          <section label="J.3.6.1.2" status="5" xml:id="sect_J.3.6.1.2">
            <title>Notifications.</title>
            <para>The SCU shall document in the SCU Notifications Statement the behavior and actions taken by the SCU upon receiving an N-EVENT-REPORT primitive (Storage Commitment Result).</para>
            <para>The SCU shall specify the behavior and actions performed when a success status is received (i.e., if and when local SOP Instances copies are deleted).</para>
            <para>The SCU shall specify the behavior and actions performed when a failure status is received (i.e., recovery mechanisms, etc.).</para>
            <para>The SCU Notifications Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/></para>
          </section>
        </section>
        <section label="J.3.6.2" status="4" xml:id="sect_J.3.6.2">
          <title>SCP Conformance.</title>
          <para>An implementation that is conformant to this SOP Class as an SCP shall meet conformance requirements for</para>
          <itemizedlist>
            <listitem>
              <para>the operations and actions that it performs</para>
            </listitem>
            <listitem>
              <para>the notifications that it generates.</para>
            </listitem>
          </itemizedlist>
          <section label="J.3.6.2.1" status="5" xml:id="sect_J.3.6.2.1">
            <title>Operations</title>
            <para>The SCP shall document in the SCP Operations Statement the behavior and actions of the SCP upon receiving the N-ACTION primitive (Storage Commitment Request).</para>
            <para>The SCP shall specify parameters indicating the level of storage commitment, such as:</para>
            <itemizedlist>
              <listitem>
                <para>under what conditions the SCP would delete SOP Instances</para>
              </listitem>
              <listitem>
                <para>persistence of storage</para>
              </listitem>
              <listitem>
                <para>capacity</para>
              </listitem>
              <listitem>
                <para>volatility</para>
              </listitem>
              <listitem>
                <para>other pertinent information</para>
              </listitem>
            </itemizedlist>
            <para>The SCP shall specify the mechanisms and characteristics of retrieval of stored SOP Instances, such as:</para>
            <itemizedlist>
              <listitem>
                <para>supported query/retrieve services</para>
              </listitem>
              <listitem>
                <para>latency</para>
              </listitem>
              <listitem>
                <para>other pertinent information</para>
              </listitem>
            </itemizedlist>
            <para>The SCP shall specify if it supports the optional Storage Media File-Set ID &amp; UID Attributes in the N-ACTION. If these Attributes are supported, the SCP shall also specify which Storage Media Application Profiles are supported.</para>
            <para>The SCP Operations Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/></para>
          </section>
          <section label="J.3.6.2.2" status="5" xml:id="sect_J.3.6.2.2">
            <title>Notifications</title>
            <para>The SCP shall document in the SCP Notifications Statement the behavior and actions that cause the SCP to generate an N-EVENT-REPORT primitive (Storage Commitment Result).</para>
            <para>The SCP shall specify if it supports the optional Storage Media File-Set ID &amp; UID Attributes in the N-EVENT-REPORT and describe the policies for how the Media is used. The SCP shall also specify which Storage Media Application Profiles are supported.</para>
            <para>The SCP shall specify if it supports the optional Retrieve AE Title (0008,0054) Attribute in the N-EVENT-REPORT and describe the policies for how it is used.</para>
            <para>The SCP Notifications Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/></para>
          </section>
        </section>
      </section>
    </section>
    <section label="J.4" status="2" xml:id="sect_J.4">
      <title>Storage Commitment Pull Model SOP Class(Retired)</title>
      <para>A Pull Model was defined in earlier versions, but has been retired. See PS 3.4-2001.</para>
    </section>
    <section label="J.5" status="2" xml:id="sect_J.5">
      <title>Storage Commitment Examples (Informative)</title>
      <para>Moved to <olink targetdoc="PS3.17" targetptr="PS3.17" xrefstyle="select: labelnumber"/></para>
    </section>
  </chapter>
  <chapter label="K" status="1" xml:id="chapter_K">
    <title>Basic Worklist Management Service (Normative)</title>
    <section label="K.1" status="2" xml:id="sect_K.1">
      <title>Overview</title>
      <section label="K.1.1" status="3" xml:id="sect_K.1.1">
        <title>Scope</title>
        <para>The Basic Worklist Management Service Class defines an application-level class-of-service that facilitates the access to worklists.</para>
        <para>A worklist is the structure to present information related to a particular set of tasks. It specifies particular details for each task. The information supports the selection of the task to be performed first, and supports the performance of that task.</para>
        <note>
          <para>One example is the worklist used to present information about scheduled imaging procedures at an imaging modality and to the operator of that modality. Another example is the worklist presented at a radiological reporting station to indicate which studies have been performed and are waiting to be reported.</para>
        </note>
        <para>This annex defines a service for communicating such worklists. The following are characteristics for this Service Class:</para>
        <itemizedlist>
          <listitem>
            <para>The worklist has to be queried by the Application Entity (AE) associated with the application on which, or by which, the tasks included in the worklist have to be performed. In this query, a number of search keys can be used, defined for each particular worklist SOP class.</para>
          </listitem>
          <listitem>
            <para>The worklist consists of worklist items, each item is related to one task. A worklist item contains Attributes from different objects related to the task.</para>
          </listitem>
        </itemizedlist>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>This Service Class is not intended to provide a comprehensive generalized database query mechanism such as SQL. Instead, the Basic Worklist Management Service Class is focused towards basic queries using a small set of common Key Attributes used as Matching Keys or Return Attributes. Basic Worklist Information Models are not hierarchical.</para>
            </listitem>
            <listitem>
              <para>Basic Worklist Information Models always consist of one query level, which may consist of one or more entities. There is no distinction between hierarchical and relational use of C-Find in the Basic Worklist Management Service Class.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
      <section label="K.1.2" status="3" xml:id="sect_K.1.2">
        <title>Conventions</title>
        <para>Key Attributes serve two purposes, they may be used as : Matching Key Attributes and Return Key Attributes. Matching Key Attributes may be used for matching (criteria to be used in the C-FIND request to determine whether an entity matches the query). Return Key Attributes may be used to specify desired return Attributes (what elements in addition to the Matching Key Attributes have to be returned in the C-FIND response).</para>
        <note>
          <para>Matching Keys are typically used in an SQL 'where' clause. Return Keys are typically used in an SQL 'select' clause to convey the Attribute values.</para>
        </note>
        <para>Matching Key Attributes may be of Type "required" (R) or "optional" (O). Return Key Attributes may be of Type 1, 1C, 2, 2C, 3 as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="K.1.3" status="3" xml:id="sect_K.1.3">
        <title>Worklist Information Model</title>
        <para>In order to serve as a Service Class Provider (SCP) of the Basic Worklist Service Class, a DICOM Application Entity (AE) possesses information about the Attributes of a number of managed worklist entries. This information is organized into Worklist Information Models.</para>
        <para>Worklists are implemented against well defined Information Models. A specific SOP Class of the Basic Worklist Service Class consists of an informative Overview, an Information Model Definition and a DIMSE-C Service Group. In this Service Class, the Information Model plays a role similar to an Information Object Definition (IOD) of most other DICOM Service Classes.</para>
      </section>
      <section label="K.1.4" status="3" xml:id="sect_K.1.4">
        <title>Service Definition</title>
        <para>Two peer DICOM AEs implement a SOP Class of the Basic Worklist Service Class with one serving in the SCU role and one serving in the SCP role. SOP Classes of the Basic Worklist Service Class are implemented using the DIMSE-C C-FIND service as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <para>Both a baseline and extended behavior are defined for the DIMSE-C C-FIND. Baseline behavior specifies a minimum level of conformance for all implementations to facilitate interoperability. Extended behavior enhances the baseline behavior to provide additional features that may be negotiated independently at Association establishment time.</para>
        <para>The following description of the DIMSE-C C-FIND service provides a brief overview of the SCU/SCP semantics.</para>
        <para>A C-FIND service conveys the following semantics:</para>
        <itemizedlist>
          <listitem>
            <para>The SCU requests that the SCP perform a match for the Matching Keys and return values for the Return Keys that have been specified in the Identifier of the request, against the information that the SCP possesses, to the objects specified in the SOP Class.</para>
            <note>
              <para>In this Annex, the term "Identifier" refers to the Identifier service parameter of the C-FIND service as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            </note>
          </listitem>
          <listitem>
            <para>The SCP generates a C-FIND response for each match with an Identifier containing the values of all Matching Key Attributes and all known Return Key Attributes requested. Each response contains one worklist item. All such responses will contain a status of Pending. A status of Pending indicates that the process of matching is not complete.</para>
          </listitem>
          <listitem>
            <para>When the process of matching is complete a C-FIND response is sent with a status of Success and no Identifier.</para>
          </listitem>
          <listitem>
            <para>A Refused or Failed response to a C-FIND request indicates that the SCP is unable to process the request.</para>
          </listitem>
          <listitem>
            <para>The SCU may cancel the C-FIND service by issuing a C-CANCEL-FIND request at any time during the processing of the C-FIND service. The SCP will interrupt all matching and return a status of Canceled.</para>
            <note>
              <para>The SCU needs to be prepared to receive C-FIND responses sent by the SCP until the SCP finally processed the C-CANCEL-FIND request.</para>
            </note>
          </listitem>
        </itemizedlist>
      </section>
    </section>
    <section label="K.2" status="2" xml:id="sect_K.2">
      <title>Worklist Information Model Definition</title>
      <para>The Worklist Information Model is identified by the SOP Class negotiated at Association establishment time. The SOP Class is composed of both an Information Model and a DIMSE-C Service Group.</para>
      <para>Information Model Definitions for standard SOP Classes of the Worklist Service Class are defined in this Annex. A Worklist Information Model Definition contains:</para>
      <itemizedlist>
        <listitem>
          <para>an Entity-Relationship Model Definition</para>
        </listitem>
        <listitem>
          <para>a Key Attributes Definition;</para>
        </listitem>
      </itemizedlist>
      <section label="K.2.1" status="3" xml:id="sect_K.2.1">
        <title>Entity-Relationship Model Definition</title>
        <para>Basic Worklist Information Models consist of a single level, that includes all Matching Key Attributes and all Return Key Attributes, which may be sent from the SCU to the SCP in the request and whose values are expected to be returned from the SCP to the SCU in each of the responses (or worklist items). The Matching Key Attribute values in the request specify the worklist items that are to be returned in the responses. All Key Attributes (the Matching Key Attributes and the Return Key Attributes) in the request determine which Attribute values are returned in the responses for that worklist.</para>
        <para>A Worklist Item has a one-to-one relationship with the real-world object defining the root for the Basic Worklist Information Model. In addition the worklist item is related to a number of other objects from the real-world model. Each of these real-world objects is represented by a hierarchy of entities organized in an (internal) Entity-Relationship Model.</para>
      </section>
      <section label="K.2.2" status="3" xml:id="sect_K.2.2">
        <title>Attributes Definition</title>
        <para>Attributes are defined for each entity in the internal Entity-Relationship Model. An Identifier in a C-FIND request shall contain values to be matched against the Attributes of the Entities in a Worklist Information Model. For any worklist request, the set of entities for which Attributes are returned, shall be determined by the set of Matching and Return Key Attributes specified in the Identifier.</para>
        <section label="K.2.2.1" status="4" xml:id="sect_K.2.2.1">
          <title>Attribute Types</title>
          <para>All Attributes of entities in a Worklist Information Model shall be specified both as a Matching Key Attribute (either required or optional) and as a Return Key Attribute.</para>
          <section label="K.2.2.1.1" status="5" xml:id="sect_K.2.2.1.1">
            <title>Matching Key Attributes</title>
            <para>The Matching Key Attributes are Keys, which select worklist items to be included in a requested Worklist.</para>
            <section label="K.2.2.1.1.1" status="6" xml:id="sect_K.2.2.1.1.1">
              <title>Required Matching Key Attributes</title>
              <para>A Basic Worklist Management SCP shall support matching based on values of all Required Matching Key Attributes of the C-FIND request. Multiple entities may match a given value for a Required Key.</para>
              <para>If an SCP manages an entity with an unknown Attribute value (i.e., zero length), the unknown value shall fail to match any Matching Key value.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>Even though there is no means to perform matching on such entities, they may be queried as a Return Key Attribute using a C-FIND request with a zero length value (universal match) or by a single wild card (wild card match).</para>
                  </listitem>
                  <listitem>
                    <para>An SCU may choose to supply any subset of Required Matching Key Attributes.</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
            <section label="K.2.2.1.1.2" status="6" xml:id="sect_K.2.2.1.1.2">
              <title>Optional Matching Key Attributes</title>
              <para>In the Worklist Information Model, a set of Attributes may be defined as Optional Matching Key Attributes. Optional Matching Key Attributes contained in the Identifier of a C-FIND request may induce two different types of behavior depending on support for matching by the SCP. If the SCP</para>
              <itemizedlist>
                <listitem>
                  <para>does not support matching on the Optional Matching Key Attribute, then the Optional Matching Key Attribute shall be ignored for matching but shall be processed in the same manner as a Return Key Attribute.</para>
                </listitem>
                <listitem>
                  <para>supports matching of the Optional Matching Key Attribute, then the Optional Matching Key Attribute shall be processed in the same manner as a Required Matching Key.</para>
                </listitem>
              </itemizedlist>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>The Conformance Statement of the SCP lists the Optional Matching Key Attributes that are supported for matching.</para>
                  </listitem>
                  <listitem>
                    <para>An SCU can not expect the SCP to support a match on an Optional Matching Key.</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
          </section>
          <section label="K.2.2.1.2" status="5" xml:id="sect_K.2.2.1.2">
            <title>Return Key Attributes</title>
            <para>The values of Return Key Attributes to be retrieved with the Worklist are specified with zero-length (universal matching) in the C-FIND request. SCPs shall support Return Key Attributes defined by a Worklist Information Model according to the Data Element Type (1, 1C, 2, 2C, 3) as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
            <para>Every Matching Key Attribute shall also be considered as a Return Key Attribute. Therefore the C-FIND response shall contain in addition to the values of the requested Return Key Attributes the values of the requested Matching Key Attributes.</para>
            <note>
              <orderedlist>
                <listitem>
                  <para>The Conformance Statement of the SCP lists the Return Key Attributes of Type 3, which are supported.</para>
                </listitem>
                <listitem>
                  <para>An SCU may choose to supply any subset of Return Key Attributes.</para>
                </listitem>
                <listitem>
                  <para>An SCU can not expect to receive any Type 3 Return Key Attributes.</para>
                </listitem>
                <listitem>
                  <para>Return Key Attributes with VR of SQ may be specified either with zero-length or with the zero-length item in the sequence.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
        </section>
        <section label="K.2.2.2" status="4" xml:id="sect_K.2.2.2">
          <title>Attribute Matching</title>
          <para>The following types of matching, which are defined by the Query/Retrieve Service Class in <xref linkend="chapter_C" xrefstyle="template: Annex %n"/> may be performed on Matching Key Attributes in the Basic Worklist Service Class. Different Matching Key Attributes may be subject for different matching types. The Worklist Information Model defines the type of matching for each Required Matching Key Attribute. The Conformance Statement of the SCP shall define the type of matching for each Optional Matching Key Attribute. The types of matching are:</para>
          <itemizedlist>
            <listitem>
              <para>Single Value Matching</para>
            </listitem>
            <listitem>
              <para>List of UID Matching</para>
            </listitem>
            <listitem>
              <para>Wild Card Matching</para>
            </listitem>
            <listitem>
              <para>Range Matching</para>
            </listitem>
            <listitem>
              <para>Sequence Matching</para>
            </listitem>
          </itemizedlist>
          <para>The following type of matching, which is defined by the Query/Retrieve Service Class in <xref linkend="chapter_C" xrefstyle="template: Annex %n"/> of this Part shall be performed on Return Key Attributes in the Basic Worklist Service Class.</para>
          <itemizedlist>
            <listitem>
              <para>Universal Matching</para>
            </listitem>
          </itemizedlist>
          <para>See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> and subsections for specific rules governing of Matching Key Attribute encoding for and performing of different types of matching.</para>
          <para>The Specific Character Set (0008,0005) Attribute and/or the Timezone Offset From UTC (0008,0201) Attribute may be present in the Identifier but are never matched, i.e., they are not considered Matching Key Attributes. See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> for details.</para>
          <para>Single value matching of Attributes with Person Name Value Representation may be affected by extended negotiation of fuzzy semantic matching of person names.</para>
        </section>
        <section label="K.2.2.3" status="4" xml:id="sect_K.2.2.3">
          <title>Matching Multiple Values</title>
          <para>When matching an Attribute that has a value multiplicity of greater than one, if any of the values match, then all values shall be returned.</para>
        </section>
      </section>
    </section>
    <section label="K.3" status="2" xml:id="sect_K.3">
      <title>Worklist Information Model</title>
      <para>Each Worklist Information Model is associated with one SOP Class. The following Worklist Information Model is defined:</para>
      <itemizedlist>
        <listitem>
          <para>Modality Worklist Information Model</para>
        </listitem>
      </itemizedlist>
    </section>
    <section label="K.4" status="2" xml:id="sect_K.4">
      <title>DIMSE-C Service Group</title>
      <para>One DIMSE-C Service is used in the construction of SOP Classes of the Basic Worklist Management Service Class. The following DIMSE-C operation is used.</para>
      <itemizedlist>
        <listitem>
          <para>C-FIND</para>
        </listitem>
      </itemizedlist>
      <section label="K.4.1" status="3" xml:id="sect_K.4.1">
        <title>C-FIND Operation</title>
        <para>SCPs of some SOP Classes of the Basic Worklist Management Service Class are capable of processing queries using the C-FIND operation as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. The C-FIND operation is the mechanism by which queries are performed. Matches against the keys present in the Identifier are returned in C-FIND responses.</para>
        <section label="K.4.1.1" status="4" xml:id="sect_K.4.1.1">
          <title>C-FIND Service Parameters</title>
          <section label="K.4.1.1.1" status="5" xml:id="sect_K.4.1.1.1">
            <title>SOP Class UID</title>
            <para>The SOP Class UID identifies the Worklist Information Model against which the C-FIND is to be performed. Support for the SOP Class UID is implied by the Abstract Syntax UID of the Presentation Context used by this C-FIND operation.</para>
          </section>
          <section label="K.4.1.1.2" status="5" xml:id="sect_K.4.1.1.2">
            <title>Priority</title>
            <para>The Priority Attribute defines the requested priority of the C-FIND operation with respect to other DIMSE operations being performed by the same SCP.</para>
            <para>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP.</para>
          </section>
          <section label="K.4.1.1.3" status="5" xml:id="sect_K.4.1.1.3">
            <title>Identifier</title>
            <para>Both the C-FIND request and response contain an Identifier encoded as a Data Set (see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
            <section label="K.4.1.1.3.1" status="6" xml:id="sect_K.4.1.1.3.1">
              <title>Request Identifier Structure</title>
              <para>An Identifier in a C-FIND request shall contain</para>
              <itemizedlist>
                <listitem>
                  <para>Key Attributes values to be matched against the values of Attributes specified in that SOP Class.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Request Identifier. It shall not be included otherwise.</para>
                  <note>
                    <para>This means that Specific Character Set (0008,0005) is included if the SCU supports expanded or replacement character sets in the context of this service. It will not be included if expanded or replacement character sets are not supported by the SCU.</para>
                  </note>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Timezone Offset From UTC (0008,0201). This Attribute shall be included if Key Attributes of time are to be interpreted explicitly in the designated local time zone. It shall not be present otherwise, i.e., it shall not be sent with a zero-length value.</para>
                </listitem>
              </itemizedlist>
              <para>The Key Attributes and values allowable for the query shall be defined in the SOP Class definition for the corresponding Worklist Information Model.</para>
            </section>
            <section label="K.4.1.1.3.2" status="6" xml:id="sect_K.4.1.1.3.2">
              <title>Response Identifier Structure</title>
              <para>The C-FIND response shall not contain Attributes that were not in the request or specified in this section.</para>
              <para>An Identifier in a C-FIND response shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Key Attributes with values corresponding to Key Attributes contained in the Identifier of the request (Key Attributes as defined in <xref linkend="sect_K.2.2.1" xrefstyle="select: label"/>.)</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Response Identifier. It shall not be included otherwise. The C-FIND SCP is not required to return responses in the Specific Character Set requested by the SCU if that character set is not supported by the SCP. The SCP may return responses with a different Specific Character Set.</para>
                  <note>
                    <para>This means that Specific Character Set (0008,0005) is included if the SCP supports expanded or replacement character sets in the context of this service. It will not be included if expanded or replacement character sets are not supported by the SCP.</para>
                  </note>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Timezone Offset From UTC (0008,0201). This Attribute shall be included if any Attributes of time in the Response Identifier are to be interpreted explicitly in the designated local time zone. It shall not be present otherwise, i.e., it shall not be sent with a zero-length value.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute HL7 Structured Document Reference Sequence (0040,A390) and its subsidiary Sequence Items. This Attribute shall be included if HL7 Structured Documents are referenced within the Identifier, e.g., in the Pertinent Documents Sequence (0038,0100).</para>
                </listitem>
              </itemizedlist>
            </section>
          </section>
          <section label="K.4.1.1.4" status="5" xml:id="sect_K.4.1.1.4">
            <title>Status</title>
            <para><xref linkend="table_K.4-1" xrefstyle="select: label"/> defines the status code values that might be returned in a C-FIND response. Fields related to status code values are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <table frame="box" label="K.4-1" rules="all" xml:id="table_K.4-1">
              <caption>C-FIND Response Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status Codes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Related Fields</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A700</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Identifier Does Not Match SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A900</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to process</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Cxxx</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancel</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matching terminated due to Cancel request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FE00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>None</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matching is complete - No final Identifier is supplied.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>None</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pending</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matches are continuing - Current Match is supplied and any Optional Keys were supported in the same manner as Required Keys.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Identifier</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matches are continuing - Warning that one or more Optional Keys were not supported for existence for this Identifier.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF01</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Identifier</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <note>
              <para>Status Codes are returned in DIMSE response messages (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>). The code values stated in column "Status Codes" are returned in Status Command Element (0000,0900).</para>
            </note>
          </section>
        </section>
        <section label="K.4.1.2" status="4" xml:id="sect_K.4.1.2">
          <title>C-FIND SCU Behavior</title>
          <para>All C-FIND SCUs shall be capable of generating query requests that meet the requirements of the "Worklist" Search Method (see <xref linkend="sect_K.4.1.3.1" xrefstyle="select: label"/>).</para>
          <para>Required Keys, and Optional Keys associated with the Worklist may be contained in the Identifier.</para>
          <para>An SCU conveys the following semantics using the C-FIND requests and responses:</para>
          <itemizedlist>
            <listitem>
              <para>The SCU requests that the SCP perform a match of all keys specified in the Identifier of the request against the information it possesses of the Worklist specified in the request.</para>
            </listitem>
            <listitem>
              <para>The SCU shall interpret Pending responses to convey the Attributes of a match of an Entity.</para>
            </listitem>
            <listitem>
              <para>The SCU shall interpret a response with a status equal to Success, Failed, Refused or Cancel to convey the end of Pending responses.</para>
            </listitem>
            <listitem>
              <para>The SCU shall interpret a Refused or Failed response to a C-FIND request as an indication that the SCP is unable to process the request.</para>
            </listitem>
            <listitem>
              <para>The SCU may cancel the C-FIND service by issuing a C-FIND-CANCEL request at any time during the processing of the C-FIND. The SCU shall recognize a status of Cancel to indicate that the C-FIND-CANCEL was successful.</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="K.4.1.3" status="4" xml:id="sect_K.4.1.3">
          <title>C-FIND SCP Behavior</title>
          <para>All C-FIND SCPs shall be capable of processing queries that meet the requirements of the "Worklist" Search (see <xref linkend="sect_K.4.1.3.1" xrefstyle="select: label"/>).</para>
          <para>An SCP conveys the following semantics using the C-FIND requests and responses:</para>
          <itemizedlist>
            <listitem>
              <para>The SCP is requested to perform a match of all the keys specified in the Identifier of the request, against the information it possesses. Attribute matching is performed using the key values specified in the Identifier of the C-FIND request as defined in <xref linkend="sect_K.2" xrefstyle="select: label"/>.</para>
            </listitem>
            <listitem>
              <para>The SCP generates a C-FIND response for each match using the "Worklist" Search method. All such responses shall contain an Identifier whose Attributes contain values from a single match. All such responses shall contain a status of Pending.</para>
            </listitem>
            <listitem>
              <para>When all matches have been sent, the SCP generates a C-FIND response that contains a status of Success. A status of Success shall indicate that a response has been sent for each match known to the SCP.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>No ID is contained in a response with a status of Success. For a complete definition, see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
                  </listitem>
                  <listitem>
                    <para>When there are no matches, then no responses with a status of Pending are sent, only a single response with a status of Success.</para>
                  </listitem>
                </orderedlist>
              </note>
            </listitem>
            <listitem>
              <para>The SCP shall generate a response with a status of Refused or Failed if it is unable to process the request. A Refused or Failed response shall contain no Identifier.</para>
            </listitem>
            <listitem>
              <para>If the SCP receives C-FIND-CANCEL indication before it has completed the processing of the matches it shall interrupt the matching process and return a status of Cancel.</para>
            </listitem>
          </itemizedlist>
          <section label="K.4.1.3.1" status="5" xml:id="sect_K.4.1.3.1">
            <title>"Worklist" Search Method</title>
            <para>The following procedure is used to generate matches.</para>
            <para>The key match strings contained in the Identifier of the C-FIND request are matched against the values of the Key Attributes for each worklist entity. For each entity for which the Attributes match all of the specified match strings, construct an Identifier. This Identifier shall contain all of the values of the Attributes for this entity that match those in the C-FIND request. Return a response for each such Identifier. If there are no matching keys, then there are no matches, return a response with a status equal to Success and with no Identifier.</para>
          </section>
        </section>
      </section>
    </section>
    <section label="K.5" status="2" xml:id="sect_K.5">
      <title>Association Negotiation</title>
      <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. The Association negotiation procedure specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> shall be used to negotiate the supported SOP Classes or Meta SOP Classes.</para>
      <para>Support for the SCP/SCU role selection negotiation is optional. The SOP Class Extended Negotiation is optional.</para>
      <section label="K.5.1" status="3" xml:id="sect_K.5.1">
        <title>SOP Class Extended Negotiation</title>
        <para>The SOP Class Extended Negotiation allows, at Association establishment, peer DICOM AEs to exchange application Association information defined by specific SOP Classes. This is achieved by defining the Service-class-application-information field. The Service-class-application-information field is used to define support for fuzzy semantic matching of person names.</para>
        <para>This negotiation is optional. If absent, the default conditions shall be:</para>
        <itemizedlist>
          <listitem>
            <para>literal matching of person names with case sensitivity unspecified</para>
          </listitem>
          <listitem>
            <para>timezone query adjustment unspecified</para>
          </listitem>
        </itemizedlist>
        <para>The Association-requester, for each SOP Class, may use one SOP Class Extended Negotiation Sub-Item. The SOP Class is identified by the corresponding Abstract Syntax Name (as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>) followed by the Service-class-application-information field. This field defines either three sub-fields:</para>
        <itemizedlist>
          <listitem>
            <para>reserved; shall always be 1</para>
          </listitem>
          <listitem>
            <para>reserved; shall always be 1</para>
          </listitem>
          <listitem>
            <para>literal or fuzzy semantic matching of person names by the Association-requester</para>
          </listitem>
        </itemizedlist>
        <para>or four sub-fields:</para>
        <itemizedlist>
          <listitem>
            <para>reserved; shall always be 1</para>
          </listitem>
          <listitem>
            <para>reserved; shall always be 1</para>
          </listitem>
          <listitem>
            <para>literal or fuzzy semantic matching of person names by the Association-requester</para>
          </listitem>
          <listitem>
            <para>timezone query adjustment by the Association-requester</para>
          </listitem>
        </itemizedlist>
        <para>The meaning of fuzzy semantic person name matching and of timezone query adjustment is as defined in <xref linkend="sect_K.2.2.2" xrefstyle="select: label"/> and <xref linkend="sect_C.2.2.2.1" xrefstyle="select: label"/>.</para>
        <para>The Association-acceptor shall return a three byte field (three sub-fields) if offered a three byte field (three sub-fields) by the Association-requester. The Association-acceptor may return either a three byte field (three sub-fields) or a four byte field (three sub-fields) if offered a four byte field (four sub-fields) by the Association-requester. A three byte response to a four byte request means that the missing sub-field shall be treated as 0 values.</para>
        <para>The Association-acceptor, for each sub-field of the SOP Class Extended Negotiation Sub-Item offered, either accepts the Association-requester proposal by returning the same value (1) or turns down the proposal by returning the value (0)..</para>
        <para>If the SOP Class Extended Negotiation Sub-Item is not returned by the Association-acceptor then fuzzy semantic matching of person names is not supported and timezone query adjustment is unspecified over the Association (default condition).</para>
        <para>If the SOP Class Extended Negotiation Sub-Items do not exist in the A-ASSOCIATE indication they shall be omitted in the A-ASSOCIATE response.</para>
        <section label="K.5.1.1" status="4" xml:id="sect_K.5.1.1">
          <title>SOP Class Extended Negotiation Sub-Item Structure (A-ASSOCIATE-RQ)</title>
          <para>The SOP Class Extended Negotiation Sub-Item consists of a sequence of mandatory fields as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. This field shall be three or four bytes in length.</para>
          <table frame="box" label="K.5.1-1" rules="all" xml:id="table_K.5.1-1">
            <caption>SOP Class Extended Negotiation Sub-Item (Service-Class-Application-Information Field) - A-ASSOCIATE-RQ</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Item Bytes</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Field Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Description of Field</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>reserved</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field shall always be 1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>reserved</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field shall always be 1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Fuzzy semantic matching of person names</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field defines whether or not fuzzy semantic person name Attribute is requested by the Association-requester. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                  <para>0 - fuzzy semantic matching not requested</para>
                  <para>1 - fuzzy semantic matching requested</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>4</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Timezone query adjustment</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field defines whether or not the Attribute Timezone Offset From UTC (0008,0201) shall be used to adjust the query meaning for time and datetime fields in queries.</para>
                  <para>0 - Timezone query adjustment not requested</para>
                  <para>1 - Timezone query adjustment requested</para>
                </td>
              </tr>
            </tbody>
          </table>
          <note>
            <para>This Sub-Item is identical to Extended Negotiation Sub-Items as used by the Query/Retrieve SOP Classes. However, relational queries (Byte 1) are not relevant since the worklist information models are single level, and date-time matching (Byte 2) is already required by the worklist information models.</para>
          </note>
        </section>
        <section label="K.5.1.2" status="4" xml:id="sect_K.5.1.2">
          <title>SOP Class Extended Negotiation Sub-Item Structure (A-ASSOCIATE-AC)</title>
          <para>The SOP Class Extended Negotiation Sub-Item is made of a sequence of mandatory fields as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. This field shall be three or four bytes in length.</para>
          <table frame="box" label="K.5.1-2" rules="all" xml:id="table_K.5.1-2">
            <caption>SOP Class Extended Negotiation Sub-Item (Service-Class-Application-Information Field) - A-ASSOCIATE-AC</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Item Bytes</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Field Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Description of Field</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>reserved</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field shall always be 1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>reserved</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field shall always be 1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Fuzzy semantic matching of person names</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field defines whether or not fuzzy semantic person name Attribute matching will be performed by the Association-acceptor. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                  <para>0 - fuzzy semantic matching not performed</para>
                  <para>1 - fuzzy semantic matching performed</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>4</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Timezone query adjustment</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This byte field defines whether or not the Attribute Timezone Offset From UTC (0008,0201) shall be used to adjust the query meaning for time and datetime fields in queries.</para>
                  <para>0 - Timezone adjustment of queries not performed</para>
                  <para>1 - Timezone adjustment of queries performed</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </section>
    <section label="K.6" status="2" xml:id="sect_K.6">
      <title>SOP Class Definitions</title>
      <section label="K.6.1" status="3" xml:id="sect_K.6.1">
        <title>Modality Worklist SOP Class</title>
        <section label="K.6.1.1" status="4" xml:id="sect_K.6.1.1">
          <title>Modality Worklist SOP Class Overview</title>
          <para>The Modality Worklist SOP class defined within the Basic Worklist Management Service Class defines an application-level class of service that facilitates the communication of information to the imaging modality about Scheduled Procedure Steps, and entities related to the Scheduled Procedure Steps. As will be detailed below, part of the information carried by the worklist mechanism is intended to be used by the imaging modality itself, but much of the information is intended to be presented to the modality operator.</para>
          <para>This worklist is structured according to Scheduled Procedure Steps. A procedure step is a unit of service in the context of a requested imaging procedure.</para>
          <para>The Modality Worklist SOP class supports the following requirements:</para>
          <itemizedlist>
            <listitem>
              <para>Verify patient (e.g., download patient demographic information from IS to Modality, to verify that the person to be examined is the intended subject).</para>
            </listitem>
            <listitem>
              <para>Select a Scheduled Procedure Step from the IS (e.g., download procedure step information from the IS to the Modality). The Modality Worklist SOP Class supports two alternatives for the realization of this requirement, supporting different organization methods of the department:</para>
              <itemizedlist>
                <listitem>
                  <para>The Modality may obtain the list of Scheduled Procedure Steps from the IS. Display of the list and selection from the list is done at the Modality.</para>
                </listitem>
                <listitem>
                  <para>The list is displayed and selection is performed on the IS. This implies, that the information is obtained by the Modality just before the Scheduled Procedure Step starts.</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para>Prepare the performance of a Scheduled Procedure Step.</para>
            </listitem>
            <listitem>
              <para>Couple DICOM images unambiguously with related information from the IS (e.g., patient demographics, procedure description, ID data structure from the IS, contextual IS information).</para>
            </listitem>
            <listitem>
              <para>Capture all the Attributes from the IS, that are mandatory to be inserted into the DICOM Image Object</para>
            </listitem>
          </itemizedlist>
          <para>The Modality Worklist SOP Class is not intended to provide access to all IS information and services that may be of interest to a Modality operator or attending physician. Its primary focus is the efficient operation of the image acquisition equipment. DICOM SOP Classes such as the Relevant Patient Information Query SOP Class and non-DICOM Services that fall beyond the scope of the Modality Worklist SOP Class may be needed.</para>
          <para>The Modality Worklist SOP Class does not support the transmission of information from the Modality to the information system.</para>
        </section>
        <section label="K.6.1.2" status="4" xml:id="sect_K.6.1.2">
          <title>Modality Worklist Information Model</title>
          <section label="K.6.1.2.1" status="5" xml:id="sect_K.6.1.2.1">
            <title>E/R Model</title>
            <para>In response to a given C-FIND request, the SCP might have to send several C-FIND responses, (i.e., one C-FIND response per matching worklist item). Each worklist item focuses on one Scheduled Procedure Step and the related information. The E-R diagram presented in <xref linkend="figure_K.6-1" xrefstyle="select: label"/> depicts the content of one C-FIND request, that is:</para>
            <itemizedlist>
              <listitem>
                <para>the matching Scheduled Procedure Step, the Requested Procedure to which the Scheduled Procedure Step contributes, the Imaging Service Request in which the associated Requested Procedure is ordered, any associated Visit, and the Patient who is to be the subject of the Procedure.</para>
              </listitem>
            </itemizedlist>
            <para>Therefore, for a given C-FIND request, a given Scheduled Procedure Step will appear in only one of the resulting C-FIND responses. Obviously, information about the Requested Procedure, Imaging Service Request, Visit and Patient may be mentioned in several of these C-FIND responses.</para>
            <para>The Modality Worklist Information Model is represented by the Entity Relationship diagram shown in figure <xref linkend="sect_K.6" xrefstyle="select: label"/> -1.</para>
            <note>
              <para>The entities appearing in messages related to the Modality Worklist SOP Class are required to comply to the Modality Worklist model. However, DICOM does not define the internal structure of the database.</para>
            </note>
            <para>The entry point of the Modality Worklist is the Scheduled Procedure Step entity.</para>
            <para>The Attributes of a Scheduled Procedure Step Worklist can be found in the following Modules in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
            <itemizedlist>
              <listitem>
                <para>Patient Relationship Module</para>
              </listitem>
              <listitem>
                <para>Patient Identification Module</para>
              </listitem>
              <listitem>
                <para>Patient Demographic Module</para>
              </listitem>
              <listitem>
                <para>Patient Medical Module</para>
              </listitem>
              <listitem>
                <para>Visit Relationship Module</para>
              </listitem>
              <listitem>
                <para>Visit Identification Module</para>
              </listitem>
              <listitem>
                <para>Visit Status Module</para>
              </listitem>
              <listitem>
                <para>Visit Admission Module</para>
              </listitem>
              <listitem>
                <para>Scheduled Procedure Step Module</para>
              </listitem>
              <listitem>
                <para>Requested Procedure Module</para>
              </listitem>
              <listitem>
                <para>Imaging Service Request Module</para>
              </listitem>
            </itemizedlist>
            <para>
              <figure label="K.6-1" pgwide="1" xml:id="figure_K.6-1">
                <title>Modality Worklist Information Model E/R Diagram</title>
                <mediaobject>
                  <imageobject>
                    <imagedata fileref="figures/PS3.4_K.6-1.svg"/>
                    <!--<imagedata fileref="part04_fromword_files/image024.png"/>-->
                  </imageobject>
                </mediaobject>
              </figure>
            </para>
          </section>
          <section label="K.6.1.2.2" status="5" xml:id="sect_K.6.1.2.2">
            <title>Modality Worklist Attributes</title>
            <para><xref linkend="table_K.6-1" xrefstyle="select: label"/> defines the Attributes of the Modality Worklist Information Model:</para>
            <table frame="box" label="K.6-1" rules="all" xml:id="table_K.6-1">
              <caption>Attributes for the Modality Worklist Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description / Module</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Matching Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark / Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Scheduled Procedure Step</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Procedure Step Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Scheduled Procedure Step shall only be retrieved with Sequence Matching.</para>
                    <para>The Scheduled Procedure Step Sequence shall contain only a single Item.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Station AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Scheduled station AE title shall be retrieved with Single Value Matching only.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Procedure Step Start Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0002)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Step Start Date shall be retrieved with Single Value Matching or Range Matching.</para>
                    <para>See remark under Scheduled Procedure Step Start Time (0040,0003).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Procedure Step Start Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0003)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Step Start Time shall be retrieved with Single Value Matching or Range Matching. Scheduled Step Start Date and Scheduled Step Start Time are subject to Range Matching. If both keys are specified for Range Matching, e.g., the date range July 5 to July 7 and the time range 10am to 6pm specifies the time period starting on July 5, 10am until July 7, 6pm.</para>
                    <note>
                      <para>If the Information System does not provide scheduling for individual Procedure Steps, it may use the closest scheduling information it possesses (e.g., Procedures are subject to scheduling instead of Procedure Steps).</para>
                    </note>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Modality</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Modality shall be retrieved with Single Value Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Performing Physician's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0006)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Performing Physician's Name shall be retrieved with Single Value Matching or Wild Card Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Procedure Step Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0007)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Either the Scheduled Procedure Step Description (0040,0007) or the Scheduled Protocol Code Sequence (0040,0008) or both shall be supported by the SCP.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Station Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Procedure Step Location</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0011)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Protocol Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0008)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Either the Scheduled Procedure Step Description (0040,0007) or the Scheduled Protocol Code Sequence (0040,0008) or both shall be supported by the SCP.</para>
                    <para>The Scheduled Protocol Code Sequence contains one or more Items.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Protocol Context Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0440)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Protocol Context Sequence and its Items shall not be used for matching</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Value Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Concept Name Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A043)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A120)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Value Type (0040,A040) is DATETIME.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Person Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A123)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Value Type (0040,A040) is PNAME.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Text Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A160)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Value Type (0040,A040) is TEXT.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Concept Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A168)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Value Type (0040,A040) is CODE.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Numeric Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A30A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Value Type (0040,A040) is NUMERIC.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Measurement Units Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,08EA)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Value Type (0040,A040) is NUMERIC.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">&gt;&gt;&gt;All other Attributes from Protocol Context Sequence</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Pre-Medication</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0012)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Pre-Medication is to be applied to that Scheduled Procedure Step.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Procedure Step ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0009)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Contrast Agent</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1070)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Contrast Media is to be applied to that Scheduled Procedure Step.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scheduled Procedure Step Status</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">&gt;All other Attributes from the Scheduled Procedure Step Sequence</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Specimen Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0500)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>One or more Items may be returned in this Sequence.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Container Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0512)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Container Type Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0518)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Zero or one Item shall be returned in this Sequence.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Specimen Description Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0560)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>One or more Items shall be returned in this Sequence.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Specimen Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0551)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Specimen UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0554)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">&gt;&gt;All other Attributes from the Specimen Description Sequence</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specimen Preparation Sequence (0040,0610), if present, describes preparation steps already performed, not scheduled procedure steps</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">&gt;All other Attributes from the Scheduled Specimen Sequence</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Requested Procedure</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Requested Procedure ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Requested Procedure Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Requested Procedure Description (0032,1060) or the Requested Procedure Code Sequence (0032,1064) or both shall be supported by the SCP.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Requested Procedure Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1064)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Requested Procedure Description (0032,1060) or the Requested Procedure Code Sequence (0032,1064) or both shall be supported by the SCP.</para>
                    <para>The Requested Procedure Code Sequence shall contain only a single Item.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>See note 5.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>See note 5.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Study Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1110)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Requested Procedure Priority</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1003)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient Transport Arrangements</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1004)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the Requested Procedure Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Imaging Service Request</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Accession Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0050)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Requesting Physician</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referring Physician's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0090)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the Imaging Service Request Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Visit Identification</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Admission ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the Visit Identification Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Visit Status</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Current Patient Location</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0300)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the Visit Status Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Visit Relationship</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Patient Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1120)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the Visit Relationship Module except those explicitly included in this table (see Note 3)</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Visit Admission</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>All Attributes from the Visit Admission Module</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Patient Relationship</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>All Attributes from the Patient Relationship Module except those explicitly included in this table (see Note 3)</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Patient Identification</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient Name shall be retrieved with Single Value Matching or Wild Card Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID shall be retrieved with Single Value Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the Patient Identification Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Patient Demographic</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patients Birth Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Sex</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Primary Language Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0101)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The languages that can be used to communicate with the patient.</para>
                    <para>If returned, the Patient's Primary Language Code Sequence shall contain one or more Items. The items are ordered by preference (most preferred language to least preferred language).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Code Meaning shall not be used as Matching Key.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Patient's Primary Language Modifier Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>A modifier for a Patient's Primary Language. Can be used to specify a national language variant.</para>
                    <para>If returned, the Patient's Primary Language Modifier Code Sequence shall contain only a single Item.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Code Meaning shall not be used as Matching Key.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Weight</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Size</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Confidentiality constraint on patient data</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,3001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the Patient Demographic Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Patient Medical</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient State</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0500)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pregnancy Status</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,21C0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Medical Alerts</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,2000)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Allergies</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,2110)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Special Needs</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0050)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pertinent Documents Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pertinent Documents Sequence shall be retrieved with Universal Matching only</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Purpose of Reference Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A170)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Document Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0042,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the Patient Medical Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
              </tbody>
            </table>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>Just like Series and Image Entities specified in the Query/Retrieve Service Class either an SCU or an SCP may support optional Matching Key Attributes and/or Type 3 Return Key Attributes that are not included in the Worklist Information Model (i.e., standard or private Attributes). This is considered a Standard Extended SOP Class (see <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>).</para>
                </listitem>
                <listitem>
                  <para>Each Module contains a Comment Attribute. This may be used to transmit non-structured information, which may be displayed to the operator of the Modality.</para>
                </listitem>
                <listitem>
                  <para>The reason for this exclusion is to assure that the Attributes that may be present in multiple Modules are included only once with the meaning pertaining to only one Module (for example, Referenced Study Sequence (0008,1110) shall be included once with the meaning as defined in the Requested Procedure Module).</para>
                </listitem>
                <listitem>
                  <para>The use of Specific Character Set is discussed in section <xref linkend="sect_K.4.1.1.3.1" xrefstyle="select: label"/> and <xref linkend="sect_K.4.1.1.3.2" xrefstyle="select: label"/>.</para>
                </listitem>
                <listitem>
                  <para>The values of Study Date (0008,0020) and Study Time (0008,0030) may be provided in order to achieve consistency of Study level Attributes in composite instances generated in multiple performed procedure steps on different devices, and the worklist values may be updated by the SCP based on information received from Modality Performed Procedure Steps or by examining the composite instances generated.</para>
                </listitem>
              </orderedlist>
            </note>
            <para>The Attributes in <xref linkend="table_K.6-1a" xrefstyle="select: label"/> are not part of the Worklist Information Model; their inclusion in the C-FIND request and response identifier are governed by rules in sections <xref linkend="sect_K.4.1.1.3.1" xrefstyle="select: label"/> and <xref linkend="sect_K.4.1.1.3.2" xrefstyle="select: label"/>, respectively.</para>
            <table frame="box" label="K.6-1a" rules="all" xml:id="table_K.6-1a">
              <caption>Attributes for the Modality Worklist C-FIND Identifier</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Request Identifier</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Response Identifier</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute is required if expanded or replacement character sets are used. See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> and <xref linkend="sect_K.4.1.1.3" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Timezone Offset From UTC</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0201)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute is required if times are to be interpreted explicitly in the designated local timezone. See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> and <xref linkend="sect_K.4.1.1.3" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>HL7 Structured Document Reference Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A390)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>One or more Items may be included in this sequence.</para>
                    <para>Required if HL7 Structured Documents are referenced within the Identifier. See <xref linkend="sect_K.4.1.1.3" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;HL7 Instance Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Retrieve URI</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
        <section label="K.6.1.3" status="4" xml:id="sect_K.6.1.3">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to the Modality Worklist SOP Class as an SCU or an SCP. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="K.6.1.3.1" status="5" xml:id="sect_K.6.1.3.1">
            <title>SCU Conformance</title>
            <para>An implementation that conforms to the Modality Worklist SOP Class shall support queries against the Worklist Information Model described in <xref linkend="sect_K.6.1.2" xrefstyle="select: label"/> of this Annex using the baseline C-FIND SCU Behavior described in <xref linkend="sect_K.4.1.2" xrefstyle="select: label"/> of this Part.</para>
            <para>An implementation that conforms to the Modality Worklist SOP Class as an SCU shall state in its Conformance Statement whether it requests matching on Optional Matching Key Attributes. If it requests Type 3 Return Key Attributes, then it shall list these Optional Return Key Attributes. It shall identify any Templates it supports for the Protocol Context Sequence.</para>
            <para>An implementation that conforms to the Modality Worklist SOP Class as an SCU shall state in its Conformance Statement whether or not it supports extended negotiation of fuzzy semantic matching of person names.</para>
            <para>An implementation that conforms to the Modality Worklist SOP Class as an SCU shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) and Timezone Offset From UTC (0008,0201) when encoding queries and interpreting responses.</para>
          </section>
          <section label="K.6.1.3.2" status="5" xml:id="sect_K.6.1.3.2">
            <title>SCP Conformance</title>
            <para>An implementation that conforms to the Modality Worklist SOP Class shall support queries against the Worklist Information Model described in <xref linkend="sect_K.6.1.2" xrefstyle="select: label"/> of this Annex using the C-FIND SCP Behavior described in <xref linkend="sect_K.4.1.3" xrefstyle="select: label"/> of this Part.</para>
            <para>An implementation that conforms to the Modality Worklist SOP Class as an SCP shall state in its Conformance Statement whether it supports matching on Optional Matching Key Attributes. If it supports Type 3 Return Key Attributes, then it shall list the Optional Return Key Attributes that it supports. It shall identify any Templates it supports for the Protocol Context Sequence.</para>
            <para>An implementation that conforms to the Modality Worklist SOP Class as an SCP shall state in its Conformance Statement whether it supports case-insensitive matching for PN VR Attributes and list Attributes for which this applies.</para>
            <para>An implementation that conforms to the Modality Worklist SOP Class as an SCP shall state in its Conformance Statement whether or not it supports extended negotiation of fuzzy semantic matching of person names. If fuzzy semantic matching of person names is supported, then the mechanism for fuzzy semantic matching shall be specified.</para>
            <para>An implementation that conforms to the Modality Worklist SOP Class as an SCP shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) and Timezone Offset From UTC (0008,0201) when interpreting queries, performing matching and encoding responses.</para>
          </section>
        </section>
        <section label="K.6.1.4" status="4" xml:id="sect_K.6.1.4">
          <title>SOP Class</title>
          <para>The Modality Worklist SOP Class in the Basic Worklist Service Class identifies the Modality Worklist Information Model, and the DIMSE-C operations supported. The following Standard SOP Class is identified:</para>
          <table frame="box" label="K.6.1.4-1" rules="all" xml:id="table_K.6.1.4-1">
            <caption>Modality Worklist SOP Class</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class UID</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Modality Worklist Information Model - FIND</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.31</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="K.6.2" status="3" xml:id="sect_K.6.2">
        <title>General Purpose Worklist SOP Class (Retired)</title>
        <para>Retired. See PS 3.4-2011.</para>
      </section>
    </section>
    <section label="K.7" status="2" xml:id="sect_K.7">
      <title>Examples for the Usage of the Modality Worklist (Informative)</title>
      <para>Moved to <olink targetdoc="PS3.17" targetptr="PS3.17" xrefstyle="select: labelnumber"/></para>
    </section>
    <section label="K.8" status="2" xml:id="sect_K.8">
      <title>General Purpose Worklist Example (Informative) (Retired)</title>
      <para>Retired. See PS 3.17-2011.</para>
    </section>
  </chapter>
  <chapter label="L" status="1" xml:id="chapter_L">
    <title>Queue Management Service Class (Normative)</title>
    <para>Retired. See PS 3.4-2004.</para>
  </chapter>
  <chapter label="M" status="1" xml:id="chapter_M">
    <title>Handling of Identifying Parameters (Informative)</title>
    <para>Retired. See <olink targetdoc="PS3.17" targetptr="PS3.17" xrefstyle="select: labelnumber"/>.</para>
  </chapter>
  <chapter label="N" status="1" xml:id="chapter_N">
    <title>Softcopy Presentation State Storage SOP Classes (Normative)</title>
    <section label="N.1" status="2" xml:id="sect_N.1">
      <title>Overview</title>
      <section label="N.1.1" status="3" xml:id="sect_N.1.1">
        <title>Scope</title>
        <para>The Softcopy Presentation State Storage SOP Classes extend the functionality of the Storage Service class (defined in <xref linkend="chapter_B" xrefstyle="template: Annex %n"/>) to add the ability to convey an intended presentation state or record an existing presentation state. The SOP Classes specify the information and behavior that may be used to present (display) images that are referenced from within the SOP Classes.</para>
        <para>They include capabilities for specifying:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>the output grayscale space in P-Values</para>
          </listitem>
          <listitem>
            <para>the color output space as PCS-Values</para>
          </listitem>
          <listitem>
            <para>grayscale contrast transformations including modality, VOI and presentation LUT</para>
          </listitem>
          <listitem>
            <para>mask subtraction for multi-frame grayscale images</para>
          </listitem>
          <listitem>
            <para>selection of the area of the image to display and whether to rotate or flip it</para>
          </listitem>
          <listitem>
            <para>image and display relative annotations, including graphics, text and overlays</para>
          </listitem>
          <listitem>
            <para>the blending of two image sets into a single presentation</para>
          </listitem>
        </orderedlist>
        <para>The grayscale softcopy presentation state refers to the grayscale image transformations that are to be applied in an explicitly defined manner to convert the stored image pixel data values in a Composite Image Instance to presentation values (P-Values) when an image is displayed on a softcopy device. The P-Values are in a device independent perceptually linear space that is formally defined in <olink targetdoc="PS3.14" targetptr="PS3.14" xrefstyle="template: %n Grayscale Standard Display Function"/>.</para>
        <para>The color and pseudo-color softcopy presentation states refer to the color image transformations that are to be applied in an explicitly defined manner to convert the stored image pixel data values in a Composite Image Instance to Profile Connection Space values (PCS-Values) when an image is displayed on a softcopy device. The PCS-Values are in a device independent space that is formally defined in the ICC Profiles as CIEXYZ or CIELab values.</para>
        <para>The blending presentation states specify two sets of images, an underlying set, and a superimposed set, and the manner in which their pixel values are blended. The underlying set is rendered as grayscale and the superimposed set is rendered as color. The blending is not defined in a pair wise image-by-image or frame-by-frame manner, but rather the manner in which the two sets are combined is left to the discretion of the implementation. Specifically, matters of spatial registration, and any re-sampling and the mechanism of interpolation are not specified.</para>
        <para>The Softcopy Presentation State Storage SOP Classes may be used to store a single state per image, or a common state to be shared by multiple selected images. All images to which the Grayscale, Color and Pseudo-Color Presentation States apply must be a part of the same study that the stored state is a part of, and be of a single Composite Image Storage SOP Class.</para>
        <para>The two sets of images to which the Blended Presentation State applies may be in separate Studies, Each set shall be within a single study. Each set shall be of a single Composite Image Storage SOP Class.</para>
        <para>How an SCU of this SOP Class records or generates this state is beyond the scope of the standard.</para>
        <note>
          <para>For example, an acquisition device may acquire, reconstruct and store to a workstation or archive images that are later examined by an operator for the purpose of quality assurance or printing. At that time a selected grayscale transformation (such as a window level/width operation) may be applied by the operator, and that activity captured and saved as a Grayscale Softcopy Presentation State Storage SOP Instance to the same workstation or archive, from which it is subsequently available for use by another user. Another workstation may retrieve the state for later use. Alternatively, an automated algorithm may derive a state from analysis of image statistics, body part examined, or other characteristics.</para>
        </note>
        <para>How an SCP of this SOP Class chooses between multiple states that may apply to an image is beyond the scope of this standard, other than to state that a claim of conformance as an SCP of this SOP Class implies that the SCP shall make the presentation state available to the user of the device, and if selected by the user, shall apply all the transformations stored in the state in the manner in which they are defined in the standard.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>For example, an acquisition device may automatically store appropriate presentation states for series of images as they are reconstructed that represent adequate defaults. A user or algorithm may subsequently determine a more appropriate presentation state that more effectively displays the contents of an image, or record some annotation related directly to the image, and record that as another presentation state for an image. An application subsequently may display the image by automatically choosing to use the more recently saved or more specific presentation state, or may use the more general default presentation state for all images but notify the user that alternative presentation states are available.</para>
            </listitem>
            <listitem>
              <para>Choice of the same presentation state to display a grayscale image on two devices claiming conformance to these SOP Classes implies through the definition of the P-Value space that the displayed image on both devices will be perceptually similar within the limits defined in <olink targetdoc="PS3.14" targetptr="PS3.14" xrefstyle="template: %n Grayscale Standard Display Function"/>, regardless of the actual capabilities of the display systems.</para>
            </listitem>
            <listitem>
              <para>Choice of the same presentation state to display a color image on two devices claiming conformance to these SOP Classes implies through the definition of the PCS-Value space that the displayed image on both devices will appear similar in color regardless of the actual capabilities of the display systems.</para>
            </listitem>
            <listitem>
              <para>DICOM color images without an embedded optional ICC profile have no defined color space, regardless of their representation. The implementation creating a Color Softcopy Presentation State with an ICC profile is explicitly defining a color space in which to interpret that image, even if one was not known at the time that the image was created. Often a well-known color space such as sRGB will be used in the presentation state under such circumstances.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
    </section>
    <section label="N.2" status="2" xml:id="sect_N.2">
      <title>Pixel Transformation Sequence</title>
      <para>The Softcopy Presentation State Storage SOP Classes support a sequence of transformations that completely define the conversion of a stored image into a displayed image.</para>
      <para>The sequence of transformations from stored pixel values into P-Values or PCS-Values is explicitly defined in a conceptual model. The actual sequence implemented may differ but must result in the same appearance. <xref linkend="figure_N.2-1" xrefstyle="select: label"/> describes this sequence of transformations.</para>
      <note>
        <orderedlist numeration="arabic">
          <listitem>
            <para>Even though a Composite Image Storage SOP Class may not include some Modules that are part of the described transformations, the Softcopy Presentation State Storage SOP Classes do include them. For example, the CT Image Storage SOP Class includes Rescale Slope and Intercept in the CT Image Module, but does not include the Modality LUT Module, and hence is restricted to the description of linear transformations. A saved presentation state that refers to a CT Image Storage SOP Instance may include a Modality LUT, and hence may apply a non-linear transformation.</para>
          </listitem>
          <listitem>
            <para>For the shutter, annotation and spatial transformations, the order in which they are applied relative to the other transformations should not result in a different appearance. The one exception is when a spatial transformation is applied that involves magnification implemented with interpolation. In this case, whether the interpolation is performed before or after the contrast transformations (such as VOI LUT) may result in a slightly different appearance. It is not considered necessary to constrain this sequence more precisely.</para>
          </listitem>
        </orderedlist>
      </note>
      <para>The transformations defined in the Softcopy Presentation State Storage SOP Classes replace those that may be defined in the Referenced Image SOP Instance. If a particular transformation is absent in the Softcopy Presentation State Storage SOP Class, then it shall be assumed to be an identity transformation, and any equivalent transformation, if present, in the Referenced Image SOP Instance shall NOT be used instead.</para>
      <para>Values of MONOCHROME1 and MONOCHROME2 for Photometric Interpretation (0028,0004) in the Referenced Image SOP Instance shall be ignored, since their effect is defined by the application of the grayscale presentation state transformations.</para>
      <note>
        <para>These requirements are in order to achieve complete definition of the entire transformation in the Softcopy Presentation State Storage SOP Classes, and not to depend on the content of the Referenced Image SOP Instance, which may change.</para>
      </note>
      <para>The Referenced Image Storage SOP Instance may also contain bit-mapped overlays. The Softcopy Presentation State Storage SOP Classes specify a mechanism for turning these on or off (i.e., displaying them or not).</para>
      <para>The presentation related Attributes of the Softcopy Presentation State Storage SOP Classes are immutable. They shall never be modified or updated; only a derived SOP Instance with a new SOP Instance UID may be created to represent a different presentation.</para>
      <para>When a Supplemental Palette Color LUT is present in a grayscale Referenced Image Storage SOP Instance:</para>
      <itemizedlist>
        <listitem>
          <para>The grayscale pipeline in any applicable Grayscale Softcopy Presentation State Storage SOP Instance or Blended Softcopy Presentation State Storage SOP Instance shall be applied only to the range of grayscale stored pixel values, and the presentation state shall not affect the rendering of the indexed color values.</para>
        </listitem>
      </itemizedlist>
      <itemizedlist>
        <listitem>
          <para>A Color Softcopy Presentation State Storage SOP Instance shall not be applied.</para>
        </listitem>
        <listitem>
          <para>A Pseudo-color Softcopy Presentation State Storage SOP Instance may be applied, in which case the Supplemental Palette Color LUT information shall be ignored.</para>
        </listitem>
        <listitem>
          <para>No mechanism for separately specifying color consistency of the colors in the Supplemental Palette Color LUT is presently defined, only the optional inclusion of an ICC profile in the image instance.</para>
        </listitem>
      </itemizedlist>
      <para>
        <figure label="N.2-1" pgwide="1" xml:id="figure_N.2-1">
          <title>Grayscale and Color Image Transformation Models</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="figures/PS3.4_N.2-1.svg"/>
              <!--<imagedata fileref="part04_fromword_files/image026.png"/>-->
            </imageobject>
          </mediaobject>
        </figure>
      </para>
      <section label="N.2.1" status="3" xml:id="sect_N.2.1">
        <title>Grayscale Transformations</title>
        <section label="N.2.1.1" status="4" xml:id="sect_N.2.1.1">
          <title>Modality LUT</title>
          <para>The Modality LUT operation applies only to grayscale values.</para>
          <para>The Modality LUT transformation transforms the manufacturer dependent pixel values into pixel values that are meaningful for the modality and are manufacturer independent (e.g., Hounsfield number for CT modalities, Optical Density for film digitizers). These may represent physical units or be dimensionless. The Modality LUT in the Presentation State is modality dependent and is analogous to the same Module in an Image.</para>
          <note>
            <orderedlist numeration="arabic">
              <listitem>
                <para>In some cases, such as the CT Image Storage SOP Class, the same conceptual step as the Modality LUT is specified in another form, for example as Rescale Slope and Rescale Intercept Attributes in the CT Image Module, though the Modality LUT Module is not part of the CT Image IOD.</para>
              </listitem>
              <listitem>
                <para>Image pixel values with a value of Pixel Padding Value (0028,0120) in the referenced image, or within the range specified by Pixel Padding Value (0028,0120) and Pixel Padding Range Limit (0028,0121) (if present in the referenced image) shall be accounted for prior to entry to the Modality LUT stage. See the definition of Pixel Padding Value in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. Neither Pixel Padding Value (0028,0120) nor Pixel Padding Range Limit (0028,0121) are encoded in the Presentation State Instance.</para>
              </listitem>
            </orderedlist>
          </note>
          <para>In the case of a linear transformation, the Modality LUT is described by the Rescale Slope (0028,1053) and Rescale Intercept (0028,1052). In the case of a non-linear transformation, the Modality LUT is described by the Modality LUT Sequence. The rules for application of the Modality LUT are defined in <olink targetdoc="PS3.3" targetptr="sect_C.11.1" xrefstyle="select: docname label quotedtitle"/>.</para>
          <para>If the Modality LUT or equivalent Attributes are part of both the Image and the Presentation State, then the Presentation State Modality LUT shall be used instead of the Image Modality LUT or equivalent Attributes in the Image. If the Modality LUT is not present in the Presentation State it shall be assumed to be an identity transformation. Any Modality LUT or equivalent Attributes in the Image shall not be used.</para>
        </section>
        <section label="N.2.1.2" status="4" xml:id="sect_N.2.1.2">
          <title>Mask</title>
          <para>The Mask operation applies only to grayscale values.</para>
          <para>The mask transformation may be applied in the case of multi-frame images for which other frames at a fixed frame position or time interval relative to the current frame may be subtracted from the current frame. Multiple mask frames may be averaged, and sub-pixel shifted before subtraction.</para>
          <para>This transformation uses the Mask Module as used in the X-Ray Angiography Image Storage SOP Class, though it may be applied to any Image Storage SOP Instance that contains a multi-frame image.</para>
          <para>In the case of X-Ray images, the subtraction is specified to take place in a space logarithmic to X-Ray intensity. If the stored pixel values are not already in such a space, an implementation defined transformation to such a space must be performed prior to subtraction. If a Modality LUT Module is present as well as a Mask Module, then the Modality LUT shall specify a transformation into such a logarithmic space, otherwise it shall not be present (even though a Modality LUT may be present in the referenced image(s), which shall be ignored).</para>
          <note>
            <orderedlist numeration="arabic">
              <listitem>
                <para>In the case of an XA or XRF image, if the Pixel Intensity Relationship (0028,1040) in the image is LOG, then even though a Modality LUT would be present in the image (to map pixel values back to linear to X-Ray intensity), no Modality LUT would be present in the presentation state (i.e., the Modality LUT would be an identity transformation) since log values are required for subtraction. See <olink targetdoc="PS3.3" targetptr="sect_C.8.7.1.1.2" xrefstyle="select: docname label quotedtitle"/>.</para>
              </listitem>
              <listitem>
                <para>In the case of an XA or XRF image, if the Pixel Intensity Relationship (0028,1040) is LIN, then no Modality LUT would be present in the image, but a Modality LUT would need to be present in the presentation state since log values are required for subtraction.</para>
              </listitem>
              <listitem>
                <para>In the case of an XA or XRF image, if the Pixel Intensity Relationship (0028,1040) in the image is DISP, then even though a Modality LUT may or may not be present in the image (to map pixel values back to linear to X-Ray intensity), a different Modality LUT would be present in the presentation state if the creator of the presentation state could create a transformation from DISP pixel values to a logarithmic space for subtraction, or the Modality LUT in the presentation state would be an identity transformation if the DISP pixel values were known to already be log values required for subtraction.</para>
              </listitem>
            </orderedlist>
          </note>
          <para>The result will be a signed value with a bit length one longer than the source frames.</para>
          <para>When there is no difference between corresponding pixel values, the subtracted image pixel will have a value of 0.</para>
          <para>If a pixel in the current frame has a greater value than in the mask frame, then the resulting frame shall have a positive value. If it has a lesser value, then the resulting frame shall have a negative value.</para>
        </section>
        <section label="N.2.1.3" status="4" xml:id="sect_N.2.1.3">
          <title>VOI LUT</title>
          <para>The VOI LUT operation applies only to grayscale values.</para>
          <para>The value of interest (VOI) LUT transformation transforms the modality pixel values into pixel values that are meaningful for the user or the application.</para>
          <note>
            <para>Photometric Interpretation (0028,0004) is ignored, since its effect is defined by the application of the grayscale transformations.</para>
          </note>
          <para>The Softcopy VOI LUT Module in the Presentation State is analogous to the VOI LUT Module in an Image.</para>
          <para>In the case of a linear transformation, the VOI LUT is described by the Window Center (0028,1050) and Window Width (0028,1051). In the case of a non-linear transformation, the VOI LUT is described by the VOI LUT Sequence. A VOI LUT Function (0028,1056) may be present to define a potentially non-linear interpretation (e.g., SIGMOID) of the values of Window Center (0028,1050) and Window Width (0028,1051). The rules for application of the VOI LUT are defined in <olink targetdoc="PS3.3" targetptr="sect_C.11.8" xrefstyle="select: docname label quotedtitle"/>.</para>
          <para>The VOI LUT may have sections with negative slope.</para>
          <note>
            <para>In the Basic Print Service Class a VOI LUT may not have negative slope.</para>
          </note>
          <para>If a VOI LUT is part of both the Image and the Presentation State then the Presentation State VOI LUT shall be used instead of the Image VOI LUT. If a VOI LUT (that applies to the Image) is not present in the Presentation State, it shall be assumed to be an identity transformation. Any VOI LUT or equivalent values in the Image shall not be used.</para>
        </section>
        <section label="N.2.1.4" status="4" xml:id="sect_N.2.1.4">
          <title>Presentation LUT</title>
          <para>The Presentation LUT operation applies only to grayscale values.</para>
          <para>The Presentation LUT transformation transforms the pixel values into P-Values, a device independent perceptually linear space as defined in <olink targetdoc="PS3.14" targetptr="PS3.14" xrefstyle="template: %n Grayscale Standard Display Function"/>. It may be an identity function if the output of the VOI LUT transformation is in P-Values.</para>
          <note>
            <para>If the Presentation LUT and VOI LUT step are identity transformations, and the Mask Module is absent, then the output of the Modality LUT must be, by definition, P-Values.</para>
          </note>
          <para>No output space other than P-Values is defined for the Grayscale Softcopy Presentation State Storage SOP Classes.</para>
          <para>In the case of a linear transformation, the Presentation LUT is described by the Presentation LUT Shape (2050,0020). In the case of a non-linear transformation, the Presentation LUT is described by the Presentation LUT Sequence. The rules for application of the Presentation LUT are defined in <olink targetdoc="PS3.3" targetptr="sect_C.11.6" xrefstyle="select: docname label quotedtitle"/>.</para>
          <note>
            <orderedlist>
              <listitem>
                <para>Since the grayscale transformation pipeline fully defines all transformations applied to the stored pixel values in the referenced image object, the value of Photometric Interpretation (0028,0004) in the referenced image object is ignored and overridden. This implies that either the creator of the presentation state chose a pipeline that reflects the Photometric Interpretation (0028,0004), or chose to ignore or override the Photometric Interpretation, and invert the image relative to what is specified by Photometric Interpretation. If the Modality LUT and VOI LUT do not have a negative slope, one can achieve the effect of inversion of the polarity of an image by choosing Presentation LUT Shape of IDENTITY or INVERSE that displays the minimum pixel value as white rather than black in the case of a Photometric Interpretation of MONOCHROME2, or black rather than white in the case of a Photometric Interpretation of MONOCHROME1. If Presentation LUT Data is sent, then one can invert the value of the entries in the LUT table to achieve inversion of polarity.</para>
              </listitem>
              <listitem>
                <para>The minimum P-Value (zero) always commands that the lowest intensity be displayed.</para>
              </listitem>
              <listitem>
                <para>No separate Polarity transformation is defined.</para>
              </listitem>
            </orderedlist>
          </note>
          <para>A Softcopy Presentation LUT Module is always present in a Presentation State. If a Presentation LUT is present in the Image then the Presentation State Presentation LUT shall be used instead of the Image Presentation LUT.</para>
        </section>
      </section>
      <section label="N.2.2" status="3" xml:id="sect_N.2.2">
        <title>Color Transformations</title>
        <section label="N.2.2.1" status="4" xml:id="sect_N.2.2.1">
          <title>Profile Connection Space Transformation</title>
          <para>The Profile Connection Space Transformation operation applies only to color images, including true color (e.g., RGB) and pseudo-color (e.g., PALETTE COLOR) images, grayscale images for which a Palette Color LUT has been specified in the Presentation State, and the RGB output values of a blending operation.</para>
          <para>The ICC Profile is an Input Profile. That is, it describes the color characteristics of a (possibly hypothetical) device that was used to generate the input color values.</para>
          <para>The intent is that a rendering device will use this information to achieve color consistency. Typically this will be performed by calibration of the output device to create an ICC Display or Output Profile, the conversion of pixel values using the ICC Input Profile into Profile Connection Space, followed by conversion using the ICC Display or Output Profile into values suitable for rendering on the output device. However, the exact mechanisms used are beyond the scope of the standard to define.</para>
          <note>
            <orderedlist>
              <listitem>
                <para>The means of achieving color consistency depends to a large extent on the nature of the material and the intent of the application. The process is more complicated than simply achieving colorimetric accuracy, which is trivial but does not produce satisfactory results. The transformations may take into account such matters as</para>
                <itemizedlist>
                  <listitem>
                    <para>physical factors such as the ambient light of the viewing environment (viewing flare) and the nature of different illuminants</para>
                  </listitem>
                  <listitem>
                    <para>psychovisual factors in the observer</para>
                  </listitem>
                  <listitem>
                    <para>the preferences of the observer</para>
                  </listitem>
                  <listitem>
                    <para>the consistency intent, whether it be to reproduce the colors perceived by an observer of</para>
                    <itemizedlist>
                      <listitem>
                        <para>the original scene,</para>
                      </listitem>
                      <listitem>
                        <para>the media being reproduced, such as a print or transparency, as viewed under specified conditions.</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>Implementations of color management schemes are typically provided in operating systems, libraries and tool kits, and the exact details are usually beyond the control of the DICOM application developer. Accordingly, it is normally sufficient to define a source of pixel values, and a corresponding ICC Input Profile for the device that captured or generated them.</para>
              </listitem>
              <listitem>
                <para>When a color image is rendered on grayscale display, the behavior is not defined. Since the L* value of a CIELab representation of the PCS is not dissimilar to the Barten model used in the GSDF, a reasonable approach would be to interpret it as a P-Value.</para>
              </listitem>
            </orderedlist>
          </note>
          <para>An ICC Profile is always present in a Color, Pseudo-Color or Blended Presentation State. If an ICC Profile is present in the Image then the Presentation State ICC Profile shall be used instead of the Image ICC Profile.</para>
        </section>
        <section label="N.2.2.2" status="4" xml:id="sect_N.2.2.2">
          <title>White Point (Informative)</title>
          <para>D50 means black body radiation of an object at 5000 degrees K, and includes lots of red, which looks "natural". D65 is bluer, more like "cloudy days", but human eyes are more sensitive to blue. While monitors seem to be in the D50-D100 range, light boxes are about D110 (11000K).</para>
          <para>The ICC PCS always uses a white point of D50.</para>
          <para>In an ICC Input Profile, the chromaticAdaptationTag encodes a conversion of an XYZ color from the actual illumination source to the PCS illuminant (D50), and may be useful if the actual illumination source is not D50. The actual illumination source may also be defined in the mediaWhitePointTag. However, with a perceptual rendering intent, neither of these tags are required to be used by the color management system, nor do they have any specified rendering behavior (as opposed to their use with absolute and relative colorimetric rendering intents).</para>
          <para>It is beyond the scope of DICOM to define a required or suggested white point for rendering, since an appropriate choice depends on a knowledge of the display device or media characteristics and the viewing environment.</para>
        </section>
      </section>
      <section label="N.2.3" status="3" xml:id="sect_N.2.3">
        <title>Common Spatial and Annotation Transformations</title>
        <para>
          <figure label="N.2-2" pgwide="1" xml:id="figure_N.2-2">
            <title>Common Spatial and Annotation Transformation Model</title>
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/PS3.4_N.2-2.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image028.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
        <para>The common spatial and annotation transformations apply to any device-independent values, whether they be grayscale P-Values or color PCS-Values, for any type of presentation state.</para>
        <para>The values with which to render annotations are encoded as device-independent values, either as grayscale P-Values or as color PCS-Values. In the case of PCS-Values, CIELab values are encoded, and defined by reference to a D50 illuminant.</para>
        <para>Grayscale presentation states may specify annotations in color for rendering on a color output device.</para>
        <para>The mechanism for mapping grayscale P-Values and color PCS-values to the same display is implementation-dependent and not defined by the standard.</para>
        <section label="N.2.3.1" status="4" xml:id="sect_N.2.3.1">
          <title>Shutter</title>
          <para>The Shutter transformation provides the ability to exclude the perimeter outside a region of an image. A gray level may be specified to replace the area under the shutter.</para>
          <para>One form of this transformation uses the Display Shutter Module as used in the X-Ray Angiography Image Storage SOP Class, though it may be applied to any Image Storage SOP Instance, including single frame images.</para>
          <para>Another form uses a bit-mapped overlay to indicate arbitrary areas of the image that should be excluded from display by replacement with a specified gray level, as described in the Bitmap Display Shutter Module.</para>
          <note>
            <orderedlist numeration="arabic">
              <listitem>
                <para>Since annotations follow the shutter operation in the pipeline, annotations in shuttered regions are not obscured and are visible.</para>
              </listitem>
              <listitem>
                <para>Any shutter present in the referenced image object is ignored (i.e., not applied).</para>
              </listitem>
            </orderedlist>
          </note>
        </section>
        <section label="N.2.3.2" status="4" xml:id="sect_N.2.3.2">
          <title>Pre-Spatial Transformation Annotation</title>
          <para>The Pre-Spatial Transformation Annotation transformation includes the application of bit-mapped overlays as defined in the Overlay Plane Module, and free unformatted text or vector graphics as described in the Graphic Annotation Module that are defined in the image pixel space (as opposed to the displayed area space).</para>
        </section>
        <section label="N.2.3.3" status="4" xml:id="sect_N.2.3.3">
          <title>Spatial Transformation</title>
          <para>Some modalities may not deliver the image in the desired rotation and need to specify a rotation into the desired position for presentation. This transformation, specified in the Spatial Transformation Module, includes a rotation of 90, 180, 270 degrees clockwise followed by a horizontal flip (L &lt;--&gt; R). Rotation by an arbitrary angle is not supported.</para>
          <para>In addition, selection of a region of the image pixel space to be displayed is specified in the Displayed Area Module. This may have the effect of magnifying (or minifying) that region depending on what physical size the display is instructed to render the selected region. If so, the method of interpolation (or sub-sampling) is implementation dependent.</para>
          <note>
            <para>In particular the number of displayed pixels may be different from the number of image pixels as a result of:</para>
            <itemizedlist>
              <listitem>
                <para>minification (e.g., 1 display pixel for 4 image pixels),</para>
              </listitem>
              <listitem>
                <para>magnification (4 display pixels for each image pixel),</para>
              </listitem>
              <listitem>
                <para>interpolation (display pixels derived from values other than those in the image pixels), and</para>
              </listitem>
              <listitem>
                <para>sub-sampling.</para>
              </listitem>
            </itemizedlist>
          </note>
        </section>
        <section label="N.2.3.4" status="4" xml:id="sect_N.2.3.4">
          <title>Post-Spatial Transformation Annotation</title>
          <para>The Post-Spatial Transformation Annotation transformation includes the application of free unformatted text or vector graphics as described in the Graphic Annotation Module that are defined in the displayed area space (as opposed to the image pixel space).</para>
          <para>This implies that the displayed area space is defined as being the image after all Spatial Transformations have been applied.</para>
          <para>These annotations are rendered in the displayed space, though they may be anchored to points in either the displayed area or image pixel space.</para>
        </section>
      </section>
      <section label="N.2.4" status="3" xml:id="sect_N.2.4">
        <title>Blending Transformations</title>
        <para>The grayscale to color blending transformation model applies only to a pair of grayscale values, one of which is first mapped to color and then superimposed upon the other. The resulting values are device independent color PCS-Values. This process is illustrated in <xref linkend="figure_N.2-3" xrefstyle="select: label"/>.</para>
        <para>For the purpose of this section, pixels are referred to as stored pixel values and transformations are defined as point operations on these values. However, it is likely that pixels from either or both the superimposed and underlying image sets will have been spatially resampled and hence interpolated or replicated. Such operations do not affect the conceptual pipeline.</para>
        <para>
          <figure label="N.2-3" pgwide="1" xml:id="figure_N.2-3">
            <title>Grayscale to Color Blending Transformation Model</title>
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/PS3.4_N.2-3.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image030.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
        <section label="N.2.4.1" status="4" xml:id="sect_N.2.4.1">
          <title>Underlying Image Pixels</title>
          <para>The Modality LUT and VOI LUT transformations are applied to the stored pixel values of the underlying image.</para>
          <para>The output range of the VOI LUT transformation depends either on the width of the linear window or the range of output values of the LUT defined by the LUT Descriptor. Conceptually, for the purpose of describing the succeeding blending operation, the smallest pixel value from the range is mapped to 0.0 and the largest pixel value is mapped to 1.0 and all intermediate values are linearly mapped to the [0.0..1.0] interval.</para>
        </section>
        <section label="N.2.4.2" status="4" xml:id="sect_N.2.4.2">
          <title>Superimposed Image Pixels</title>
          <para>The Modality LUT and VOI LUT transformations are applied to the stored pixel values of the superimposed image.</para>
          <para>The full output range of the preceding VOI LUT transformation is implicitly scaled to the entire input range of the Palette Color LUT Transformation.</para>
          <para>The output range of the RGB values in the Palette Color LUT Transformation depends on the range of output values of the LUT defined by the LUT Descriptors. Conceptually, for the purpose of describing the succeeding blending operation, a LUT entry of 0 is mapped to 0.0 and the largest LUT entry possible is mapped to 1.0 and all intermediate values are linearly mapped to the [0.0..1.0] interval.</para>
          <note>
            <para>In practice, the Palette Color LUT output for the superimposed images is encoded in 8 or 16 bits and hence will have a range of 0 to 0xFF or 0xFFFF.</para>
          </note>
          <para>The Palette Color LUT used is that encoded in the Blending Presentation State; any Palette Color LUTs or Supplemental Palette Color LUTs in the image instances are ignored.</para>
        </section>
        <section label="N.2.4.3" status="4" xml:id="sect_N.2.4.3">
          <title>Blending Operation</title>
          <para>The inputs to the blending operation are grayscale values from 0.0 to 1.0 from the underlying image (Y<subscript>u</subscript>) and RGB values from 0.0 to 1.0 from the superimposed image (RGB<subscript>s</subscript>), and an opacity value from 0.0 to 1.0 (A).</para>
          <para>The output is a single image containing RGB values (RGB<subscript>o</subscript>) blended as:</para>
          <para>R<subscript>o</subscript> = R<subscript>s</subscript> * A + Y<subscript>u</subscript> * (1-A)</para>
          <para>G<subscript>o</subscript> = G<subscript>s</subscript> * A + Y<subscript>u</subscript> * (1-A)</para>
          <para>B<subscript>o</subscript> = B<subscript>s</subscript> * A + Y<subscript>u</subscript> * (1-A)</para>
        </section>
        <section label="N.2.4.4" status="4" xml:id="sect_N.2.4.4">
          <title>Conversion to Profile Connection Space</title>
          <para>The output of the blending operation is implicitly scaled to the gamut of the hypothetical device described by the ICC Input Profile, resulting in PCS-Values.</para>
        </section>
      </section>
      <section label="N.2.5" status="3" xml:id="sect_N.2.5">
        <title>Angiography Grayscale Transformations</title>
        <para>The XA/XRF Grayscale Softcopy Presentation State Storage SOP Class supports a sequence of transformations that completely define the conversion of a stored image into a displayed image.</para>
        <para>The sequence of transformations from stored pixel values into P-Values is explicitly defined in a conceptual model. The actual sequence implemented may differ but must result in the same appearance. <xref linkend="figure_N.2.5-1" xrefstyle="select: label"/> describes this sequence of transformations.</para>
        <para>
          <figure label="N.2.5-1" pgwide="1" xml:id="figure_N.2.5-1">
            <title>XA/XRF Grayscale Image Transformation Model</title>
            <mediaobject>
              <imageobject>
               <imagedata fileref="figures/PS3.4_N.2.5-1.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image032.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
        <section label="N.2.5.1" status="4" xml:id="sect_N.2.5.1">
          <title>Mask</title>
          <para>The Mask transformation consists of mask subtraction operations as specified by the Attributes of the XA/XRF Presentation State Mask Module and the Attribute Mask Visibility Percentage of the XA/XRF Presentation State Presentation Module.</para>
          <para>The mask transformation may be applied in the case of multi-frame images for which other frames at a fixed frame position or time interval relative to the current frame may be subtracted from the current frame. Multiple mask frames may be averaged, and sub-pixel shifted before subtraction. Sub-pixel shift may be specified on a frame-by-frame base. Different pixel-shifts may be applied to more than one region of a contrast frame.</para>
          <para>In the case of X-Ray images, the subtraction is specified to take place in a space logarithmic to X-Ray intensity. If the stored pixel values are not in a logarithmic space then a Pixel Intensity Relationship LUT shall be present in the XA/XRF Presentation Mask Module specifying a transformation into such a logarithmic space, otherwise it shall not be present. If a Modality LUT or Pixel Intensity Relationship LUT is present in the referenced image(s) it shall be ignored. The Pixel Intensity Relationship LUT can be specified on a frame-by frame base that can be different for mask and contrast frames.</para>
          <note>
            <orderedlist numeration="arabic">
              <listitem>
                <para>For images of the X-Ray Angiographic Image Storage SOP Class or X-Ray RF Image Storage SOP Class the XA/XRF Grayscale Softcopy Presentation State allows a Pixel Intensity Relationship LUT to be specified on a frame-by-frame base. This is an enhancement of the image Modality LUT that is only applicable for all frames of an image.</para>
              </listitem>
              <listitem>
                <para>In the case of an XA or XRF image, if the Pixel Intensity Relationship (0028,1040) in the image is LOG, then even though a Modality LUT would be present in the image (to map pixel values back to linear X-Ray intensity), no Pixel Intensity Relationship LUT would be present in the presentation state for any frame since log values are required for subtraction. See <olink targetdoc="PS3.3" targetptr="sect_C.8.7.1.1.2" xrefstyle="select: docname label quotedtitle"/>.</para>
                <para>In the case of Enhanced XA or XRF image, if the Pixel Intensity Relationship (0028,1040) in the frame is LOG, then even though a Pixel Intensity Relationship LUT would be present in the frame (to map pixel values back to linear X-Ray intensity, LUT Function (0028,9474) equals TO_LINEAR), no Pixel Intensity Relationship LUT would be present in the presentation state for that frame since log values are required for subtraction. See <olink targetdoc="PS3.3" targetptr="sect_C.7.6.16.2.13" xrefstyle="select: docname label quotedtitle"/>.</para>
              </listitem>
              <listitem>
                <para>In the case of an XA or XRF image if the Pixel Intensity Relationship (0028,1040) in the image is LIN, then no Modality LUT would be present in the image, but a Pixel Intensity Relationship LUT would need to be present (to map pixel values to log values, LUT Function (0028,9474) equals TO_LOG) in the presentation state for all the frames since log values are required for subtraction.</para>
                <para>In the case of an Enhanced XA or XRF image, if the Pixel Intensity Relationship (0028,1040) in the frame is LIN, then no Pixel Intensity Relationship LUT for the purpose to map pixel values back to linear X-Ray intensity (LUT Function (0028,9474) equals TO_LINEAR) would be present in the image, but a Pixel Intensity Relationship LUT would need to be present (to map pixel values to log values) in the presentation state for that frame since log values are required for subtraction.</para>
              </listitem>
              <listitem>
                <para>In the case of an XA or XRF image, if the Pixel Intensity Relationship (0028,1040) in the image is DISP, then even though a Modality LUT may or may not be present in the image (to map pixel values back to linear to X-Ray intensity), a different Pixel Intensity Relationship LUT would be present in the presentation state if the creator of the presentation state could create a transformation from DISP pixel values to a logarithmic space for subtraction, or the Pixel Intensity Relationship LUT in the presentation state would be an identity transformation if the DISP pixel values were known to already be log values required for subtraction.</para>
                <para>In the case of an Enhanced XA or XRF image, if the Pixel Intensity Relationship (0028,1040) in the image is OTHER, then even though a Pixel Intensity Relationship LUT may or may not be present for that frame (to map pixel values back to linear to X-Ray intensity), a different Pixel Intensity Relationship LUT would be present in the presentation state for that frame if the creator of the presentation state could create a transformation from OTHER pixel values to a logarithmic space for subtraction, or the Pixel Intensity Relationship LUT in the presentation state would be an identity transformation if the OTHER pixel values were known to already be log values required for subtraction.</para>
              </listitem>
              <listitem>
                <para>Notes 2, 3 and 4 are summarized in <xref linkend="table_N.2.5.1-1" xrefstyle="select: label"/></para>
              </listitem>
            </orderedlist>
            <table frame="box" label="N.2.5.1-1" rules="all" xml:id="table_N.2.5.1-1">
              <caption>Summary of Providing a LUT Function for Subtraction</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Pixel Intensity Relationship (0028,1040) Attribute of the referenced SOP Instance</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">The contents of Pixel Intensity Relationship LUT Sequence (0028,9422) in XA/XRF Presentation State Mask Module</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>LIN</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>TO_LOG LUT provided</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>LOG</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>absent</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>DISP or OTHER</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>TO_LOG LUT provided, may be an identity</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </note>
        </section>
        <section label="N.2.5.2" status="4" xml:id="sect_N.2.5.2">
          <title>Edge Enhancement</title>
          <para>The Edge Enhancement transformation consists of filter operations to enhance the display of the pixel data as specified by the Attribute Display Filter Percentage of the XA/XRF Presentation State Presentation Module.</para>
        </section>
      </section>
    </section>
    <section label="N.3" status="2" xml:id="sect_N.3">
      <title>Behavior of an SCP</title>
      <para>In addition to the behavior for the Storage Service Class specified in <xref linkend="sect_B.2.2" xrefstyle="select: label"/> Behavior of an SCP, the following additional requirements are specified for the Softcopy Presentation State Storage SOP Classes:</para>
      <itemizedlist>
        <listitem>
          <para>a display device acting as an SCP of these SOP Classes shall make all mandatory presentation Attributes available for application to the referenced images at the discretion of the display device user, for all Image Storage SOP Classes defined in the Conformance Statement for which the Softcopy Presentation State Storage SOP Class is supported.</para>
        </listitem>
        <listitem>
          <para>a display device that is acting as an SCP of these SOP Classes and that supports compound graphics types shall display the graphics described in the Compound Graphic Sequence (0070,0209) and shall not display the Items in the Text Object Sequence (0070,0008) and Graphic Object Sequence (0070,0009) that have the same Compound Graphic Instance ID (0070,0226) value.</para>
        </listitem>
      </itemizedlist>
      <note>
        <para>Though it is not required, a display device acting as an SCP of the Blending Softcopy Presentation State Storage SOP Class may support the Spatial Registration Storage SOP Class in order to transform one Frame of Reference into another or to explicitly identify the relationship between members of two sets of images, and may be able to resample underlying and superimposed sets of images that differ from each other in orientation and in-plane and between-plane spatial resolution.</para>
      </note>
    </section>
    <section label="N.4" status="2" xml:id="sect_N.4">
      <title>Conformance</title>
      <para>In addition to the Conformance Statement requirements for the Storage Service Class specified in <xref linkend="sect_B.4.3" xrefstyle="select: label"/>, the following additional requirements are specified for the Softcopy Presentation State Storage SOP Classes:</para>
      <section label="N.4.1" status="3" xml:id="sect_N.4.1">
        <title>Conformance Statement for an SCU</title>
        <para>The following issues shall be documented in the Conformance Statement of any implementation claiming conformance to a Softcopy Presentation State Storage SOP Class as an SCU:</para>
        <itemizedlist>
          <listitem>
            <para>For an SCU of a Softcopy Presentation State Storage SOP Class that is creating a SOP Instance of the Class, the manner in which presentation related Attributes are derived from a displayed image, operator intervention or defaults, and how they are included in the IOD.</para>
          </listitem>
          <listitem>
            <para>For an SCU of a Softcopy Presentation State Storage SOP Class, the Image Storage SOP Classes that are also supported by the SCU and may be referenced by instances of the Softcopy Presentation State Storage SOP Class.</para>
          </listitem>
          <listitem>
            <para>For an SCU of a Softcopy Presentation State Storage SOP Class whether it supports the Compound Graphic Sequence (0070,0209) and specifies which compound graphic types can be generated, including additional private defined compound graphic types.</para>
          </listitem>
        </itemizedlist>
      </section>
      <section label="N.4.2" status="3" xml:id="sect_N.4.2">
        <title>Conformance Statement for an SCP</title>
        <para>The following issues shall be documented in the Conformance Statement of any implementation claiming conformance to a Softcopy Presentation State Storage SOP Class as an SCP:</para>
        <itemizedlist>
          <listitem>
            <para>For an SCP of a Softcopy Presentation State Storage SOP Class that is displaying an image referred to by a SOP Instance of the Class, the manner in which presentation related Attributes are used to influence the display of an image.</para>
          </listitem>
          <listitem>
            <para>For an SCP of a Softcopy Presentation State Storage SOP Class, the Image Storage SOP Classes that are also supported by the SCP and may be referenced by instances of the Softcopy Presentation State Storage SOP Class.</para>
          </listitem>
          <listitem>
            <para>For an SCP of a Softcopy Presentation State Storage SOP Class whether it supports the Compound Graphic Sequence (0070,0209) and which compound graphic types can be rendered, including additional private defined compound graphic types.</para>
          </listitem>
        </itemizedlist>
      </section>
    </section>
  </chapter>
  <chapter label="O" status="1" xml:id="chapter_O">
    <title>Structured Reporting Storage SOP Classes(Normative)</title>
    <section label="O.1" status="2" xml:id="sect_O.1">
      <title>Overview</title>
      <para>The Structured Reporting Storage SOP Classes extend the functionality of the Storage Service class (defined in <xref linkend="chapter_B" xrefstyle="template: Annex %n"/>) to extend the SCP behavior and conformance requirements.</para>
    </section>
    <section label="O.2" status="2" xml:id="sect_O.2">
      <title>Structured Reporting Storage SOP Class SCU and SCP Behavior</title>
      <section label="O.2.1" status="3" xml:id="sect_O.2.1">
        <title>Behavior of an SCU</title>
        <section label="O.2.1.1" status="4" xml:id="sect_O.2.1.1">
          <title>CAD SR SOP Classes</title>
          <para>Rendering Intent concept modifiers in the Mammography CAD SR, Chest CAD SR and Colon CAD SR objects shall be consistent. Content items marked "For Presentation" shall not be subordinate to content items marked "Not for Presentation" or "Presentation Optional" in the content tree. Similarly, content items marked "Presentation Optional" shall not be subordinate to content items marked "Not for Presentation" in the content tree.</para>
          <para>Content items referenced from another SR object instance, such as a prior Mammography CAD SR, Chest CAD SR or Colon CAD SR shall be inserted by-value in the new SR object instance, with appropriate original source observation context. It is necessary to update Rendering Intent, and referenced content item identifiers for by-reference relationships, within content items paraphrased from another source.</para>
        </section>
      </section>
      <section label="O.2.2" status="3" xml:id="sect_O.2.2">
        <title>Behavior of an SCP</title>
        <para>An SCP intending to display or otherwise render a Structured Report shall convey its full meaning in an unambiguous manner.</para>
        <note>
          <para>"Full meaning" includes not just the Content Tree (i.e., the Items of the Content Sequence), but all Attributes of the Data Set that are necessary to properly interpret the Structured Report. This includes those Attributes that set the initial Observation Context for the Content Tree, i.e., the patient, procedure, and observer identifiers, and the Completion status and Verification status of the Structured Report.</para>
        </note>
        <para>An Icon Image in an IMAGE reference has no meaning, and is not required to be rendered.</para>
        <para>For a device, that is both an SCU and an SCP of these Storage SOP Classes, in addition to the behavior for the Storage Service Class specified in <xref linkend="sect_B.2.2" xrefstyle="select: label"/>, the following additional requirements are specified for Structured Reporting Storage SOP Classes:</para>
        <itemizedlist>
          <listitem>
            <para>an SCP of this SOP Class shall support Level 2 Conformance as defined in <xref linkend="sect_B.4.1" xrefstyle="select: label"/>.</para>
          </listitem>
        </itemizedlist>
        <note>
          <para>This requirement means that all Type 1, Type 2, and Type 3 Attributes defined in the Information Object Definition associated with the SOP Class will be stored and may be accessed.</para>
        </note>
        <section label="O.2.2.1" status="4" xml:id="sect_O.2.2.1">
          <title>CAD SR SOP Classes</title>
          <para>The Mammography CAD SR, Chest CAD SR and Colon CAD SR objects contain data not only for presentation to the clinician, but also data solely for use in subsequent mammography CAD analyses.</para>
          <para>The SCU provides rendering guidelines via "Rendering Intent" concept modifiers associated with "Individual Impression/Recommendation", "Composite Feature" and "Single Image Finding" content items. The full meaning of the SR is provided if all content items marked "Presentation Required" are rendered down to the first instance of "Not for Presentation" or "Presentation Optional" for each branch of the tree. Use of the SCU's Conformance Statement is recommended if further enhancement of the meaning of the SR can be accomplished by rendering some or all of the data marked "Presentation Optional". Data marked "Not for Presentation" should not be rendered by the SCP; it is embedded in the SR content tree as input to subsequent CAD analysis work steps.</para>
          <para>The SCP may further interpret whether or not to render a Single Image Finding that has Rendering Intent "Presentation Optional" by interpreting the value of the CAD Operating Point content item that is subordinate to the Rendering Intent, if present. If the CAD Operating Point content item is not present, then rendering of the Single Image Finding may be based on recommendations in the creator's DICOM Conformance Statement. For further information on the intended use of CAD Operating Point see <olink targetdoc="PS3.17" targetptr="sect_E.4" xrefstyle="select: docname label quotedtitle"/>.</para>
        </section>
      </section>
    </section>
    <section label="O.3" status="2" xml:id="sect_O.3">
      <title>Modification of SR Document Content</title>
      <para>A device that is an SR Storage SOP Class SCU may modify information in a SOP Instance that it has previously sent or received. When this SOP Instance is modified and sent to an SCP, it shall be assigned a new SOP Instance UID if any of the following conditions are met:</para>
      <itemizedlist>
        <listitem>
          <para>addition, removal or update of any Attribute within the SR Document General Module or SR Document Content Module;</para>
        </listitem>
        <listitem>
          <para>modification of the Series Instance UID (0020,000E);</para>
        </listitem>
        <listitem>
          <para>modification of the Study Instance UID (0020,000D).</para>
        </listitem>
      </itemizedlist>
    </section>
    <section label="O.4" status="2" xml:id="sect_O.4">
      <title>Conformance</title>
      <para>In addition to the Conformance Statement requirements for the Storage Service Class specified in <xref linkend="sect_B.4.3" xrefstyle="select: label"/>, the following additional requirements are specified for Structured Reporting Storage SOP Classes:</para>
      <section label="O.4.1" status="3" xml:id="sect_O.4.1">
        <title>Conformance Statement for an SCU</title>
        <para>The following shall be documented in the Conformance Statement of any implementation claiming conformance to the Structured Reporting Storage SOP Classes as an SCU:</para>
        <itemizedlist>
          <listitem>
            <para>The Image or other composite object Storage SOP Classes that are also supported by the SCU and may be referenced by instances of Structured Reporting Storage SOP Class.</para>
          </listitem>
          <listitem>
            <para>The range of Value Types and Relationship Types that are supported by the SCU.</para>
          </listitem>
          <listitem>
            <para>The conditions under which a new SOP Instance UID is generated for an existing SR Document.</para>
          </listitem>
          <listitem>
            <para>If the implementation provides Query/Retrieve of Structured Reporting SOP Instances as an SCU, whether it supports the Optional Keys Concept Name Code Sequence or Content Template Sequence.</para>
          </listitem>
        </itemizedlist>
        <section label="O.4.1.1" status="4" xml:id="sect_O.4.1.1">
          <title>CAD SR SOP Classes</title>
          <para>The following shall be documented in the Conformance Statement of any implementation claiming conformance to the Mammography CAD SR SOP Class as an SCU:</para>
          <itemizedlist>
            <listitem>
              <para>Which types of detections and/or analyses the device is capable of performing:</para>
              <itemizedlist>
                <listitem>
                  <para>From detections listed in Context Group 6014 Mammography Single Image Finding</para>
                </listitem>
                <listitem>
                  <para>From analyses listed in Context Group 6043 Types of Mammography CAD Analysis</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
          <para>The following shall be documented in the Conformance Statement of any implementation claiming conformance to the Chest CAD SR SOP Class as an SCU:</para>
          <itemizedlist>
            <listitem>
              <para>Which types of detections and/or analyses the device is capable of performing:</para>
              <itemizedlist>
                <listitem>
                  <para>From detections listed in Context ID 6101 Chest Finding or Feature, or Context ID 6102 Chest Finding or Feature Modifier</para>
                </listitem>
                <listitem>
                  <para>From analyses listed in Context ID 6137 Types of CAD Analysis</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
          <para>The following shall be documented in the Conformance Statement of any implementation claiming conformance to the Colon CAD SR SOP Class as an SCU:</para>
          <itemizedlist>
            <listitem>
              <para>Which types of detections and/or analyses the device is capable of performing:</para>
              <itemizedlist>
                <listitem>
                  <para>From detections listed in Context ID 6201 Colon Finding or Feature</para>
                </listitem>
                <listitem>
                  <para>From analyses listed in Context ID 6137 Types of CAD Analysis</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
          <para>The following shall be documented in the Conformance Statement of any implementation claiming conformance to the Mammography CAD SR, Chest CAD SR or Colon CAD SR SOP Classes as an SCU that creates instances:</para>
          <itemizedlist>
            <listitem>
              <para>Which optional content items are supported</para>
            </listitem>
            <listitem>
              <para>Conditions under which content items are assigned Rendering Intent of "Presentation Optional", and whether a CAD Operating Point value will be included with each Single Image Finding that has Rendering Intent of "Presentation Optional"</para>
            </listitem>
            <listitem>
              <para>Recommendations for the conditions under which content items with Rendering Intent of "Presentation Optional" should be rendered, based on CAD Operating Point or otherwise</para>
            </listitem>
            <listitem>
              <para>Conditions under which content items are assigned Rendering Intent of "Not for Presentation"</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
      <section label="O.4.2" status="3" xml:id="sect_O.4.2">
        <title>Conformance Statement for an SCP</title>
        <para>The following shall be documented in the Conformance Statement of any implementation claiming conformance to the Structured Reporting Storage SOP Class as an SCP:</para>
        <itemizedlist>
          <listitem>
            <para>For an SCP of a Structured Reporting Storage SOP Class that is displaying or otherwise rendering the structured report contained in a SOP Instance of the Class, the general form in which the structured report related Attributes are rendered.</para>
          </listitem>
          <listitem>
            <para>For an SCP of a Structured Reporting Storage SOP Class, the Image or other composite object Storage SOP Classes that are also supported by the SCP and may be referenced by instances of the Structured Reporting Storage SOP Class, and whether or not they will be displayed or otherwise rendered.</para>
          </listitem>
          <listitem>
            <para>For an SCP of a Structured Reporting Storage SOP Class that is displaying or otherwise rendering an image or other composite object referred to by a SOP Instance of the Class, the manner in which the structured report related Attributes (such as spatial coordinates and referenced presentation states) are used to influence the display of the image or object.</para>
          </listitem>
          <listitem>
            <para>If the implementation supports Query/Retrieve of Structured Reporting SOP Instances as an SCP, whether it supports the Optional Keys Concept Name Code Sequence or Content Template Sequence.</para>
          </listitem>
        </itemizedlist>
        <section label="O.4.2.1" status="4" xml:id="sect_O.4.2.1">
          <title>CAD SR SOP Classes</title>
          <para>The following shall be documented in the Conformance Statement of any implementation claiming conformance to the Mammography CAD SR, Chest CAD SR or Colon CAD SR SOP Classes as an SCP:</para>
          <itemizedlist>
            <listitem>
              <para>Conditions under which the SCP will render content items with Rendering Intent concept modifier set to "Presentation Optional"</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="P" status="1" xml:id="chapter_P">
    <title>Application Event Logging Service Class (Normative)</title>
    <section label="P.1" status="2" xml:id="sect_P.1">
      <title>Overview</title>
      <section label="P.1.1" status="3" xml:id="sect_P.1.1">
        <title>Scope</title>
        <para>The Application Event Logging Service Class defines an application-level class-of-service that facilitates the network transfer of Event Log Records to be logged or recorded in a central location.</para>
        <para>The Application Event Logging Service Class addresses the class of application specific logs (e.g., procedural event logs) that are managed by a medical application. The Application Event Logging Service Class does not specify the means of accessing the central logs.</para>
        <note>
          <para>This Service Class does not address system security or audit logs that are managed by general system logging applications and may use non-DICOM protocols (e.g., SYSLOG).</para>
        </note>
      </section>
      <section label="P.1.2Service" status="3" xml:id="sect_P.1.2Service">
        <title>Definition</title>
        <para>Two peer DICOM AEs implement a SOP Class of the Application Event Logging Service Class with one serving in the SCU role and one serving in the SCP role. SOP Classes of the Application Event Logging Service Class are implemented using the DIMSE-N N-ACTION service as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <para>The N-ACTION service conveys the following semantics:</para>
        <itemizedlist>
          <listitem>
            <para>The SCU notifies the SCP that an event has occurred that the SCP should record in a log. The Action Information of the N-ACTION-RQ contains the information about the event.</para>
          </listitem>
          <listitem>
            <para>The SCP responds with a confirmation of the status of the recording action.</para>
          </listitem>
        </itemizedlist>
        <para>The association negotiation procedure is used to negotiate the supported SOP Classes. <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> specifies the association procedure. The Application Event Logging Service Class does not support extended negotiation.</para>
        <para>The release of an association shall not have any effect on the contents of the log managed by the SCP.</para>
      </section>
    </section>
    <section label="P.2" status="2" xml:id="sect_P.2">
      <title>Procedural Event Logging SOP Class Definition</title>
      <para>The Procedural Event Logging SOP Class allows SCUs to report to an SCP the events that are to be recorded in a Procedure Log SOP Instance, as described in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. This allows multiple devices participating in a Study to cooperatively construct a log of events that occur during that Study.</para>
      <para>The multiple procedural events reported through this SOP Class are related by Patient ID, Study Instance UID, Study ID, and/or Performed Location. The mechanism by which multiple devices obtain these shared identifiers is not defined by this SOP Class.</para>
      <note>
        <para>The Modality Worklist or UPS SOP Classes may be used for this purpose. For simple devices that cannot support worklist SOP classes, the SCP may be able to use Performed Location, or the SCU AE Title, to relate the use of the device to a particular procedure.</para>
      </note>
      <para>The SCP may also provide for recording events for which the SCU does not provide identifiers for matching. The mechanism by which the SCP determines the association of such an unidentified event with the log for a specific procedure is not defined by this SOP Class.</para>
      <note>
        <para>The network address and/or AE Title of the SCU may be used to identify the device as a participant in a particular procedure.</para>
      </note>
      <section label="P.2.1" status="3" xml:id="sect_P.2.1">
        <title>DIMSE Service Group</title>
        <para>The DIMSE-N Services applicable to the Procedural Event Logging SOP Class are shown in <xref linkend="table_P.2-1" xrefstyle="select: label"/>.</para>
        <table frame="box" label="P.2-1" rules="all" xml:id="table_P.2-1">
          <caption>DIMSE Service Group</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">DIMSE Service Element</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Usage SCU/SCP</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>The DIMSE-N Services and Protocol are specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="P.2.2" status="3" xml:id="sect_P.2.2">
        <title>Operation</title>
        <para>The DICOM AEs that claim conformance to this SOP Class as an SCU shall invoke the N-ACTION request. The DICOM AEs that claim conformance to this SOP Class as an SCP shall support the N-ACTION request.</para>
        <section label="P.2.2.1" status="4" xml:id="sect_P.2.2.1">
          <title>Action Information</title>
          <para>The DICOM AEs that claim conformance to this SOP Class as an SCU and/or an SCP shall support the Action Type and Action Information in the N-ACTION-RQ as specified in <xref linkend="table_P.2-2" xrefstyle="select: label"/>.</para>
          <table frame="box" label="P.2-2" rules="all" xml:id="table_P.2-2">
            <caption>Procedural Event Logging Action Information</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type ID</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Attribute</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Tag</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Record Procedural Event</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Specific Character Set</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0005)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C/1C</para>
                  <para>(Required if an extended or replacement character set is used)</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1">
                  <para>Patient ID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0010,0020)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2/2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1">
                  <para>Study Instance UID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0020,000D)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2/2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1">
                  <para>Study ID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0020,0010)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2/2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1">
                  <para>Synchronization Frame of Reference UID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0020,0200)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2/2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1">
                  <para>Performed Location</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0040,0243)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2/2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1"/>
                <td align="left" colspan="1" rowspan="1">
                  <para><emphasis role="italic">All other Attributes of the SR Document Content Module (<olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>) using Procedure Log IOD Content Constraints</emphasis></para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
                <td align="center" colspan="1" rowspan="1">
                  <para>See <xref linkend="sect_P.2.2.1.3" xrefstyle="select: label"/></para>
                </td>
              </tr>
            </tbody>
          </table>
          <section label="P.2.2.1.1" status="5" xml:id="sect_P.2.2.1.1">
            <title>Study Matching Attributes</title>
            <para>The SCU may provide Patient ID (0010,0020), Study Instance UID (0020,000D), Study ID (0020,0010), and/or Performed Location (0040,0243) Attributes to allow the SCP to match the N-ACTION with a Study for which a procedure log is being created.</para>
          </section>
          <section label="P.2.2.1.2" status="5" xml:id="sect_P.2.2.1.2">
            <title>Synchronization Frame of Reference UID</title>
            <para>The Synchronization Frame of Reference UID (0020,0200) Attribute identifies the temporal frame of reference for the Observation DateTime (0040,A032) Attributes in the Procedural Event record. If the Observation DateTime Attribute values are not synchronized in an identifiable Frame of Reference, the Attribute shall be zero length.</para>
          </section>
          <section label="P.2.2.1.3" status="5" xml:id="sect_P.2.2.1.3">
            <title>Constraints on Attributes of the SR Document Content Module</title>
            <para>The Procedural Event record shall be conveyed in a (top level) Content Item, and subsidiary Content Items, as specified by the SR Document Content Module definition in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
            <para>The top level and subsidiary Content Items shall be constructed in accordance with the Procedure Log IOD Content Constraints of <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>These constraints specify use of BTID 3001 Procedure Log defined in <olink targetdoc="PS3.16" targetptr="PS3.16" xrefstyle="select: labelnumber"/>, and specific particular use of the Observation DateTime (0040,A032) Attributes.</para>
                </listitem>
                <listitem>
                  <para>TID 3001 requires the explicit identification of the Observer Context of the top level CONTAINER through TID 1002.</para>
                </listitem>
                <listitem>
                  <para>There may be multiple events (subsidiary Content Items) included in a single N-ACTION-RQ message.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
        </section>
        <section label="P.2.2.2" status="4" xml:id="sect_P.2.2.2">
          <title>Service Class User Behavior</title>
          <para>The SCU shall request logging of events that occur during a Study, using the N-ACTION request primitive.</para>
          <para>The SCU shall receive N-ACTION responses. The actions taken upon a response status of Failure, or upon non-response of the SCP, are implementation dependent.</para>
        </section>
        <section label="P.2.2.3" status="4" xml:id="sect_P.2.2.3">
          <title>Service Class Provider Behavior</title>
          <para>The SCP shall manage the creation of SOP Instances of the Procedure Log Storage Service. It shall receive, via the N-ACTION request primitive, requests for logging of events that occur during a Study. The SCP shall (consonant with application dependent constraints) incorporate those event records into a Procedure Log SOP Instance for the specified Study.</para>
          <para>The SCP shall return, via the N-ACTION response primitive, the N-ACTION Response Status Code applicable to the associated action request.</para>
        </section>
        <section label="P.2.2.4" status="4" xml:id="sect_P.2.2.4">
          <title>Status Codes</title>
          <para>The Service Class specific status values defined for the N-ACTION Service are specified in <xref linkend="table_P.2-3" xrefstyle="select: label"/>. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for additional general response status codes.</para>
          <table frame="box" label="P.2-3" rules="all" xml:id="table_P.2-3">
            <caption>Response Status</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Service Status</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Response Status Code</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Further Meaning</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Success</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0000</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Warning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>B101</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Specified Synchronization Frame of Reference UID does not match SCP Synchronization Frame of Reference</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Warning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>B102</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Study Instance UID coercion; Event logged under a different Study Instance UID</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Warning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>B104</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>IDs inconsistent in matching a current study; Event logged</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Failure</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C101</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Procedural Logging not available for specified Study Instance UID</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Failure</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C102</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Event Information does not match Template</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Failure</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C103</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Cannot match event to a current study</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Failure</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C104</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>IDs inconsistent in matching a current study; Event not logged</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
        <section label="P.2.2.5" status="4" xml:id="sect_P.2.2.5">
          <title>Action Reply</title>
          <para>With any response status indicating Success or Warning, the identifiers of the study into which the event has been logged shall be returned in the N-ACTION-RSP Action Reply as specified in <xref linkend="table_P.2-4" xrefstyle="select: label"/>.</para>
          <table frame="box" label="P.2-4" rules="all" xml:id="table_P.2-4">
            <caption>Procedural Event Logging Action Reply</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type ID</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Attribute</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Tag</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="2">
                  <para>Record Procedural Event</para>
                </td>
                <td align="center" colspan="1" rowspan="2">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Study Instance UID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0020,000D)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Patient ID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0010,0020)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/1</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="P.2.3" status="3" xml:id="sect_P.2.3">
        <title>Procedural Event Logging SOP Class UID</title>
        <para>The Procedural Event Logging SOP Class shall be uniquely identified by the Procedural Event Logging SOP Class UID, which shall have the value "1.2.840.10008.1.40".</para>
      </section>
      <section label="P.2.4" status="3" xml:id="sect_P.2.4">
        <title>Procedural Event Logging Instance Identification</title>
        <para>The well-known UID of the Procedural Event Logging SOP Instance shall have the value "1.2.840.10008.1.40.1".</para>
      </section>
      <section label="P.2.5" status="3" xml:id="sect_P.2.5">
        <title>Conformance Requirements</title>
        <para>The DICOM AE's Conformance Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <section label="P.2.5.1" status="4" xml:id="sect_P.2.5.1">
          <title>SCU Conformance</title>
          <para>The SCU shall document in its Conformance Statement the behavior and actions that cause the SCU to generate an N-ACTION primitive (Procedural Event Notification). It shall specify the Template used for constructing the Event Information, and the Coding Schemes used for coded entries in the Event Information.</para>
          <para>The SCU shall document the identifiers it sends for matching purposes, and how it obtains those Attributes (e.g., through a Modality Worklist query, manual entry, etc.).</para>
          <para>The SCU shall document the behavior and actions performed when a success, warning, or failure status is received.</para>
          <para>The SCU shall document the mechanisms used for establishing time synchronization and specifying the Synchronization Frame of Reference UID.</para>
        </section>
        <section label="P.2.5.2" status="4" xml:id="sect_P.2.5.2">
          <title>SCP Conformance</title>
          <para>The SCP shall document in its Conformance Statement how it uses the identifiers it receives for matching the N-ACTION (Procedural Event Notification) to a specific procedure.</para>
          <para>The SCP shall document the behavior and actions that cause the SCP to generate a success, warning, or failure status for a received N-ACTION.</para>
          <para>The SCP shall document the behavior and actions that cause the SCP to generate a Procedure Log SOP Instance including the received Event Information.</para>
          <para>The SCP shall document how it assigns the value of the Observation Datetime (0040,A032) Attribute when the SCU-provided Synchronization Frame of Reference UID is absent, or differs from that of the SCP.</para>
        </section>
      </section>
    </section>
    <section label="P.3" status="2" xml:id="sect_P.3">
      <title>Substance Administration Logging SOP Class Definition</title>
      <para>The Substance Administration Logging SOP Class allows an SCU to report to an SCP the events that are to be recorded in a patient's Medication Administration Record (MAR) or similar log, whose definition is outside the scope of the Standard. This allows devices with DICOM protocol interfaces to report administration of diagnostic agents (including contrast) and therapeutic drugs, and implantation of devices.</para>
      <para>The Substance Administration reported through this SOP Class is related to the MAR by Patient ID or Admission ID. The mechanism by which the SCU obtains this identifier is not defined by this SOP Class.</para>
      <para>The log entry to the MAR is authorized by at least one of the Operators identified in the Operator Identification Sequence. The mechanism by which the SCU obtains these identifiers is not defined by this SOP Class. The SCP may refuse the log entry if none of the identified Operators is authorized to add entries to the MAR. The mechanism by which the SCP validates such authorization is not defined by this SOP Class.</para>
      <note>
        <orderedlist numeration="arabic">
          <listitem>
            <para>The SCP of this Service Class is not necessarily the Medication Administration Record system, but may be a gateway system between this DICOM Service and an HL7 or proprietary interface of a MAR system. Such implementation design is beyond the scope of the DICOM standard.</para>
          </listitem>
          <listitem>
            <para>This SOP Class is not limited to only specifying medications, although the conventional name of the destination log is the Medication Administration Record. The SOP Class may also be used to record the implantation of therapeutic devices, including both drug-eluting and bare stents, prosthetic and cardiovascular devices, implantable infusion pumps, etc.</para>
          </listitem>
          <listitem>
            <para>The application level authorization of Operators for the purpose of logging a MAR entry is distinct from any access control mechanism at the transport layer (see User Identity Association profiles in <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>).</para>
          </listitem>
        </orderedlist>
      </note>
      <section label="P.3.1" status="3" xml:id="sect_P.3.1">
        <title>DIMSE Service Group</title>
        <para>The DIMSE-N Services applicable to the Substance Administration Logging SOP Class are shown in <xref linkend="table_P.3-1" xrefstyle="select: label"/>.</para>
        <table frame="box" label="P.3-1" rules="all" xml:id="table_P.3-1">
          <caption>DIMSE Service Group</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">DIMSE Service Element</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Usage SCU/SCP</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>The DIMSE-N Services and Protocol are specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="P.3.2" status="3" xml:id="sect_P.3.2">
        <title>Operation</title>
        <para>The DICOM AEs that claim conformance to this SOP Class as an SCU shall invoke the N-ACTION request. The DICOM AEs that claim conformance to this SOP Class as an SCP shall support the N-ACTION request.</para>
        <section label="P.3.2.1" status="4" xml:id="sect_P.3.2.1">
          <title>Substance Administration Log Action Information</title>
          <para>This operation allows an SCU to submit a Medication Administration Record log item or entry, providing information about a specific real-world act of Substance Administration that is the purview of the SCU. This operation shall be invoked through the DIMSE N-ACTION Service.</para>
          <para>The Action Information Attributes are defined by the Substance Administration Log Module specified in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. The DICOM AEs that claim conformance to this SOP Class as an SCU and/or an SCP shall support the Action Type and Action Information Attributes in the N-ACTION-RQ as specified in <xref linkend="table_P.3-2" xrefstyle="select: label"/>.</para>
          <table frame="box" label="P.3-2" rules="all" xml:id="table_P.3-2">
            <caption>Substance Administration Logging N-ACTION Information</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type ID</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Attribute</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Tag</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="23">
                  <para>Record Substance Administration Event</para>
                </td>
                <td align="center" colspan="1" rowspan="23">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Specific Character Set</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0005)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C/1C</para>
                  <para>(Required if an extended or replacement character set is used)</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Patient ID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0010,0020)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C/1C</para>
                  <para>Either or both Patient ID and Admission ID shall be supplied by the SCU; the SCP shall support the Attribute if supplied</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Issuer of Patient ID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0010,0021)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Patient's Name</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0010,0010)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2/2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Admission ID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0038,0010)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C/1C</para>
                  <para>Either or both Patient ID and Admission ID shall be supplied by the SCU; the SCP shall support the Attribute if supplied</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Issuer of Admission ID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0038,0011)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Product Package Identifier</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0044,0001)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C/1C</para>
                  <para>Either or both Product Package Identifier and Product Name shall be supplied by the SCU; the SCP shall support the Attribute if supplied</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Product Name</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0044,0008)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C/1C</para>
                  <para>Either or both Product Package Identifier and Product Name shall be supplied by the SCU; the SCP shall support the Attribute if supplied</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Product Description</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0044,0009)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Substance Administration DateTime</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0044,0010)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Substance Administration Notes</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0044,0011)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Substance Administration Device ID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0044,0012)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Administration Route Code Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0054,0302)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2/2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Code Value</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Coding Scheme Designator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Code Meaning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Substance Administration Parameter Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0044,0019)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;
        <emphasis role="italic">All Attributes of the Substance Administration Parameter Sequence</emphasis>
</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Operator Identification Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,1072)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Person Identification Code Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0040,1101)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Code Value</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Coding Scheme Designator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Code Meaning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
        <section label="P.3.2.2" status="4" xml:id="sect_P.3.2.2">
          <title>Service Class User Behavior</title>
          <para>The SCU shall request logging of substance administration events for a specified Patient using the N-ACTION request primitive.</para>
          <para>The SCU shall receive N-ACTION responses. The actions taken upon a response status of Failure, or upon non-response of the SCP, are implementation dependent.</para>
        </section>
        <section label="P.3.2.3" status="4" xml:id="sect_P.3.2.3">
          <title>Service Class Provider Behavior</title>
          <para>The SCP shall receive, via the N-ACTION request primitive, requests for logging of substance administration events. The SCP shall incorporate those event records into a Medication Administration Record or similar log for the specified Patient.</para>
          <note>
            <para>The patient's identify may be conveyed explicitly by Patient ID (0010,0020), or implicitly by Admission (i.e., Visit) ID (0038,0010). An institution may typically chose one or the other to use as the primary patient identifier at the point of care, e.g., printed on a bar coded wristband, the use of which may facilitate data entry for the log entry. However, in the "Model of the Real World for the Purpose of Modality-IS Interface" (see <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>), the Visit is subsidiary to the Patient; hence the Admission ID (0038,0010) may only be unique within the context of the patient, not within the context of the institution. The use of the Admission ID (0038,0010) Attribute to identify the Patient is only effective if the Admission ID (0038,0010) is unique within the context of the institution.</para>
          </note>
          <para>The SCP shall support inclusion into the Medication Administration Record or similar log of values of all Type 1 and Type 2 Attributes for which the SCU has provided values. The SCP may convert these Attributes into a form appropriate for the destination log.</para>
          <note>
            <para>The SCP may convert coded data to free text in the log, with loss of the specific code values, if the log does not support such coded data.</para>
          </note>
          <para>The SCP shall return, via the N-ACTION response primitive, the N-ACTION Response Status Code applicable to the associated action request.</para>
        </section>
        <section label="P.3.2.4" status="4" xml:id="sect_P.3.2.4">
          <title>Status Codes</title>
          <para>The Service Class specific status values defined for the N-ACTION Service are specified in <xref linkend="table_P.3-3" xrefstyle="select: label"/>. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for additional general response status codes.</para>
          <table frame="box" label="P.3-3" rules="all" xml:id="table_P.3-3">
            <caption>Response Status</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Service Status</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Response Status Code</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Further Meaning</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Success</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0000</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="3">
                  <para>Failure</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C10E</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Operator not authorized to add entry to Medication Administration Record</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>C110</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Patient cannot be identified from Patient ID (0010,0020) or Admission ID (0038,0010)</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="center" colspan="1" rowspan="1">
                  <para>C111</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Update of Medication Administration Record failed</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="P.3.3" status="3" xml:id="sect_P.3.3">
        <title>Substance Administration Logging SOP Class UID</title>
        <para>The Substance Administration Logging SOP Class shall be uniquely identified by the Substance Administration Logging SOP Class UID, which shall have the value "1.2.840.10008.1.42".</para>
      </section>
      <section label="P.3.4" status="3" xml:id="sect_P.3.4">
        <title>Substance Administration Logging Instance UID</title>
        <para>The well-known UID of the Substance Administration Logging SOP Instance shall have the value "1.2.840.10008.1.42.1".</para>
      </section>
      <section label="P.3.5" status="3" xml:id="sect_P.3.5">
        <title>Conformance Requirements</title>
        <para>The DICOM AE's Conformance Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <section label="P.3.5.1" status="4" xml:id="sect_P.3.5.1">
          <title>SCU Conformance</title>
          <para>The SCU shall document in its Conformance Statement the behavior and actions that cause the SCU to generate an N-ACTION-RQ primitive.</para>
          <para>The SCU shall document how it obtains the Patient ID (0010,0020) or Admission ID (0038,0010) Attribute (e.g., through a Modality Worklist query, bar-code scan, manual entry, etc.).</para>
          <para>The SCU shall document the behavior and actions performed when a success or failure status is received.</para>
        </section>
        <section label="P.3.5.2" status="4" xml:id="sect_P.3.5.2">
          <title>SCP Conformance</title>
          <para>The SCP shall document in its Conformance Statement how it uses the information it receives for adding data to a Medication Administration Record.</para>
          <para>The SCP shall document the behavior and actions that cause the SCP to generate a success or failure status for a received N-ACTION-RQ.</para>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="Q" status="1" xml:id="chapter_Q">
    <title>Relevant Patient Information Query Service Class (Normative)</title>
    <section label="Q.1" status="2" xml:id="sect_Q.1">
      <title>Overview</title>
      <para>The Relevant Patient Information Query Service Class defines an application-level class-of-service that facilitates the access to relevant patient information such as it is known at the time of query.</para>
      <para>The query information model consists of two entities with a one-to-one relationship: the Patient and the Patient Information.</para>
      <para>The Patient Information may be general, or specific to a particular imaging or procedure domain. A general SOP Class is defined along with some additional domain specific SOP Classes.</para>
    </section>
    <section label="Q.2" status="2" xml:id="sect_Q.2">
      <title>DIMSE-C Service Group</title>
      <para>One DIMSE-C Service is used in the construction of SOP Classes of the Relevant Patient Information Query Service Class. The following DIMSE-C operation is used.</para>
      <itemizedlist>
        <listitem>
          <para>C-FIND</para>
        </listitem>
      </itemizedlist>
      <section label="Q.2.1" status="3" xml:id="sect_Q.2.1">
        <title>C-FIND Operation</title>
        <para>SCPs of the Relevant Patient Information Query Service Class are capable of processing queries using the C-FIND operation as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. The C-FIND operation is the mechanism by which queries are performed. The SCP shall provide Relevant Patient Information for at most one matching patient in the C-FIND response.</para>
        <section label="Q.2.1.1" status="4" xml:id="sect_Q.2.1.1">
          <title>C-FIND Service Parameters</title>
          <section label="Q.2.1.1.1" status="5" xml:id="sect_Q.2.1.1.1">
            <title>SOP Class UID</title>
            <para>The SOP Class UID identifies the Relevant Patient Information Model and Template against which the C-FIND is to be performed. Support for the SOP Class UID is implied by the Abstract Syntax UID of the Presentation Context used by this C-FIND operation.</para>
          </section>
          <section label="Q.2.1.1.2" status="5" xml:id="sect_Q.2.1.1.2">
            <title>Priority</title>
            <para>The Priority Attribute defines the requested priority of the C-FIND operation with respect to other DIMSE operations being performed by the same SCP.</para>
            <para>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP.</para>
          </section>
          <section label="Q.2.1.1.3" status="5" xml:id="sect_Q.2.1.1.3">
            <title>Identifier</title>
            <para>Both the C-FIND request and response contain an Identifier encoded as a Data Set (see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
            <section label="Q.2.1.1.3.1" status="6" xml:id="sect_Q.2.1.1.3.1">
              <title>Request Identifier Structure</title>
              <para>An Identifier in a C-FIND request shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Key Attributes with values to be matched against the values of Attributes specified in the SOP Class.</para>
                </listitem>
                <listitem>
                  <para>Content Template Sequence (0040,A504), which shall include a single sequence item containing the Template Identifier (0040,DB00) and Mapping Resource (0008,0105) Attributes, to identify the template structure to use in the matching C-FIND responses.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Request Identifier. It shall not be included otherwise.</para>
                </listitem>
              </itemizedlist>
              <para>The Key Attributes and values allowable for the query are defined in the SOP Class definition for the Relevant Patient Information Model.</para>
            </section>
            <section label="Q.2.1.1.3.2" status="6" xml:id="sect_Q.2.1.1.3.2">
              <title>Response Identifier Structure</title>
              <para>The C-FIND response shall not contain Attributes that were not in the request or specified in this section.</para>
              <para>An Identifier in a C-FIND response shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Key Attributes with values corresponding to Key Attributes contained in the Identifier of the request.</para>
                </listitem>
                <listitem>
                  <para>Content Template Sequence (0040,A504), which shall include a single sequence item containing the Template Identifier (0040,DB00) and Mapping Resource (0008,0105) Attributes, to identify the template structure used in the C-FIND response. The values shall be the same as specified in the Request Identifier.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Response Identifier. It shall not be included otherwise. The C-FIND SCP is not required to return responses in the Specific Character Set requested by the SCU if that character set is not supported by the SCP. The SCP may return responses with a different Specific Character Set.</para>
                </listitem>
              </itemizedlist>
            </section>
            <section label="Q.2.1.1.3.3" status="6" xml:id="sect_Q.2.1.1.3.3">
              <title>Relevant Patient Information Templates</title>
              <para>Templates used in the Relevant Patient Information query are defined in <olink targetdoc="PS3.16" targetptr="PS3.16" xrefstyle="select: labelnumber"/>.</para>
              <para>The template specified in the Request Identifier shall not use by-reference relationships.</para>
            </section>
          </section>
          <section label="Q.2.1.1.4" status="5" xml:id="sect_Q.2.1.1.4">
            <title>Status</title>
            <para><xref linkend="table_Q.2-1" xrefstyle="select: label"/> defines the status code values that might be returned in a C-FIND response. Fields related to status code values are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <table frame="box" label="Q.2-1" rules="all" xml:id="table_Q.2-1">
              <caption>C-FIND Response Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status Codes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Related Fields</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="5">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Out of Resources</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A700</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Identifier Does Not Match SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A900</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to process</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>More than one match found</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C100</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to support requested template</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C200</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancel</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matching terminated due to Cancel request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FE00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>None</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success. Matching is complete - No final Identifier is supplied.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>None</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pending</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Current Match is supplied.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Identifier</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <note>
              <para>Status Codes are returned in DIMSE response messages (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>). The code values stated in column "Status Codes" are returned in Status Command Element (0000,0900).</para>
            </note>
          </section>
        </section>
      </section>
    </section>
    <section label="Q.3" status="2" xml:id="sect_Q.3">
      <title>Association Negotiation</title>
      <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. The Association negotiation procedure specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> shall be used to negotiate the supported SOP Class.</para>
      <para>SOP Class Extended Negotiation is not defined for this Service Class.</para>
    </section>
    <section label="Q.4" status="2" xml:id="sect_Q.4">
      <title>DIMSE-C C-FIND Service</title>
      <para>The DIMSE-C C-FIND service is the operation by which relevant patient information is queried and provided.</para>
      <section label="Q.4.1" status="3" xml:id="sect_Q.4.1">
        <title>Conventions</title>
        <para>Key Attributes in the Request Identifier serve two purposes. They may be used as Matching Key Attributes and Return Key Attributes. Matching Key Attributes may be used for matching (criteria to be used in the C-FIND request to determine whether an entity matches the query). Return Key Attributes may be used to specify desired return Attributes (what elements in addition to the Matching Key Attributes have to be returned in the C-FIND response).</para>
        <para>Matching Key Attributes may be of Type "required" (R) or "optional" (O). Return Key Attributes may be of Type 1, 1C, 2, 2C, 3 as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="Q.4.2" status="3" xml:id="sect_Q.4.2">
        <title>Service Definition</title>
        <para>Two peer DICOM AEs implement this Relevant Patient Information Query Service Class with one serving in the SCU role and one serving in the SCP role. The SOP Class is implemented using the DIMSE-C C-FIND service as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <para>Only a baseline behavior of the DIMSE-C C-FIND is used in this Service Class.</para>
        <para>A C-FIND service conveys the following semantics:</para>
        <itemizedlist>
          <listitem>
            <para>The SCU requests that the SCP perform a match for the Matching Keys and return values for the Return Keys that have been specified in the Identifier of the request, against the Relevant Patient Information that the SCP possesses.</para>
            <note>
              <para>In this Annex, the term "Identifier" refers to the Identifier service parameter of the C-FIND service as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            </note>
          </listitem>
          <listitem>
            <para>The SCP generates a C-FIND response for at most one match with an Identifier containing the values of all Matching Key Attributes and all known Return Key Attributes requested. The response contains one relevant patient information instance in the form that matches the Template that was requested. This response shall contain a status of Pending.</para>
          </listitem>
          <listitem>
            <para>When the process of matching is complete, with zero or one match, a C-FIND response is sent with a status of Success and no Identifier.</para>
          </listitem>
          <listitem>
            <para>A Failed response to a C-FIND request indicates that the SCP is unable to process the request. This shall be used to indicate that the requested template is not supported by the SCP, or that more than one match was found by the SCP.</para>
          </listitem>
          <listitem>
            <para>The SCU may cancel the C-FIND service by issuing a C-FIND-CANCEL request at any time during the processing of the C-FIND service. The SCP will interrupt all matching and return a status of Canceled.</para>
            <note>
              <para>The SCU needs to be prepared to receive C-FIND responses sent by the SCP until the SCP finally processes the C-FIND-CANCEL request.</para>
            </note>
          </listitem>
        </itemizedlist>
      </section>
      <section label="Q.4.3" status="3" xml:id="sect_Q.4.3">
        <title>Relevant Patient Information Model SOP Classes</title>
        <section label="Q.4.3.1" status="4" xml:id="sect_Q.4.3.1">
          <title>Relevant Patient Information Model</title>
          <para>In order to serve as a Service Class Provider (SCP) of one or more Relevant Patient Information Model SOP Classes, a DICOM Application Entity (AE) possesses relevant information about patients. This information is organized into a Relevant Patient Information Model.</para>
          <para>The SOP Classes are composed of both the Information Model and a DIMSE-C Service Group.</para>
          <section label="Q.4.3.1.1" status="5" xml:id="sect_Q.4.3.1.1">
            <title>E/R Model</title>
            <para>The E/R Model consists of Patient and Structured Information, with no relationship to other Information Entities in the DICOM Information model.</para>
            <para>
              <figure label="Q.4-1" pgwide="1" xml:id="figure_Q.4-1">
                <title>Relevant Patient Information E/R Model</title>
                <mediaobject>
                  <imageobject>
                    <imagedata fileref="figures/PS3.4_Q.4-1.svg"/>
                    <!--<imagedata fileref="part04_fromword_files/image034.png"/>-->
                  </imageobject>
                </mediaobject>
              </figure>
            </para>
            <para>The Patient IE includes the Attributes of the Patient Identification and Patient Demographics Modules.</para>
            <para>The Structured Information IE includes Attributes that are not inherently related to a real-world entity, but are interpreted through their coded content. This includes the Attributes of the Structured Document Content Module, which in the case of the Relevant Patient Information Query Service has its content constrained by specified templates to convey patient related information. Also included in the Structured Information IE are Attributes of the SOP Common and Common Instance Reference Modules that support the interpretation of coded data, or support access to referenced information objects identified in the coded data.</para>
          </section>
          <section label="Q.4.3.1.2" status="5" xml:id="sect_Q.4.3.1.2">
            <title>Relevant Patient Information Attributes</title>
            <para><xref linkend="table_Q.4-1" xrefstyle="select: label"/> defines the Attributes of the Relevant Patient Information Model:</para>
            <table frame="box" label="Q.4-1" rules="all" xml:id="table_Q.4-1">
              <caption>Attributes for the Relevant Patient Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description / Module</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Matching Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark / Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Patient</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be present in the Request Identifier.</para>
                    <para>Shall be retrieved with Single Value Matching.</para>
                    <note>
                      <para>Since only one response is expected, this is a unique key.</para>
                    </note>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0021)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value Matching.</para>
                    <para>In situations where there are multiple issuers, this key constrains matching of Patient ID (0010,0020) to a domain in which the Patient ID (0010,0020) is unique.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Birth Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Sex</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes of the Patient Identification Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes of the Patient Demographic Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Structured Information (SR Document Content Module)</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Observation DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Value Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>See <xref linkend="sect_Q.4.3.1.2.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Concept Name Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A043)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>See <xref linkend="sect_Q.4.3.1.2.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if the value of Coding Scheme Designator (0008,0102) is not sufficient to identify the Code Value (0008,0100) unambiguously.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">&gt;All other Attributes of the Concept Name Code Sequence</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para/>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para/>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para/>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para/>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Content Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A730)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>See <xref linkend="sect_Q.4.3.1.2.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;All Attributes of the Content Sequence</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Content Items as provided by the SCP. Requirements on Content Item Attribute Types shall be in accordance with the definitions in the SR Document Content Module.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>HL7 Structured Document Reference Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A390)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;HL7 Instance Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Retrieve URI</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Structured Information (Common Instance Reference Module)</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Studies Containing Other Referenced Instances Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1200)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Content Sequence (0040,A390) includes Content Items that reference SOP Instances that use the Patient/Study/Series/Instance information model.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Series Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1115)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Series Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced Instance Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,114A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
              </tbody>
            </table>
            <para>The Attributes in <xref linkend="table_Q.4-2" xrefstyle="select: label"/> are not part of the Information Model; their inclusion in the C-FIND request and response identifier are governed by rules in sections <xref linkend="sect_Q.2.1.1.3.1" xrefstyle="select: label"/> and <xref linkend="sect_Q.2.1.1.3.2" xrefstyle="select: label"/>, respectively.</para>
            <table frame="box" label="Q.4-2" rules="all" xml:id="table_Q.4-2">
              <caption>Additional C-FIND Identifier Attributes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>Type in Request Identifier</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>Type in Response Identifier</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Content Template Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A504)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Mapping Resource</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0105)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Template Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,DB00)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if expanded or replacement character sets are used. See <xref linkend="sect_Q.2.1.1.3" xrefstyle="select: label"/>,</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="Q.4.3.1.2.1" status="5" xml:id="sect_Q.4.3.1.2.1">
            <title>Relevant Patient Information Attribute Descriptions</title>
            <para>Concept Name Code Sequence (0040,A043) in a C-FIND Response shall have one sequence item that identifies the Root node concept of the returned structure. This shall be the same as the Concept Name of the first row of the template identified in the Content Template Sequence (0040,A504) in the Identifier. The Concept Name Code Sequence (0040,A043) shall always be sent zero length in the Request Identifier.</para>
            <para>The Value Type (0040,A040) applies to the Concept Name Code Sequence (0040,A043), and shall be the same as the Value Type (0040,A040) of the first row of the template identified in the Content Template Sequence (0040,A504) in the Identifier.</para>
            <para>The Content Sequence (0040,A730) is a potentially recursively nested Sequence of Items, as described in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>, SR Document Content Module. The Content Sequence shall always be sent zero length in the Request Identifier. The Content Sequence in the data set of the Response shall contain the content items of the requested template.</para>
          </section>
        </section>
        <section label="Q.4.3.2" status="4" xml:id="sect_Q.4.3.2">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to the Relevant Patient Information Model SOP Classes as an SCU and/or as an SCP.</para>
          <para>The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="Q.4.3.2.1" status="5" xml:id="sect_Q.4.3.2.1">
            <title>SCU Conformance</title>
            <para>An implementation that conforms to one or more of the Relevant Patient Information Model SOP Classes shall support queries against the Relevant Patient Information Model described in <xref linkend="sect_Q.4.3.1" xrefstyle="select: label"/> using the baseline C-FIND SCU Behavior described in <xref linkend="sect_Q.4.2" xrefstyle="select: label"/>.</para>
            <para>An implementation that conforms to one or more of the Relevant Patient Information Model SOP Classes as an SCU shall state in its Conformance Statement which SOP Class(es) it supports, and which Root template(s) it may request in a query if not specified by the SOP Class. The Conformance Statement shall also state the definition of any supported template extensions.</para>
          </section>
          <section label="Q.4.3.2.2" status="5" xml:id="sect_Q.4.3.2.2">
            <title>SCP Conformance</title>
            <para>An implementation that conforms to one or more of the Relevant Patient Information Model SOP Classes shall support queries against the Relevant Patient Information Model described in <xref linkend="sect_Q.4.3.1" xrefstyle="select: label"/> using the baseline C-FIND SCP Behavior described in <xref linkend="sect_Q.4.2" xrefstyle="select: label"/>.</para>
            <para>An implementation that conforms to one or more of the Relevant Patient Information Model SOP Classes as an SCP shall state in its Conformance Statement which SOP Class(es) it supports, and which Root template(s) it will support in a query response if not specified by the SOP Class. The Conformance Statement shall also state the definition of any supported template extensions.</para>
            <para>An implementation that conforms to one or more of the Relevant Patient Information Model SOP Classes as an SCP shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when interpreting queries, performing matching, and encoding responses.</para>
          </section>
        </section>
        <section label="Q.4.3.3" status="4" xml:id="sect_Q.4.3.3">
          <title>SOP Classes</title>
          <para>The Relevant Patient Information Model SOP Classes in the Relevant Patient Information Query Service Class identify the Relevant Patient Information Model, and the DIMSE-C operation supported. In some instances a Root template is specified. The Standard SOP Classes are defined in <xref linkend="table_Q.4-3" xrefstyle="select: label"/>:</para>
          <table frame="box" label="Q.4-3" rules="all" xml:id="table_Q.4-3">
            <caption>SOP Classes for the Relevant Patient Information Model</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class UID</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Root Template</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>General Relevant Patient Information Query</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.37.1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>TID 9007 General Relevant Patient Information, or from the list in <olink targetdoc="PS3.16" targetptr="PS3.16" xrefstyle="select: labelnumber"/></para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Breast Imaging Relevant Patient Information Query</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.37.2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>TID 9000 Relevant Patient Information for Breast Imaging</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Cardiac Relevant Patient Information Query</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.37.3</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>TID 3802 Cardiovascular Patient History</para>
                </td>
              </tr>
            </tbody>
          </table>
          <note>
            <para>The list of Root templates for the General Relevant Patient Information Query is extensible.</para>
          </note>
        </section>
      </section>
    </section>
    <section label="Q.5" status="2" xml:id="sect_Q.5">
      <title>Relevant Patient Information Query Example (Informative)</title>
      <para>Moved to <olink targetdoc="PS3.17" targetptr="PS3.17" xrefstyle="select: labelnumber"/>.</para>
    </section>
  </chapter>
  <chapter label="R" status="1" xml:id="chapter_R">
    <title>Instance Availability Notification Service Class (Normative)</title>
    <section label="R.1" status="2" xml:id="sect_R.1">
      <title>Overview</title>
      <section label="R.1.1" status="3" xml:id="sect_R.1.1">
        <title>Scope</title>
        <para>The Instance Availability Notification Service Class defines an application-level class-of-service that allows one DICOM AE to notify another DICOM AE of the presence and availability of SOP instances that may be retrieved. The AE from which such SOP Instances can later be retrieved may or may not be the SCU performing the notification.</para>
        <note>
          <para>An example of usage of this Service Class is for the receiver of the instances to provide notification of their arrival and availability for subsequent workflow steps to a different entity, such as a separate workflow manager.</para>
        </note>
        <para>The SCU implementation defines the conditions under which it provides the notification. Certain SCUs may provide notification for arbitrary sets of SOP Instances, while other SCUs may provide notification when they determine that the instances associated with a Procedure Step or a Requested Procedure are available. The SCU is required to document in its Conformance Statement the nature of its notification decisions (e.g., frequency of notifications, retrieve capabilities and latency, etc.).</para>
        <para>Once the SCU has provided notification about availability of the SOP Instances, the SCP may use that information in directing further workflow, such as in populating the Input Information Sequence when forming a Unified Procedure Step. These types of policies are outside the scope of this Standard, however, the SCP is required to document these policies in its Conformance Statement.</para>
        <para>The SCU of this Service Class is not required to assure that the study, procedure step or any workflow-related entity is "complete"; indeed no semantics other than the concept of "availability" is expressed or implied by the use of this service.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>The Performed Workitem Code Sequence (0040,4019) Attribute of a referenced GP-PPS instance may provide the specific description of the work item that triggered the Instance Availability Notification.</para>
            </listitem>
            <listitem>
              <para>The Instance Availability Notification is typically a service of the composite instance Storage SCP, since that application is responsible for making the instances available. The Instance Availability Notification allows that application to report the specific Retrieve AE Title, which may differ from the Storage Service AE Title, and may vary with different instance SOP Classes, or may vary over time.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
    </section>
    <section label="R.2" status="2" xml:id="sect_R.2">
      <title>Conformance Overview</title>
      <para>The Instance Availability Notification Service Class consists of a single SOP Class: the Instance Availability Notification SOP Class.</para>
      <para>The SOP Class specifies Attributes, operations, and behavior applicable to the SOP Class. The conformance requirements shall be specified in terms of the Service Class Provider (SCP) and the Service Class User (SCU).</para>
      <para>The Instance Availability Notification Service Class uses the Instance Availability Notification IOD as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> and the N-CREATE DIMSE Service specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
    </section>
    <section label="R.3" status="2" xml:id="sect_R.3">
      <title>Instance Availability Notification SOP Class</title>
      <section label="R.3.1" status="3" xml:id="sect_R.3.1">
        <title>DIMSE Service Group</title>
        <para>The DIMSE Services shown in <xref linkend="table_R.3.1-1" xrefstyle="select: label"/> are applicable to the Instance Availability Notification IOD under the Instance Availability Notification SOP Class.</para>
        <table frame="box" label="R.3.1-1" rules="all" xml:id="table_R.3.1-1">
          <caption>DIMSE Service Group</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">DIMSE Service Element</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Usage SCU/SCP</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-CREATE</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>The DIMSE Services and Protocols are specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <note>
          <para>Though the terminology "notification" is used for this Service Class, the notification is in fact performed through Operations rather than Notifications.</para>
        </note>
      </section>
      <section label="R.3.2" status="3" xml:id="sect_R.3.2">
        <title>Operations</title>
        <para>The Application Entity that claims conformance to this SOP Class as an SCU shall be permitted to invoke the following operations and the Application Entity that claims conformance as an SCP shall be capable of providing the following operations.</para>
        <section label="R.3.2.1" status="4" xml:id="sect_R.3.2.1">
          <title>N-CREATE Instance Availability Notification SOP Instance</title>
          <para>This operation allows an SCU to create an instance of the Instance Availability Notification SOP Class and to provide availability information about Instances that are under the control of the SCU. This operation shall be invoked through the DIMSE N-CREATE Service.</para>
          <section label="R.3.2.1.1" status="5" xml:id="sect_R.3.2.1.1">
            <title>Attributes</title>
            <para>The Attribute list of the N-CREATE is defined as shown in <xref linkend="table_R.3.2-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="R.3.2-1" rules="all" xml:id="table_R.3.2-1">
              <caption>Instance Availability Notification SOP Class N-CREATE Attributes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-CREATE (SCU/SCP)</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(Required if an extended or replacement character set is used)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="2" rowspan="1">
                    <para>
                      <emphasis role="italic">All other Attributes of SOP Common Module</emphasis>
                    </para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Performed Procedure Step Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1111)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performed Workitem Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4019)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="2" rowspan="1">
                    <para><emphasis role="italic">&gt;&gt;All other Attributes from Performed Workitem Code Sequence</emphasis></para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Series Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1115)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Series Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1199)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Reference SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Instance Availability</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0056)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Retrieve AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0054)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Retrieve Location UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E011)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Retrieve URI</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Storage Media File-Set ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0130)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Storage Media File-Set UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="R.3.2.1.2" status="5" xml:id="sect_R.3.2.1.2">
            <title>Service Class User</title>
            <para>The SCU shall specify in the N-CREATE request primitive the SOP Class and SOP Instance UIDs of the Instance Availability Notification SOP Instance that is created and for which Attribute Values are to be provided.</para>
            <para>The SCU shall provide Attribute values for the Instance Availability Notification SOP Class Attributes as specified in <xref linkend="table_R.3.2-1" xrefstyle="select: label"/>.</para>
            <para>The use of additional optional Attributes by the SCU is forbidden.</para>
            <note>
              <para>The reason for forbidding optional Attributes is to prevent the use of Standard Extended SOP Classes that might add contextual information such as patient and procedure identifiers.</para>
            </note>
            <para>The encoding rules for Instance Availability Notification Attributes are specified in the N-CREATE request primitive specification in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <para>There are no requirements on when N-CREATE requests are required to be performed.</para>
            <para>In particular, there are no requirements that notification about the availability of the first instance of a Performed Procedure Step or Study be provided upon its reception, nor that availability notification be provided when an entire set of instances comprising a completed Performed Procedure Step or Study are available, though these are typical and common scenarios.</para>
          </section>
          <section label="R.3.2.1.3" status="5" xml:id="sect_R.3.2.1.3">
            <title>Service Class Provider</title>
            <para>The SCP shall return, via the N-CREATE response primitive, the N-CREATE Response Status Code applicable to the associated request.</para>
          </section>
          <section label="R.3.2.1.4" status="5" xml:id="sect_R.3.2.1.4">
            <title>Status Codes</title>
            <para>There are no specific status codes. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for response status codes.</para>
          </section>
        </section>
      </section>
      <section label="R.3.3" status="3" xml:id="sect_R.3.3">
        <title>Instance Availability Notification SOP Class UID</title>
        <para>The Instance Availability Notification SOP Class shall be uniquely identified by the Instance Availability Notification SOP Class UID, which shall have the value "1.2.840.10008.5.1.4.33".</para>
      </section>
      <section label="R.3.4" status="3" xml:id="sect_R.3.4">
        <title>Conformance Requirements</title>
        <para>Implementations shall include within their Conformance Statement information as described below.</para>
        <para>An implementation may conform to this SOP Class as an SCU or as an SCP. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="chapter_A" xrefstyle="template: Annex %n “%t”"/>.</para>
        <section label="R.3.4.1" status="4" xml:id="sect_R.3.4.1">
          <title>SCU Conformance</title>
          <para>An implementation that is conformant to this SOP Class as an SCU shall meet conformance requirements for the operations that it invokes.</para>
          <section label="R.3.4.1.1" status="5" xml:id="sect_R.3.4.1.1">
            <title>Operations</title>
            <para>Any Attributes for which Attribute Values may be provided (using the N-CREATE) by the SCU shall be enumerated in the SCU Conformance Statement. The SCU Conformance Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="chapter_A" xrefstyle="template: Annex %n “%t”"/>.</para>
            <para>An implementation that conforms to this SOP Class as an SCU shall specify under which conditions during the performance of real-world activities it will create the SOP Class Instance.</para>
            <para>The SCU Conformance Statement shall specify what is meant by each reported value of Instance Availability (0008,0056).</para>
            <para>The SCU Conformance Statement shall describe the relationship between the Instance Availability Notification and the Performed Procedure Step SOP Classes, if the latter are supported.</para>
          </section>
        </section>
        <section label="R.3.4.2" status="4" xml:id="sect_R.3.4.2">
          <title>SCP Conformance</title>
          <para>An implementation that is conformant to this SOP Class as an SCP shall meet conformance requirements for the operations that it performs.</para>
          <section label="R.3.4.2.1" status="5" xml:id="sect_R.3.4.2.1">
            <title>Operations</title>
            <para>The SCP Conformance Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="chapter_A" xrefstyle="template: Annex %n “%t”"/>.</para>
            <para>The SCP Conformance Statement shall provide information on the behavior of the SCP (in terms of real world activities) for each reported value of Instance Availability (0008,0056).</para>
            <para>The SCP Conformance Statement shall describe the behavioral relationship between the Instance Availability Notification and the Performed Procedure Step SOP Classes, if the latter are supported.</para>
          </section>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="S" status="1" xml:id="chapter_S">
    <title>Media Creation Management Service Class (Normative)</title>
    <section label="S.1" status="2" xml:id="sect_S.1">
      <title>Overview</title>
      <section label="S.1.1" status="3" xml:id="sect_S.1.1">
        <title>Scope</title>
        <para>The Media Creation Management Service Class defines a mechanism by which an SCU can instruct a device to create Interchange Media containing a set of Composite SOP Instances that have already been transferred to the media creation device using the Storage Service Class.</para>
        <para>This Service Class does not address archival storage requirements. It is intended only for the management of media creation devices. There is no requirement by the Standard that an SCP of this Service Class will commit to taking responsibility for archival of Composite Instances, such that an SCU may then discard them. Such behavior is entirely outside the scope of the Standard. In other words, Media Creation does not imply Storage Commitment.</para>
        <para>The application profile(s) for the set of instances, which implies the form of the media created (i.e., CD, DVD or MOD), can either be left to the discretion of the SCP, or explicitly specified in the media creation request. In the latter case, if the device is unable to create the requested profiles, an error shall be returned.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>More than one profile may be requested or used by default, since the requested set of instances may not be compatible with a single profile. DICOM media may always contain instances written by more than one profile. See <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
            </listitem>
            <listitem>
              <para>It is the responsibility of the SCU to negotiate and store instances with an appropriate Transfer Syntax should a specific Transfer Syntax be required by a requested profile. The SCP is not required to support compression or decompression of stored instances in order to convert stored instances into a form suitable for a requested profile. It may do so, if so requested, but the level of lossy compression would be at the discretion of the SCP. If the degree of compression is important to the application, then the SCU may compress the images before sending them to the SCP.</para>
            </listitem>
          </orderedlist>
        </note>
        <para>The request controls whether or not a label is to be generated on the media, be it from information contained in the instances (such as patient demographics) or from text explicitly specified in the request.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>An SCP may or may not be physically capable of labeling the media. This capability is outside the scope of conformance to the Standard. Inability to create a label is not an error.</para>
            </listitem>
            <listitem>
              <para>De-identification of instances (and labels), such as for teaching file media or clinical trial media is the responsibility of the SCU and is outside the scope of this service. That is, the SCU must de-identify the composite instances before sending them, prior to the media creation request.</para>
            </listitem>
          </orderedlist>
        </note>
        <para>The Service Class contains a limited capability to return status information. A media creation request may initially either fail or be accepted. Subsequently, the SCP may be polled as to the status of the request (idle, pending/creating, successful or failed) by the SCU on the same or on a separate Association. There is no asynchronous notification. There is no dependence on the duration or persistence of an Association.</para>
        <note>
          <para>There is no requirement to manage the handling of transient failures (such as an empty supply of blank media or labels or ink). Whether or not the SCP queues stored instances and requests in such cases, or fails to accept the request, is outside the scope of the Standard.</para>
        </note>
      </section>
    </section>
    <section label="S.2" status="2" xml:id="sect_S.2">
      <title>Conformance Overview</title>
      <para>The application-level services addressed by this Service Class are specified via the Media Creation Management SOP Class.</para>
      <para>The Media Creation Management SOP Class specifies Attributes, operations and behavior applicable to the SOP Class. The conformance requirements shall be specified in terms of the Service Class Provider (SCP) and the Service Class User (SCU).</para>
      <para>The Media Creation Management Service Class uses the Media Creation Management IOD as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> and the N-CREATE, N-ACTION and N-GET Services specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      <section label="S.2.1" status="3" xml:id="sect_S.2.1">
        <title>Association Negotiation</title>
        <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. The Association negotiation rules as specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> shall be used to negotiate the supported SOP Classes.</para>
        <para>Support for the SCP/SCU role selection negotiation is not applicable. The SOP Class Extended Negotiation is not defined for this Service Class.</para>
      </section>
    </section>
    <section label="S.3" status="2" xml:id="sect_S.3">
      <title>Media Creation Management SOP Class</title>
      <para>The SCU transmits the SOP Instances to the SCP using the Storage Service Class. The request for media creation is transmitted to the SCP and contains a list of references to one or more SOP Instances. Success or failure of media creation is subsequently indicated by the SCU requesting the status from the SCP on the same or a separate association.</para>
      <section label="S.3.1" status="3" xml:id="sect_S.3.1">
        <title>DIMSE Service Group</title>
        <para>The following DIMSE-N Services are applicable to the Media Creation Management SOP Class.</para>
        <table frame="box" label="S.3.1-1" rules="all" xml:id="table_S.3.1-1">
          <caption>DIMSE-N Services Applicable to Media Creation Management</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">DIMSE Service Element</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Usage SCU/SCP</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-CREATE</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-GET</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>U/M</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>The DIMSE-N Services and Protocol are specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="S.3.2" status="3" xml:id="sect_S.3.2">
        <title>Operations</title>
        <para>The DICOM AEs that claim conformance to this SOP Class as an SCU shall invoke the N-CREATE and the N-ACTION operations. The DICOM AEs that claim conformance to this SOP Class as an SCP shall support the N-CREATE, the N-ACTION and the N-GET operations.</para>
        <section label="S.3.2.1" status="4" xml:id="sect_S.3.2.1">
          <title>Create a Media Creation Request</title>
          <para>The Create a Media Creation Request operation allows an SCU to create an instance of the Media Creation Management SOP Class and initialize Attributes of the SOP Class. The SCP uses this operation to create a new media creation request containing the set of SOP Instances that shall be included in the Interchange Media. This operation shall be invoked through the N-CREATE primitive</para>
          <section label="S.3.2.1.1" status="5" xml:id="sect_S.3.2.1.1">
            <title>Attributes</title>
            <para>The DICOM AEs that claim conformance to this SOP Class as an SCU may choose to provide a subset of the Attributes maintained by the SCP. The DICOM AEs that claim conformance to this SOP Class as an SCP shall support a subset of the Media Creation Management specified in <xref linkend="table_S.3.2.1.1-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="S.3.2.1.1-1" rules="all" xml:id="table_S.3.2.1.1-1">
              <caption>Media Creation Management - N-CREATE Attributes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C (Required if expanded or replacement character set is used)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Storage Media File-Set ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0130)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Storage Media File-Set UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Label Using Information Extracted From Instances</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,0001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1C</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.4" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Label Text</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,0002)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1C</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.4" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Label Style Selection</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,0003)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1C</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.4" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Barcode Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.4" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Barcode Symbology</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,0006)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.4" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Media Disposition</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,0004)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.5" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Allow Media Splitting</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,0007)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1C</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.6" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Allow Lossy Compression</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,000F)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1C</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.9" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Include Non-DICOM Objects</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,0008)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1C</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.7" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Include Display Application</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,0009)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1C</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.8" xrefstyle="select: label"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Preserve Composite Instances After Media Creation</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,000A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced SOP Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1199)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Media Application Profile</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,000C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.2" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Icon Image Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0200)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1C</para>
                    <para>See <xref linkend="sect_S.3.2.1.1.3" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <section label="S.3.2.1.1.1" status="6" xml:id="sect_S.3.2.1.1.1">
              <title>Storage Media File-Set Attributes</title>
              <para>If present, the Storage Media File-Set ID (0088,0130) and Storage Media File-Set UID (0088,0140) shall be used on the media created. If absent, the media shall contain values generated by the SCP.</para>
              <para>If the media request will not fit on a single volume (single piece or side of media), then whether or not the SCP ignores Storage Media File-Set ID (0088,0130), or uses it as a prefix and appends information to distinguish volumes, is implementation dependent. Different values of Storage Media File-Set UID (0088,0140) shall be used for different volumes.</para>
              <para>If multiple copies are requested, the same Storage Media File-Set ID (0088,0130) and Storage Media File-Set UID (0088,0140) shall be used on all copies.</para>
              <note>
                <para>Care should be taken with multiple copies written to rewritable media that their contents do not diverge even though their identifiers are identical.</para>
              </note>
            </section>
            <section label="S.3.2.1.1.2" status="6" xml:id="sect_S.3.2.1.1.2">
              <title>Requested Media Application Profile</title>
              <para>The Requested Media Application Profile (2200,000C), if present, shall be used by the SCP for the specified SOP Instance. If absent for a particular instance, the choice of Media Application Profile for that instance shall be at the discretion of the SCP.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>Different Media Application Profiles may be used for different instances on the same piece of media.</para>
                  </listitem>
                  <listitem>
                    <para>The form of the DICOMDIR directory records that the SCP must create may be significantly influenced by the media application profiles used.</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
            <section label="S.3.2.1.1.3" status="6" xml:id="sect_S.3.2.1.1.3">
              <title>Icon Image Sequence</title>
              <para>The Icon Image Sequence (0088,0200), if present:</para>
              <itemizedlist>
                <listitem>
                  <para>shall be used by the SCP for inclusion in the instance-level DICOM Directory Record for the specified SOP Instance, if the Media Application Profile requires its inclusion, and the icon supplied by the SCU meets the requirements of the profile</para>
                </listitem>
                <listitem>
                  <para>may be used by the SCP for inclusion in the instance-level DICOM Directory Record for the specified SOP Instance, if the Media Application Profile does not require its inclusion</para>
                </listitem>
              </itemizedlist>
              <para>If absent for a particular instance, the choice of Media Application Profile for that instance dictates whether or not the SCP is required to create its own Icon Image Sequence (0088,0200) from the contents of the SOP Instance.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>Some Media Application Profiles require the inclusion of an Icon Image Sequence (0088,0200) in the directory records.</para>
                  </listitem>
                  <listitem>
                    <para>Some Media Application Profiles specify constraints on the form of the Icon Image Sequence (0088,0200).</para>
                  </listitem>
                  <listitem>
                    <para>The SCP may choose to extend the Media Application Profile by generating and including icons anyway.</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
            <section label="S.3.2.1.1.4" status="6" xml:id="sect_S.3.2.1.1.4">
              <title>Labeling</title>
              <para>The SCP may or may not have the capability to print a label on (or for) the media. If it does, then the following SCP behavior shall apply and the specified Attributes are required to be supported by the SCP.</para>
              <para>The Label Using Information Extracted From Instances (2200,0001) Attribute is a flag that instructs the SCP whether or not to create any label using the Patient and Study information contained within the instances themselves.</para>
              <note>
                <para>The SCP may implement whatever it considers to be an appropriate subset of any Attributes of any Modules at the Patient, Specimen and Study entities in the DICOM Information Model specified in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. Typically included are such Attributes as Patient Name (0010,0010), Patient ID (0010,0020), Study ID (0020,0010), and Study Date (0008,0020).</para>
              </note>
              <para>The Label Text (2200,0002) Attribute is additional text that the SCP shall include on any label, either in addition to or instead of any extracted demographics, depending on the value of Label Using Information Extracted From Instances (2200,0001).</para>
              <para>The Label Style Selection (2200,0003) Attribute is a code string, which if present, may be used by the SCP to choose one or more implementation-dependent styles of labeling.</para>
              <para>The Barcode Value (2200,0005) and the Barcode Symbology (2200,0006), if present, may be used by the SCP to print a barcode on the label.</para>
              <para>Note It is SCU responsibility to convey a value for the Barcode Value (2200,0005) Attribute consistent in length and content with the requested Barcode Symbology (2200,0006).</para>
            </section>
            <section label="S.3.2.1.1.5" status="6" xml:id="sect_S.3.2.1.1.5">
              <title>Media Disposition</title>
              <para>The Media Disposition (2200,0004), if present, may be used by the SCP to determine where and to whom to send the media when completed.</para>
              <note>
                <para>For example, it may contain the name and address of a referring doctor, and be used to print a label for an envelope or mailer, or as additional material to be printed on the media label.</para>
              </note>
            </section>
            <section label="S.3.2.1.1.6" status="6" xml:id="sect_S.3.2.1.1.6">
              <title>Allow Media Splitting</title>
              <para>The SCP may or may not have the capability to split a request over more than one piece of media (e.g., if it doesn't fit on one). If it does, then the following SCP behavior shall apply and the specified Attributes are required to be supported by the SCP.</para>
              <para>The Allow Media Splitting Attribute (2200,0007) shall be used by the SCP to determine if it is permitted to split this request over more than one piece of media.</para>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>If the file-set size exceeds the media storage capacity, and this flag has been set to NO, the SCP shall refuse to process the request.</para>
                  </listitem>
                  <listitem>
                    <para>If the requested Media Application Profile allows for lossless compression, and images are not already compressed, such compression may be applied by the SCP in order to fit all instances on a single piece of media. This also applies to lossy compression if it has not been allowed by the value of Allow Lossy Compression (2200,000F).</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
            <section label="S.3.2.1.1.7" status="6" xml:id="sect_S.3.2.1.1.7">
              <title>Include Non-DICOM Objects</title>
              <para>The SCP may or may not have the capability to include on the created media additional Non-DICOM objects (e.g., HTML files, JPEG images) that are a rendering of the DICOM instances. If it does, then the following SCP behavior shall apply and the specified Attributes are required to be supported by the SCP.</para>
              <para>The Include Non-DICOM Objects (2200,0008) shall be used to request the SCP to add additional Non-DICOM objects onto the created media.</para>
              <para>An SCP is not required to be able to add such files. Inability to add Non-DICOM objects is not an error.</para>
              <para>If Include Non-DICOM Objects (2200,0008) is set to NO, the SCP shall not include additional non-DICOM objects on the media.</para>
            </section>
            <section label="S.3.2.1.1.8" status="6" xml:id="sect_S.3.2.1.1.8">
              <title>Include Display Application</title>
              <para>The SCP may or may not have the capability to include on the created media an application for displaying DICOM instances. If it does, then the following SCP behavior shall apply and the specified Attributes are required to be supported by the SCP.</para>
              <para>The Include Display Application (2200,0009) shall be used to request the SCP to add an application for displaying DICOM instances onto the created media.</para>
              <para>An SCP is not required to be able to add such an application. Inability to add a display application is not an error.</para>
              <para>Whether the display application is capable of displaying all stored instances is beyond the scope of the standard.</para>
              <para>Whether the display application automatically executes when media is inserted for reading is beyond the scope of the standard.</para>
              <para>Which platforms are supported by the display application(s) is beyond the scope of the standard.</para>
              <note>
                <para>Multiple files may need to be included in the media to support the display application, rather than a single executable file, and these may be present, even if the Include Non-DICOM Objects (2200,0008) Attribute has a value of NO.</para>
              </note>
              <para>If Include Display Application (2200,0009) is set to NO, the SCP shall not include a display application on the media.</para>
            </section>
            <section label="S.3.2.1.1.9" status="6" xml:id="sect_S.3.2.1.1.9">
              <title>Allow Lossy Compression</title>
              <para>If Allow Lossy Compression (2200,000F) has a value of YES, the SCP is allowed to perform lossy compression under the following circumstances:</para>
              <itemizedlist>
                <listitem>
                  <para>if it receives uncompressed or lossless compressed images yet is requested to use a profile that requires lossy compression, or</para>
                </listitem>
                <listitem>
                  <para>if Allow Media Splitting (2200,0007) is NO, and the request would otherwise need to be split across media.</para>
                </listitem>
              </itemizedlist>
              <para>If Allow Lossy Compression (2200,000F) has a value of YES but the requested profile does not permit lossy compression, lossy compression shall not be performed.</para>
              <para>The level of compression is at the SCP's discretion.</para>
              <para>The SCP shall not decompress and recompress already lossy compressed images, but may use images that have already been lossy compressed.</para>
              <para>The SCP is never required to perform lossy compression.</para>
              <para>If Allow Lossy Compression (2200,000F) has a value of NO, the SCP is not allowed to perform lossy compression. If Allow Lossy Compression (2200,000F) has a value of NO and the requested profile requires lossy compression, an error shall be returned.</para>
            </section>
          </section>
          <section label="S.3.2.1.2" status="5" xml:id="sect_S.3.2.1.2">
            <title>Service Class User Behavior</title>
            <para>The SCU shall use the N-CREATE primitive to inform the SCP that a new media creation request has been placed and to convey the proprieties of this request. The request proprieties (e.g., the set of SOP Instances that the creating interchange media shall contain) are referenced in the IOD Attributes as specified in <xref linkend="table_S.3.2.1.1-1" xrefstyle="select: label"/>.</para>
            <para>Upon receipt of a successful N-CREATE Response Status Code from the SCP, the SCU now knows that the SCP has received the N-CREATE request and a new media creation request has been created.</para>
            <para>Upon receipt of a failure N-CREATE Response Status Code from the SCP, the SCU now knows that the SCP will not process the request. The actions taken by the SCU upon receiving the status is beyond the scope of this Standard.</para>
            <para>At any time after receipt of the N-CREATE-Response, the SCU may release the association on which it sent the N-CREATE-Request.</para>
            <note>
              <para>An N-GET of the corresponding of the Media Creation Management SOP Class may be performed on the same or subsequent associations.</para>
            </note>
          </section>
          <section label="S.3.2.1.3" status="5" xml:id="sect_S.3.2.1.3">
            <title>Service Class Provider Behavior</title>
            <para>Upon receipt of the N-CREATE request, the SCP shall return, via the N-CREATE response primitive, the N-CREATE Response Status Code applicable to the associated request. A success status conveys that the SCP has successfully received the N-CREATE request.</para>
            <para>Warning statuses shall not be returned.</para>
            <para>Any other status (i.e., a failure status) conveys that the SCP is not processing the media creation request.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>It is not specified by the Standard what checks the SCP shall accomplish after the N-CREATE request primitive reception and before returning the N-CREATE response. Implementations are discouraged from performing extended validation of the contents of the N-CREATE request, such as availability of the referenced Composite SOP Instances, support for the requested profiles, etc. In case of N-CREATE failure, the SCU would not be able to perform an N-GET to determine the detailed reasons for failure, and allow operators to apply suitable correction actions to make the request processable (e.g., resending any missing Composite SOP Instances). Such checks are better deferred until after receipt of the N-ACTION request, after which an N-GET may be performed.</para>
                </listitem>
                <listitem>
                  <para>The Standard does not require the SCP to queue multiple requests, though implementations are encouraged to do so. As a consequence, a new request before a previous request has been completed may fail immediately, or may return a successful response and be queued. The size of any such queue is beyond the scope of the Standard.</para>
                </listitem>
                <listitem>
                  <para>How long the instance of the Media Creation Management SOP Class persists once the Execution Status (2100,0020) has been set to IDLE is beyond the scope of the Standard.</para>
                </listitem>
              </orderedlist>
            </note>
            <para>The N-CREATE implicitly creates the Execution Status (2100,0020) and Execution Status Info (2100,0030) Attributes, which may subsequently be retrieved by an N-GET.</para>
          </section>
          <section label="S.3.2.1.4" status="5" xml:id="sect_S.3.2.1.4">
            <title>Status Codes.</title>
            <para>The status values that are specific for this action are defined in <xref linkend="table_S.3.2.2.4-1" xrefstyle="select: label"/>. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for general response status codes.</para>
            <table frame="box" label="S.3.2.2.4-1" rules="all" xml:id="table_S.3.2.2.4-1">
              <caption>SOP Class Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Code</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused because an Initiate Media Creation action has already been received for this SOP Instance.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A510</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
        <section label="S.3.2.2" status="4" xml:id="sect_S.3.2.2">
          <title>Initiate Media Creation</title>
          <para>The Initiate Media Creation operation allows an SCU to request an SCP to create Interchange Media according to an already created Media Creation Management SOP Instance. An SCP shall use this operation to schedule the creation of Interchange Media. This operation shall be invoked through the N-ACTION primitive.</para>
          <section label="S.3.2.2.1" status="5" xml:id="sect_S.3.2.2.1">
            <title>Action Information</title>
            <para>The DICOM AEs that claim conformance to this SOP Class as an SCU and/or an SCP shall support the Action Types and Action Information as specified in <xref linkend="table_S.3.2.2.1-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="S.3.2.2.1-1" rules="all" xml:id="table_S.3.2.2.1-1">
              <caption>Media Creation Request - Action Information</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Action Type Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Action Type ID</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="2">
                    <para>Initiate Media Creation</para>
                  </td>
                  <td align="center" colspan="1" rowspan="2">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Number of Copies</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2000,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Request Priority</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_S.3.2.2.1.1" xrefstyle="select: label"/></para>
                  </td>
                </tr>
              </tbody>
            </table>
            <section label="S.3.2.2.1.1" status="6" xml:id="sect_S.3.2.2.1.1">
              <title>Priority</title>
              <para>The Request Priority (2200,0020), if present, may be used by the SCP to prioritize a higher priority request over other pending lower priority requests.</para>
            </section>
          </section>
          <section label="S.3.2.2.2" status="5" xml:id="sect_S.3.2.2.2">
            <title>Service Class User Behavior</title>
            <para>The SCU shall use the N-ACTION primitive to request the SCP to create Interchange Media according to an already created Media Creation Management SOP Instance. Action Information is specified in Table S. 3.2.2.1-1.</para>
            <para>Upon receipt of a successful N-ACTION Response Status Code from the SCP, the SCU now knows that the SCP has received the N-ACTION Initiate Media Creation request and will process the request.</para>
            <para>Upon receipt of a failure N-ACTION Response Status Code from the SCP, the SCU now knows that the SCP will not process the Initiate Media Creation request. The actions taken by the SCU upon receiving the status is beyond the scope of this Standard.</para>
            <para>At any time after receipt of the N-ACTION-Response, the SCU may release the association on which it sent the N-ACTION-Request.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>An N-GET of the corresponding of the Media Creation Management SOP Class may be performed on the same or subsequent associations.</para>
                </listitem>
                <listitem>
                  <para>The duration for which the SOP Instance UID of an instance of the Media Creation Management SOP Class remains active once the request has been completed or has failed is implementation dependent, but should be sufficiently long to allow an SCU to determine the ultimate outcome of the request.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
          <section label="S.3.2.2.3" status="5" xml:id="sect_S.3.2.2.3">
            <title>Service Class Provider Behavior</title>
            <para>Upon receipt of the N-ACTION Initiate Media Creation request, the SCP shall return, via the N-ACTION response primitive, the N-ACTION Response Status Code applicable to the associated request. A success status conveys that the SCP has successfully scheduled the request.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>The extent of validation of the contents of the request, the availability of the referenced Composite SOP Instances, support for the requested profiles and other checks that may determine the ultimate success or failure of the request are not specified by the Standard. In particular, a request may be immediately accepted successfully, but subsequently fail for some reason, or the N-ACTION response primitive may contain a status that reflects a more thorough (and prolonged) check.</para>
                </listitem>
                <listitem>
                  <para>How long any Composite Instances that have been transferred via the Storage Service Class to the SCP for the purpose of a Media Creation Request persist, is beyond the scope of the Standard. The Preserve Composite Instances After Media Creation (2200,000A) flag is provided as a hint only. Even if this flag is set, a subsequent request referencing some or all of the same instances may fail if the SCP had reason to flush its cache of instances in the interim, and the SCU may need to be prepared to re-send them.</para>
                </listitem>
                <listitem>
                  <para>How long the instance of the Media Creation Management SOP Class persists once the Execution Status (2100,0020) has been set to DONE or FAILED is beyond the scope of the Standard.</para>
                </listitem>
              </orderedlist>
            </note>
            <para>The N-ACTION implicitly creates or updates the Execution Status (2100,0020), Execution Status Info (2100,0030), Total Number of Pieces of Media Created (2200,000B), Failed SOP Sequence (0008,1198) and Referenced Storage Media Sequence (2200,000D) Attributes, which may subsequently be retrieved by an N-GET.</para>
          </section>
          <section label="S.3.2.2.4" status="5" xml:id="sect_S.3.2.2.4">
            <title>Status Codes</title>
            <para>There are no specific status codes. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for response status codes.</para>
          </section>
        </section>
        <section label="S.3.2.3" status="4" xml:id="sect_S.3.2.3">
          <title>Cancel Media Creation</title>
          <para>The Cancel Media Creation operation allows an SCU to request an SCP to cancel a media creation request, whether or not it has begun to be processed. This operation shall be invoked through the N-ACTION primitive.</para>
          <section label="S.3.2.3.1" status="5" xml:id="sect_S.3.2.3.1">
            <title>Action Information</title>
            <para>The DICOM AEs that claim conformance to this SOP Class as an SCU and/or an SCP shall support the Action Types and Action Information as specified in <xref linkend="table_S.3.2.3.1-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="S.3.2.3.1-1" rules="all" xml:id="table_S.3.2.3.1-1">
              <caption>Media Creation Request - Action Information</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Action Type Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Action Type ID</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancel Media Creation</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="S.3.2.3.2" status="5" xml:id="sect_S.3.2.3.2">
            <title>Service Class User Behavior</title>
            <para>The SCU shall use the N-ACTION primitive to request the SCP to cancel the media creation request corresponding to the Affected SOP Instance UID in the N-ACTION request primitive, whether or not it has been initiated with an N-ACTION Initiate Media Creation request, and whether or not it has begun to be processed (i.e., is pending or in progress).</para>
            <para>Upon receipt of a successful N-ACTION Response Status Code from the SCP, the SCU knows that the SCP has received the N-ACTION Cancel Media Creation request, has canceled any pending or in progress media creation, and deleted the Media Creation Management SOP Instance.</para>
            <note>
              <para>Successful cancellation implies that a subsequent N-GET of the corresponding Media Creation Management SOP Instance would fail.</para>
            </note>
            <para>Upon receipt of a failure N-ACTION Response Status Code from the SCP, the SCU knows that the SCP will not process the Cancel Media Creation request. The actions taken by the SCU upon receiving the status is beyond the scope of this Standard.</para>
            <note>
              <para>Cancellation failure implies that media creation has already completed (successfully or not), or will proceed. The status of the media creation request may still be obtained with an N-GET, unless the reason for failure was that the SOP Instance did not exist.</para>
            </note>
          </section>
          <section label="S.3.2.3.3" status="5" xml:id="sect_S.3.2.3.3">
            <title>Service Class Provider Behavior</title>
            <para>Upon receipt of the N-ACTION Cancel Media Creation request, the SCP shall return, via the N-ACTION response primitive, the N-ACTION Response Status Code applicable to the associated request. A success status conveys that the SCP has successfully canceled the request.</para>
            <para>A failure status conveys that the SCP has failed to cancel the request, in which case the Execution Status (2100,0020), Execution Status Info (2100,0030), Total Number of Pieces of Media Created (2200,000B), Failed SOP Sequence (0008,1198) and Referenced Storage Media Sequence (2200,000D) Attributes may subsequently be retrieved by an N-GET.</para>
          </section>
          <section label="S.3.2.3.4" status="5" xml:id="sect_S.3.2.3.4">
            <title>Status Codes</title>
            <para>The status values that are specific for this SOP Class and DIMSE Service are defined in <xref linkend="table_S.3.2.3.4-1" xrefstyle="select: label"/>.See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for general response status codes.</para>
            <table frame="box" label="S.3.2.3.4-1" rules="all" xml:id="table_S.3.2.3.4-1">
              <caption>Response Statuses</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Response Status Codes</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="3">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Media creation request already completed.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C201</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Media creation request already in progress and cannot be interrupted.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C202</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancellation denied for unspecified reason.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C203</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
        <section label="S.3.2.4" status="4" xml:id="sect_S.3.2.4">
          <title>Get Media Creation Result</title>
          <para>The Get Media Creation Result operation allows an SCU to request of an SCP the status of a media creation request. This operation shall be invoked through the N-GET primitive used in conjunction with the appropriate Media Creation Management SOP Instance corresponding to the creation request.</para>
          <section label="S.3.2.4.1" status="5" xml:id="sect_S.3.2.4.1">
            <title>Attributes</title>
            <para>The Application Entity that claims conformance to this SOP Class as an SCU may choose to interpret the Attributes maintained by the SCP that the SCU receives via the operations of the SOP Class. The Application Entity that claims conformance as an SCP to this SOP Class shall support the Attributes specified in <xref linkend="table_S.3.2.4.1-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="S.3.2.4.1-1" rules="all" xml:id="table_S.3.2.4.1-1">
              <caption>Media Creation Management SOP Class N-GET Attributes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Requirement Type (SCU/SCP)</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1C</para>
                    <para>(Required if expanded or replacement character set is used)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Execution Status</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2100,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Execution Status Info</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2100,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Total Number of Pieces of Media Created</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,000B)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failed SOP Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1198)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Storage Media Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(2200,000D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All Other Attributes of the Media Creation Management Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="S.3.2.4.2" status="5" xml:id="sect_S.3.2.4.2">
            <title>Service Class User</title>
            <para>The SCU shall specify in the N-GET request primitive the UID of the Media Creation Management SOP Instance for which Attribute Values are to be returned. The SCU shall be permitted to request that Attribute Values be returned for any Media Creation Management SOP Class Attribute specified in <xref linkend="sect_S.3.2.1.1" xrefstyle="select: label"/>. Additionally, values may be requested for optional Media Creation Management Module Attributes.</para>
            <para>The SCU shall specify the list of Media Creation Management SOP Class Attributes for which the Attribute Values are to be returned. The encoding rules for this list are specified in the N-GET request primitive specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <para>In an N-GET operation, Sequence Attributes can only be requested in their entirety, and only the top level Sequence Attribute can be included in the request.</para>
            <para>The SCU shall be capable of receiving all requested Attribute Values provided by the SCP in response to the N-GET indication primitive. The SCU may request Attribute values for optional Attributes that are not maintained by the SCP. In such a case the SCU shall function properly regardless of whether the SCP returns values for those Attributes or not. This Service Class Specification places no requirements on what the SCU shall do as a result of receiving this information.</para>
            <note>
              <para>In order to interpret accurately the character set used for Attribute values returned, it is recommended that the Attribute value for Specific Character Set (0008,0005) be requested in the N-GET request primitive.</para>
            </note>
          </section>
          <section label="S.3.2.4.3" status="5" xml:id="sect_S.3.2.4.3">
            <title>Service Class Provider</title>
            <para>This operation allows the SCU to request from the SCP, selected Attribute Values for a specific Media Creation Management SOP Instance. This operation shall be invoked through the use of the DIMSE N-GET Service used in conjunction with the appropriate Media Creation Management SOP Instance.</para>
            <para>The SCP shall return, via the N-GET response primitive, the N-GET Response Status Code applicable to the associated request. Contingent on the N-GET Response Status, the SCP shall return, via the N-GET Response Primitive, Attribute Values for all requested Attributes maintained by the SCP (see <xref linkend="table_S.3.2.4.1-1" xrefstyle="select: label"/>). The SCP shall not return Data Elements for optional Attributes that are not maintained by the SCP.</para>
            <para>The SCP shall return the entire content of a Sequence if a Sequence Attribute is requested.</para>
          </section>
          <section label="S.3.2.4.4" status="5" xml:id="sect_S.3.2.4.4">
            <title>Status Codes</title>
            <para>The status values that are specific for this SOP Class and DIMSE Service are defined in <xref linkend="table_S.3.2.4.4-1" xrefstyle="select: label"/>.</para>
            <para>See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for response status codes.</para>
            <table frame="box" label="S.3.2.4.4-1" rules="all" xml:id="table_S.3.2.4.4-1">
              <caption>Response Statuses</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Response Status Codes</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Warning</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Requested optional Attributes are not supported</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0001</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
      </section>
      <section label="S.3.3" status="3" xml:id="sect_S.3.3">
        <title>Media Creation Management SOP Class UID</title>
        <para>The Media Creation Management SOP Class shall be uniquely identified by the Media Creation Management SOP Class UID, which shall have the value "1.2.840.10008.5.1.1.33".</para>
      </section>
    </section>
    <section label="S.4" status="2" xml:id="sect_S.4">
      <title>Conformance Requirements</title>
      <para>Implementations claiming Standard SOP Class Conformance to the Media Creation Management SOP Class shall be conformant as described in this Section and shall include within their Conformance Statement information as described in this Section and sub-Sections.</para>
      <para>An implementation may claim conformance to this SOP Class as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
      <section label="S.4.1" status="3" xml:id="sect_S.4.1">
        <title>SCU Conformance</title>
        <para>An implementation that is conformant to this SOP Class as an SCU shall meet conformance requirements for</para>
        <itemizedlist>
          <listitem>
            <para>the operations and actions that it invokes</para>
          </listitem>
        </itemizedlist>
        <para>The mechanisms used by the SCU to transfer SOP Instances to the SCP using the Storage Service Class prior to initiating a request operation shall also be documented, and in particular the Transfer Syntaxes that may be proposed.</para>
        <section label="S.4.1.1" status="4" xml:id="sect_S.4.1.1">
          <title>Operations</title>
          <para>The SCU shall document in the Conformance Statement the actions and behavior that cause the SCU to generate an N-CREATE primitive (Create Media Creation Request), an N-ACTION primitive (Initiate Media Creation and Cancel Media Creation) or an N-GET primitive (Get Media Creation Result).</para>
          <para>The SCU shall specify the SOP Class UIDs for which it may request media creation.</para>
          <para>The SCU shall specify the Media Application Profiles for which it may request media creation.</para>
          <para>The SCU shall specify if it supports the optional Storage Media File-Set ID &amp; UID Attributes in the N-CREATE.</para>
          <para>The SCU shall specify if it supports the optional Icon Image Sequence Attributes in the N-CREATE.</para>
          <para>The SCU shall describe its use of expanded or replacement character sets, both in the N-CREATE, the N-GET and in its use of the Storage Service Class for composite instances.</para>
          <para>The SCU shall specify whether or not it retries failed requests.</para>
          <note>
            <para>This allows the reader of a Conformance Statement to determine whether or not human intervention will be needed in the event of transient failures, or whether the SCU may be able to recover automatically.</para>
          </note>
          <para>The Conformance Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/></para>
        </section>
      </section>
      <section label="S.4.2" status="3" xml:id="sect_S.4.2">
        <title>SCP Conformance</title>
        <para>An implementation that is conformant to this SOP Class as an SCP shall meet conformance requirements for</para>
        <itemizedlist>
          <listitem>
            <para>the operations and actions that it performs</para>
          </listitem>
        </itemizedlist>
        <para>The Storage Service Class mechanisms accepted by the SCP prior to receiving a request operation shall also be documented, and in particular the Transfer Syntaxes that may be accepted.</para>
        <section label="S.4.2.1" status="4" xml:id="sect_S.4.2.1">
          <title>Operations</title>
          <para>The SCP shall document in the Conformance Statement the behavior and actions of the SCP upon receiving the N-CREATE primitive (Create Media Creation Request), N-ACTION primitive (Initiate Media Creation and Cancel Media Creation) or the N-GET primitive (Get Media Creation Result).</para>
          <para>The SCP shall specify the SOP Class UIDs for which it will accept media creation requests.</para>
          <para>The SCP shall specify the Media Application Profiles for which it will accept media creation requests, and what default profiles it will use in the event that they are not specified by the SCU.</para>
          <note>
            <para>The forms of media that can be created are implicit in the list of Media Application Profiles supported, each of which is media-specific.</para>
          </note>
          <para>The SCP shall specify whether or not it supports creation of optional Icon Image Sequence Attributes in the DICOMDIR if none are supplied by the SCU.</para>
          <para>The SCP shall specify the manner of use of label information, and in particular which:</para>
          <itemizedlist>
            <listitem>
              <para>Attributes are extracted from the Composite Instances when so instructed</para>
            </listitem>
            <listitem>
              <para>barcode symbologies - if any - are supported</para>
            </listitem>
          </itemizedlist>
          <para>The SCP shall describe its use of expanded or replacement character sets, both in the N-CREATE, the N-GET and in its extraction of information from the Composite Instances for incorporation in the DICOMDIR and on the media label. The SCP shall describe its use of the Attributes both in the N-CREATE, and N-ACTION and the Composite Instances to create the media label.</para>
          <para>The SCP shall specify if and how it supports the following optional Attributes in the N-CREATE and N-ACTION :</para>
          <itemizedlist>
            <listitem>
              <para>Storage Media File-Set ID (0088,0130) &amp; Storage Media File-Set UID (0088,0140)</para>
            </listitem>
            <listitem>
              <para>Media Disposition (2200,0004)</para>
            </listitem>
            <listitem>
              <para>Priority (2000,0020)</para>
            </listitem>
            <listitem>
              <para>Preserve Composite Instances After Media Creation (2200,000A)</para>
            </listitem>
          </itemizedlist>
          <para>The SCP shall specify the duration of persistence of received Composite Instances after a request has been processed successfully or unsuccessfully.</para>
          <para>The SCP shall specify how long it will maintain:</para>
          <itemizedlist>
            <listitem>
              <para>the result of the creation of media after the request has succeeded or failed</para>
            </listitem>
            <listitem>
              <para>the Media Creation Management Instances whose status is IDLE.</para>
            </listitem>
          </itemizedlist>
          <para>The SCP shall specify the action taken when a permanent failure (e.g., a media writing failure) or a transient failure (e.g., no empty media available) occurs, and their relationship with the media creation request status transaction.</para>
          <note>
            <para>For example, how many times the SCP will retry writing a new piece of media before setting the Execution Status (2100,0020) to FAILURE, how many media creation requests the SCP is able to queue, the SCP behavior when the request queue, if any, is full.</para>
          </note>
          <para>The SCP shall specify if it is able to split a media creation request over more than one piece of media, if the file-set doesn't fit on one.</para>
          <para>The SCP shall specify if it is able to add to the created media Non-DICOM objects (e.g., html files, JPEG images), how these objects are organized, and how it interprets the Include Non-DICOM Objects (2200,0008) Attribute.</para>
          <para>The SCP shall specify if it is able to add to the created media DICOM display applications, and how it interprets the Include Display Application (2200,0009) Attribute.</para>
          <para>The Conformance Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="T" status="1" xml:id="chapter_T">
    <title>Hanging Protocol Storage Service Class</title>
    <section label="T.1" status="2" xml:id="sect_T.1">
      <title>Overview</title>
      <section label="T.1.1" status="3" xml:id="sect_T.1.1">
        <title>Scope</title>
        <para>The Hanging Protocol Storage Service Class defines an application-level class-of-service that allows one DICOM AE to send a Hanging Protocol SOP Instance to another DICOM AE.</para>
      </section>
      <section label="T.1.2" status="3" xml:id="sect_T.1.2">
        <title>Service Definition</title>
        <para>The Hanging Protocol Storage Service Class consists of a single SOP Class: the Hanging Protocol Storage SOP Class. It uses the Hanging Protocol IOD that represents the Hanging Protocol IE. This IOD is defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. The Hanging Protocol Storage Service Class uses the C-STORE DIMSE Service specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. A successful completion of the C-STORE has the following semantics:</para>
        <itemizedlist>
          <listitem>
            <para>Both the SCU and the SCP support Hanging Protocol information.</para>
          </listitem>
          <listitem>
            <para>The Hanging Protocol information is stored in some medium.</para>
          </listitem>
          <listitem>
            <para>For some time frame, the Hanging Protocol information may be accessed.</para>
          </listitem>
        </itemizedlist>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>Support for the Hanging Protocol Storage SOP Class does not imply support for the Hanging Protocol Query/Retrieve Service Class.</para>
            </listitem>
            <listitem>
              <para>The duration of the storage is also implementation dependent, but is described in the Conformance Statement of the SCP.</para>
            </listitem>
            <listitem>
              <para>The Hanging Protocol Storage SOP Class is intended to be used in a variety of environments: e.g., for workstations to transfer Hanging Protocol SOP Instances to other workstations or archives, for archives to transfer Hanging Protocol SOP Instances to workstations, etc.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
    </section>
    <section label="T.2" status="2" xml:id="sect_T.2">
      <title>Association Negotiation</title>
      <para>The Association negotiation rules as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> apply to the SOP Class of this Service Class. No SOP Class specific application information is used.</para>
    </section>
    <section label="T.3" status="2" xml:id="sect_T.3">
      <title>Conformance Overview</title>
      <para>The application-level services addressed by this Service Class definition are specified in a single SOP Class: Hanging Protocol Storage SOP Class.</para>
    </section>
    <section label="T.4" status="2" xml:id="sect_T.4">
      <title>Hanging Protocol Storage SOP Class</title>
      <para>This Section defines the SCU and SCP behavior for the Hanging Protocol Storage SOP Class. The C-STORE DIMSE-C Service shall be the mechanism used to transfer Hanging Protocol SOP Instances between peer DICOM AEs as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      <section label="T.4.1" status="3" xml:id="sect_T.4.1">
        <title>Service Class User</title>
        <para>The DICOM AE that claims conformance to this SOP Class as an SCU shall be capable of sending a Hanging Protocol SOP Instance that meets the requirements of the Hanging Protocol IOD. It shall be invoked by the SCU through the use of the DIMSE C-STORE request used in conjunction with this SOP Class.</para>
        <para>The SCU shall include a Data Set with the Attributes as defined in the Hanging Protocol IOD in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
        <para>The SCU shall recognize the status of the C-STORE service and take appropriate action based on the success or failure of the service. This SOP Class places no further requirements on what the SCU shall do other than that it shall distinguish between successful and failed C-STORE responses. This behavior shall be documented as part of the SOP Class Conformance Statement.</para>
      </section>
      <section label="T.4.2" status="3" xml:id="sect_T.4.2">
        <title>Service Class Provider</title>
        <para>The DICOM AE that claims conformance to this SOP Class as an SCP shall receive a Hanging Protocol SOP Instance through the use of the DIMSE C-STORE service used in conjunction with this SOP Class.</para>
        <para>The SCP shall store and provide access to all Type 1, Type 2, and Type 3 Attributes defined in the Hanging Protocol IOD, as well as any Standard Extended Attributes (including Private Attributes) included in the SOP Instance. The SCP may, but is not required to validate that the Attributes of the Hanging Protocol SOP Instance meet the requirements of the Hanging Protocol IOD. The SCP shall not modify the values of any Attributes in the Hanging Protocol SOP Instance without assigning a new SOP Instance UID.</para>
        <para>If a display device acting as an SCP applies a Hanging Protocol to a set of images, all mandatory Hanging Protocol and presentation intent Attributes shall be applied.</para>
        <para>The SCP shall return, via the C-STORE response primitive, the Response Status Code applicable to the associated request. By performing this service successfully, the SCP indicates that the Hanging Protocol SOP Instance has been successfully stored. <xref linkend="table_T.4-1" xrefstyle="select: label"/> shows the response status values. General status code values and fields related to status code values are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <table frame="box" label="T.4-1" rules="all" xml:id="table_T.4-1">
          <caption>C-STORE Response Status Values</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Service Status</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Further Meaning</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Status Codes</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Related Fields</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="3">
                <para>Failure</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Refused: Out of Resources</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A700</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Error: Data Set Does Not Match SOP Class</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A900</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0901)</para>
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Error: Cannot Understand</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C000</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0901)</para>
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Success</para>
              </td>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="center" colspan="1" rowspan="1">
                <para>0000</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>None</para>
              </td>
            </tr>
          </tbody>
        </table>
        <note>
          <para>Status Codes are returned in DIMSE response messages (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>). The code values stated in column "Status Codes" are returned in Status Command Element (0000,0900).</para>
        </note>
      </section>
      <section label="T.4.3" status="3" xml:id="sect_T.4.3">
        <title>Hanging Protocol Storage SOP Class UID</title>
        <para>The Hanging Protocol Storage SOP Class shall be uniquely identified by the Hanging Protocol Storage SOP Class UID, which shall have a value "1.2.840.10008.5.1.4.38.1".</para>
      </section>
      <section label="T.4.4" status="3" xml:id="sect_T.4.4">
        <title>Conformance Statement Requirements</title>
        <para>An implementation may conform to the Hanging Protocol Storage SOP Class as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <section label="T.4.4.1" status="4" xml:id="sect_T.4.4.1">
          <title>SCU Conformance Requirements</title>
          <para>An implementation that conforms to the Hanging Protocol Storage SOP Class as an SCU that is a creator of Hanging Protocol SOP Instances shall state in its Conformance Statement:</para>
          <itemizedlist>
            <listitem>
              <para>The manner in which the values of the Hanging Protocol IOD Attributes are derived from displayed images, layouts, operator intervention or defaults.</para>
            </listitem>
            <listitem>
              <para>Any Private Attributes that are used as the value of Selector Attribute (0072,0026) in the Image Set Selector Sequence, Filter Operations Sequence or Sorting Operations Sequence.</para>
            </listitem>
            <listitem>
              <para>The optional Attributes that may be included in a Hanging Protocol SOP Instance.</para>
            </listitem>
            <listitem>
              <para>The behavior of the SCU in the case of a successful C-STORE response status.</para>
            </listitem>
            <listitem>
              <para>The behavior of the SCU in each case of a failure C-STORE response status.</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="T.4.4.2" status="4" xml:id="sect_T.4.4.2">
          <title>SCP Conformance Requirements</title>
          <para>An implementation that conforms to the Hanging Protocol Storage SOP Class as an SCP that interprets Hanging Protocol SOP Instances for display shall state in its Conformance Statement:</para>
          <itemizedlist>
            <listitem>
              <para>The range of display environments that the SCP will support (e.g., number of screens, size of screens, overlapping image boxes).</para>
            </listitem>
            <listitem>
              <para>The optional Attributes of the Hanging Protocol IOD that it is capable of interpreting and those that are not supported.</para>
            </listitem>
            <listitem>
              <para>Description of application behavior when the value of Partial Data Display Handling (0072,0208) is ADAPT_LAYOUT or zero length.</para>
            </listitem>
            <listitem>
              <para>Description of application behavior when the display environment of the Hanging Protocol Instance differs from the display environment of the application, with respect to preserving layout versus spatial resolution.</para>
            </listitem>
            <listitem>
              <para>The Image Storage SOP Classes for which the Hanging Protocol Storage SOP Class is supported</para>
            </listitem>
          </itemizedlist>
          <para>An implementation that conforms to the Hanging Protocol Storage SOP Class as an SCP shall state in its Conformance Statement:</para>
          <itemizedlist>
            <listitem>
              <para>The behavior of the SCP in the case of a successful C-STORE operation, including the access method for a stored Hanging Protocol SOP Instance, and the duration of the storage.</para>
            </listitem>
            <listitem>
              <para>The meaning of each case of a failure C-STORE response status, as well as appropriate recovery action.</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="U" status="1" xml:id="chapter_U">
    <title>Hanging Protocol Query/Retrieve Service Class</title>
    <section label="U.1" status="2" xml:id="sect_U.1">
      <title>Overview</title>
      <section label="U.1.1" status="3" xml:id="sect_U.1.1">
        <title>Scope</title>
        <para>The Hanging Protocol Query/Retrieve Service Class defines an application-level class-of-service that facilitates access to Hanging Protocol composite objects. It provides query and retrieve/transfer capabilities similar to the Basic Worklist Management Service Class and Query/Retrieve Service Class.</para>
      </section>
      <section label="U.1.2" status="3" xml:id="sect_U.1.2">
        <title>Conventions</title>
        <para>See Conventions for the Basic Worklist Management Service (K.1.2).</para>
      </section>
      <section label="U.1.3" status="3" xml:id="sect_U.1.3">
        <title>Query/Retrieve Information Model</title>
        <para>In order to serve as an SCP of the Hanging Protocol Query/Retrieve Service Class, a DICOM AE possesses information about the Attributes of a number of Hanging Protocol composite SOP Instances. The information is organized into a Hanging Protocol Information Model.</para>
      </section>
      <section label="U.1.4" status="3" xml:id="sect_U.1.4">
        <title>Service Definition</title>
        <para>Two peer DICOM AEs implement a SOP Class of the Hanging Protocol Query/Retrieve Service Class with one serving in the SCU role and one serving in the SCP role. SOP Classes of the Hanging Protocol Query/Retrieve Service Class are implemented using the DIMSE-C C-FIND, C-MOVE and C-GET services as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <para>The semantics of the C-FIND and C-GET services are the same as those defined in the Service Definition of the Basic Worklist Management Service Class.</para>
        <para>The semantics of the C-MOVE service are the same as those defined in the Service Definition of the Query/Retrieve Service Class, with the exception that there is only one level of retrieval.</para>
      </section>
    </section>
    <section label="U.2" status="2" xml:id="sect_U.2">
      <title>Hanging Protocol Information Model Definition</title>
      <para>The Hanging Protocol Information Model is identified by the SOP Class negotiated at Association establishment time. The SOP Class is composed of both an Information Model and a DIMSE-C Service Group.</para>
      <para>The Hanging Protocol Information Model is defined, with the Entity-Relationship Model Definition and Key Attributes Definition analogous to those defined in the Worklist Information Model Definition of the Basic Worklist Management Service.</para>
    </section>
    <section label="U.3" status="2" xml:id="sect_U.3">
      <title>Hanging Protocol Information Model</title>
      <para>The Hanging Protocol Information Model is based upon a one level entity:</para>
      <itemizedlist>
        <listitem>
          <para>Hanging Protocol object instance</para>
        </listitem>
      </itemizedlist>
      <para>The Hanging Protocol object instance contains Attributes associated with the Hanging Protocol object IE of the Composite IODs as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
    </section>
    <section label="U.4" status="2" xml:id="sect_U.4">
      <title>DIMSE-C Service Groups</title>
      <section label="U.4.1" status="3" xml:id="sect_U.4.1">
        <title>C-FIND Operation</title>
        <para>See the C-FIND Operation definition for the Basic Worklist Management Service Class (K.4.1), and substitute "Hanging Protocol" for "Worklist. The "Worklist" Search Method shall be used.</para>
        <para>The SOP Class UID identifies the Hanging Protocol Information Model against which the C-FIND is to be performed. The Key Attributes and values allowable for the query are defined in the SOP Class definition for the Hanging Protocol Information Model.</para>
      </section>
      <section label="U.4.2" status="3" xml:id="sect_U.4.2">
        <title>C-MOVE Operation</title>
        <para>See the C-MOVE Operation definition for the Query/Retrieve Service Class (C.4.2). No Extended Behavior or Relational-Retrieve is defined for the Hanging Protocol Query/Retrieve Service Class.</para>
        <para>Query/Retrieve Level (0008,0052) is not relevant to the Hanging Protocol Query/Retrieve Service Class, and therefore shall not be present in the Identifier. The only Unique Key Attribute of the Identifier shall be SOP Instance UID (0008,0018). The SCU shall supply one UID or a list of UIDs.</para>
        <note>
          <para>More than one entity may be retrieved, using List of UID matching.</para>
        </note>
      </section>
      <section label="U.4.3" status="3" xml:id="sect_U.4.3">
        <title>C-GET Operation</title>
        <para>See the C-GET Operation definition for the Query/Retrieve Service Class (C.4.3). No Extended Behavior or Relational-Retrieve is defined for the Hanging Protocol Query/Retrieve Service Class.</para>
        <para>Query/Retrieve Level (0008,0052) is not relevant to the Hanging Protocol Query/Retrieve Service Class, and therefore shall not be present in the Identifier. The only Unique Key Attribute of the Identifier shall be SOP Instance UID (0008,0018). The SCU shall supply one UID or a list of UIDs.</para>
        <note>
          <para>More than one entity may be retrieved, using List of UID matching.</para>
        </note>
      </section>
    </section>
    <section label="U.5" status="2" xml:id="sect_U.5">
      <title>Association Negotiation</title>
      <para>See the Association Negotiation definition for the Basic Worklist Management Service Class (K.5).</para>
    </section>
    <section label="U.6" status="2" xml:id="sect_U.6">
      <title>SOP Class Definitions</title>
      <section label="U.6.1" status="3" xml:id="sect_U.6.1">
        <title>Hanging Protocol Information Model</title>
        <section label="U.6.1.1" status="4" xml:id="sect_U.6.1.1">
          <title>E/R Model</title>
          <para>The Hanging Protocol Information Model consists of a single entity. In response to a given C-FIND request, the SCP shall send one C-FIND response per matching Hanging Protocol Instance.</para>
          <para>
            <figure label="U.6-1" pgwide="1" xml:id="figure_U.6-1">
              <title>Hanging Protocol Information Model E/R Diagram</title>
              <mediaobject>
                <imageobject>
                  <imagedata fileref="figures/PS3.4_U.6-1.svg"/>
                  <!--<imagedata fileref="part04_fromword_files/image036.png"/>-->
                </imageobject>
              </mediaobject>
            </figure>
          </para>
        </section>
        <section label="U.6.1.2" status="4" xml:id="sect_U.6.1.2">
          <title>Hanging Protocol Attributes</title>
          <para><xref linkend="table_U.6-1" xrefstyle="select: label"/> defines the Attributes of the Hanging Protocol Information Model:</para>
          <table frame="box" label="U.6-1" rules="all" xml:id="table_U.6-1">
            <caption>Attributes for the Hanging Protocol Information Model</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Description / Module</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Tag</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Matching Key Type</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Return Key Type</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Remark / Matching Type</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="5" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Common</emphasis>
                  </para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Specific Character Set</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0005)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute is required if expanded or replacement character sets are used. See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> and <xref linkend="sect_C.4.1.1" xrefstyle="select: label"/>.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>SOP Class UID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0016)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>SOP Instance UID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0018)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="5" rowspan="1">
                  <para>
                    <emphasis role="bold">Hanging Protocol Definition</emphasis>
                  </para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol Name</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0002)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value, Wild Card or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol Description</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0004)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol Level</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0006)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol Creator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0008)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol Creation DateTime</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,000A)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol Definition Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,000C)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Modality</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0060)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Anatomic Region Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,2218)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt; Code Value</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt; Coding Scheme Designator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Coding Scheme Version</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0103)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Code Meaning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Laterality</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0020,0060)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt; Procedure Code Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,1032)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt; Code Value</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt; Coding Scheme Designator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Coding Scheme Version</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0103)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Code Meaning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Reason for Requested Procedure Code Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0040,100A)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt; Code Value</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt; Coding Scheme Designator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Coding Scheme Version</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0103)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Code Meaning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Number of Priors Referenced</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0014)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol User Identification Code Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,000E)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Code Value</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Coding Scheme Designator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Coding Scheme Version</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0103)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Code Meaning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol User Group Name</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0010)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="5" rowspan="1">
                  <para>
                    <emphasis role="bold">Hanging Protocol Environment</emphasis>
                  </para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Number of Screens</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Nominal Screen Definition Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Number of Vertical Pixels</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Number of Horizontal Pixels</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0106)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Display Environment Spatial Position</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,0108)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Screen Minimum Grayscale Bit Depth</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,010A)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Required if Screen Minimum Color Bit Depth (0072,010C) is not present.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Screen Minimum Color Bit Depth</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,010C)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Required if Screen Minimum Grayscale Bit Depth (0072,010A) is not present.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Application Maximum Repaint Time</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0072,010E)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
            </tbody>
          </table>
        </section>
        <section label="U.6.1.3" status="4" xml:id="sect_U.6.1.3">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to one of the Hanging Protocol Information Model SOP Classes as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="U.6.1.3.1" status="5" xml:id="sect_U.6.1.3.1">
            <title>SCU Conformance</title>
            <section label="U.6.1.3.1.1" status="6" xml:id="sect_U.6.1.3.1.1">
              <title>C-FIND SCU Conformance</title>
              <para>An implementation that conforms to one of the Hanging Protocol Information Model SOP Classes shall support queries against the Hanging Protocol Information Model using the C-FIND SCU Behavior described for the Basic Worklist Management Service Class (see <xref linkend="sect_K.4.1.2" xrefstyle="select: label"/> and <xref linkend="sect_U.4.1" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to one of the Hanging Protocol Information Model SOP Classes as an SCU shall state in its Conformance Statement whether it requests Type 3 Return Key Attributes, and shall list these Optional Return Key Attributes.</para>
              <para>An implementation that conforms to one of the Hanging Protocol Information Model SOP Classes as an SCU shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when encoding queries and interpreting responses.</para>
            </section>
            <section label="U.6.1.3.1.2" status="6" xml:id="sect_U.6.1.3.1.2">
              <title>C-MOVE SCU Conformance</title>
              <para>An implementation that conforms to one of the Hanging Protocol Information Model SOP Classes as an SCU shall support transfers against the Hanging Protocol Information Model using the C-MOVE SCU baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.2.2.1" xrefstyle="select: label"/> and <xref linkend="sect_U.4.2" xrefstyle="select: label"/>).</para>
            </section>
            <section label="U.6.1.3.1.3" status="6" xml:id="sect_U.6.1.3.1.3">
              <title>C-GET SCU Conformance</title>
              <para>An implementation that conforms to the Hanging Protocol Information Model - GET SOP Class as an SCU shall support transfers against the Hanging Protocol Information Model using the C-GET SCU baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.3.2.1" xrefstyle="select: label"/> and <xref linkend="sect_U.4.3" xrefstyle="select: label"/>).</para>
            </section>
          </section>
          <section label="U.6.1.3.2" status="5" xml:id="sect_U.6.1.3.2">
            <title>SCP Conformance</title>
            <section label="U.6.1.3.2.1" status="6" xml:id="sect_U.6.1.3.2.1">
              <title>C-FIND SCP Conformance</title>
              <para>An implementation that conforms to one of the Hanging Protocol Information Model SOP Classes as an SCP shall support queries against the Hanging Protocol Information Model using the C-FIND SCP Behavior described for the Basic Worklist Management Service Class (see <xref linkend="sect_K.4.1.3" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to one of the Hanging Protocol Information Model SOP Classes as an SCP shall state in its Conformance Statement whether it supports Type 3 Return Key Attributes, and shall list these Optional Return Key Attributes.</para>
              <para>An implementation that conforms to one of the Hanging Protocol Information Model SOP Classes as an SCP shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when interpreting queries, performing matching and encoding responses.</para>
            </section>
            <section label="U.6.1.3.2.2" status="6" xml:id="sect_U.6.1.3.2.2">
              <title>C-MOVE SCP Conformance</title>
              <para>An implementation that conforms to one of the Hanging Protocol Information Model SOP Classes as an SCP shall support transfers against the Hanging Protocol Information Model using the C-MOVE SCP baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.2.3.1" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to one of the Hanging Protocol Information Model SOP Classes as an SCP, which generates transfers using the C-MOVE operation, shall state in its Conformance Statement the Hanging Protocol Storage Service Class SOP Class under which it shall support the C-STORE sub-operations generated by the C-MOVE.</para>
            </section>
            <section label="U.6.1.3.2.3" status="6" xml:id="sect_U.6.1.3.2.3">
              <title>C-GET SCP Conformance</title>
              <para>An implementation that conforms to the Hanging Protocol Information Model - GET SOP Class as an SCP shall support transfers against the Hanging Protocol Information Model using the C-GET SCP baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.3.3.1" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to the Hanging Protocol Information Model - GET SOP Class as an SCP, which generates transfers using the C-GET operation, shall state in its Conformance Statement the Hanging Protocol Storage Service Class SOP Class under which it will support the C-STORE sub-operations generated by the C-GET.</para>
            </section>
          </section>
        </section>
        <section label="U.6.1.4" status="4" xml:id="sect_U.6.1.4">
          <title>SOP Classes</title>
          <para>The SOP Classes of the Hanging Protocol Information Model in the Hanging Protocol Query/Retrieve Service Class identify the Hanging Protocol Information Model, and the DIMSE-C operations supported. The following Standard SOP Classes are identified:</para>
          <table frame="box" label="U.6.1.4-1" rules="all" xml:id="table_U.6.1.4-1">
            <caption>Hanging Protocol SOP Classes</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class UID</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol Information Model - FIND</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.38.2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol Information Model - MOVE</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.38.3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Hanging Protocol Information Model - GET</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.38.4</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="V" status="1" xml:id="chapter_V">
    <title>Substance Administration Query Service Class (Normative)</title>
    <section label="V.1" status="2" xml:id="sect_V.1">
      <title>Overview</title>
      <section label="V.1.1" status="3" xml:id="sect_V.1.1">
        <title>Scope</title>
        <para>The Substance Administration Query Service Class defines an application-level class-of-service that facilitates obtaining detailed information about substances or devices used in imaging, image-guided treatment, and related procedures. It also facilitates obtaining approval for the administration of a specific contrast agent or drug to a specific patient.</para>
        <para>This Service Class is intended as part of a larger workflow that addresses patient safety in the imaging environment. This Service addresses only the communication protocol that allows a point of care device (imaging modality) to interrogate an SCP Application for information about an administered substance, or for verification of appropriateness of the substance for the patient. The SCP Application uses patient safety related data, such as allergies, current medications, appropriate dosages, patient condition indicated by lab results, etc., to respond to the queries; however, the mechanism of such use is beyond the scope of this Standard. How the point of care device uses the responses to the queries, e.g., by display to a user, or by locking of certain device functions, is also beyond the scope of this Standard.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>The SCP of this Service Class is not necessarily a clinical decision support (CDS) system, but may be a gateway system between this DICOM Service and an HL7 or proprietary interface of a CDS system. Such implementation design is beyond the scope of the DICOM standard.</para>
            </listitem>
            <listitem>
              <para>The Service will result in a Query response containing zero or one items. However, to facilitate implementation, the Service uses the general query mechanism supporting multiple item responses, as used in other DICOM query service classes.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
      <section label="V.1.2" status="3" xml:id="sect_V.1.2">
        <title>Conventions</title>
        <para>Key Attributes serve two purposes; they may be used as Matching Key Attributes and Return Key Attributes. Matching Key Attributes may be used for matching (criteria to be used in the C-FIND request to determine whether an entity matches the query). Return Key Attributes may be used to specify desired return Attributes (what elements in addition to the Matching Key Attributes have to be returned in the C-FIND response).</para>
        <para>Matching Key Attributes may be of Type "required" (R) or "optional" (O). Return Key Attributes may be of Type 1, 1C, 2, 2C, 3 as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="V.1.3" status="3" xml:id="sect_V.1.3">
        <title>Substance Administration Query Information Model</title>
        <para>In order to serve as a Service Class Provider (SCP) of the Substance Administration Query Service Class, a DICOM Application Entity (AE) must be able to return information about the Attributes of a substance, device, or a substance administration act. This information is organized into well defined Substance Administration Query Information Models.</para>
        <para>A specific SOP Class of the Substance Administration Query Service Class consists of an informative Overview, an Information Model Definition and a DIMSE-C Service Group. In this Service Class, the Information Model plays a role similar to an Information Object Definition (IOD) of other DICOM Service Classes.</para>
      </section>
      <section label="V.1.4" status="3" xml:id="sect_V.1.4">
        <title>Service Definition</title>
        <para>Two peer DICOM AEs implement a SOP Class of the Substance Administration Query Service Class with one serving in the SCU role and one serving in the SCP role. SOP Classes of the Substance Administration Query Service Class are implemented using the DIMSE-C C-FIND service as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <para>Only a baseline behavior of the DIMSE-C C-FIND is used in the Service Class. Extended negotiation is not used.</para>
        <para>The following description of the DIMSE-C C-FIND service provides a brief overview of the SCU/SCP semantics.</para>
        <para>A C-FIND service conveys the following semantics:</para>
        <itemizedlist>
          <listitem>
            <para>The SCU requests that the SCP perform a match for the Matching Keys and return values for the Return Keys that have been specified in the Identifier of the request, against the information that the SCP possesses relating to the Information Model specified in the SOP Class.</para>
          </listitem>
        </itemizedlist>
        <note>
          <para>In this Annex, the term "Identifier" refers to the Identifier service parameter of the C-FIND service as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        </note>
        <itemizedlist>
          <listitem>
            <para>The SCP generates at most one C-FIND response for a match with an Identifier containing the values of all Matching Key Attributes and all known Return Key Attributes requested. This response shall contain a status of Pending.</para>
          </listitem>
          <listitem>
            <para>When the process of matching is complete, with zero or one match, a C-FIND response is sent with a status of Success and no Identifier.</para>
          </listitem>
          <listitem>
            <para>A Failure response to a C-FIND request indicates that the SCP is unable to process the request.</para>
          </listitem>
          <listitem>
            <para>The SCU may cancel the C-FIND service by issuing a C-CANCEL-FIND request at any time during the processing of the C-FIND service. The SCP will interrupt all matching and return a status of Canceled.</para>
          </listitem>
        </itemizedlist>
        <note>
          <para>The SCU needs to be prepared to receive C-FIND responses sent by the SCP until the SCP finally processed the C-CANCEL-FIND request.</para>
        </note>
      </section>
    </section>
    <section label="V.2" status="2" xml:id="sect_V.2">
      <title>Substance Administration Query Information Model Definition</title>
      <para>The Substance Administration Query Information Model is identified by the SOP Class negotiated at Association establishment time. The SOP Class is composed of both an Information Model and a DIMSE-C Service Group.</para>
      <para>Information Model Definitions for standard SOP Classes of the Substance Administration Query Service Class are defined in this Annex. A Substance Administration Query Information Model Definition contains:</para>
      <itemizedlist>
        <listitem>
          <para>an Entity-Relationship Model Definition</para>
        </listitem>
        <listitem>
          <para>a Key Attributes Definition.</para>
        </listitem>
      </itemizedlist>
      <section label="V.2.1" status="3" xml:id="sect_V.2.1">
        <title>Entity-Relationship Model Definition</title>
        <para>Substance Administration Query Information Models consist of a single level that includes all Matching Key Attributes and all Return Key Attributes that may be sent from the SCU to the SCP in the request, and whose values are expected to be returned from the SCP to the SCU in the response (or Query items). The Matching Key Attribute values in the request specify the Query items that are to be returned in the response. All Key Attributes (the Matching Key Attributes and the Return Key Attributes) in the request determine which Attribute values are returned in the response for that Query.</para>
      </section>
      <section label="V.2.2" status="3" xml:id="sect_V.2.2">
        <title>Attributes Definition</title>
        <para>Attributes are defined for each entity in the internal Entity-Relationship Model. An Identifier in a C-FIND request shall contain values to be matched against the Attributes of the Entities in a Substance Administration Query Information Model. For any Query request, the set of entities for which Attributes are returned shall be determined by the set of Matching and Return Key Attributes specified in the Identifier.</para>
        <section label="V.2.2.1" status="4" xml:id="sect_V.2.2.1">
          <title>Attribute Types</title>
          <para>All Attributes of entities in a Substance Administration Query Information Model shall be specified both as a Matching Key Attribute (either required or optional) and as a Return Key Attribute.</para>
          <section label="V.2.2.1.1" status="5" xml:id="sect_V.2.2.1.1">
            <title>Matching Key Attributes</title>
            <para>The Matching Key Attributes are Keys, which select Query items to be included in a requested Query.</para>
            <section label="V.2.2.1.1.1" status="6" xml:id="sect_V.2.2.1.1.1">
              <title>Required Matching Key Attributes</title>
              <para>A Substance Administration Query Service SCP shall support matching based on values of all Required Matching Key Attributes of the C-FIND request.</para>
            </section>
            <section label="V.2.2.1.1.2" status="6" xml:id="sect_V.2.2.1.1.2">
              <title>Optional Matching Key Attributes</title>
              <para>In the Substance Administration Query Information Model, a set of Attributes may be defined as Optional Matching Key Attributes. Optional Matching Key Attributes contained in the Identifier of a C-FIND request may induce two different types of behavior depending on support for matching by the SCP. If the SCP</para>
              <itemizedlist>
                <listitem>
                  <para>does not support matching on the Optional Matching Key Attribute, then the Optional Matching Key Attribute shall be ignored for matching but shall be processed in the same manner as a Return Key Attribute.</para>
                </listitem>
                <listitem>
                  <para>supports matching of the Optional Matching Key Attribute, then the Optional Matching Key Attribute shall be processed in the same manner as a Required Matching Key.</para>
                </listitem>
              </itemizedlist>
              <note>
                <orderedlist numeration="arabic">
                  <listitem>
                    <para>The Conformance Statement of the SCP lists the Optional Matching Key Attributes that are supported for matching.</para>
                  </listitem>
                  <listitem>
                    <para>An SCU can not expect the SCP to support a match on an Optional Matching Key.</para>
                  </listitem>
                </orderedlist>
              </note>
            </section>
          </section>
          <section label="V.2.2.1.2" status="5" xml:id="sect_V.2.2.1.2">
            <title>Return Key Attributes</title>
            <para>The values of Return Key Attributes to be retrieved with the Query are specified with zero-length (universal matching) in the C-FIND request. SCPs shall support Return Key Attributes defined by a Substance Administration Query Information Model according to the Data Element Type (1, 1C, 2, 2C, 3) as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
            <para>Every Matching Key Attribute shall also be considered as a Return Key Attribute. Therefore the C-FIND response shall contain, in addition to the values of the requested Return Key Attributes, the values of the requested Matching Key Attributes.</para>
            <note>
              <orderedlist>
                <listitem>
                  <para>The Conformance Statement of the SCP lists the Return Key Attributes of Type 3 that are supported.</para>
                </listitem>
                <listitem>
                  <para>An SCU may choose to supply any subset of Return Key Attributes.</para>
                </listitem>
                <listitem>
                  <para>An SCU can not expect to receive any Type 3 Return Key Attributes.</para>
                </listitem>
                <listitem>
                  <para>Return Key Attributes with VR of SQ may be specified either with zero-length, or with a zero-length item in the sequence.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
        </section>
        <section label="V.2.2.2" status="4" xml:id="sect_V.2.2.2">
          <title>Attribute Matching</title>
          <para>The following types of matching, which are defined by the Query/Retrieve Service Class in <xref linkend="chapter_C" xrefstyle="template: Annex %n"/>, may be performed on Matching Key Attributes in the Substance Administration Query Service Class. Different Matching Key Attributes may be subject for different matching types. The Substance Administration Query Information Model defines the type of matching for each Required Matching Key Attribute. The Conformance Statement of the SCP shall define the type of matching for each Optional Matching Key Attribute. The types of matching are:</para>
          <itemizedlist>
            <listitem>
              <para>Single Value Matching</para>
            </listitem>
            <listitem>
              <para>Sequence Matching</para>
            </listitem>
          </itemizedlist>
          <para>The following type of matching, which is defined by the Query/Retrieve Service Class in <xref linkend="chapter_C" xrefstyle="template: Annex %n"/> of this Part, shall be performed on Return Key Attributes in the Substance Administration Query Service Class.</para>
          <itemizedlist>
            <listitem>
              <para>Universal Matching</para>
            </listitem>
          </itemizedlist>
          <para>See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> and subsections for specific rules governing of Matching Key Attribute encoding for and performing of different types of matching.</para>
          <para>The Specific Character Set (0008,0005) Attribute may be present in the Identifier but is never matched, i.e., it is not considered a Matching Key Attribute. See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> for details.</para>
        </section>
      </section>
    </section>
    <section label="V.3" status="2" xml:id="sect_V.3">
      <title>Query Information Models</title>
      <para>Each Substance Administration Query Information Model is associated with one SOP Class. The following Substance Administration Query Information Models are defined:</para>
      <itemizedlist>
        <listitem>
          <para>Product Characteristics Query Information Model</para>
        </listitem>
        <listitem>
          <para>Substance Approval Query Information Model</para>
        </listitem>
      </itemizedlist>
    </section>
    <section label="V.4" status="2" xml:id="sect_V.4">
      <title>DIMSE-C Service Group</title>
      <para>One DIMSE-C Service is used in the construction of SOP Classes of the Substance Administration Query Service Class. The following DIMSE-C operation is used.</para>
      <itemizedlist>
        <listitem>
          <para>C-FIND</para>
        </listitem>
      </itemizedlist>
      <section label="V.4.1" status="3" xml:id="sect_V.4.1">
        <title>C-FIND Operation</title>
        <para>SCPs of SOP Classes of the Substance Administration Query Service Class are capable of processing queries using the C-FIND operation as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. The C-FIND operation is the mechanism by which queries are performed. Matches against the keys present in the Identifier are returned in C-FIND responses.</para>
        <section label="V.4.1.1" status="4" xml:id="sect_V.4.1.1">
          <title>C-FIND Service Parameters</title>
          <section label="V.4.1.1.1" status="5" xml:id="sect_V.4.1.1.1">
            <title>SOP Class UID</title>
            <para>The SOP Class UID identifies the Substance Administration Query Information Model against which the C-FIND is to be performed. Support for the SOP Class UID is implied by the Abstract Syntax UID of the Presentation Context used by this C-FIND operation.</para>
          </section>
          <section label="V.4.1.1.2" status="5" xml:id="sect_V.4.1.1.2">
            <title>Priority</title>
            <para>The Priority Attribute defines the requested priority of the C-FIND operation with respect to other DIMSE operations being performed by the same SCP.</para>
            <para>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP.</para>
          </section>
          <section label="V.4.1.1.3" status="5" xml:id="sect_V.4.1.1.3">
            <title>Identifier</title>
            <para>Both the C-FIND request and response contain an Identifier encoded as a Data Set (see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
            <section label="V.4.1.1.3.1" status="6" xml:id="sect_V.4.1.1.3.1">
              <title>Request Identifier Structure</title>
              <para>An Identifier in a C-FIND request shall contain</para>
              <itemizedlist>
                <listitem>
                  <para>Key Attributes values to be matched against the values of Attributes specified in that SOP Class.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Request Identifier. It shall not be included otherwise.</para>
                </listitem>
              </itemizedlist>
              <note>
                <para>This means that Specific Character Set (0008,0005) is included if the SCU supports expanded or replacement character sets in the context of this service. It will not be included if expanded or replacement character sets are not supported by the SCU.</para>
              </note>
              <para>The Key Attributes and values allowable for the query shall be defined in the SOP Class definition for the corresponding Substance Administration Query Information Model.</para>
            </section>
            <section label="V.4.1.1.3.2" status="6" xml:id="sect_V.4.1.1.3.2">
              <title>Response Identifier Structure</title>
              <para>The C-FIND response shall not contain Attributes that were not in the request or specified in this section.</para>
              <para>An Identifier in a C-FIND response shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Key Attributes with values corresponding to Key Attributes contained in the Identifier of the request (Key Attributes as defined in <xref linkend="sect_V.2.2.1" xrefstyle="select: label"/>.)</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Response Identifier. It shall not be included otherwise. The C-FIND SCP is not required to return responses in the Specific Character Set requested by the SCU if that character set is not supported by the SCP. The SCP may return responses with a different Specific Character Set.</para>
                </listitem>
              </itemizedlist>
              <note>
                <para>This means that Specific Character Set (0008,0005) is included if the SCP supports expanded or replacement character sets in the context of this service. It will not be included if expanded or replacement character sets are not supported by the SCP.</para>
              </note>
              <itemizedlist>
                <listitem>
                  <para>Conditionally, the Attribute HL7 Structured Document Reference Sequence (0040,A390) and its subsidiary Sequence Items as specified in the SOP Common Module (see <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>). This Attribute shall be included if HL7 Structured Documents are referenced within the Identifier, e.g., in the Pertinent Documents Sequence (0038,0100).</para>
                </listitem>
              </itemizedlist>
            </section>
          </section>
          <section label="V.4.1.1.4" status="5" xml:id="sect_V.4.1.1.4">
            <title>Status</title>
            <para><xref linkend="table_V.4-1" xrefstyle="select: label"/> defines the status code values that might be returned in a C-FIND response. Fields related to status code values are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
            <table frame="box" label="V.4-1" rules="all" xml:id="table_V.4-1">
              <caption>C-FIND Response Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status Codes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Related Fields</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="3">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A700</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Identifier Does Not Match SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A900</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to process</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Cxxx</para>
                    <para>(values C000 through CFFF as assigned by the implementation)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancel</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matching terminated due to Cancel request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FE00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>None</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matching is complete - No final Identifier is supplied.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>None</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="2">
                    <para>Pending</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matches are continuing - Current Match is supplied and any Optional Keys were supported in the same manner as Required Keys.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Identifier</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Matches are continuing - Warning that one or more Optional Keys were not supported for existence for this Identifier.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF01</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Identifier</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <note>
              <para>Status Codes are returned in DIMSE response messages (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>). The code values stated in column "Status Codes" are returned in Status Command Element (0000,0900).</para>
            </note>
          </section>
        </section>
        <section label="V.4.1.2" status="4" xml:id="sect_V.4.1.2">
          <title>C-FIND SCU Behavior</title>
          <para>All C-FIND SCUs shall be capable of generating query requests that meet the requirements of the Query Search Method (see <xref linkend="sect_V.4.1.3.1" xrefstyle="select: label"/>).</para>
          <para>Required Keys and Optional Keys associated with the Query may be contained in the Identifier.</para>
          <para>An SCU conveys the following semantics using the C-FIND requests and responses:</para>
          <itemizedlist>
            <listitem>
              <para>The SCU requests that the SCP perform a match of all keys specified in the Identifier of the request against the information it possesses of the Query specified in the request.</para>
            </listitem>
            <listitem>
              <para>The SCU shall interpret Pending responses to convey the Attributes of a match of an item.</para>
            </listitem>
            <listitem>
              <para>The SCU shall interpret a response with a status equal to Success, Failure, or Cancel to convey the end of Pending responses.</para>
            </listitem>
            <listitem>
              <para>The SCU shall interpret a Failure response to a C-FIND request as an indication that the SCP is unable to process the request.</para>
            </listitem>
            <listitem>
              <para>The SCU may cancel the C-FIND service by issuing a C-FIND-CANCEL request at any time during the processing of the C-FIND. The SCU shall recognize a status of Cancel to indicate that the C-FIND-CANCEL was successful.</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="V.4.1.3" status="4" xml:id="sect_V.4.1.3">
          <title>C-FIND SCP Behavior</title>
          <para>All C-FIND SCPs shall be capable of processing queries that meet the requirements of the Query Search (see <xref linkend="sect_V.4.1.3.1" xrefstyle="select: label"/>).</para>
          <para>An SCP conveys the following semantics using the C-FIND requests and responses:</para>
          <itemizedlist>
            <listitem>
              <para>The SCP is requested to perform a match of all the keys specified in the Identifier of the request, against the information it possesses. Attribute matching is performed using the key values specified in the Identifier of the C-FIND request as defined in <xref linkend="sect_V.2" xrefstyle="select: label"/>.</para>
            </listitem>
            <listitem>
              <para>The SCP generates at most one C-FIND response for a match using the "Query" Search method. Such a response shall contain an Identifier whose Attributes contain values from the match. The response shall contain a status of Pending.</para>
            </listitem>
            <listitem>
              <para>When matching is complete and any match has been sent, the SCP generates a C-FIND response that contains a status of Success. A status of Success shall indicate that a response has been sent for any match known to the SCP.</para>
            </listitem>
          </itemizedlist>
          <note>
            <orderedlist numeration="arabic">
              <listitem>
                <para>No Identifier is contained in a response with a status of Success. For a complete definition, see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
              </listitem>
              <listitem>
                <para>When there are no matches, then no responses with a status of Pending are sent, only a single response with a status of Success.</para>
              </listitem>
            </orderedlist>
          </note>
          <itemizedlist>
            <listitem>
              <para>The SCP shall generate a response with a status of Failure if it is unable to process the request. A Failure response shall contain no Identifier.</para>
            </listitem>
            <listitem>
              <para>If the SCP receives a C-FIND-CANCEL indication before it has completed the processing of the matches it shall interrupt the matching process and return a status of Cancel.</para>
            </listitem>
          </itemizedlist>
          <section label="V.4.1.3.1" status="5" xml:id="sect_V.4.1.3.1">
            <title>Query Search Method</title>
            <para>The following procedure is used to generate matches.</para>
            <para>The key match Attributes contained in the Identifier of the C-FIND request are matched against the values of the Key Attributes for each Query entity. For each entity for which the Attributes match all of the specified match Attributes, construct an Identifier. This Identifier shall contain all of the values of the Attributes for this entity that match those in the C-FIND request. Return a response for each such Identifier. If there are no matching keys, then there are no matches; return a response with a status equal to Success and with no Identifier.</para>
          </section>
        </section>
      </section>
    </section>
    <section label="V.5" status="2" xml:id="sect_V.5">
      <title>Association Negotiation</title>
      <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. The Association negotiation procedure specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> shall be used to negotiate the supported SOP Classes.</para>
      <para>Support for the SCP/SCU role selection negotiation is optional. The SOP Class Extended Negotiation is not used by this Service Class.</para>
    </section>
    <section label="V.6" status="2" xml:id="sect_V.6">
      <title>SOP Class Definitions</title>
      <section label="V.6.1" status="3" xml:id="sect_V.6.1">
        <title>Product Characteristics Query SOP Class</title>
        <section label="V.6.1.1" status="4" xml:id="sect_V.6.1.1">
          <title>Product Characteristics Query SOP Class Overview</title>
          <para>The Product Characteristics Query SOP class defines an application-level class of service that facilitates the communication of detailed information about drugs, contrast agents, or devices identified by a bar code or similar identifier. The detailed information is intended to be used both for automated processing and for presentation to a system operator.</para>
          <para>The Product Characteristics Query SOP class supports the following example use cases:</para>
          <itemizedlist>
            <listitem>
              <para>Obtain the active ingredient, concentration, or other parameters of a contrast agent for inclusion in the image SOP Instances created during use of the agent, or for setting up image acquisition parameters (e.g., ultrasound transducer frequency)</para>
            </listitem>
            <listitem>
              <para>Obtain the size parameters of a device (e.g., a catheter) for use in calibrating images that show that device</para>
            </listitem>
            <listitem>
              <para>Obtain a network reference for an online copy of the "product label" (regulated prescribing and use data) for a drug, contrast agent, or device.</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="V.6.1.2" status="4" xml:id="sect_V.6.1.2">
          <title>Product Characteristics Query Information Model</title>
          <section label="V.6.1.2.1" status="5" xml:id="sect_V.6.1.2.1">
            <title>E/R Model</title>
            <para>The Product Characteristics Query Information Model is represented by the Entity Relationship diagram shown in figure <xref linkend="sect_V.6" xrefstyle="select: label"/> -1.</para>
            <para>
              <figure label="V.6-1" pgwide="1" xml:id="figure_V.6-1">
                <title>Product Characteristics E-R Diagram</title>
                <mediaobject>
                  <imageobject>
                    <imagedata fileref="figures/PS3.4_V.6-1.svg"/>
                    <!--<imagedata fileref="part04_fromword_files/image037.png"/>-->
                  </imageobject>
                </mediaobject>
              </figure>
            </para>
            <para>There is only one Information Entity in the model, which is the Product. The Attributes of a Product can be found in the following Module in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
            <itemizedlist>
              <listitem>
                <para>Product Characteristics Module</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="V.6.1.2.2" status="5" xml:id="sect_V.6.1.2.2">
            <title>Product Characteristics Query Attributes</title>
            <para><xref linkend="table_V.6-1" xrefstyle="select: label"/> defines the Attributes of the Product Characteristics Query Information Model:</para>
            <table frame="box" label="V.6-1" rules="all" xml:id="table_V.6-1">
              <caption>Attributes for the Product Characteristics Query Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description / Module</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Matching Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark/Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Product Package Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0044,0001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value Matching only.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Product Type Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0044,0007)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Product Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0044,0008)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Product Expiration DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0044,000B)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Product Parameter Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0044,0013)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Value Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Concept Name Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A043)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;All other Attributes of Product Parameter Sequence</emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Conditional on value of Value Type (0040,A040); See <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> Content Item Macro.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="italic">All other Attributes of Product</emphasis>
                      <emphasis role="italic">Characteristics Module</emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
              </tbody>
            </table>
            <para>The Product Package Identifier (0044,0001) might not be globally unique and might conflict with other identifiers used within the scope of the institution.</para>
            <note>
              <para>The package identifiers are typically unique within the scope of the substance administration management systems. This is a warning that they are not UIDs.</para>
            </note>
          </section>
        </section>
        <section label="V.6.1.3" status="4" xml:id="sect_V.6.1.3">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to the Product Characteristics Query SOP Class as an SCU or an SCP. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="V.6.1.3.1" status="5" xml:id="sect_V.6.1.3.1">
            <title>SCU Conformance</title>
            <para>An implementation that conforms to the Product Characteristics Query SOP Class shall support queries against the Information Model described in <xref linkend="sect_V.6.1.2" xrefstyle="select: label"/> using the baseline C-FIND SCU Behavior described in <xref linkend="sect_V.4.1.2" xrefstyle="select: label"/>.</para>
            <para>An implementation that conforms to the Product Characteristics Query SOP Class as an SCU shall state in its Conformance Statement the Return Key Attributes it requests, and how those Attributes are used in the application.</para>
            <para>An implementation that conforms to the Product Characteristics Query SOP Class as an SCU shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when encoding queries and interpreting responses.</para>
          </section>
          <section label="V.6.1.3.2" status="5" xml:id="sect_V.6.1.3.2">
            <title>SCP Conformance</title>
            <para>An implementation that conforms to the Product Characteristics Query SOP Class shall support queries against the Product Characteristics Query Information Model described in <xref linkend="sect_V.6.1.2" xrefstyle="select: label"/> using the C-FIND SCP Behavior described in <xref linkend="sect_V.4.1.3" xrefstyle="select: label"/>.</para>
            <para>An implementation that conforms to the Product Characteristics Query SOP Class as an SCP shall state in its Conformance Statement the Return Key Attributes that it supports.</para>
            <para>An implementation that conforms to the Product Characteristics Query SOP Class as an SCP shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when encoding responses.</para>
          </section>
        </section>
        <section label="V.6.1.4" status="4" xml:id="sect_V.6.1.4">
          <title>SOP Class</title>
          <para>The Product Characteristics Query SOP Class in the Substance Administration Service Class identifies the Product Characteristics Query Information Model, and the DIMSE-C operations supported. The following Standard SOP Class is identified:</para>
          <table frame="box" label="V.6.1.4-1" rules="all" xml:id="table_V.6.1.4-1">
            <caption>Product Characteristics Query SOP Classes</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class UID</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Product Characteristics Query Information Model - FIND</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.41</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="V.6.2" status="3" xml:id="sect_V.6.2">
        <title>Substance Approval Query SOP Class</title>
        <section label="V.6.2.1" status="4" xml:id="sect_V.6.2.1">
          <title>Substance Approval Query SOP Class Overview</title>
          <para>The Substance Approval Query SOP Class defines an application-level class of service that allows a device at the point of care to obtain verification of the appropriateness of contrast agents and other drugs administered during a procedure, based on the substance label barcode and the patient ID. The response is an authorization to proceed, or a warning, or a contra-indication for presentation to the system operator.</para>
          <para>The Substance Approval Query SOP class supports the following example use cases:</para>
          <itemizedlist>
            <listitem>
              <para>Obtain verification that administration of a specific drug or contrast agent for an image acquisition is appropriate for the patient</para>
            </listitem>
            <listitem>
              <para>Obtain verification that the implantation of a specific device under imaging guidance is appropriate for the patient</para>
            </listitem>
          </itemizedlist>
          <para>The Substance Approval Query SOP Class does not specify the mechanism used by the SCP to verify such appropriateness of administration (e.g., by comparison to allergy information in the patient's electronic health record). The duration of validity of an approval beyond the time of the response is not defined by the Standard.</para>
        </section>
        <section label="V.6.2.2" status="4" xml:id="sect_V.6.2.2">
          <title>Substance Approval Query Information Model</title>
          <section label="V.6.2.2.1" status="5" xml:id="sect_V.6.2.2.1">
            <title>E/R Model</title>
            <para>The Substance Approval Query Information Model is represented by the Entity Relationship diagram shown in <xref linkend="figure_V.6-2" xrefstyle="select: label"/>.</para>
            <para>
              <figure label="V.6-2" pgwide="1" xml:id="figure_V.6-2">
                <title>Substance Approval E-R Diagram</title>
                <mediaobject>
                  <imageobject>
                    <imagedata fileref="figures/PS3.4_V.6-2.svg"/>
                    <!--<imagedata fileref="part04_fromword_files/image039.png"/>-->
                  </imageobject>
                </mediaobject>
              </figure>
            </para>
            <para>
              <xref linkend="figure_V.6-2" xrefstyle="select: label"/>
            </para>
            <para>The Attributes of the Information Entities can be found in the following Modules in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
            <itemizedlist>
              <listitem>
                <para>Patient Identification Module</para>
              </listitem>
              <listitem>
                <para>Patient Demographics Module</para>
              </listitem>
              <listitem>
                <para>Visit Identification Module</para>
              </listitem>
              <listitem>
                <para>Substance Administration Module</para>
              </listitem>
              <listitem>
                <para>Substance Approval Module</para>
              </listitem>
              <listitem>
                <para>Product Characteristics Module</para>
              </listitem>
            </itemizedlist>
            <para>Only selected Attributes of these Modules are used in the Substance Approval Query Information Model.</para>
            <para>The Information Model is used in a bottom-up manner in the query; i.e., given a Product and a Patient, or alternatively a Product and a Visit, for a proposed Substance Administration act at the current time, find the Approval.</para>
            <para>The Visit IE is included in the Information Model to support those institutions that identify patients (e.g., on a bar coded wristband) by Admission ID (i.e., the ID of the Visit), rather than Patient ID. This allows automation of query construction using a scan of the Admission ID. The Admission ID can be mapped to the Patient ID by the SCP for the purpose of the performing the query matching.</para>
            <note>
              <orderedlist numeration="arabic">
                <listitem>
                  <para>The Visit is identified by the Admission ID (0038,0010) Attribute, but in the "Model of the Real World for the Purpose of Modality-IS Interface" (see <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>), the Visit is subsidiary to the Patient; hence the Admission ID may only be unique within the context of the patient, not within the context of the institution. The use of the Admission ID Attribute to identify the Visit (and hence the Patient) is only effective if the Admission ID is unique within the context of the institution.</para>
                </listitem>
                <listitem>
                  <para>Certain institutions, e.g., ambulatory imaging centers that do not "admit" patients, may use the Imaging Service Request Identifier, or Accession Number, as an equivalent of the Admission ID. The SCU of this Query Service does not need to know the true origin or nature of the identifier, only that it is passed in the Query in the Admission ID (0038,0010) Attribute.</para>
                </listitem>
                <listitem>
                  <para>There is conceptually a datetime of administration Attribute of the Substance Administration act, which is implicitly assumed to be approximately the time of the query in this SOP Class.</para>
                </listitem>
                <listitem>
                  <para>There is conceptually a dose Attribute of the Product entity, which is the entire product identified by the bar code, and the request is for approval of administration of the entire product.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
          <section label="V.6.2.2.2" status="5" xml:id="sect_V.6.2.2.2">
            <title>Substance Approval Query Attributes</title>
            <para><xref linkend="table_V.6-2" xrefstyle="select: label"/> defines the Attributes of the Substance Approval Query Information Model.</para>
            <table frame="box" label="V.6-2" rules="all" xml:id="table_V.6-2">
              <caption>Attributes for the Substance Approval Query Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description / Module</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Matching Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark/Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Patient</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value Matching only.</para>
                    <para>One or both of Patient ID (0010,0020) and Admission ID (0038,0010) shall be present as a Matching Key in the Query</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0021)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID Qualifiers Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0024)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;All Attributes of the Issuer of Patient ID Qualifiers Sequence</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Birth Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Sex</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Visit</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Admission ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value Matching only.</para>
                    <para>One or both of Patient ID (0010,0020) and Admission ID (0038,0010) shall be present as a Matching Key in the Query</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Admission ID Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0014)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Universal Entity ID (0040,0032) is not present; may be present otherwise</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Local Namespace Entity ID (0040,0031) is not present; may be present otherwise.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Universal Entity ID (0040,0032) is present.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Product</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Product Package Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0044,0001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value Matching only. Shall be present as a Matching Key in the Query.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Substance</emphasis>
                      <emphasis role="bold">Administration</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Administration Route Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0054,0302)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be present as a Matching Key in the Query.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Approval</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Substance Administration Approval</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0044,0002)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Approval Status Further Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0044,0003)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Approval Status DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0044,0004)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
              </tbody>
            </table>
            <para>One or both of Patient ID (0010,0020) and Admission ID (0038,0010) shall be present as a Matching Key in the Query.</para>
            <para>Product Package Identifier (0044,0001) shall be present as a Matching Key in the Query. The Product Package Identifier might not be globally unique and might conflict with other identifiers used within the scope of the institution.</para>
            <note>
              <para>The package identifiers are typically unique within the scope of the substance administration management systems. This is a warning that they are not UIDs.</para>
            </note>
            <para>Administration Route Code Sequence (0054,0302) shall be present as a Matching Key in the Query, and a single Item shall be present in that Sequence with Code Value (0008,0100) and Coding Scheme Designator (0008,0102) as Matching Keys.</para>
          </section>
          <section label="V.6.2.2.3" status="5" xml:id="sect_V.6.2.2.3">
            <title>Substance Approval Query Responses</title>
            <para>A Query response may have a status of Success or Failure (see <xref linkend="sect_V.4.1.1.4" xrefstyle="select: label"/>). A Failure Query response carries no semantics about the existence or status of approval of the Substance Administration.</para>
            <para>A successful Query response will contain zero or one Pending response items. The case of zero Pending responses carries the semantics of no matching Approval Information Entity found, i.e., that the SCP cannot determine an approval, rather than that the substance administration is approved or disapproved. In this case a decision on substance administration needs to be made by the healthcare provider.</para>
            <note>
              <para>Zero Pending responses may occur due do inability of the SCP to match the patient ID, product ID or route of administration.</para>
            </note>
            <para>In the case of one Pending response, the matching Approval Information Entity will explicitly convey the Substance Administration Approval (0044,0002) value of APPROVED, WARNING, or CONTRA_INDICATED.</para>
          </section>
        </section>
        <section label="V.6.2.3" status="4" xml:id="sect_V.6.2.3">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to the Substance Approval Query SOP Class as an SCU or an SCP. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="V.6.2.3.1" status="5" xml:id="sect_V.6.2.3.1">
            <title>SCU Conformance</title>
            <para>An implementation that conforms to the Substance Approval Query SOP Class shall support queries against the Information Model described in <xref linkend="sect_V.6.2.2" xrefstyle="select: label"/> using the baseline C-FIND SCU Behavior described in <xref linkend="sect_V.4.1.2" xrefstyle="select: label"/>.</para>
            <para>An implementation that conforms to the Substance Approval Query SOP Class as an SCU shall state in its Conformance Statement how the Query Attributes are used in the application, and how the application displays the returned Attributes, in particular the values of Substance Administration Approval (0044,0002) and Approval Status Further Description (0044,0003). It shall state how it indicates a Query response with zero Pending items, or a Failure status.</para>
            <para>An implementation that conforms to the Substance Approval Query SOP Class as an SCU shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when encoding queries and interpreting responses.</para>
          </section>
          <section label="V.6.2.3.2" status="5" xml:id="sect_V.6.2.3.2">
            <title>SCP Conformance</title>
            <para>An implementation that conforms to the Substance Approval Query SOP Class shall support queries against the Substance Approval Query Information Model described in <xref linkend="sect_V.6.2.2" xrefstyle="select: label"/> using the C-FIND SCP Behavior described in <xref linkend="sect_V.4.1.3" xrefstyle="select: label"/>. It shall support all of the Attributes specified in the Information Model.</para>
            <para>An implementation that conforms to the Substance Approval Query SOP Class as an SCP shall state in its Conformance Statement how it processes Required and Optional Matching Key Attributes. It shall state how it obtains the values for the Return Key Attributes.</para>
            <para>An implementation that conforms to the Substance Approval Query SOP Class as an SCP shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when interpreting queries, performing matching and encoding responses.</para>
          </section>
        </section>
        <section label="V.6.2.4" status="4" xml:id="sect_V.6.2.4">
          <title>SOP Class</title>
          <para>The Substance Approval Query SOP Class in the Substance Administration Service Class identifies the Substance Approval Query Information Model, and the DIMSE-C operations supported. The following Standard SOP Class is identified:</para>
          <table frame="box" label="V.6.2.4-1" rules="all" xml:id="table_V.6.2.4-1">
            <caption>Substance Approval Query SOP Classes</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class UID</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Substance Approval Query Information Model - FIND</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.42</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="W" status="1" xml:id="chapter_W">
    <title>Color Palette Storage Service Class</title>
    <section label="W.1" status="2" xml:id="sect_W.1">
      <title>Overview</title>
      <section label="W.1.1" status="3" xml:id="sect_W.1.1">
        <title>Scope</title>
        <para>The Color Palette Storage Service Class defines an application-level class-of-service that allows one DICOM AE to send a Color Palette SOP Instance to another DICOM AE.</para>
      </section>
      <section label="W.1.2" status="3" xml:id="sect_W.1.2">
        <title>Service Definition</title>
        <para>The Color Palette Storage Service Class consists of a single SOP Class: the Color Palette Storage SOP Class. It uses the Color Palette IOD that represents the Color Palette IE. This IOD is defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. The Color Palette Storage Service Class uses the C-STORE DIMSE Service specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. A successful completion of the C-STORE has the following semantics:</para>
        <itemizedlist>
          <listitem>
            <para>Both the SCU and the SCP support Color Palette information.</para>
          </listitem>
          <listitem>
            <para>The Color Palette information is stored in some medium.</para>
          </listitem>
          <listitem>
            <para>For some time frame, the Color Palette information may be accessed.</para>
          </listitem>
        </itemizedlist>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>Support for the Color Palette Storage SOP Class does not imply support for the Color Palette Query/Retrieve Service Class.</para>
            </listitem>
            <listitem>
              <para>The duration of the storage is also implementation dependent, but is described in the Conformance Statement of the SCP.</para>
            </listitem>
            <listitem>
              <para>The Color Palette Storage SOP Class is intended to be used in a variety of environments: e.g., for workstations to transfer Color Palette SOP Instances to other workstations or archives, for archives to transfer Color Palette SOP Instances to workstations, etc.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
    </section>
    <section label="W.2" status="2" xml:id="sect_W.2">
      <title>Association Negotiation</title>
      <para>The Association negotiation rules as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> apply to the SOP Class of this Service Class. No SOP Class specific application information is used.</para>
    </section>
    <section label="W.3" status="2" xml:id="sect_W.3">
      <title>Conformance Overview</title>
      <para>The application-level services addressed by this Service Class definition are specified in a single SOP Class: Color Palette Storage SOP Class.</para>
    </section>
    <section label="W.4" status="2" xml:id="sect_W.4">
      <title>Color Palette Storage SOP Class</title>
      <para>This Section defines the SCU and SCP behavior for the Color Palette Storage SOP Class. The C-STORE DIMSE-C Service shall be the mechanism used to transfer Color Palette SOP Instances between peer DICOM AEs as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
      <section label="W.4.1" status="3" xml:id="sect_W.4.1">
        <title>Service Class User</title>
        <para>The DICOM AE that claims conformance to this SOP Class as an SCU shall be capable of sending a Color Palette SOP Instance that meets the requirements of the Color Palette IOD. It shall be invoked by the SCU through the use of the DIMSE C-STORE request used in conjunction with this SOP Class.</para>
        <para>The SCU shall include a Data Set with the Attributes as defined in the Color Palette IOD in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
        <para>The SCU shall recognize the status of the C-STORE service and take appropriate action based on the success or failure of the service. This SOP Class places no further requirements on what the SCU shall do other than that it shall distinguish between successful and failed C-STORE responses. This behavior shall be documented as part of the SOP Class Conformance Statement.</para>
      </section>
      <section label="W.4.2" status="3" xml:id="sect_W.4.2">
        <title>Service Class Provider</title>
        <para>The DICOM AE that claims conformance to this SOP Class as an SCP shall receive a Color Palette SOP Instance through the use of the DIMSE C-STORE service used in conjunction with this SOP Class.</para>
        <para>The SCP shall store and provide access to all Type 1, Type 2, and Type 3 Attributes defined in the Color Palette IOD, as well as any Standard Extended Attributes (including Private Attributes) included in the SOP Instance. The SCP may, but is not required to validate that the Attributes of the Color Palette SOP Instance meet the requirements of the Color Palette IOD. The SCP shall not modify the values of any Attributes in the Color Palette SOP Instance without assigning a new SOP Instance UID, except that the SCP may modify values of, or add, Type 3 and Private Attributes that do not change the semantics or interpretation of the Palette.</para>
        <note>
          <para>E.g., an SCP may add values to Alternate Content Description Sequence (0070,0087), to provide an additional description in another language.</para>
        </note>
        <para>If a display device acting as an SCP applies a Color Palette to a set of images, all mandatory Color Palette and presentation intent Attributes shall be applied.</para>
        <para>The SCP shall return, via the C-STORE response primitive, the Response Status Code applicable to the associated request. By performing this service successfully, the SCP indicates that the Color Palette SOP Instance has been successfully stored. <xref linkend="table_W.4-1" xrefstyle="select: label"/> shows the response status values. General status code values and fields related to status code values are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <table frame="box" label="W.4-1" rules="all" xml:id="table_W.4-1">
          <caption>C-STORE Response Status Values</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Service Status</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Further Meaning</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Status Codes</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Related Fields</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="3">
                <para>Failure</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Refused: Out of Resources</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A700</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Error: Data Set Does Not Match SOP Class</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A900</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0901)</para>
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Error: Cannot Understand</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C000</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0000,0901)</para>
                <para>(0000,0902)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Success</para>
              </td>
              <td align="left" colspan="1" rowspan="1"/>
              <td align="center" colspan="1" rowspan="1">
                <para>0000</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>None</para>
              </td>
            </tr>
          </tbody>
        </table>
        <note>
          <para>Status Codes are returned in DIMSE response messages (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>). The code values stated in column "Status Codes" are returned in Status Command Element (0000,0900).</para>
        </note>
      </section>
      <section label="W.4.3" status="3" xml:id="sect_W.4.3">
        <title>Color Palette Storage SOP Class UID</title>
        <para>The Color Palette Storage SOP Class shall be uniquely identified by the Color Palette Storage SOP Class UID, which shall have a value "1.2.840.10008.5.1.4.39.1".</para>
      </section>
      <section label="W.4.4" status="3" xml:id="sect_W.4.4">
        <title>Conformance Statement Requirements</title>
        <para>An implementation may conform to the Color Palette Storage SOP Class as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
        <section label="W.4.4.1" status="4" xml:id="sect_W.4.4.1">
          <title>SCU Conformance Requirements</title>
          <para>An implementation that conforms to the Color Palette Storage SOP Class as an SCU that is a creator of Color Palette SOP Instances shall state in its Conformance Statement:</para>
          <itemizedlist>
            <listitem>
              <para>The optional Attributes that may be included in a Color Palette SOP Instance.</para>
            </listitem>
            <listitem>
              <para>The behavior of the SCU in the case of a successful C-STORE response status.</para>
            </listitem>
            <listitem>
              <para>The behavior of the SCU in each case of a failure C-STORE response status.</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="W.4.4.2" status="4" xml:id="sect_W.4.4.2">
          <title>SCP Conformance Requirements</title>
          <para>An implementation that conforms to the Color Palette Storage SOP Class as an SCP that interprets Color Palette SOP Instances for display shall state in its Conformance Statement:</para>
          <itemizedlist>
            <listitem>
              <para>The optional Attributes of the Color Palette IOD that it is capable of interpreting and those that are not supported.</para>
            </listitem>
            <listitem>
              <para>The Image Storage SOP Classes for which application of the Color Palette Storage SOP Class is supported</para>
            </listitem>
          </itemizedlist>
          <para>An implementation that conforms to the Color Palette Storage SOP Class as an SCP shall state in its Conformance Statement:</para>
          <itemizedlist>
            <listitem>
              <para>The behavior of the SCP in the case of a successful C-STORE operation, including the access method for a stored Color Palette SOP Instance, and the duration of the storage.</para>
            </listitem>
            <listitem>
              <para>The meaning of each case of a failure C-STORE response status, as well as appropriate recovery action.</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="X" status="1" xml:id="chapter_X">
    <title>Color Palette Query/Retrieve Service Class</title>
    <section label="X.1" status="2" xml:id="sect_X.1">
      <title>Overview</title>
      <section label="X.1.1" status="3" xml:id="sect_X.1.1">
        <title>Scope</title>
        <para>The Color Palette Query/Retrieve Service Class defines an application-level class-of-service that facilitates access to Color Palette composite objects.</para>
      </section>
      <section label="X.1.2" status="3" xml:id="sect_X.1.2">
        <title>Conventions</title>
        <para>See Conventions for the Basic Worklist Management Service (K.1.2).</para>
      </section>
      <section label="X.1.3" status="3" xml:id="sect_X.1.3">
        <title>Query/Retrieve Information Model</title>
        <para>In order to serve as an SCP of the Color Palette Query/Retrieve Service Class, a DICOM AE possesses information about the Attributes of a number of Color Palette composite SOP Instances. The information is organized into a Color Palette Information Model.</para>
      </section>
      <section label="X.1.4" status="3" xml:id="sect_X.1.4">
        <title>Service Definition</title>
        <para>Two peer DICOM AEs implement a SOP Class of the Color Palette Query/Retrieve Service Class with one serving in the SCU role and one serving in the SCP role. SOP Classes of the Color Palette Query/Retrieve Service Class are implemented using the DIMSE-C C-FIND, C-MOVE and C-GET services as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <para>The semantics of the C-FIND service are the same as those defined in the Service Definition of the Basic Worklist Management Service Class.</para>
        <para>The semantics of the C-MOVE and C-GET services are the same as those defined in the Service Definition of the Query/Retrieve Service Class, with the exception that there is only one level of retrieval.</para>
      </section>
    </section>
    <section label="X.2" status="2" xml:id="sect_X.2">
      <title>Color Palette Information Model Definition</title>
      <para>The Color Palette Information Model is identified by the SOP Class negotiated at Association establishment time. The SOP Class is composed of both an Information Model and a DIMSE-C Service Group.</para>
      <para>The Color Palette Information Model is defined, with the Entity-Relationship Model Definition and Key Attributes Definition analogous to those defined in the Worklist Information Model Definition of the Basic Worklist Management Service.</para>
    </section>
    <section label="X.3" status="2" xml:id="sect_X.3">
      <title>Color Palette Information Model</title>
      <para>The Color Palette Information Model is based upon a one level entity:</para>
      <itemizedlist>
        <listitem>
          <para>Color Palette object instance</para>
        </listitem>
      </itemizedlist>
      <para>The Color Palette object instance contains Attributes associated with the Color Palette object IE of the Composite IODs as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
    </section>
    <section label="X.4" status="2" xml:id="sect_X.4">
      <title>DIMSE-C Service Groups</title>
      <section label="X.4.1" status="3" xml:id="sect_X.4.1">
        <title>C-FIND Operation</title>
        <para>See the C-FIND Operation definition for the Basic Worklist Management Service Class (K.4.1), and substitute "Color Palette" for "Worklist. The "Worklist" Search Method shall be used.</para>
        <para>The SOP Class UID identifies the Color Palette Information Model against which the C-FIND is to be performed. The Key Attributes and values allowable for the query are defined in the SOP Class definition for the Color Palette Information Model.</para>
      </section>
      <section label="X.4.2" status="3" xml:id="sect_X.4.2">
        <title>C-MOVE Operation</title>
        <para>See the C-MOVE Operation definition for the Query/Retrieve Service Class (C.4.2). No Extended Behavior or Relational-Retrieve is defined for the Color Palette Query/Retrieve Service Class.</para>
        <para>Query/Retrieve Level (0008,0052) is not relevant to the Color Palette Query/Retrieve Service Class, and therefore shall not be present in the Identifier. The only Unique Key Attribute of the Identifier shall be SOP Instance UID (0008,0018). The SCU shall supply one UID or a list of UIDs.</para>
        <note>
          <para>More than one entity may be retrieved, using List of UID matching.</para>
        </note>
      </section>
      <section label="X.4.3" status="3" xml:id="sect_X.4.3">
        <title>C-GET Operation</title>
        <para>See the C-GET Operation definition for the Query/Retrieve Service Class (C.4.3). No Extended Behavior or Relational-Retrieve is defined for the Color Palette Query/Retrieve Service Class.</para>
        <para>Query/Retrieve Level (0008,0052) is not relevant to the Color Palette Query/Retrieve Service Class, and therefore shall not be present in the Identifier. The only Unique Key Attribute of the Identifier shall be SOP Instance UID (0008,0018). The SCU shall supply one UID or a list of UIDs.</para>
        <note>
          <para>More than one entity may be retrieved, using List of UID matching.</para>
        </note>
      </section>
    </section>
    <section label="X.5" status="2" xml:id="sect_X.5">
      <title>Association Negotiation</title>
      <para>See the Association Negotiation definition for the Basic Worklist Management Service Class (K.5).</para>
    </section>
    <section label="X.6" status="2" xml:id="sect_X.6">
      <title>SOP Class Definitions</title>
      <section label="X.6.1" status="3" xml:id="sect_X.6.1">
        <title>Color Palette Information Model</title>
        <section label="X.6.1.1" status="4" xml:id="sect_X.6.1.1">
          <title>E/R Model</title>
          <para>The Color Palette Information Model consists of a single entity. In response to a given C-FIND request, the SCP shall send one C-FIND response per matching Color Palette Instance.</para>
          <para>
            <figure label="X.6-1" pgwide="1" xml:id="figure_X.6-1">
              <title>Color Palette Information Model E/R Diagram</title>
              <mediaobject>
                <imageobject>
                  <imagedata fileref="figures/PS3.4_X.6-1.svg"/>
                  <!--<imagedata fileref="part04_fromword_files/image042.png"/>-->
                </imageobject>
              </mediaobject>
            </figure>
          </para>
        </section>
        <section label="X.6.1.2" status="4" xml:id="sect_X.6.1.2">
          <title>Color Palette Attributes</title>
          <para><xref linkend="table_X.6-1" xrefstyle="select: label"/> defines the Attributes of the Color Palette Information Model:</para>
          <table frame="box" label="X.6-1" rules="all" xml:id="table_X.6-1">
            <caption>Attributes for the Color Palette Information Model</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Description / Module</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Tag</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Matching Key Type</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Return Key Type</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Remark / Matching Type</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="5" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Common</emphasis>
                  </para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Specific Character Set</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0005)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute is required if expanded or replacement character sets are used. See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> and <xref linkend="sect_C.4.1.1" xrefstyle="select: label"/>.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>SOP Class UID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0016)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>SOP Instance UID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0018)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>U</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="5" rowspan="1">
                  <para>
                    <emphasis role="bold">Color Palette Definition</emphasis>
                  </para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Content Label</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0070,0080)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>R</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>This Attribute shall be retrieved with Single Value, Wild Card or Universal matching.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Content Description</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0070,0081)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Content Creator's Name</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0070,0084)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Alternate Content Description Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0070,0087)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Content Description</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0070,0081)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Language Code Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0006)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Code Value</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Coding Scheme Designator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Coding Scheme Version</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0103)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Code Meaning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
            </tbody>
          </table>
        </section>
        <section label="X.6.1.3" status="4" xml:id="sect_X.6.1.3">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to one of the Color Palette Information Model SOP Classes as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="X.6.1.3.1" status="5" xml:id="sect_X.6.1.3.1">
            <title>SCU Conformance</title>
            <section label="X.6.1.3.1.1" status="6" xml:id="sect_X.6.1.3.1.1">
              <title>C-FIND SCU Conformance</title>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes shall support queries against the Color Palette Information Model using the C-FIND SCU Behavior described for the Basic Worklist Management Service Class (see <xref linkend="sect_K.4.1.2" xrefstyle="select: label"/> and <xref linkend="sect_X.4.1" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCU shall state in its Conformance Statement whether it requests Type 3 Return Key Attributes, and shall list these Optional Return Key Attributes.</para>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCU shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when encoding queries and interpreting responses.</para>
            </section>
            <section label="X.6.1.3.1.2" status="6" xml:id="sect_X.6.1.3.1.2">
              <title>C-MOVE SCU Conformance</title>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCU shall support transfers against the Color Palette Information Model using the C-MOVE SCU baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.2.2.1" xrefstyle="select: label"/> and <xref linkend="sect_X.4.2" xrefstyle="select: label"/>).</para>
            </section>
            <section label="X.6.1.3.1.3" status="6" xml:id="sect_X.6.1.3.1.3">
              <title>C-GET SCU Conformance</title>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCU shall support transfers against the Color Palette Information Model using the C-GET SCU baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.3.2.1" xrefstyle="select: label"/> and <xref linkend="sect_X.4.3" xrefstyle="select: label"/>).</para>
            </section>
          </section>
          <section label="X.6.1.3.2" status="5" xml:id="sect_X.6.1.3.2">
            <title>SCP Conformance</title>
            <section label="X.6.1.3.2.1" status="6" xml:id="sect_X.6.1.3.2.1">
              <title>C-FIND SCP Conformance</title>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCP shall support queries against the Color Palette Information Model using the C-FIND SCP Behavior described for the Basic Worklist Management Service Class (see <xref linkend="sect_K.4.1.3" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCP shall state in its Conformance Statement whether it supports Type 3 Return Key Attributes, and shall list these Optional Return Key Attributes.</para>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCP shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when interpreting queries, performing matching and encoding responses.</para>
            </section>
            <section label="X.6.1.3.2.2" status="6" xml:id="sect_X.6.1.3.2.2">
              <title>C-MOVE SCP Conformance</title>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCP shall support transfers against the Color Palette Information Model using the C-MOVE SCP baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.2.3.1" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCP, which generates transfers using the C-MOVE operation, shall state in its Conformance Statement the Color Palette Storage Service Class SOP Class under which it shall support the C-STORE sub-operations generated by the C-MOVE.</para>
            </section>
            <section label="X.6.1.3.2.3" status="6" xml:id="sect_X.6.1.3.2.3">
              <title>C-GET SCP Conformance</title>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCP shall support transfers against the Color Palette Information Model using the C-GET SCP baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.3.3.1" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to one of the Color Palette Information Model SOP Classes as an SCP, which generates transfers using the C-GET operation, shall state in its Conformance Statement the Color Palette Storage Service Class SOP Class under which it shall support the C-STORE sub-operations generated by the C-GET.</para>
            </section>
          </section>
        </section>
        <section label="X.6.1.4" status="4" xml:id="sect_X.6.1.4">
          <title>SOP Classes</title>
          <para>The SOP Classes of the Color Palette Information Model in the Color Palette Query/Retrieve Service Class identify the Color Palette Information Model, and the DIMSE-C operations supported. The following Standard SOP Classes are identified:</para>
          <table frame="box" label="X.6.1.4-1" rules="all" xml:id="table_X.6.1.4-1">
            <caption>Color Palette SOP Classes</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class UID</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Color Palette Information Model - FIND</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.39.2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Color Palette Information Model - MOVE</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.39.3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Color Palette Information Model - GET</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.39.4</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="Y" status="1" xml:id="chapter_Y">
    <title>Instance and Frame Level Retrieve SOP Classes (Normative)</title>
    <section label="Y.1" status="2" xml:id="sect_Y.1">
      <title>Overview</title>
      <section label="Y.1.1" status="3" xml:id="sect_Y.1.1">
        <title>Scope</title>
        <para>Composite Instance Root Retrieve Service is a service within the DICOM Query/Retrieve Service class defined in <xref linkend="chapter_C" xrefstyle="template: Annex %n"/>.The retrieve capability of this service allows a DICOM AE to retrieve Composite Instances or selected frames from a remote DICOM AE over a single Association or request the remote DICOM AE to initiate a transfer of Composite Object Instances or selected frames from image objects to another DICOM AE.</para>
        <para>The Enhanced Multi-Frame Image Conversion Extended Negotiation Option of the DICOM Query/Retrieve Service class defined in <xref linkend="chapter_C" xrefstyle="template: Annex %n"/> is also supported for the Composite Instance Root Retrieve Service.</para>
      </section>
      <section label="Y.1.2" status="3" xml:id="sect_Y.1.2">
        <title>Composite Instance Root Retrieve Information Model</title>
        <para>Retrievals are implemented against the Composite Instance Root Retrieve Information Model, as defined in this Annex of the DICOM Standard. A specific SOP Class of the Query/Retrieve Service Class consists of an Information Model Definition and a DIMSE-C Service Group.</para>
      </section>
      <section label="Y.1.3" status="3" xml:id="sect_Y.1.3">
        <title>Service Definition</title>
        <para>Two peer DICOM AEs implement a SOP Class of the Composite Instance Root Retrieve Service with one serving in the SCU role and one serving in the SCP role. SOP Classes of the Composite Instance Root Retrieve Service are implemented using the DIMSE-C C-MOVE and C-GET services as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <para>The following descriptions of the DIMSE-C C-GET and C-MOVE services provide a brief overview of the SCU/SCP semantics:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>A C-MOVE service conveys the following semantics:</para>
            <itemizedlist>
              <listitem>
                <para>The SCU supplies Unique and Frame Range Key values to identify the requested SOP Instance(s). The SCP creates new SOP instances if necessary and then initiates C-STORE sub-operations for the corresponding storage SOP Instances. These C-STORE sub-operations occur on a different Association than the C-MOVE service. The SCP role of the Retrieve SOP Class and the SCU role of the Storage SOP Class may be performed by different applications that may or may not reside on the same system. Initiation mechanism of C-STORE sub-operations is outside of the scope of DICOM standard.</para>
              </listitem>
              <listitem>
                <para>The SCP may optionally generate responses to the C-MOVE with status equal to Pending during the processing of the C-STORE sub-operations. These C-MOVE responses indicate the number of Remaining C-STORE sub-operations and the number of C-STORE sub-operations returning the status of Success, Warning, and Failed.</para>
              </listitem>
              <listitem>
                <para>When the number of Remaining C-STORE sub-operations reaches zero, the SCP generates a final response with a status equal to Success, Warning, Failed, or Refused. This response shall indicate the number of C-STORE sub-operations returning the status of Success, Warning, and Failed. If any of the sub-operations was successful then a Successful UID list shall be returned. If the status of a C-STORE sub-operation was Failed a UID List shall be returned.</para>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-MOVE service by issuing a C-MOVE-CANCEL request at any time during the processing of the C-MOVE. The SCP terminates all incomplete C-STORE sub-operations and returns a status of Canceled.</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para>A C-GET service conveys the following semantics:</para>
            <itemizedlist>
              <listitem>
                <para>The SCU supplies Unique and Frame Range Key values to identify the requested SOP Instance(s). The SCP creates new SOP instances if necessary and then generates C-STORE sub-operations for the corresponding storage SOP Instances. These C-STORE sub-operations occur on the same Association as the C-GET service and the SCU/SCP roles are reversed for the C-STORE.</para>
              </listitem>
              <listitem>
                <para>The SCP may optionally generate responses to the C-GET with status equal to Pending during the processing of the C-STORE sub-operations. These C-GET responses indicate the number of remaining C-STORE sub-operations and the number of C-STORE sub-operations returning the status of Success, Warning, and Failed.</para>
              </listitem>
              <listitem>
                <para>When the number of Remaining C-STORE sub-operations reaches zero, the SCP generates a final response with a status equal to Success, Warning, Failed, or Refused. This response shall indicate the number of C-STORE sub-operations returning the status of Success, Warning, and Failed. If the status of any C-STORE sub-operation was Failed a UID List shall be returned.</para>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-GET service by issuing a C-GET-CANCEL request at any time during the processing of the C-GET. The SCP terminates all incomplete C-STORE sub-operations and returns a status of Canceled.</para>
              </listitem>
            </itemizedlist>
          </listitem>
        </orderedlist>
      </section>
    </section>
    <section label="Y.2" status="2" xml:id="sect_Y.2">
      <title>Composite Instance Root Retrieve Information Model Definition</title>
      <para>The Composite Instance Root Retrieve Information Model is identified by the SOP Class negotiated at Association establishment time. The SOP Class is composed of both an Information Model and a DIMSE-C Service Group.</para>
      <note>
        <para>This SOP Class identifies the class of the Composite Instance Root Retrieve Information Model (i.e., not the SOP Class of the stored SOP Instances for which the SCP has information).</para>
      </note>
      <para>Information Model Definitions for standard SOP Classes of the Composite Instance Root Retrieve Service are defined in this Annex. A Composite Instance Root Retrieve Information Model Definition contains:</para>
      <itemizedlist>
        <listitem>
          <para>Entity-Relationship Model Definition</para>
        </listitem>
        <listitem>
          <para>Key Attributes Definition</para>
        </listitem>
      </itemizedlist>
      <section label="Y.2.1" status="3" xml:id="sect_Y.2.1">
        <title>Entity-Relationship Model Definition</title>
        <para>For any Composite Instance Root Retrieve Information Model, an Entity-Relationship Model defines a hierarchy of entities, with Attributes defined for each level in the hierarchy (e.g., Composite Instance, Frame)..</para>
      </section>
      <section label="Y.2.2" status="3" xml:id="sect_Y.2.2">
        <title>Attributes Definition</title>
        <para>Attributes and matching shall be as defined in section <xref linkend="sect_C.2.2" xrefstyle="select: label"/></para>
      </section>
    </section>
    <section label="Y.3" status="2" xml:id="sect_Y.3">
      <title>Standard Composite Instance Root Retrieve Information Model</title>
      <para>One standard Composite Instance Root Retrieve Information Model is defined in this Annex. The Composite Instance Root Retrieve Information Model is associated with a number of SOP Classes. The following hierarchical Composite Instance Root Retrieve Information Model is defined:</para>
      <itemizedlist>
        <listitem>
          <para>Composite Instance Root</para>
        </listitem>
      </itemizedlist>
      <section label="Y.3.1" status="3" xml:id="sect_Y.3.1">
        <title>Composite Instance Root Information Model</title>
        <para>The Composite Instance Root Information Model is based upon a two level hierarchy:</para>
        <itemizedlist>
          <listitem>
            <para>Composite Instance</para>
          </listitem>
          <listitem>
            <para>Frame</para>
          </listitem>
        </itemizedlist>
        <para>The Composite Instance level is the top level and contains only the SOP Instance UID. The Frame level is below the Composite Instance level and contains only the Attributes that refer to a selection of the frames from a single multi-frame image object.</para>
      </section>
      <section label="Y.3.2" status="3" xml:id="sect_Y.3.2">
        <title>Construction and Interpretation of Frame Range Keys</title>
        <para>The following rules for the use of Frame Range Keys apply to both an SCU creating such keys and to an SCP interpreting them.</para>
        <section label="Y.3.2.1" status="4" xml:id="sect_Y.3.2.1">
          <title>Frame List definitions</title>
          <para>The selection of frames to be included in a new created SOP Instance made in response to a FRAME level Composite Instance Root Retrieve request shall be defined by one of the mechanisms defined in this section, and the list of frames so specified shall be referred to as the "Frame List".</para>
          <note>
            <orderedlist numeration="arabic">
              <listitem>
                <para>Re-ordering of frames is not supported, and order of the frames in the Frame List will always be the same as in the original SOP Instance.</para>
              </listitem>
              <listitem>
                <para>New allowable frame selection mechanisms may be defined in the future by the addition of new SOP classes</para>
              </listitem>
            </orderedlist>
          </note>
          <section label="Y.3.2.1.1" status="5" xml:id="sect_Y.3.2.1.1">
            <title>Simple Frame List</title>
            <para>Simple Frame List (0008,1161) is a multi-valued Attribute containing a list of frame numbers, each specifying a frame to be included in the returned object. The first frame of the source instance shall be denoted as frame number 1.</para>
            <para>The frame numbers in the list shall not contain any duplicates, and shall increase monotonically.</para>
            <note>
              <para>Due to the use of UL for this element, a maximum of 16383 values may be specified, as only a 2 byte length is available when an explicit VR Transfer Syntax is used.</para>
            </note>
          </section>
          <section label="Y.3.2.1.2" status="5" xml:id="sect_Y.3.2.1.2">
            <title>Calculated Frame List</title>
            <para>Calculated Frame List (0008,1162) is a multi-valued Attribute containing a list of 3-tuples, each representing a sub-range of frames to be included in the returned object. The first frame of the source instance shall be denoted as frame number 1.For each 3-tuple: .</para>
            <itemizedlist>
              <listitem>
                <para>The first number shall be the frame number of the first frame of the sub-range.</para>
              </listitem>
              <listitem>
                <para>The second number shall be the upper limit of the sub-range, and shall be greater than or equal to the first number.</para>
              </listitem>
              <listitem>
                <para>The third number shall be the increment between requested frames of the sub-range. This shall be greater than zero.</para>
              </listitem>
            </itemizedlist>
            <para>The difference between the first and second numbers is not required to be an exact multiple of the increment.</para>
            <para>If the difference between the first and second numbers is an exact multiple of the increment, then the last frame of the sub-range shall be the second number.</para>
            <para>If the first number is greater than the number of frames in the referenced SOP Instance then that sub-range shall be ignored.</para>
            <para>The sub-ranges shall be non-overlapping such that the sequence of frame numbers determined by concatenating all the sub-ranges shall not contain any duplicates, and shall increase monotonically. A value of FFFFFFFFH or any value greater than the number of frames in the referenced SOP Instance as the second value shall denote the end of the set of frames in the referenced SOP Instance, and may only occur in the last 3-tuple.</para>
            <note>
              <para>For example, if the Calculated Frame List contains 6 values, 2, 9, 3, 12, FFFFFFFFH, 5 and is applied to an Instance containing 25 frames. The resulting Frame List will contain the values 2, 5, 8, 12, 17 and 22.</para>
            </note>
          </section>
          <section label="Y.3.2.1.3" status="5" xml:id="sect_Y.3.2.1.3">
            <title>Time Range</title>
            <para>Time Range (0008,1163) contains the start and end times to be included in the returned object. Times are in seconds, relative to the value of the Content Time (0008,0033) in the parent object.</para>
            <para>The range shall include all frames between the specified times including any frames at the specified times.</para>
            <para>The range may be expanded as a consequence of the format in which the information is stored. Where such expansion occurs, any embedded audio data shall be similarly selected. Under all circumstances, the returned Composite SOP Instance shall retain the relationship between image and audio data.</para>
            <note>
              <para>For MPEG-2 this would be to the nearest surrounding Key Frames</para>
            </note>
            <para>For JPEG 2000 Part 2, this would be to nearest surrounding precinct or tile boundary</para>
            <para>Time Range shall only be used to specify extraction from SOP instances where the times of frames can be ascertained using one or more of the following Attributes:</para>
            <itemizedlist>
              <listitem>
                <para>Frame Time (0018,1063)</para>
              </listitem>
              <listitem>
                <para>Frame Time Vector (0018,1065)</para>
              </listitem>
              <listitem>
                <para>Frame Reference DateTime (0018,9151) in the Frame Content Sequence (0020,9111)</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>
      </section>
      <section label="Y.3.3" status="3" xml:id="sect_Y.3.3">
        <title>New Instance Creation At the Frame Level</title>
        <para>When a C-MOVE or C-GET operation is performed on a source Composite Instance at the FRAME level then the SCP shall create a new Composite Instance according to the following rules:</para>
        <itemizedlist>
          <listitem>
            <para>The new Composite Instance shall be extracted from the source Composite Instance specified by the SOP Instance UID Unique Key present at the Composite Instance Level.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall be an instance of the same SOP Class as the source Composite Instance.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall have a new SOP Instance UID.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall be a valid SOP Instance.</para>
          </listitem>
        </itemizedlist>
        <note>
          <para>The new Composite Instance is required to be internally consistent and valid. This may require the SCP to make consistent modification of any Attributes that reference frames or the relationship between them such as start time, time offsets, and modifying the Per-frame Functional Group Sequence (5200,9230).</para>
        </note>
        <itemizedlist>
          <listitem>
            <para>The new Composite Instance shall contain the frames from the source Composite Object as requested in the Requested Frame List. The Requested Frame List shall be interpreted according to the rules in <xref linkend="sect_Y.3.2" xrefstyle="select: label"/>. The frames shall be in the same order as in the source Composite Instance.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall include the Frame Extraction Module, which shall contain appropriate Attributes from the identifier of the C-GET or C-MOVE request that caused this instance to be created. If the Frame Extraction Module already exists in the source Composite Instance, then a new item shall be appended as an additional item into the Frame Extraction Sequence.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall contain the Contributing Equipment Sequence (0018,A001). If the source Composite Object contains the Contributing Equipment Sequence, then a new Item shall be appended to the copy of the sequence in the new Composite Instance, and if the source Composite Object does not contain the Contributing Equipment Sequence, then it shall be created, containing one new Item. In either case, the new Item shall describe the equipment that is extracting the frames, and the Purpose of Reference Code Sequence (0040,A170) within the Item shall be (109105, DCM, "Frame Extracting Equipment").</para>
          </listitem>
        </itemizedlist>
        <note>
          <para>The existing General Equipment Module cannot be used to hold details of the creating equipment, as it is a Series level Module. The new Composite Instance is part of the same Series as the source Instance, and therefore the Series level information cannot be altered.</para>
        </note>
        <itemizedlist>
          <listitem>
            <para>The new Composite Instance shall have the same Patient, Study and Series level information as the source Instance, including Study and Series Instance UIDs.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall have the same values for the Attributes of the Image Pixel Module of the source Composite Instance except that the Pixel Data Provider URL (0028,7FE0) Attribute shall not be present,Pixel Data (7FE0,0010) shall be replaced by the subset of frames, as specified in section <xref linkend="sect_Y.3.3" xrefstyle="select: label"/>, and Number of Frames (0028,0008) shall contain the number of frames in the new Composite Instance.</para>
          </listitem>
          <listitem>
            <para>The new Composite Instance shall have the same values for other Type 1 and Type 2 Image level Attributes that are not otherwise specified. Other Attributes may be included in the new Composite Instance if consistent with the new Composite Instance.</para>
          </listitem>
        </itemizedlist>
        <note>
          <para>In most cases private Attributes should not be copied unless their full significance is known. See <olink targetdoc="PS3.17" targetptr="chapter_ZZ" xrefstyle="template: Annex %n “%t”"/>for more guidance.</para>
        </note>
        <itemizedlist>
          <listitem>
            <para>The new Composite Instance shall not be contained in a Concatenation. This means that it shall not contain a Concatenation UID (0020,9161) Attribute or other Concatenation Attributes. If the existing Composite Instance contains such Attributes, they shall not be included in the new Composite Instance.</para>
          </listitem>
        </itemizedlist>
      </section>
    </section>
    <section label="Y.4" status="2" xml:id="sect_Y.4">
      <title>DIMSE-C Service Groups</title>
      <para>A single DIMSE-C Service is used in the construction of SOP Classes of the Composite Instance Root Retrieve Service. The following DIMSE-C operation is used:</para>
      <itemizedlist>
        <listitem>
          <para>C-MOVE</para>
        </listitem>
        <listitem>
          <para>C-GET</para>
        </listitem>
      </itemizedlist>
      <section label="Y.4.1" status="3" xml:id="sect_Y.4.1">
        <title>C-MOVE Operation</title>
        <para>SCUs of the Composite Instance Root Retrieve Service shall generate retrievals using the C-MOVE operation as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.The C-MOVE operation allows an application entity to instruct another application entity to transfer stored SOP Instances or new SOP Instances extracted from such stored SOP Instances to another application entity using the C-STORE operation. Support for the C-MOVE service shall be agreed upon at Association establishment time by both the SCU and SCP of the C-MOVE in order for a C-MOVE operation to occur over the Association. The C-STORE sub-operations shall always be accomplished over an Association different from the Association that accomplishes the CMOVE operation. Hence, the SCP of the Query/Retrieve Service Class serves as the SCU of the Storage Service Class.</para>
        <note>
          <para>The application entity that receives the stored SOP Instances may or may not be the originator of the C-MOVE operation.</para>
        </note>
        <para>A C-MOVE request may be performed to any level of the Composite Object Instance Root Retrieve Information Model,and the expected SCP behavior depends on the level selected.</para>
        <section label="Y.4.1.1" status="4" xml:id="sect_Y.4.1.1">
          <title>C-MOVE Service Parameters</title>
          <section label="Y.4.1.1.1" status="5" xml:id="sect_Y.4.1.1.1">
            <title>SOP Class UID</title>
            <para>The SOP Class UID identifies the Query/Retrieve Information Model against which the C-MOVE is to be performed. Support for the SOP Class UID is implied by the Abstract Syntax UID of the Presentation Context used by this C-MOVE operation.</para>
          </section>
          <section label="Y.4.1.1.2" status="5" xml:id="sect_Y.4.1.1.2">
            <title>Priority</title>
            <para>The Priority Attribute defines the requested priority of the C-MOVE operation and corresponding C-STORE sub-operations with respect to other DIMSE operations being performed by the same SCP.</para>
            <para>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing, and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP. The same priority shall be used for all C-STORE sub-operations.</para>
          </section>
          <section label="Y.4.1.1.3" status="5" xml:id="sect_Y.4.1.1.3">
            <title>Identifier</title>
            <para>The C-MOVE request shall contain an Identifier. The C-MOVE response shall conditionally contain an Identifier as required in <xref linkend="sect_C.4.3.1.3.2" xrefstyle="select: label"/>.</para>
            <note>
              <para>The Identifier is specified as U in the definition of the C-MOVE primitive in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> but is specialized for use with this service.</para>
            </note>
            <section label="Y.4.1.1.3.1" status="6" xml:id="sect_Y.4.1.1.3.1">
              <title>Request Identifier Structure</title>
              <para>An Identifier in a C-MOVE request shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>the Query/Retrieve Level (0008,0052) that defines the level of the retrieval</para>
                </listitem>
                <listitem>
                  <para>SOP Instance UID(s) (0008,0018)</para>
                </listitem>
                <listitem>
                  <para>One of the Frame Range Keys if present in the Information Model for the level of the Retrieval</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Query/Retrieve View (0008,0053). This Attribute may be included if Enhanced Multi-Frame Image Conversion has accepted during Association Extended Negotiation. It shall not be included otherwise.</para>
                </listitem>
              </itemizedlist>
              <para>Specific Character Set (0008,0005) shall not be present.</para>
              <para>The Keys at each level of the hierarchy and the values allowable for the level of the retrieval shall be defined in the SOP Class definition for the Query/Retrieve Information Model.</para>
            </section>
          </section>
          <section label="Y.4.1.1.4" status="5" xml:id="sect_Y.4.1.1.4">
            <title>Status</title>
            <para>The status code values that might be returned in a C-MOVE response shall be as specified in <xref linkend="table_Y.4-1" xrefstyle="select: label"/></para>
            <table frame="box" label="Y.4-1" rules="all" xml:id="table_Y.4-1">
              <caption>C-MOVE Response Status Values for Instance Root Retrieve</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status Codes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Related Fields</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="10">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources - Unable to calculate number of matches</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A701</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources - Unable to perform sub-operations</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A702</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Move Destination unknown</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A801</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Identifier does not match SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A900</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to process</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Cxxx</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>None of the frames requested were found in the SOP Instance</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>AA00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to create new object for this SOP class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>AA01</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to extract frames</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>AA02</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Time-based request received for a non-time-based original SOP Instance.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>AA03</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Invalid Request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>AA04</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancel</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations terminated due to Cancel Indication</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FE00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Warning</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations Complete - One or more Failures or Warnings</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>B000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations Complete - No Failures or Warnings</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pending</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations are continuing</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="Y.4.1.1.5" status="5" xml:id="sect_Y.4.1.1.5">
            <title>Number of Remaining Sub-Operations</title>
            <para>Inclusion of the Number of Remaining Sub-operations shall be as specified in <xref linkend="sect_C.4.2.1.6" xrefstyle="select: label"/></para>
          </section>
          <section label="Y.4.1.1.6" status="5" xml:id="sect_Y.4.1.1.6">
            <title>Number of Completed Sub-Operations</title>
            <para>Inclusion of the Number of Completed Sub-operations shall be as specified in <xref linkend="sect_C.4.2.1.7" xrefstyle="select: label"/></para>
          </section>
          <section label="Y.4.1.1.7" status="5" xml:id="sect_Y.4.1.1.7">
            <title>Number of Failed Sub-Operations</title>
            <para>Inclusion of the Number of Failed Sub-operations shall be as specified in <xref linkend="sect_C.4.2.1.8" xrefstyle="select: label"/></para>
          </section>
          <section label="Y.4.1.1.8" status="5" xml:id="sect_Y.4.1.1.8">
            <title>Number of Warning Sub-Operations</title>
            <para>Inclusion of the Number of Warning Sub-operations shall be as specified in <xref linkend="sect_C.4.2.1.9" xrefstyle="select: label"/>.</para>
          </section>
        </section>
        <section label="Y.4.1.2" status="4" xml:id="sect_Y.4.1.2">
          <title>C-MOVE SCU Behavior</title>
          <section label="Y.4.1.2.1" status="5" xml:id="sect_Y.4.1.2.1">
            <title>Baseline Behavior of SCU</title>
            <para>An SCU conveys the following semantics with a C-MOVE request:</para>
            <itemizedlist>
              <listitem>
                <para>If the Retrieve Level (0000,0052) is IMAGE, the SCU shall specify one SOP Instance UID or a list of SOP Instance UIDs.</para>
              </listitem>
              <listitem>
                <para>If the Retrieve Level (0000,0052) is FRAME, the SCU shall specify the single SOP Instance UID of the item from which the new Composite SOP Instance should be extracted and the requested Frame List. The Requested Frame List shall be constructed as defined in <xref linkend="sect_Y.3.2" xrefstyle="select: label"/>.</para>
              </listitem>
              <listitem>
                <para>The SCU shall accept C-MOVE responses with status equal to Pending during the processing of the C-STORE sub-operations. These responses indicate the number of Remaining, Completed, Failed and Warning C-STORE sub-operations.</para>
              </listitem>
              <listitem>
                <para>The SCU shall interpret a C-MOVE response with a status equal to Success, Warning, Failure, or Refused as a final response. The final response indicates the number of Completed sub-operations and the number of Failed C-STORE sub-operations resulting from the C-MOVE operation. The SCU shall interpret a status of:</para>
                <itemizedlist>
                  <listitem>
                    <para>Success to indicate that all sub-operations were successfully completed</para>
                  </listitem>
                  <listitem>
                    <para>Failure or Refused to indicate all sub-operations were unsuccessful</para>
                  </listitem>
                  <listitem>
                    <para>Warning in all other cases. The Number of Completed Sub-Operations (0000,1021), Number of Warning Sub-Operations (0000,1023), Number of Failed Sub-Operations (0000,1022) can be used to obtain more detailed information.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-MOVE operation by issuing a C-MOVE-CANCEL request at any time during the processing of the C-MOVE request. A C-MOVE response with a status of Canceled shall indicate to the SCU that the retrieve was canceled. Optionally, the C-MOVE response with a status of Canceled shall indicate the number of Completed, Failed, and Warning C-STORE sub-operations. If present, the Remaining sub-operations count shall contain the number of C-STORE sub-operations that were not initiated due to the C-MOVE-CANCEL request.</para>
              </listitem>
            </itemizedlist>
            <note>
              <para>For FRAME level C-MOVE operations, the application receiving the C-STORE sub-operations will receive a new SOP Instance with a different SOP Instance UID from the one included in the C-MOVE request. If it is required to link the received instance to the request, then it may be necessary to inspect the Frame Extraction Sequence of the instance received, to compare the original Instance UID and Requested Frame List to those in the request.</para>
            </note>
          </section>
          <section label="Y.4.1.2.2" status="5" xml:id="sect_Y.4.1.2.2">
            <title>Extended Behavior of SCU</title>
            <para>The extended behavior of the SCU shall be as specified in <xref linkend="sect_C.4.2.2.2" xrefstyle="select: label"/>, except that Relational-retrieve shall not be supported.</para>
          </section>
        </section>
        <section label="Y.4.1.3" status="4" xml:id="sect_Y.4.1.3">
          <title>C-MOVE SCP Behavior</title>
          <section label="Y.4.1.3.1" status="5" xml:id="sect_Y.4.1.3.1">
            <title>Baseline Behavior of SCP</title>
            <para>An SCP conveys the following semantics with a C-MOVE response:</para>
            <itemizedlist>
              <listitem>
                <para>If the Retrieve Level (0000,0052) is IMAGE the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-MOVE request.</para>
              </listitem>
              <listitem>
                <para>If the Retrieve Level (0000,0052) is FRAME, the SCP shall create a new Composite Instance according to the rules in section <xref linkend="sect_Y.3.2" xrefstyle="select: label"/>. The newly created SOP Instance shall be treated in the same manner as the set of Entities identified above.</para>
              </listitem>
              <listitem>
                <para>The SCP shall either re-use an established and compatible Association or establish a new Association for the C-STORE sub-operations</para>
              </listitem>
              <listitem>
                <para>The SCP shall initiate C-STORE sub-operations over the Association for the identified or newly created SOP Instances.</para>
              </listitem>
              <listitem>
                <para>A sub-operation is considered a Failure if the SCP is required to create new SOP Instance, but is unable to do so due to inconsistencies in the Frame Range Keys, or if the resulting SOP Instance would not be valid.</para>
              </listitem>
              <listitem>
                <para>Optionally, the SCP may generate responses to the C-MOVE with status equal to Pending during the processing of the C-STORE sub-operations. These responses shall indicate the number of Remaining, Completed, Failure, and Warning C-STORE sub-operations.</para>
              </listitem>
              <listitem>
                <para>When the number of Remaining sub-operations reaches zero, the SCP shall generate a final response with a status equal to Success, Warning or Failed. The status contained in the C-MOVE response shall contain:</para>
                <itemizedlist>
                  <listitem>
                    <para>Success if all sub-operations were successfully completed</para>
                  </listitem>
                  <listitem>
                    <para>Failure if all sub-operations were unsuccessful</para>
                  </listitem>
                  <listitem>
                    <para>Warning in all other cases.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>The SCP may receive a C-MOVE-CANCEL request at any time during the processing of the C-MOVE request. The SCP shall interrupt all C-STORE sub-operation processing and return a status of Canceled in the C-MOVE response. The C-MOVE response with a status of Canceled shall contain the number of Completed, Failed, and Warning C-STORE sub-operations. If present, the Remaining sub-operations count shall contain the number of C-STORE sub-operations that were not initiated due to the C-MOVE-CANCEL request.</para>
              </listitem>
              <listitem>
                <para>If the SCP manages images in multiple alternate encodings (see <xref linkend="sect_C.6.1.1.5.1" xrefstyle="select: label"/>), only one of the alternate encodings of an image shall be used as the existing SOP Instance from which frames are to be extracted.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="Y.4.1.3.2" status="5" xml:id="sect_Y.4.1.3.2">
            <title>Extended Behavior of SCP</title>
            <para>The extended behavior of the SCP shall be as specified in <xref linkend="sect_C.4.2.3.2" xrefstyle="select: label"/>, except that Relational-retrieve shall not be supported.</para>
          </section>
        </section>
      </section>
      <section label="Y.4.2" status="3" xml:id="sect_Y.4.2">
        <title>C-GET Operation</title>
        <para>SCUs of the Composite Instance Root Retrieve Service shall generate retrievals using the C-GET operation as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. The C-GET operation allows an application entity to instruct another application entity to transfer stored SOP Instances or new SOP Instances derived from such stored SOP Instances to the initiating application entity using the C-STORE operation. Support for the C-GET service shall be agreed upon at Association establishment time by both the SCU and SCP of the C-GET in order for a C-GET operation to occur over the Association. The C-STORE Sub-operations shall be accomplished on the same Association as the C-GET operation. Hence, the SCP of the Query/Retrieve Service Class serves as the SCU of the Storage Service Class.</para>
        <note>
          <para>The Application Entity that receives the stored SOP Instances is always the originator of the C-GET operation.</para>
        </note>
        <para>A C-GET request may be performed to any level of the Composite Instance Root Retrieve Information Model, and the expected SCP behavior depends on the level selected.</para>
        <section label="Y.4.2.1" status="4" xml:id="sect_Y.4.2.1">
          <title>C-GET Service Parameters</title>
          <section label="Y.4.2.1.1" status="5" xml:id="sect_Y.4.2.1.1">
            <title>SOP Class UID</title>
            <para>The SOP Class UID identifies the Query/Retrieve Information Model against which the C-GET is to be performed. Support for the SOP Class UID is implied by the Abstract Syntax UID of the Presentation Context used by this C-GET operation.</para>
          </section>
          <section label="Y.4.2.1.2" status="5" xml:id="sect_Y.4.2.1.2">
            <title>Priority</title>
            <para>The Priority Attribute defines the requested priority of the C-GET operation and corresponding C-STORE sub-operations with respect to other DIMSE operations being performed by the same SCP.</para>
            <para>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing, and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP. The same priority shall be used for all C-STORE sub-operations.</para>
          </section>
          <section label="Y.4.2.1.3" status="5" xml:id="sect_Y.4.2.1.3">
            <title>Identifier</title>
            <para>The C-GET request shall contain an Identifier. The C-GET response shall conditionally contain an Identifier as required in <xref linkend="sect_C.4.3.1.3.2" xrefstyle="select: label"/>.</para>
            <note>
              <para>The Identifier is specified as U in the definition of the C-GET primitive in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> but is specialized for use with this service.</para>
            </note>
            <section label="Y.4.2.1.3.1" status="6" xml:id="sect_Y.4.2.1.3.1">
              <title>Request Identifier Structure</title>
              <para>An Identifier in a C-GET request shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>the Query/Retrieve Level (0008,0052) that defines the level of the retrieval</para>
                </listitem>
                <listitem>
                  <para>SOP Instance UID(s) (0008,0018)</para>
                </listitem>
                <listitem>
                  <para>One of the Frame Range Keys if present in the Information Model for the level of the Retrieval</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Query/Retrieve View (0008,0053). This Attribute may be included if Enhanced Multi-Frame Image Conversion has accepted during Association Extended Negotiation. It shall not be included otherwise.</para>
                </listitem>
              </itemizedlist>
              <para>Specific Character Set (0008,0005) shall not be present.</para>
              <para>The Keys at each level of the hierarchy and the values allowable for the level of the retrieval shall be defined in the SOP Class definition for the Query/Retrieve Information Model.</para>
            </section>
          </section>
          <section label="Y.4.2.1.4" status="5" xml:id="sect_Y.4.2.1.4">
            <title>Status</title>
            <para>The status code values that might be returned in a C-GET response shall be as specified in <xref linkend="table_Y.4-2" xrefstyle="select: label"/></para>
            <table frame="box" label="Y.4-2" rules="all" xml:id="table_Y.4-2">
              <caption>C-GET Response Status Values for Instance Root Retrieve</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status Codes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Related Fields</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="9">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources - Unable to calculate number of matches</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A701</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources - Unable to perform sub-operations</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A702</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Identifier does not match SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A900</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to process</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Cxxx</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>None of the frames requested were found in the SOP Instance</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>AA00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to create new object for this SOP class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>AA01</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to extract frames</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>AA02</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Time-based request received for a non-time-based original SOP Instance.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>AA03</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Invalid Request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>AA04</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancel</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations terminated due to Cancel Indication</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FE00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Warning</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations Complete - One or more Failures or Warnings</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>B000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations Complete - No Failures or Warnings</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pending</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations are continuing</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="Y.4.2.1.5" status="5" xml:id="sect_Y.4.2.1.5">
            <title>Number of Remaining Sub-Operations</title>
            <para>Inclusion of the Number of Remaining Sub-operations shall be as specified in <xref linkend="sect_C.4.3.1.5" xrefstyle="select: label"/></para>
          </section>
          <section label="Y.4.2.1.6" status="5" xml:id="sect_Y.4.2.1.6">
            <title>Number of Completed Sub-Operations</title>
            <para>Inclusion of the Number of Completed Sub-operations shall be as specified in <xref linkend="sect_C.4.3.1.6" xrefstyle="select: label"/></para>
          </section>
          <section label="Y.4.2.1.7" status="5" xml:id="sect_Y.4.2.1.7">
            <title>Number of Failed Sub-Operations</title>
            <para>Inclusion of the Number of Failed Sub-operations shall be as specified in <xref linkend="sect_C.4.3.1.7" xrefstyle="select: label"/></para>
          </section>
          <section label="Y.4.2.1.8" status="5" xml:id="sect_Y.4.2.1.8">
            <title>Number of Warning Sub-Operations</title>
            <para>Inclusion of the Number of Warning Sub-operations shall be as specified in <xref linkend="sect_C.4.3.1.8" xrefstyle="select: label"/>.</para>
          </section>
        </section>
        <section label="Y.4.2.2" status="4" xml:id="sect_Y.4.2.2">
          <title>C-GET SCU Behavior</title>
          <section label="Y.4.2.2.1" status="5" xml:id="sect_Y.4.2.2.1">
            <title>Baseline Behavior of SCU</title>
            <para>An SCU conveys the following semantics with a C-GET request:</para>
            <itemizedlist>
              <listitem>
                <para>If the Retrieve Level (0000,0052) is IMAGE, the SCU shall specify one SOP Instance UID or a list of SOP Instance UIDs.</para>
              </listitem>
              <listitem>
                <para>If the Retrieve Level (0000,0052) is FRAME, the SCU shall specify the single SOP Instance UID of the item from which the new Composite SOP Instance should be extracted and the Requested Frame List. The Requested Frame List shall be constructed as a Frame List as defined in <xref linkend="sect_Y.3.2" xrefstyle="select: label"/>.</para>
              </listitem>
              <listitem>
                <para>The SCU shall have proposed sufficient presentation contexts at Association establishment time to accommodate expected C-STORE sub-operations that will occur over the same Association. The SCU of the Query/Retrieve Service Class shall serve as the SCP of the Storage Service Class.</para>
              </listitem>
              <listitem>
                <para>The SCU shall accept C-GET responses with status equal to Pending during the processing of the C-STORE sub-operations. These responses indicate the number of Remaining, Completed, Failed and Warning C-STORE sub-operations.</para>
              </listitem>
              <listitem>
                <para>The SCU shall interpret a C-GET response with a status equal to Success, Warning, Failure, or Refused as a final response. The final response indicates the number of Completed sub-operations and the number of Failed C-STORE sub-operations resulting from the C-GET operation. The SCU shall interpret a status of:</para>
                <itemizedlist>
                  <listitem>
                    <para>Success to indicate that all sub-operations were successfully completed</para>
                  </listitem>
                  <listitem>
                    <para>Failure or Refused to indicate all sub-operations were unsuccessful</para>
                  </listitem>
                  <listitem>
                    <para>Warning in all other cases. The Number of Completed Sub-Operations (0000,1021), Number of Warning Sub-Operations (0000,1023), Number of Failed Sub-Operations (0000,1022) can be used to obtain more detailed information.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-GET operation by issuing a C-GET-CANCEL request at any time during the processing of the C-GET request. A C-GET response with a status of Canceled shall indicate to the SCU that the retrieve was canceled. Optionally, the C-GET response with a status of Canceled shall indicate the number of Completed, Failed, and Warning C-STORE sub-operations. If present, the Remaining sub-operations count shall contain the number of C-STORE sub-operations that were not initiated due to the C-GET-CANCEL request.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="Y.4.2.2.2" status="5" xml:id="sect_Y.4.2.2.2">
            <title>Extended Behavior of SCU</title>
            <para>The extended behavior of the SCU shall be as specified in <xref linkend="sect_C.4.3.2.2" xrefstyle="select: label"/>, except that Relational-retrieve shall not be supported.</para>
          </section>
        </section>
        <section label="Y.4.2.3" status="4" xml:id="sect_Y.4.2.3">
          <title>C-GET SCP Behavior</title>
          <section label="Y.4.2.3.1" status="5" xml:id="sect_Y.4.2.3.1">
            <title>Baseline Behavior of SCP</title>
            <para>An SCP conveys the following semantics with a C-GET response:</para>
            <itemizedlist>
              <listitem>
                <para>If the Retrieve Level (0000,0052) is IMAGE the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-GET request.</para>
              </listitem>
              <listitem>
                <para>If the Retrieve Level (0000,0052) is FRAME, the SCP shall create a new Composite Instance according to the rules in section <xref linkend="sect_Y.3.3" xrefstyle="select: label"/>. The newly created SOP Instance shall be treated in the same manner as the set of Entities identified above.</para>
              </listitem>
              <listitem>
                <para>The SCP shall initiate C-STORE sub-operations for the identified or newly created SOP Instances. The SCP of the Query/Retrieve Service Class shall serve as an SCU of the Storage Service Class.</para>
              </listitem>
              <listitem>
                <para>The SCP shall initiate C-STORE sub-operations over the same Association for all identified or newly created SOP Instances specified in the C-GET request.</para>
              </listitem>
              <listitem>
                <para>A sub-operation is considered a Failure if the SCP is required to create new SOP Instance, but is unable to do so due to inconsistencies in the Frame Range Keys, or if the resulting SOP Instance would not be valid.</para>
              </listitem>
              <listitem>
                <para>A sub-operation is considered a Failure if the SCP is unable to initiate a C-STORE sub-operation because the Query/Retrieve SCU did not offer an appropriate presentation context for a given stored SOP Instance.</para>
              </listitem>
              <listitem>
                <para>Optionally, the SCP may generate responses to the C-GET with status equal to Pending during the processing of the C-STORE sub-operations. These responses shall indicate the number of Remaining, Completed, Failure, and Warning C-STORE sub-operations.</para>
              </listitem>
              <listitem>
                <para>When the number of Remaining sub-operations reaches zero, the SCP shall generate a final response with a status equal to Success, Warning or Failed. The status contained in the C-GET response shall contain:</para>
                <itemizedlist>
                  <listitem>
                    <para>Success if all sub-operations were successfully completed</para>
                  </listitem>
                  <listitem>
                    <para>Failure if all sub-operations were unsuccessful</para>
                  </listitem>
                  <listitem>
                    <para>Warning in all other cases.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>The SCP may receive a C-GET-CANCEL request at any time during the processing of the C-GET request. The SCP shall interrupt all C-STORE sub-operation processing and return a status of Canceled in the C-GET response. The C-GET response with a status of Canceled shall contain the number of Completed, Failed, and Warning C-STORE sub-operations. If present, the Remaining sub-operations count shall contain the number of C-STORE sub-operations that were not initiated due to the C-GET-CANCEL request.</para>
              </listitem>
              <listitem>
                <para>If the SCP manages images in multiple alternate encodings (see <xref linkend="sect_C.6.1.1.5.1" xrefstyle="select: label"/>), only one of the alternate encodings of an image shall be used as the existing SOP Instance from which frames are to be extracted.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="Y.4.2.3.2" status="5" xml:id="sect_Y.4.2.3.2">
            <title>Extended Behavior of SCP</title>
            <para>The extended behavior of the SCP shall be as specified in <xref linkend="sect_C.4.3.3.2" xrefstyle="select: label"/>, except that Relational-retrieve shall not be supported.</para>
          </section>
        </section>
      </section>
    </section>
    <section label="Y.5" status="2" xml:id="sect_Y.5">
      <title>Association Negotiation</title>
      <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. AEs supporting DICOM Query/Retrieve SOP Classes utilize Association establishment negotiation by defining the use of Application Association Information. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for an overview of Association negotiation.</para>
      <para>SOP Classes of the Composite Instance Root Retrieve Service, which include retrieval services based on the C-MOVE and C-GET operations, use the SCP/SCU Role Selection Sub-Item to identify the SOP Classes that may be used for retrieval.</para>
      <section label="Y.5.1" status="3" xml:id="sect_Y.5.1">
        <title>Association Negotiation for C-MOVE and C-GET SOP Classes</title>
        <para>Rules are as specified in <xref linkend="sect_C.5.3" xrefstyle="select: label"/>, except that the extended negotiation sub-item, if used, shall be used as defined in <xref linkend="sect_Y.5.1.1" xrefstyle="select: label"/>.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>Though converted images may be specified by their SOP Instance UID in the Request Identifier, which is always at or below the instance level, there remains a need for extended negotiation and specification of the Query/Retrieve View in order to assure that referential integrity is maintained within the returned SOP Instances (e.g., that a reference to a SOP Instance UID is to a converted image or not, as appropriate).</para>
            </listitem>
            <listitem>
              <para>Relational-retrieval is not applicable to these SOP Classes, hence the Extended Negotiation Sub-Item does not include the use of that byte.</para>
            </listitem>
          </orderedlist>
        </note>
        <section label="Y.5.1.1" status="4" xml:id="sect_Y.5.1.1">
          <title>SOP Class Extended Negotiation</title>
          <para>The SOP Class Extended Negotiation allows, at Association establishment, peer DICOM AEs to exchange application Association information defined by specific SOP Classes. This is achieved by defining the Service-class-application-information field. The Service-class-application-information field is used to define support for Enhanced Multi-Frame Image Conversion.</para>
          <para>This negotiation is optional. If absent, the default condition shall be:</para>
          <itemizedlist>
            <listitem>
              <para>no Enhanced Multi-Frame Image Conversion support</para>
            </listitem>
          </itemizedlist>
          <para>The Association-requester, for each SOP Class, may use one SOP Class Extended Negotiation Sub-Item. The SOP Class is identified by the corresponding Abstract Syntax Name (as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>) followed by the Service-class-application-information field. This field defines:</para>
          <itemizedlist>
            <listitem>
              <para>Enhanced Multi-Frame Image Conversion support by the Association-requester</para>
            </listitem>
          </itemizedlist>
          <para>The Association-acceptor, for each SOP Class Extended Negotiation Sub-Item offered, either accepts the Association-requester proposal by returning the same value (1) or turns down the proposal by returning the value (0).</para>
          <para>If the SOP Class Extended Negotiation Sub-Item is not returned by the Association-acceptor then Enhanced Multi-Frame Image Conversion is not supported (default condition).</para>
          <para>If the SOP Class Extended Negotiation Sub-Items do not exist in the A-ASSOCIATE indication they shall be omitted in the A-ASSOCIATE response.</para>
          <section label="Y.5.1.1.1" status="5" xml:id="sect_Y.5.1.1.1">
            <title>SOP Class Extended Negotiation Sub-Item Structure (A-ASSOCIATE-RQ)</title>
            <para>The SOP Class Extended Negotiation Sub-Item consists of a sequence of mandatory fields as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. <xref linkend="table_Y.5.1-1" xrefstyle="select: label"/> defines the Service-class-application-information field for the C-MOVE and C-GET operations.</para>
            <table frame="box" label="Y.5.1-1" rules="all" xml:id="table_Y.5.1-1">
              <caption>SOP Class Extended Negotiation Sub-Item (Service-Class-Application-Information Field) - A-ASSOCIATE-RQ</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Item Bytes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Field Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description of Field</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unused</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Reserved - shall be 0</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Enhanced Multi-Frame Image Conversion</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not the Attribute Query/Retrieve View (0008,0053) shall be used to adjust the view returned in queries to consider conversion to or from Enhanced Multi-Frame Images. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - Query/Retrieve View not supported</para>
                    <para>1 - Query/Retrieve View supported</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="Y.5.1.1.2" status="5" xml:id="sect_Y.5.1.1.2">
            <title>SOP Class Extended Negotiation Sub-Item Structure (A-ASSOCIATE-AC)</title>
            <para>The SOP Class Extended Negotiation Sub-Item consists of a sequence of mandatory fields as defined by <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. <xref linkend="table_Y.5.1-2" xrefstyle="select: label"/> defines the Service-class-application-information field for the C-MOVE and C-GET operations.</para>
            <table frame="box" label="Y.5.1-2" rules="all" xml:id="table_Y.5.1-2">
              <caption>SOP Class Extended Negotiation Sub-Item (Service-Class-Application-Information Field) - A-ASSOCIATE-AC</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Item Bytes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Field Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description of Field</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unused</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Reserved - shall not be tested.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Enhanced Multi-Frame Image Conversion</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This byte field defines whether or not the Attribute Query/Retrieve View (0008,0053) shall be used to adjust the view returned in queries to consider conversion to or from Enhanced Multi-Frame Images. It shall be encoded as an unsigned binary integer and shall use one of the following values</para>
                    <para>0 - Query/Retrieve View not supported</para>
                    <para>1 - Query/Retrieve View supported</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
      </section>
    </section>
    <section label="Y.6" status="2" xml:id="sect_Y.6">
      <title>SOP Class Definitions</title>
      <section label="Y.6.1" status="3" xml:id="sect_Y.6.1">
        <title>Composite Instance Root SOP Class Group</title>
        <para>In the Composite Instance Root Retrieve Only Information Model, the information is arranged into two levels that correspond to one of the two values in element (0008,0052) shown in <xref linkend="table_Y.6.1-1" xrefstyle="select: label"/>.</para>
        <table frame="box" label="Y.6.1-1" rules="all" xml:id="table_Y.6.1-1">
          <caption>Retrieve Level Values for Composite Instance Root</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Retrieve Level</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Value in (0008,0052)</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Composite Instance</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>IMAGE</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Frame</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>FRAME</para>
              </td>
            </tr>
          </tbody>
        </table>
        <note>
          <para>The use of the word "IMAGE" rather than "Composite Instance" is historical to allow backward compatibility with previous versions of the standard. It should not be taken to mean that Composite Instances of other than image type are not included at the level indicated by the value IMAGE.</para>
        </note>
        <section label="Y.6.1.1" status="4" xml:id="sect_Y.6.1.1">
          <title>Composite Instance Root Retrieve Only Information Model</title>
          <section label="Y.6.1.1.1" status="5" xml:id="sect_Y.6.1.1.1">
            <title>E/R Model</title>
            <para>The Composite Instance Root Retrieve Only Information Model may be represented by the entity relationship diagram shown in <xref linkend="figure_Y.6-1" xrefstyle="select: label"/></para>
            <para>
              <figure label="Y.6-1" pgwide="1" xml:id="figure_Y.6-1">
                <title>Composite Instance Root Information Model E/R Diagram</title>
                <mediaobject>
                  <imageobject>
                   <imagedata fileref="figures/PS3.4_Y.6-1.svg"/>
                    <!--<imagedata fileref="part04_fromword_files/image043.png"/>-->
                  </imageobject>
                </mediaobject>
              </figure>
            </para>
          </section>
          <section label="Y.6.1.1.2" status="5" xml:id="sect_Y.6.1.1.2">
            <title>Composite Instance Level</title>
            <para><xref linkend="table_Y.6-1" xrefstyle="select: label"/> defines the keys at the Composite Instance level of the Composite Instance Root Query/Retrieve Information model.</para>
            <table frame="box" label="Y.6-1" rules="all" xml:id="table_Y.6-1">
              <caption>Composite Instance Level Keys for the Composite Instance Root Query/Retrieve Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Matching Key Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0018)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="Y.6.1.1.3" status="5" xml:id="sect_Y.6.1.1.3">
            <title>Frame Level</title>
            <para><xref linkend="table_Y.6-2" xrefstyle="select: label"/> defines the keys at the Frame level of the Composite Instance Root Query/Retrieve Information Model. One and only one of the frame level keys listed in <xref linkend="table_Y.6-2" xrefstyle="select: label"/> shall be present in a FRAME level request</para>
            <table frame="box" label="Y.6-2" rules="all" xml:id="table_Y.6-2">
              <caption>Frame Level Keys for the Composite Instance Root Query/Retrieve Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Condition</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Simple Frame List</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1161)</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Calculated Frame List and Time Range are not present</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Calculated Frame List</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1162)</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Simple Frame List and Approximate Frame Range are not present</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Time Range</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1163)</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Simple Frame List and Calculated Frame List are not present</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="Y.6.1.1.4" status="5" xml:id="sect_Y.6.1.1.4">
            <title>Scope of the C-MOVE or C-GET Commands and Sub-Operations</title>
            <para>A C-MOVE or C-GET request may be performed to any level of the Query/Retrieve Model. A C-MOVE or C-GET where the Query/Retrieve level is the:</para>
            <para>IMAGE level indicates that selected individual Composite Instances shall be transferred</para>
            <para>FRAME level indicates that a single new Composite Instance shall be created and transferred</para>
            <note>
              <para>More than one entity may be retrieved if the Query/Retrieve Level is IMAGE using List of UID matching, but if the Query/Retrieve Level is FRAME then only a single entity may be retrieved.</para>
            </note>
          </section>
        </section>
        <section label="Y.6.1.2" status="4" xml:id="sect_Y.6.1.2">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to one of the Composite Instance Root Retrieve SOP Classes as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="Y.6.1.2.1" status="5" xml:id="sect_Y.6.1.2.1">
            <title>SCU Conformance</title>
            <section label="Y.6.1.2.1.1" status="6" xml:id="sect_Y.6.1.2.1.1">
              <title>C-MOVE SCU Conformance</title>
              <para>An implementation that conforms to one of the Composite Instance Root Retrieve SOP Classes as an SCU shall support transfers against the Retrieve Information Model described in <xref linkend="sect_Y.6.1.1" xrefstyle="select: label"/> using the C-MOVE SCU Behavior described in <xref linkend="sect_Y.4.1.2" xrefstyle="select: label"/>. An implementation that conforms to one of the SOP Classes of the Composite Instance Root SOP Class Group as an SCU, and that generates retrievals using the C-MOVE operation, shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C- MOVE.</para>
            </section>
            <section label="Y.6.1.2.1.2" status="6" xml:id="sect_Y.6.1.2.1.2">
              <title>C-GET SCU Conformance</title>
              <para>An implementation that conforms to one of the Composite Instance Root Retrieve SOP Classes as an SCU shall support retrievals against the Retrieve Information Model described in <xref linkend="sect_Y.6.1.1" xrefstyle="select: label"/> using the C-GET SCU Behavior described in <xref linkend="sect_Y.4.2.2" xrefstyle="select: label"/>. An implementation that conforms to one of the SOP Classes of the Composite Instance Root SOP Class Group as an SCU, which generates retrievals using the C-GET operation shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C-GET.</para>
            </section>
          </section>
          <section label="Y.6.1.2.2" status="5" xml:id="sect_Y.6.1.2.2">
            <title>SCP Conformance</title>
            <para>An implementation that conforms to one of the Composite Instance Root Retrieve SOP Classes as an SCP for C-GET operations shall:1) support both levels of the Composite Instance Root Retrieve Only Information Model</para>
            <para>2) support all three Frame Level keys</para>
            <para>3) describe in its conformance statement the transformations it applies to a multi-frame Composite Instance when creating a new Composite Instance as defined in <xref linkend="sect_Y.3.3" xrefstyle="select: label"/>.</para>
            <section label="Y.6.1.2.2.1" status="6" xml:id="sect_Y.6.1.2.2.1">
              <title>C-MOVE SCP Conformance</title>
              <para>An implementation that conforms to one of the Composite Instance Root Retrieve SOP Classes as an SCP shall support retrievals against both levels of the Retrieve Information Model described in <xref linkend="sect_Y.6.1.1" xrefstyle="select: label"/> using the C-MOVE SCP Behavior described in <xref linkend="sect_Y.4.1.3" xrefstyle="select: label"/>. An implementation that conforms to one of the SOP Classes of the Composite Instance Root SOP Class Group as an SCP, which satisfies retrievals using the C- MOVE operation shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C- MOVE.</para>
            </section>
            <section label="Y.6.1.2.2.2" status="6" xml:id="sect_Y.6.1.2.2.2">
              <title>C-GET SCP Conformance</title>
              <para>An implementation that conforms to one of the Composite Instance Root Retrieve SOP Classes as an SCP shall support retrievals against both levels of the Retrieve Information Model described in <xref linkend="sect_Y.6.1.1" xrefstyle="select: label"/> using the C-GET SCP Behavior described in <xref linkend="sect_Y.4.2.3" xrefstyle="select: label"/>. An implementation that conforms to one of the SOP Classes of the Composite Instance Root SOP Class Group as an SCP, and that satisfies retrievals using the C-GET operation, shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C-GET.</para>
            </section>
          </section>
        </section>
        <section label="Y.6.1.3" status="4" xml:id="sect_Y.6.1.3">
          <title>SOP Classes</title>
          <para>The SOP Classes in the Composite Instance Root SOP Class Group of the Query/Retrieve Service Class identify the Composite Instance Root Retrieve Only Information Model, and the DIMSE-C operations supported. The Standard SOP Classes are listed in <xref linkend="table_Y.6.1.3-1" xrefstyle="select: label"/>.</para>
          <table frame="box" label="Y.6.1.3-1" rules="all" xml:id="table_Y.6.1.3-1">
            <caption>SOP Classes for Composite Instance Query/Retrieve Root</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">UID NAME</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">UID Value</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Composite Instance Root Retrieve - MOVE</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.1.2.4.2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Composite Instance Root Retrieve - GET</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.1.2.4.3</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="Z" status="1" xml:id="chapter_Z">
    <title>Composite Instance Retrieve Without Bulk Data SOP Classes (Normative)</title>
    <section label="Z.1" status="2" xml:id="sect_Z.1">
      <title>Overview</title>
      <section label="Z.1.1" status="3" xml:id="sect_Z.1.1">
        <title>Scope</title>
        <para>Composite Instance Retrieve Without Bulk Data Service is a service within the DICOM Query/Retrieve Service class defined in <xref linkend="chapter_C" xrefstyle="template: Annex %n"/>.The retrieve capability of this service allows a DICOM AE to retrieve Composite Instances without retrieving their pixel data or other potentially large Attributes as defined in <xref linkend="sect_Z.1.3" xrefstyle="select: label"/>.</para>
        <para>The Enhanced Multi-Frame Image Conversion Extended Negotiation Option of the DICOM Query/Retrieve Service class defined in <xref linkend="chapter_C" xrefstyle="template: Annex %n"/> is also supported for the Composite Instance Root Retrieve Service.</para>
      </section>
      <section label="Z.1.2" status="3" xml:id="sect_Z.1.2">
        <title>Composite Instance Retrieve Without Bulk Data Information Model</title>
        <para>Retrievals are implemented against the Composite Instance Retrieve Without Bulk Data Information Model, as defined in this Annex of the DICOM Standard. A specific SOP Class of the Query/Retrieve Service Class consists of an Information Model Definition and a DIMSE-C Service Group.</para>
      </section>
      <section label="Z.1.3" status="3" xml:id="sect_Z.1.3">
        <title>Attributes Not Included</title>
        <para>The Attributes that shall not be included in the top level of the Data set sent by an SCP of this Service are as defined in <xref linkend="table_Z.1-1" xrefstyle="select: label"/></para>
        <table frame="box" label="Z.1-1" rules="all" xml:id="table_Z.1-1">
          <caption>Attributes Not to Be Included in Instances Sent</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Attribute</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Tag</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Pixel Data</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(7FE0,0010)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Pixel Data Provider URL</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0028,7FE0)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Spectroscopy Data</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(5600,0020)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Overlay Data</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(60xx,3000)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Curve Data</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(50xx,3000)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Audio Sample Data</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(50xx,200C)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Encapsulated Document</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>(0042,0011)</para>
              </td>
            </tr>
          </tbody>
        </table>
        <note>
          <para>This implies that the pixel data within Icon Image Sequence (0088,0200) Items will be preserved.</para>
        </note>
        <para>The Waveform Data (5400,1010) Attribute shall not be included within the Waveform Sequence (5400,0100).</para>
      </section>
      <section label="Z.1.4" status="3" xml:id="sect_Z.1.4">
        <title>Service Definition</title>
        <para>Two peer DICOM AEs implement a SOP Class of the Composite Instance Retrieve Without Bulk Data Service with one serving in the SCU role and one serving in the SCP role. SOP Classes of the Composite Instance Retrieve Without Bulk Data Service are implemented using the DIMSE-C C-GET service as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <para>The following descriptions of the DIMSE-C C-GET service provide a brief overview of the SCU/SCP semantics:</para>
        <orderedlist numeration="loweralpha">
          <listitem>
            <para>A C-GET service conveys the following semantics:</para>
            <itemizedlist>
              <listitem>
                <para>The SCP shall identify a set of Entities at the level of the retrieval based upon the values in the Unique Keys in the Identifier of the C-GET request. The SCP shall then generate C-STORE sub-operations for the corresponding storage SOP Instances, but shall not include Attributes as described in <xref linkend="sect_Z.1.3" xrefstyle="select: label"/> in the data sent during those sub-operations. These C-STORE sub-operations occur on the same Association as the C-GET service and the SCU/SCP roles are reversed for the C-STORE.</para>
                <note>
                  <para>If the source instance does not contain any of the Attributes described in <xref linkend="sect_Z.1.3" xrefstyle="select: label"/> then, the version sent via the C-STORE sub-operation would be identical to the original data. This is not an error.</para>
                </note>
              </listitem>
              <listitem>
                <para>The SCP may optionally generate responses to the C-GET with status equal to Pending during the processing of the C-STORE sub-operations. These C-GET responses indicate the number of remaining C-STORE sub-operations and the number of C-STORE sub-operations returning the status of Success, Warning, and Failed.</para>
              </listitem>
              <listitem>
                <para>When the number of Remaining C-STORE sub-operations reaches zero, the SCP generates a final response with a status equal to Success, Warning, Failed, or Refused. This response shall indicate the number of C-STORE sub-operations returning the status of Success, Warning, and Failed. If the status of any C-STORE sub-operation was Failed a UID List shall be returned.</para>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-GET service by issuing a C-GET-CANCEL request at any time during the processing of the C-GET. The SCP terminates all incomplete C-STORE sub-operations and returns a status of Canceled.</para>
              </listitem>
            </itemizedlist>
          </listitem>
        </orderedlist>
      </section>
    </section>
    <section label="Z.2" status="2" xml:id="sect_Z.2">
      <title>Composite Instance Retrieve Without Bulk Data Information Model Definition</title>
      <para>The Composite Instance Retrieve Without Bulk Data Information Model is identified by the SOP Class negotiated at Association establishment time. The SOP Class is composed of both an Information Model and a DIMSE-C Service Group.</para>
      <note>
        <para>This SOP Class identifies the class of the Composite Instance Retrieve Without Bulk Data Information Model (i.e., not the SOP Class of the stored SOP Instances for which the SCP has information).</para>
      </note>
      <para>Information Model Definitions for standard SOP Classes of the Composite Instance Retrieve Without Bulk Data Service are defined in this Annex. A Composite Instance Retrieve Without Bulk Data Information Model Definition contains:</para>
      <itemizedlist>
        <listitem>
          <para>Entity-Relationship Model Definition</para>
        </listitem>
        <listitem>
          <para>Key Attributes Definition</para>
        </listitem>
      </itemizedlist>
      <section label="Z.2.1" status="3" xml:id="sect_Z.2.1">
        <title>Entity-Relationship Model Definition</title>
        <para>For any Composite Instance Retrieve Without Bulk Data Information Model, an Entity-Relationship Model defines a hierarchy of entities, with Attributes defined for each level in the hierarchy (e.g., Composite Instance, Frame)..</para>
      </section>
      <section label="Z.2.2" status="3" xml:id="sect_Z.2.2">
        <title>Attributes Definition</title>
        <para>Attributes and matching shall be as defined in section <xref linkend="sect_C.2.2" xrefstyle="select: label"/></para>
      </section>
    </section>
    <section label="Z.3" status="2" xml:id="sect_Z.3">
      <title>Standard Composite Instance Retrieve Without Bulk Data Information Model</title>
      <para>One standard Composite Instance Retrieve Without Bulk Data Information Model is defined in this Annex. The Composite Instance Retrieve Without Bulk Data Information Model is associated with a single SOP Class. The following Composite Instance Retrieve Without Bulk Data Information Model is defined:</para>
      <itemizedlist>
        <listitem>
          <para>Retrieve Without Bulk Data</para>
        </listitem>
      </itemizedlist>
      <section label="Z.3.1" status="3" xml:id="sect_Z.3.1">
        <title>Composite Instance Retrieve Without Bulk Data Information Model</title>
        <para>The Composite Instance Retrieve Without Bulk Data Information Model is based upon a one level hierarchy:</para>
        <itemizedlist>
          <listitem>
            <para>Composite Instance</para>
          </listitem>
        </itemizedlist>
        <para>The Retrieve Without Bulk Data Information Model may be represented by the entity relationship diagram shown in <xref linkend="figure_Z.3.1-1" xrefstyle="select: label"/>.</para>
        <para>
          <figure label="Z.3.1-1" pgwide="1" xml:id="figure_Z.3.1-1">
            <title>Retrieve Without Bulk Data Information Model E/R Diagram</title>
            <mediaobject>
              <imageobject>
               <imagedata fileref="figures/PS3.4_Z.3.1-1.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image045.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
        <para>The Composite Instance level is the only level and contains only the SOP Instance UID.</para>
      </section>
    </section>
    <section label="Z.4" status="2" xml:id="sect_Z.4">
      <title>DIMSE-C Service Groups</title>
      <para>A single DIMSE-C Service is used in the construction of SOP Classes of the Composite Instance Retrieve Without Bulk Data Service. The following DIMSE-C operation is used:</para>
      <itemizedlist>
        <listitem>
          <para>C-GET</para>
        </listitem>
      </itemizedlist>
      <section label="Z.4.1" status="3" xml:id="sect_Z.4.1">
        <title>C-GET Operation</title>
        <para>SCUs of the Composite Instance Retrieve Without Bulk Data Service shall generate retrievals using the C-GET operation as described in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>. The C-GET operation allows an application entity to instruct another application entity to transfer SOP Instances without the Attributes as described in <xref linkend="sect_Z.1.3" xrefstyle="select: label"/> to the initiating application entity using the C-STORE operation. Support for the C-GET service shall be agreed upon at Association establishment time by both the SCU and SCP of the C-GET in order for a C-GET operation to occur over the Association. The C-STORE Sub-operations shall be accomplished on the same Association as the C-GET operation. Hence, the SCP of the Query/Retrieve Service Class serves as the SCU of the Storage Service Class.</para>
        <note>
          <para>The Application Entity that receives the stored SOP Instances is always the originator of the C-GET operation.</para>
        </note>
        <section label="Z.4.2.1" status="4" xml:id="sect_Z.4.2.1">
          <title>C-GET Service Parameters</title>
          <section label="Z.4.2.1.1" status="5" xml:id="sect_Z.4.2.1.1">
            <title>SOP Class UID</title>
            <para>The SOP Class UID identifies the Query/Retrieve Information Model against which the C-GET is to be performed. Support for the SOP Class UID is implied by the Abstract Syntax UID of the Presentation Context used by this C-GET operation.</para>
          </section>
          <section label="Z.4.2.1.2" status="5" xml:id="sect_Z.4.2.1.2">
            <title>Priority</title>
            <para>The Priority Attribute defines the requested priority of the C-GET operation and corresponding C-STORE sub-operations with respect to other DIMSE operations being performed by the same SCP.</para>
            <para>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing, and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP. The same priority shall be used for all C-STORE sub-operations.</para>
          </section>
          <section label="Z.4.2.1.3" status="5" xml:id="sect_Z.4.2.1.3">
            <title>Identifier</title>
            <para>The C-GET request shall contain an Identifier. The C-GET response shall conditionally contain an Identifier as required in <xref linkend="sect_C.4.3.1.3.2" xrefstyle="select: label"/>.</para>
            <note>
              <para>The Identifier is specified as U in the definition of the C-GET primitive in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> but is specialized for use with this service.</para>
            </note>
            <section label="Z.4.2.1.3.1" status="6" xml:id="sect_Z.4.2.1.3.1">
              <title>Request Identifier Structure</title>
              <para>An Identifier in a C-GET request shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>the Query/Retrieve Level (0008,0052) that defines the level of the retrieval</para>
                </listitem>
                <listitem>
                  <para>SOP Instance UID(s) (0008,0018)</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Query/Retrieve View (0008,0053). This Attribute may be included if Enhanced Multi-Frame Image Conversion has accepted during Association Extended Negotiation. It shall not be included otherwise.</para>
                </listitem>
              </itemizedlist>
              <para>Query/Retrieve Level (0008,0052) shall be IMAGE.</para>
              <para>Specific Character Set (0008,0005) shall not be present.</para>
              <para>The Keys at each level of the hierarchy and the values allowable for the level of the retrieval are defined in the SOP Class definition for the Query/Retrieve Information Model.</para>
            </section>
          </section>
          <section label="Z.4.2.1.4" status="5" xml:id="sect_Z.4.2.1.4">
            <title>Status</title>
            <para>The status code values that might be returned in a C-GET response shall be as specified in <xref linkend="table_Z.4-1" xrefstyle="select: label"/></para>
            <table frame="box" label="Z.4-1" rules="all" xml:id="table_Z.4-1">
              <caption>C-GET Response Status Values for Instance Root Retrieve</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Service Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Further Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status Codes</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Related Fields</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="4">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources - Unable to calculate number of matches</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A701</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Refused: Out of Resources - Unable to perform sub-operations</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A702</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Identifier does not match SOP Class</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>A900</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unable to process</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Cxxx</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,0901)</para>
                    <para>(0000,0902)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cancel</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations terminated due to Cancel Indication</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FE00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Warning</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations Complete - One or more Failures or Warnings</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>B000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations Complete - No Failures or Warnings</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pending</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Sub-operations are continuing</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>FF00</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0000,1020)</para>
                    <para>(0000,1021)</para>
                    <para>(0000,1022)</para>
                    <para>(0000,1023)</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="Z.4.2.1.5" status="5" xml:id="sect_Z.4.2.1.5">
            <title>Number of Remaining Sub-Operations</title>
            <para>Inclusion of the Number of Remaining Sub-operations shall be as specified in <xref linkend="sect_C.4.3.1.5" xrefstyle="select: label"/></para>
          </section>
          <section label="Z.4.2.1.6" status="5" xml:id="sect_Z.4.2.1.6">
            <title>Number of Completed Sub-Operations</title>
            <para>Inclusion of the Number of Completed Sub-operations shall be as specified in <xref linkend="sect_C.4.3.1.6" xrefstyle="select: label"/></para>
          </section>
          <section label="Z.4.2.1.7" status="5" xml:id="sect_Z.4.2.1.7">
            <title>Number of Failed Sub-Operations</title>
            <para>Inclusion of the Number of Failed Sub-operations shall be as specified in <xref linkend="sect_C.4.3.1.7" xrefstyle="select: label"/></para>
          </section>
          <section label="Z.4.2.1.8" status="5" xml:id="sect_Z.4.2.1.8">
            <title>Number of Warning Sub-Operations</title>
            <para>Inclusion of the Number of Warning Sub-operations shall be as specified in <xref linkend="sect_C.4.3.1.8" xrefstyle="select: label"/>.</para>
          </section>
        </section>
        <section label="Z.4.2.2" status="4" xml:id="sect_Z.4.2.2">
          <title>C-GET SCU and C-STORE SCP Behavior</title>
          <section label="Z.4.2.2.1" status="5" xml:id="sect_Z.4.2.2.1">
            <title>Baseline Behavior of SCU</title>
            <para>An SCU conveys the following semantics with a C-GET request:</para>
            <itemizedlist>
              <listitem>
                <para>The SCU shall specify one Instance UID or a list of Instance UIDs.</para>
              </listitem>
              <listitem>
                <para>The SCU shall have proposed sufficient presentation contexts at Association establishment time to accommodate expected C-STORE sub-operations that will occur over the same Association. The SCU of the Query/Retrieve Service Class shall serve as the SCP of the Storage Service Class.</para>
              </listitem>
              <listitem>
                <para>The SCP of the Storage Service Class shall not store the incomplete SOP Instance; rather the behavior is implementation defined.</para>
              </listitem>
              <listitem>
                <para>The SCU shall accept C-GET responses with status equal to Pending during the processing of the C-STORE sub-operations. These responses indicate the number of Remaining, Completed, Failed and Warning C-STORE sub-operations.</para>
              </listitem>
              <listitem>
                <para>The SCU shall interpret a C-GET response with a status equal to Success, Warning, Failure, or Refused as a final response. The final response indicates the number of Completed sub-operations and the number of Failed C-STORE sub-operations resulting from the C-GET operation. The SCU shall interpret a status of:</para>
                <itemizedlist>
                  <listitem>
                    <para>Success to indicate that all sub-operations were successfully completed</para>
                  </listitem>
                  <listitem>
                    <para>Failure or Refused to indicate all sub-operations were unsuccessful</para>
                  </listitem>
                  <listitem>
                    <para>Warning in all other cases. The Number of Completed Sub-Operations (0000,1021), Number of Warning Sub-Operations (0000,1023), Number of Failed Sub-Operations (0000,1022) can be used to obtain more detailed information.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>The SCU may cancel the C-GET operation by issuing a C-GET-CANCEL request at any time during the processing of the C-GET request. A C-GET response with a status of Canceled shall indicate to the SCU that the retrieve was canceled. Optionally, the C-GET response with a status of Canceled shall indicate the number of Completed, Failed, and Warning C-STORE sub-operations. If present, the Remaining sub-operations count shall contain the number of C-STORE sub-operations that were not initiated due to the C-GET-CANCEL request.</para>
              </listitem>
              <listitem>
                <para>The SCP of the Storage Service Class shall not return a status of "Error: Data set does not match SOP Class" (A9xx) or "Warning: Data set does not match SOP Class" (B007) due to the absence of the Attributes described in <xref linkend="sect_Z.1.3" xrefstyle="select: label"/>.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="Z.4.2.2.2" status="5" xml:id="sect_Z.4.2.2.2">
            <title>Extended Behavior of SCU</title>
            <para>The extended behavior of the SCU shall be as specified in <xref linkend="sect_C.4.3.2.2" xrefstyle="select: label"/>, except that Relational-retrieve shall not be supported.</para>
          </section>
        </section>
        <section label="Z.4.2.3" status="4" xml:id="sect_Z.4.2.3">
          <title>C-GET SCP and C-STORE SCU Behavior</title>
          <section label="Z.4.2.3.1" status="5" xml:id="sect_Z.4.2.3.1">
            <title>Baseline Behavior of SCP</title>
            <para>An SCP conveys the following semantics with a C-GET response:</para>
            <itemizedlist>
              <listitem>
                <para>The SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-GET request.</para>
              </listitem>
              <listitem>
                <para>The SCP shall initiate C-STORE sub-operations for the identified SOP Instances, but shall not include in this C-STORE sub-operation the Attributes described in section <xref linkend="sect_Z.1.3" xrefstyle="select: label"/>. The SCP of the Query/Retrieve Service Class shall serve as an SCU of the Storage Service Class.</para>
              </listitem>
              <listitem>
                <para>Apart from the Attributes listed in section <xref linkend="sect_Z.1.3" xrefstyle="select: label"/>, the SOP Instance sent via the C-STORE sub-operation shall be unchanged, and no corresponding changes to other Attributes shall be made.</para>
              </listitem>
            </itemizedlist>
            <note>
              <para>In particular, the Study, Series and SOP Instance UIDs and SOP Class UID will not be altered.</para>
            </note>
            <itemizedlist>
              <listitem>
                <para>The SCP shall initiate C-STORE sub-operations over the same Association for all SOP Instances specified in the C-GET request.</para>
              </listitem>
              <listitem>
                <para>A sub-operation is considered a Failure if the SCP is unable to initiate a C-STORE sub-operation because the Query/Retrieve SCU did not offer an appropriate presentation context for a given stored SOP Instance.</para>
              </listitem>
              <listitem>
                <para>Optionally, the SCP may generate responses to the C-GET with status equal to Pending during the processing of the C-STORE sub-operations. These responses shall indicate the number of Remaining, Completed, Failure, and Warning C-STORE sub-operations.</para>
              </listitem>
              <listitem>
                <para>When the number of Remaining sub-operations reaches zero, the SCP shall generate a final response with a status equal to Success, Warning or Failed. The status contained in the C-GET response shall contain:</para>
                <itemizedlist>
                  <listitem>
                    <para>Success if all sub-operations were successfully completed</para>
                  </listitem>
                  <listitem>
                    <para>Failure if all sub-operations were unsuccessful</para>
                  </listitem>
                  <listitem>
                    <para>Warning in all other cases.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para>The SCP may receive a C-GET-CANCEL request at any time during the processing of the C-GET request. The SCP shall interrupt all C-STORE sub-operation processing and return a status of Canceled in the C-GET response. The C-GET response with a status of Canceled shall contain the number of Completed, Failed, and Warning C-STORE sub-operations. If present, the Remaining sub-operations count shall contain the number of C-STORE sub-operations that were not initiated due to the C-GET-CANCEL request.</para>
              </listitem>
              <listitem>
                <para>If the SCP manages images in multiple alternate encodings (see <xref linkend="sect_C.6.1.1.5.1" xrefstyle="select: label"/>), only one of the alternate encodings of an image shall be used as the existing SOP Instance from which frames are to be extracted.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="Z.4.2.3.2" status="5" xml:id="sect_Z.4.2.3.2">
            <title>Extended Behavior of SCP</title>
            <para>The extended behavior of the SCP shall be as specified in <xref linkend="sect_C.4.3.3.2" xrefstyle="select: label"/>, except that Relational-retrieve shall not be supported.</para>
          </section>
        </section>
      </section>
    </section>
    <section label="Z.5" status="2" xml:id="sect_Z.5">
      <title>Association Negotiation</title>
      <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. AEs supporting DICOM Query/Retrieve SOP Classes utilize Association establishment negotiation by defining the use of Application Association Information. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for an overview of Association negotiation.</para>
      <para>SOP Classes of the Composite Instance Retrieve Without Bulk Data Service, which include retrieval services based on the C-GET operation, use the SCP/SCU Role Selection Sub-Item to identify the SOP Classes that may be used for retrieval.</para>
      <section label="Z.5.1" status="3" xml:id="sect_Z.5.1">
        <title>Association Negotiation for C-GET SOP Classes</title>
        <para>Rules are as specified in <xref linkend="sect_C.5.3" xrefstyle="select: label"/>, except that the extended negotiation sub-item, if used, shall be used as defined in <xref linkend="sect_Y.5.1.1" xrefstyle="select: label"/>.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para>Though converted images may be specified by their SOP Instance UID in the Request Identifier, which is always at the instance level, there remains a need for extended negotiation and specification of the Query/Retrieve View in order to assure that referential integrity is maintained within the returned SOP Instances (e.g., that a reference to a SOP Instance UID is to a converted image or not, as appropriate).</para>
            </listitem>
            <listitem>
              <para>Relational-retrieval is not applicable to this SOP Class, hence the Extended Negotiation Sub-Item does not include the use of that byte.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
    </section>
    <section label="Z.6" status="2" xml:id="sect_Z.6">
      <title>SOP Class Definitions</title>
      <section label="Z.6.1" status="3" xml:id="sect_Z.6.1">
        <title>Composite Instance Retrieve Without Bulk Data SOP Class Group</title>
        <para>In the Composite Instance Retrieve Without Bulk Data Only Information Model, only a single Retrieve Level is used.</para>
        <table frame="box" label="Z.6.1-1" rules="all" xml:id="table_Z.6.1-1">
          <caption>Retrieve Level Value for Retrieve Without Bulk Data</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Retrieve Level</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Value in (0008,0052)</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>Composite Instance</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>IMAGE</para>
              </td>
            </tr>
          </tbody>
        </table>
        <note>
          <para>The use of the word "IMAGE" rather than "Composite Instance" is historical to allow backward compatibility with previous versions of the standard. It should not be taken to mean that Composite Instances of other than image type are not included at the level indicated by the value IMAGE.</para>
        </note>
        <section label="Z.6.1.1" status="4" xml:id="sect_Z.6.1.1">
          <title>Composite Instance Retrieve Without Bulk Data Information Model</title>
          <section label="Z.6.1.1.1" status="5" xml:id="sect_Z.6.1.1.1">
            <title>E/R Model</title>
            <para>The Composite Instance Retrieve Without Bulk Data Only Information Model has only a single level: IMAGE.</para>
          </section>
          <section label="Z.6.1.1.2" status="5" xml:id="sect_Z.6.1.1.2">
            <title>Composite Instance Level</title>
            <para><xref linkend="table_Z.6-1" xrefstyle="select: label"/> defines the keys at the Composite Instance level of the Composite Instance Retrieve Without Bulk Data Query/Retrieve Information model.</para>
            <table frame="box" label="Z.6-1" rules="all" xml:id="table_Z.6-1">
              <caption>Composite Instance Level Keys for the Composite Instance Root Query/Retrieve Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Matching Key Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0018)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="Z.6.1.1.3" status="5" xml:id="sect_Z.6.1.1.3">
            <title>Scope of the C-GET Commands and Sub-Operations</title>
            <para>A C-GET request may only be performed at the IMAGE level of the Query/Retrieve Model. A C-GET indicates that selected individual Composite Instances, without bulk data Attributes shall be transferred.</para>
          </section>
        </section>
        <section label="Z.6.1.2" status="4" xml:id="sect_Z.6.1.2">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to one of the SOP Classes of the Composite Instance Retrieve Without Bulk Data SOP Class Group as an SCU, SCP or both. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="Z.6.1.2.1" status="5" xml:id="sect_Z.6.1.2.1">
            <title>SCU Conformance</title>
            <para>An implementation that conforms to one of the SOP Classes of the Composite Instance Retrieve Without Bulk Data SOP Class Group as an SCU shall support retrievals against the Query/Retrieve Information Model described in <xref linkend="sect_Z.6.1.1" xrefstyle="select: label"/> using the C-GET SCU Behavior described in <xref linkend="sect_Z.4.2.2" xrefstyle="select: label"/>. An implementation that conforms to one of the SOP Classes of the Composite Instance Retrieve Without Bulk Data SOP Class Group as an SCU, and that generates retrievals using the C-GET operation, shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C-GET.</para>
          </section>
          <section label="Z.6.1.2.2" status="5" xml:id="sect_Z.6.1.2.2">
            <title>SCP Conformance</title>
            <para>An implementation that conforms to one of the SOP Classes of the Composite Instance Retrieve Without Bulk Data SOP Class Group as an SCP shall support retrievals against both levels of the Retrieve Information Model described in <xref linkend="sect_Z.6.1.1" xrefstyle="select: label"/> using the C-GET SCP Behavior described in <xref linkend="sect_Z.4.2.3" xrefstyle="select: label"/>. An implementation that conforms to one of the SOP Classes of the Composite Instance Retrieve Without Bulk Data SOP Class Group as an SCP, and that satisfies retrievals using the C-GET operation, shall state in its Conformance Statement the Storage Service Class SOP Classes under which it shall support the C-STORE sub-operations generated by the C-GET.</para>
          </section>
        </section>
        <section label="Z.6.1.3" status="4" xml:id="sect_Z.6.1.3">
          <title>SOP Classes</title>
          <para>The SOP Classes in the Composite Instance Retrieve Without Bulk Data SOP Class Group of the Query/Retrieve Service Class identify the Composite Instance Retrieve Without Bulk Data Only Information Model, and the DIMSE-C operations supported. The Standard SOP Classes are listed in <xref linkend="table_Z.6.1.3-1" xrefstyle="select: label"/>.</para>
          <table frame="box" label="Z.6.1.3-1" rules="all" xml:id="table_Z.6.1.3-1">
            <caption>SOP Classes for Composite Instance Query/Retrieve Root</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">UID NAME</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">UID Value</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Composite Instance Retrieve Without Bulk Data - GET</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.1.2.5.3</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="AA" status="1" xml:id="chapter_AA">
    <title>Ophthalmic Refractive Measurements Storage SOP Classes(Normative)</title>
    <section label="AA.1" status="3" xml:id="sect_AA.1">
      <title>Scope</title>
      <para>Refractive instruments are the most commonly used instruments in eye care. At present many of them have the capability for digital output, but their data is most often addressed by manual input into a paper or electronic record. Lensometry, Autorefraction, Keratometry, Subjective Refraction, and Visual Acuity Measurements SOP Classes support devices such as lensometers, auto-refractors, keratometers, autophoropters, and autoprojectors.</para>
    </section>
    <section label="AA.2" status="3" xml:id="sect_AA.2">
      <title>Behavior of a SCP</title>
      <para>For a device that is both a SCU and a SCP of these Storage SOP Classes, in addition to the behavior for the Storage Service Class specified in <xref linkend="sect_B.2.2" xrefstyle="select: label"/>, the following additional requirements are specified for Structured Reporting Storage SOP Classes:</para>
      <itemizedlist>
        <listitem>
          <para>A SCP of these SOP Class shall support Level 2 Conformance as defined in <xref linkend="sect_B.4.1" xrefstyle="select: label"/>.</para>
        </listitem>
      </itemizedlist>
      <note>
        <para>This requirement means that all Type 1, Type 2, and Type 3 Attributes defined in the Information Object Definition and Private Attributes associated with the SOP Class will be stored and may be accessed.</para>
      </note>
    </section>
  </chapter>
  <chapter label="BB" status="1" xml:id="chapter_BB">
    <title>Implant Template Query/Retrieve Service Classes</title>
    <section label="BB.1" status="2" xml:id="sect_BB.1">
      <title>Overview</title>
      <section label="BB.1.1" status="3" xml:id="sect_BB.1.1">
        <title>Scope</title>
        <para>The Implant Template Query/Retrieve Service Classes define application-level classes-of-service that facilitate access to Implant Template and Implant Assembly Template composite objects.</para>
      </section>
      <section label="BB.1.2" status="3" xml:id="sect_BB.1.2">
        <title>Conventions</title>
        <para>Key Attributes serve two purposes; they may be used as Matching Key Attributes or as Return Key Attributes. Matching Key Attributes may be used for matching (criteria to be used in the C-FIND request to determine whether an entity matches the query). Return Key Attributes may be used to specify desired return Attributes (what elements in addition to the Matching Key Attributes have to be returned in the C-FIND response).</para>
        <note>
          <para>Matching Keys are typically used in an SQL 'where' clause. Return Keys are typically used in an SQL 'select' clause to convey the Attribute values.</para>
        </note>
        <para>Matching Key Attributes may be of Type "required" (R) or "optional" (O). Return Key Attributes may be of Type 1, 1C, 2, 2C, 3 as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="BB.1.3" status="3" xml:id="sect_BB.1.3">
        <title>Query/Retrieve Information Model</title>
        <para>In order to serve as an SCP of the Implant Template Query/Retrieve Service Class, a DICOM AE possesses information about the Attributes of a number of Implant Template or Implant Assembly Template composite SOP Instances. The information is organized into an Information Model. The Information Models for the different SOP Classes specified in this Annex are defined in <xref linkend="sect_BB.6" xrefstyle="select: label"/>.</para>
      </section>
      <section label="BB.1.4" status="3" xml:id="sect_BB.1.4">
        <title>Service Definition</title>
        <para>Two peer DICOM AEs implement a SOP Class of an Implant Template or Implant Assembly Template Query/Retrieve Service Class with one serving in the SCU role and one serving in the SCP role. SOP Classes of the Implant Template and Implant Assembly Template Query/Retrieve Service Classes are implemented using the DIMSE-C C-FIND, C-MOVE and C-GET services as defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <para>An SCP of this SOP Class shall support Level-2 conformance as defined in <xref linkend="sect_B.4.1" xrefstyle="select: label"/>.</para>
        <para>The semantics of the C-FIND service are the same as those defined in the Service Definition of the Basic Worklist Management Service Class.</para>
        <para>The semantics of the C-MOVE service are the same as those defined in the Service Definition of the Query/Retrieve Service Class, with the exception that there is only one level of retrieval.</para>
        <para>The semantics of the C-GET service are the same as those defined in the Service Definition of the Query/Retrieve Service Class, with the exception that there is only one level of retrieval.</para>
      </section>
    </section>
    <section label="BB.2" status="2" xml:id="sect_BB.2">
      <title>Implant Template Information Models Definitions</title>
      <para>The Implant Template, Implant Assembly Template, and Implant Template Group Information Models are identified by the SOP Class negotiated at Association establishment time. Each SOP Class is composed of both an Information Model and a DIMSE-C Service Group.</para>
      <para>The Implant Template, Implant Assembly Template, and Implant Template Group Information Models are defined in <xref linkend="sect_BB.6" xrefstyle="select: label"/>, with the Entity-Relationship Model Definition and Key Attributes Definition analogous to those defined in the Worklist Information Model Definition of the Basic Worklist Management Service.</para>
    </section>
    <section label="BB.3" status="2" xml:id="sect_BB.3">
      <title>Implant Template Information Models</title>
      <para>The Implant Template Information Models are based upon a one level entity:</para>
      <itemizedlist>
        <listitem>
          <para>Implant Template object instance.</para>
        </listitem>
      </itemizedlist>
      <para>The Implant Template object instance contains Attributes associated with the Implant Template object IE of the Composite IODs as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
      <para>The Implant Assembly Template Information Model is based upon a one level entity:</para>
      <itemizedlist>
        <listitem>
          <para>Implant Assembly Template object instance.</para>
        </listitem>
      </itemizedlist>
      <para>The Implant Assembly Template object instance contains Attributes associated with the Implant Assembly Template object IE of the Composite IODs as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
      <para>The Implant Assembly Group Information Model is based upon a one level entity:</para>
      <itemizedlist>
        <listitem>
          <para>Implant Template Group object instance.</para>
        </listitem>
      </itemizedlist>
      <para>The Implant Template Group object instance contains Attributes associated with the Implant Template Group object IE of the Composite IODs as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
    </section>
    <section label="BB.4" status="2" xml:id="sect_BB.4">
      <title>DIMSE-C Service Groups</title>
      <section label="BB.4.1" status="3" xml:id="sect_BB.4.1">
        <title>C-FIND Operation</title>
        <para>See the C-FIND Operation definition for the Basic Worklist Management Service Class (K.4.1), and substitute "Implant Template" for "Worklist". The "Worklist" Search Method shall be used.</para>
        <para>The SOP Class UID identifies the Implant Template or Implant Assembly Template, respectively Information Model against which the C-FIND is to be performed. The Key Attributes and values allowable for the query are defined in the SOP Class definitions for the Implant Template and Implant Assembly Template Information Model.</para>
        <section label="BB.4.1.1" status="4" xml:id="sect_BB.4.1.1">
          <title>Service Class User Behavior</title>
          <para>When receiving several Implant Template Instances with the same Implant Part Number, the receiving application shall use Effective DateTime (0068,6226) to determine the appropriate Instance.</para>
        </section>
        <section label="BB.4.1.2" status="4" xml:id="sect_BB.4.1.2">
          <title>Service Class Provider Behavior</title>
          <para>An SCP of this SOP Class shall support Level-2 conformance as defined in <xref linkend="sect_B.4.1" xrefstyle="select: label"/>.</para>
        </section>
      </section>
      <section label="BB.4.2" status="3" xml:id="sect_BB.4.2">
        <title>C-MOVE Operation</title>
        <para>See the C-MOVE Operation definition for the Query/Retrieve Service Class (C.4.2). No Extended Behavior or Relational-Retrieve is defined for the Implant Template and Implant Assembly Template Query/Retrieve Service Classes.</para>
        <para>Query/Retrieve Level (0008,0052) is not relevant to the Implant Template and Implant Assembly Template Query/Retrieve Service Classes, and therefore shall not be present in the Identifier. The only Unique Key Attribute of the Identifier shall be SOP Instance UID (0008,0018). The SCU shall supply one UID or a list of UIDs.</para>
        <note>
          <para>More than one entity may be retrieved, using List of UID matching.</para>
        </note>
      </section>
      <section label="BB.4.3" status="3" xml:id="sect_BB.4.3">
        <title>C-GET Operation</title>
        <para>See the C-GET Operation definition for the Query/Retrieve Service Class (C.4.2). No Extended Behavior or Relational-Retrieve is defined for the Implant Template and Implant Assembly Template Query/Retrieve Service Classes.</para>
        <note>
          <para>More than one entity may be retrieved, using List of UID matching.</para>
        </note>
      </section>
    </section>
    <section label="BB.5" status="2" xml:id="sect_BB.5">
      <title>Association Negotiation</title>
      <para>See the Association Negotiation definition for the Basic Worklist Management Service Class (K.5).</para>
    </section>
    <section label="BB.6" status="2" xml:id="sect_BB.6">
      <title>SOP Class Definitions</title>
      <section label="BB.6.1" status="3" xml:id="sect_BB.6.1">
        <title>Implant Template Information Model</title>
        <section label="BB.6.1.1" status="4" xml:id="sect_BB.6.1.1">
          <title>E/R Models</title>
          <para>The Implant Template Information Model consists of a single entity. In response to a given C-FIND request, the SCP shall send one C-FIND response per matching Implant Template Instance.</para>
          <para>
            <figure label="BB.6-1" pgwide="1" xml:id="figure_BB.6-1">
              <title>Implant Template Information Model E/R Diagram</title>
              <mediaobject>
                <imageobject>
                 <imagedata fileref="figures/PS3.4_BB.6-1.svg"/>
                  <!--<imagedata fileref="part04_fromword_files/image048.png"/>-->
                </imageobject>
              </mediaobject>
            </figure>
          </para>
          <para>The Implant Assembly Template Information Model consists of a single entity. In response to a given C-FIND request, the SCP shall send one C-FIND response per matching Implant Assembly Template Instance.</para>
          <para>
            <figure label="BB.6-2" pgwide="1" xml:id="figure_BB.6-2">
              <title>Implant Assembly Template Information Model E/R Diagram</title>
              <mediaobject>
                <imageobject>
                 <imagedata fileref="figures/PS3.4_BB.6-2.svg"/>
                  <!--<imagedata fileref="part04_fromword_files/image050.png"/>-->
                </imageobject>
              </mediaobject>
            </figure>
          </para>
          <para>The Implant Template Group Information Model consists of a single entity. In response to a given C-FIND request, the SCP shall send one C-FIND response per matching Implant Template Group Instance.</para>
          <para>
            <figure label="BB.6-3" pgwide="1" xml:id="figure_BB.6-3">
              <title>Implant Template Group Information Model E/R Diagram</title>
              <mediaobject>
                <imageobject>
                 <imagedata fileref="figures/PS3.4_BB.6-3.svg"/>
                  <!--<imagedata fileref="part04_fromword_files/image052.png"/>-->
                </imageobject>
              </mediaobject>
            </figure>
          </para>
        </section>
        <section label="BB.6.1.2" status="4" xml:id="sect_BB.6.1.2">
          <title>Implant Template Attributes</title>
          <section label="BB.6.1.2.1" status="5" xml:id="sect_BB.6.1.2.1">
            <title>Generic Implant Template Attributes</title>
            <para><xref linkend="table_BB.6-1" xrefstyle="select: label"/> defines the Attributes of the Generic Implant Template Information Model:</para>
            <table frame="box" label="BB.6-1" rules="all" xml:id="table_BB.6-1">
              <caption>Attributes for the Implant Template Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description / Module</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Matching Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark / Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">SOP Common</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute is required if expanded or replacement character sets are used. See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> and <xref linkend="sect_C.4.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0016)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0018)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Implant Template</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Manufacturer</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0070)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value, Wild Card, or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Implant Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0022,1095)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value, Wild Card, or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Implant Size</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0068,6210)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value, Wild Card, or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Implant Part Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0022,1097)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value, Wild Card, or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Replaced Implant Template Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0068,6222)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Derivation Implant Template Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0068,6224)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Effective DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0068,6226)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value or Range Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Original Implant Template Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0068,6225)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Implant Target Anatomy Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0068,6230)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Anatomic Region Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,2218)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Implant Regulatory Disapproval Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0068,62A0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Material Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0068,63A0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Coating Materials Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0068,63A4)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Sequence or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="BB.6.1.2.2" status="5" xml:id="sect_BB.6.1.2.2">
            <title>Implant Assembly Template Attributes</title>
            <para><xref linkend="table_BB.6-2" xrefstyle="select: label"/> defines the Attributes of the Implant Assembly Template Information Model:</para>
            <table frame="box" label="BB.6-2" rules="all" xml:id="table_BB.6-2">
              <caption>Attributes for the Implant Assembly Template Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description / Module</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Matching Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark / Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">SOP Common</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute is required if expanded or replacement character sets are used. See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> and <xref linkend="sect_C.4.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0016)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0018)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Implant Assembly Template</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Implant Assembly Template Name</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value, Wild Card, or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Manufacturer</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0070)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value, Wild Card, or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Procedure Type Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0076,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute shall be retrieved with Single Value or Universal matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Replaced Implant Assembly Template Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0076,0008)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Sequence or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Original Implant Assembly Template Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0076,000C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Sequence or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Derivation Implant Assembly Template Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0076,000E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Sequence or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Surgical Technique</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0076,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value, Wild Card, or Universal Matching.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="BB.6.1.2.3" status="5" xml:id="sect_BB.6.1.2.3">
            <title>Implant Template Group Attributes</title>
            <para><xref linkend="table_BB.6-3" xrefstyle="select: label"/> defines the Attributes of the Implant Template Group Information Model:</para>
            <table frame="box" label="BB.6-3" rules="all" xml:id="table_BB.6-3">
              <caption>Attributes for the Implant Template Group Information Model</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Description / Module</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Matching Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark / Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">SOP Common</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>This Attribute is required if expanded or replacement character sets are used. See <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/> and <xref linkend="sect_C.4.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0016)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0018)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="5" rowspan="1">
                    <para>
                      <emphasis role="bold">Implant Template Group</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Implant Template Group Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0078,0000)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value, Wild Card, or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Implant Template Group Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0078,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Implant Template Group Issuer</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0078,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value, Wild Card, or Universal Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Effective DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0068,6226)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Single Value or Range Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Replaced Implant Template Group Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0078,0026)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with Sequence or Universal Matching</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be retrieved with List of UID Matching.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>
        <section label="BB.6.1.3" status="4" xml:id="sect_BB.6.1.3">
          <title>Conformance Requirements</title>
          <para>An implementation may conform to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes as an SCU, SCP, any combination of two of these, or all three. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="PS3.2" xrefstyle="select: labelnumber"/>.</para>
          <section label="BB.6.1.3.1" status="5" xml:id="sect_BB.6.1.3.1">
            <title>SCU Conformance</title>
            <section label="BB.6.1.3.1.1" status="6" xml:id="sect_BB.6.1.3.1.1">
              <title>C-FIND SCU Conformance</title>
              <para>An implementation that conforms to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes shall support queries against the appropriate Information Model using the C-FIND SCU Behavior described for the Basic Worklist Management Service Class (see <xref linkend="sect_K.4.1.2" xrefstyle="select: label"/> and <xref linkend="sect_BB.4.1" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes as an SCU shall state in its Conformance Statement whether it requests Type 3 Return Key Attributes, and shall list these Optional Return Key Attributes.</para>
              <para>An implementation that conforms to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes as an SCU shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when encoding queries and interpreting responses.</para>
            </section>
            <section label="BB.6.1.3.1.2" status="6" xml:id="sect_BB.6.1.3.1.2">
              <title>C-MOVE SCU Conformance</title>
              <para>An implementation that conforms to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes as an SCU shall support transfers against the appropriate Information Model, using the C-MOVE SCU baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.2.2.1" xrefstyle="select: label"/> and <xref linkend="sect_BB.4.2" xrefstyle="select: label"/>).</para>
            </section>
            <section label="BB.6.1.3.1.3" status="6" xml:id="sect_BB.6.1.3.1.3">
              <title>C-GET SCU Conformance</title>
              <para>An implementation that conforms to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes as an SCU shall support transfers against the appropriate Information Model, using the C-GET SCU baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.3.2" xrefstyle="select: label"/>).</para>
            </section>
          </section>
          <section label="BB.6.1.3.2" status="5" xml:id="sect_BB.6.1.3.2">
            <title>SCP Conformance</title>
            <section label="BB.6.1.3.2.1" status="6" xml:id="sect_BB.6.1.3.2.1">
              <title>C-FIND SCP Conformance</title>
              <para>An implementation that conforms to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes as an SCP shall support queries against the appropriate Template Information Model, using the C-FIND SCP Behavior described for the Basic Worklist Management Service Class (see <xref linkend="sect_K.4.1.3" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes as an SCP shall state in its Conformance Statement whether it supports Type 3 Return Key Attributes, and shall list these Optional Return Key Attributes.</para>
              <para>An implementation that conforms to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes as an SCP shall state in its Conformance Statement how it makes use of Specific Character Set (0008,0005) when interpreting queries, performing matching and encoding responses.</para>
            </section>
            <section label="BB.6.1.3.2.2" status="6" xml:id="sect_BB.6.1.3.2.2">
              <title>C-MOVE SCP Conformance</title>
              <para>An implementation that conforms to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes as an SCP shall support transfers against the appropriate Information Model, using the C-MOVE SCP baseline behavior described for the Query/Retrieve Service Class (see <xref linkend="sect_C.4.2.3.1" xrefstyle="select: label"/>).</para>
              <para>An implementation that conforms to one of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Classes as an SCP, which generates transfers using the C-MOVE operation, shall state in its Conformance Statement appropriate Storage Service Class, under which it shall support the C-STORE sub-operations generated by the C-MOVE.</para>
            </section>
            <section label="BB.6.1.3.2.3" status="6" xml:id="sect_BB.6.1.3.2.3">
              <title>C-GET SCP Conformance</title>
              <para>An implementation that conforms to one of the SOP Classes of the Implant Template, Implant Assembly Template, or Implant Template Group Information Model SOP Class Group as an SCP shall support retrievals against the Query/Retrieve Information Model described in <xref linkend="sect_C.6.1.1" xrefstyle="select: label"/> using the C-GET SCP Behavior described in <xref linkend="sect_C.4.3.3" xrefstyle="select: label"/>.</para>
            </section>
          </section>
        </section>
        <section label="BB.6.1.4" status="4" xml:id="sect_BB.6.1.4">
          <title>SOP Classes</title>
          <para>The SOP Classes of the Implant Template Information Models in the Implant Template Query/Retrieve Service Class identify the Implant Template Information Models, and the DIMSE-C operations supported. The SOP Classes of the Implant Assembly Template Information Models in the Implant Assembly Template Query/Retrieve Service Class identify the Implant Assembly Template Information Models, and the DIMSE-C operations supported. The SOP Classes of the Implant Template Group Information Models in the Implant Template Group Query/Retrieve Service Class identify the Implant Template Group Information Models, and the DIMSE-C operations supported. The following Standard SOP Classes are identified:</para>
          <table frame="box" label="BB.6.1.4-1" rules="all" xml:id="table_BB.6.1.4-1">
            <caption>Implant Template SOP Classes</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">SOP Class UID</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Generic Implant Template Information Model - FIND</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.43.2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Generic Implant Template Information Model - MOVE</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.43.3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Generic Implant Template Information Model - GET</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.43.4</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Implant Assembly Template Information Model - FIND</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.44.2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Implant Assembly Template Information Model - MOVE</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.44.3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Implant Assembly Template Information Model - GET</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.44.4</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Implant Template Group Information Model - FIND</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.45.2</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Implant Template Group Information Model - MOVE</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.45.3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Implant Template Group Information Model - GET</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>1.2.840.10008.5.1.4.45.4</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="CC" status="1" xml:id="chapter_CC">
    <title>Unified Procedure Step Service and SOP Classes (Normative)</title>
    <section label="CC.1" status="2" xml:id="sect_CC.1">
      <title>Overview</title>
      <para>This Annex defines the Service and SOP Classes associated with a Unified Worklist and Procedure Step.</para>
      <para>The Unified Procedure Step Service Class provides for management of simple worklists, including creating new worklist items, querying the worklist, and communicating progress and results.</para>
      <para>A worklist is a list of Unified Procedure Step (UPS) instances. Each UPS instance unifies the worklist details for a single requested procedure step together with the result details of the corresponding performed procedure step. There is a one to one relationship between the procedure step request and the procedure step performed.</para>
      <para>Unified Procedure Step instances may be used to represent a variety of scheduled tasks such as: Image Processing, Quality Control, Computer Aided Detection, Interpretation, Transcription, Report Verification, or Printing.</para>
      <para>The UPS instance can contain details of the requested task such as when it is scheduled to be performed or Workitem Codes describing the requested actions. The UPS may also contain details of the input information the performer needs to do the task and the output the performer produced, such as: Current Images, Prior Images, Reports, Films, Presentation States, or Audio recordings.</para>
      <para>The Unified Worklist and Procedure Step Service Class includes four SOP Classes associated with UPS instances. The SOP Class UID for any UPS Instance always specifies the UPS Push SOP Class. The separate SOP Classes facilitate better negotiation and logical implementation groups of functionality.</para>
      <para>The UPS Push SOP Class allows an SCU to instruct the SCP to create a new UPS instance, effectively letting a system push a new work item onto the SCP's worklist. It is important to note that the SCP could be a Worklist Manager that maintains the worklist for other systems that will perform the work, or the SCP could be a performing system itself that manages an internal worklist.</para>
      <para>The UPS Pull SOP Class allows an SCU to query a Worklist Manager (the SCP) for matching UPS instances, and instruct the SCP to update the status and contents of selected items (UPS instances). The SCU effectively pulls work instructions from the worklist. As work progresses, the SCU records details of the activities performed and the results created in the UPS instance.</para>
      <para>The UPS Watch SOP Class allows an SCU to subscribe for status update events and retrieve the details of work items (UPS instances) managed by the SCP.</para>
      <para>The UPS Event SOP Class allows an SCP to provide the actual status update events for work items it manages to relevant (i.e., subscribed) SCUs.</para>
      <section label="CC.1.1" status="3" xml:id="sect_CC.1.1">
        <title>Unified Procedure Step States</title>
        <para><xref linkend="figure_CC.1.1-1" xrefstyle="select: label"/>, <xref linkend="table_CC.1.1-1" xrefstyle="select: label"/> and <xref linkend="table_CC.1.1-2" xrefstyle="select: label"/> specify how changes in the state of a Unified Procedure Step shall be managed.</para>
        <para>
          <figure label="CC.1.1-1" pgwide="1" xml:id="figure_CC.1.1-1">
            <title>Unified Procedure Step State Diagram</title>
            <mediaobject>
              <imageobject>
               <imagedata fileref="figures/PS3.4_CC.1.1-1.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image054.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
        <para>The following interactions represent an example sequence of events and state transitions. Observe that the DIMSE Services described here operate on the same IOD. The multiple UPS SOP Classes thus act in a coordinated manner as specified in this Annex.</para>
        <para>To create a UPS, an SCU uses an N-CREATE to push a UPS onto the SCP's worklist. The SCP responds to such requests by creating a Unified Procedure Step (UPS) with an initial state of SCHEDULED.</para>
        <note>
          <para>All UPS Instances are instances of the UPS Push SOP Class, although the other three SOP Classes (UPS Pull, UPS Watch and UPS Event) may also operate on the Instance.</para>
        </note>
        <para>To subscribe to receive N-EVENT-REPORTs for a UPS, or to unsubscribe to stop receiving N-EVENT-REPORTS, an SCU uses an N-ACTION request. The SCU may be the system that created the UPS as a Push SCU, or may be some other system with a reason to track the progress and results of a scheduled step.</para>
        <para>To inform interested systems of the state of a UPS or the SCP itself, an SCP issues N-EVENT-REPORTs to SCUs that have subscribed.</para>
        <para>To find a UPS of interest, an SCU uses a C-FIND to query the SCP for relevant UPS instances.</para>
        <para>To "claim" and start work on a UPS, an SCU (which will be referred to here as the "Performing SCU") uses an N-ACTION Change State request to set the UPS state to IN PROGRESS and provide a transaction UID (which will be referred to here as the Locking UID). For a SCHEDULED UPS, the SCP responds by changing the UPS state to IN PROGRESS and recording the transaction UID for future use. For a UPS with other status, the SCP rejects the request.</para>
        <para>The SCP does not permit the status of a SCHEDULED UPS to be set to COMPLETED or CANCELED without first being set to IN PROGRESS.</para>
        <para>To modify details of the performed procedure, the Performing SCU uses an N-SET request to the SCP (providing the Locking UID for the UPS). N-SET requests on an IN PROGRESS UPS where the Locking UID in the N-SET data set does not match the Locking UID in the UPS are rejected by the SCP.</para>
        <para>To modify the status of the procedure step, the Performing SCU uses an N-ACTION Change State request to the SCP (providing the Locking UID for the UPS). N-ACTION Change State requests where the Locking UID in the N-ACTION data set does not match the Locking UID in the UPS are rejected by the SCP.</para>
        <para>The Locking UID effectively limits control of the state of an IN PROGRESS UPS to only the SCP and the Performing SCU. The SCP does not check whether IP addresses, AE-Titles, or parameters other than the Locking UID match to determine if the SCU has permission.</para>
        <para>When the Performing SCU completes work on the UPS, it N-SETs any values necessary to meet the Final State requirements in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>, then uses an N-ACTION request (providing the Locking UID for the UPS during both steps) for the SCP to change the UPS state to COMPLETED.</para>
        <para>When the Performing SCU abandons work on an incomplete UPS, it N-SETs any values necessary to meet the Final State requirements in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>, then uses an N-ACTION request (providing the Locking UID for the UPS) for the SCP to change the UPS state to CANCELED.</para>
        <para>To request cancellation of a UPS, non-performing SCUs use an N-ACTION Request Cancel (see <olink targetdoc="PS3.17" targetptr="sect_GGG.2.4" xrefstyle="select: docname label quotedtitle"/> and <olink targetdoc="PS3.17" targetptr="sect_GGG.2.5" xrefstyle="select: docname label quotedtitle"/> for example cases).</para>
        <itemizedlist>
          <listitem>
            <para>If the UPS is still in the SCHEDULED state, the SCP first changes the UPS state to IN PROGRESS, and then to CANCELED, issuing the appropriate N-EVENT-REPORTS.</para>
          </listitem>
          <listitem>
            <para>If the UPS is already IN PROGRESS and the SCP is itself performing the UPS, it may, at its own discretion, choose to cancel the UPS as described in the previous paragraph.</para>
          </listitem>
          <listitem>
            <para>If the UPS is already IN PROGRESS and the SCP is not the performer, it does not change the UPS state to CANCELED, but rather responds by issuing an N-EVENT-REPORT of the cancellation request to all subscribed SCUs. If the Performing SCU is listening to N-EVENT-REPORTs it may, at its own discretion, choose to cancel the UPS as described above.</para>
          </listitem>
        </itemizedlist>
        <para><xref linkend="table_CC.1.1-1" xrefstyle="select: label"/> describes the valid UPS states</para>
        <table frame="box" label="CC.1.1-1" rules="all" xml:id="table_CC.1.1-1">
          <caption>Unified Procedure Step (UPS) States</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">State</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Description</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>SCHEDULED</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The UPS is scheduled to be performed.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>IN PROGRESS</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The UPS has been claimed and a Locking UID has been set. Performance of the UPS has likely started.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>CANCELED</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The UPS has been permanently stopped before or during performance of the step. This may be due to voluntary or involuntary action by a human or machine. Any further UPS-driven work required to complete the scheduled task must be performed by scheduling another (different) UPS.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>COMPLETED</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The UPS has been completed.</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>COMPLETED and CANCELED are "Final States" that involve specific requirements on the UPS as described in <xref linkend="sect_CC.2.5.1.1" xrefstyle="select: label"/>.</para>
        <para><xref linkend="table_CC.1.1-2" xrefstyle="select: label"/> describes the valid state transitions (a row in the table defines what should happen in response to a certain event for each initial state). Details on how the Operations listed in the table should be carried out are described in section <xref linkend="sect_CC.2" xrefstyle="select: label"/>.</para>
        <table frame="box" label="CC.1.1-2" rules="all" xml:id="table_CC.1.1-2">
          <caption>Unified Procedure Step State Transition Table</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1"/>
              <th align="center" colspan="5" rowspan="1">
                <para>States</para>
              </th>
            </tr>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Events</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">
                    <emphasis role="italic">null</emphasis>
                  </emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">SCHEDULED</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">IN PROGRESS</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">COMPLETED</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">CANCELED</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-CREATE received for this SOP Instance UID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>Create SOP Instance with empty transaction UID, Change State to SCHEDULED</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>0111</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>0111</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>0111</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>0111</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION to Change State to IN PROGRESS with correct transaction UID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C307</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>Report state change, Record transaction UID, Change State to IN PROGRESS</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C302</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C300</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C300</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION to Change State to IN PROGRESS without correct transaction UID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C307</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION to Change State to SCHEDULED</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C307</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C303</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C303</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C303</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C303</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION to Change State to COMPLETED, with correct transaction UID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C307</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C310</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>If Final State Requirements met, (Report state change, Change State to COMPLETED); Else C304</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>warning</para>
                <para>B306</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C300</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION to Change State to COMPLETED, without correct transaction UID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C307</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION to Request Cancel</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C307</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>Report state change to IN-PROGRESS, Report state change to CANCELED, Change State to CANCELED</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>Report that an Application Entity requested a cancel.</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C311</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>warning</para>
                <para>B304</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION to Change State to CANCELED, with correct transaction UID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C307</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C310</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>If Final State Requirements met, (Report state change, Change State to CANCELED); Else C304.</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C300</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>warning</para>
                <para>B304</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION to Change State to CANCELED, without correct transaction UID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C307</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>error</para>
                <para>C301</para>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
    <section label="CC.2" status="2" xml:id="sect_CC.2">
      <title>DIMSE Service Groups</title>
      <para>The DIMSE Services shown in <xref linkend="table_CC.2-1" xrefstyle="select: label"/>, <xref linkend="table_CC.2-2" xrefstyle="select: label"/>, <xref linkend="table_CC.2-3" xrefstyle="select: label"/> and <xref linkend="table_CC.2-4" xrefstyle="select: label"/> are applicable to the Unified Procedure Step (UPS) IOD under the UPS Push, UPS Pull, UPS Watch and UPS Event SOP Classes respectively.</para>
      <table frame="box" label="CC.2-1" rules="all" xml:id="table_CC.2-1">
        <caption>DIMSE Service Group - UPS Push</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">DIMSE Service Element</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">Usage SCU/SCP</emphasis>
              </para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>N-CREATE</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>M/M</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>N-ACTION - Request UPS Cancel</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>M/M</para>
            </td>
          </tr>
        </tbody>
      </table>
      <table frame="box" label="CC.2-2" rules="all" xml:id="table_CC.2-2">
        <caption>DIMSE Service Group - UPS Pull</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">DIMSE Service Element</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">Usage SCU/SCP</emphasis>
              </para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>C-FIND</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>M/M</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>N-GET</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>M/M</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>N-SET</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>M/M</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>N-ACTION - Change UPS State</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>M/M</para>
            </td>
          </tr>
        </tbody>
      </table>
      <table frame="box" label="CC.2-3" rules="all" xml:id="table_CC.2-3">
        <caption>DIMSE Service Group - UPS Watch</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">DIMSE Service Element</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">SCU/SCP</emphasis>
              </para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>N-ACTION - Un/Subscribe</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>M/M</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>N-GET</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>M/M</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>C-FIND</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>U/M</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>N-ACTION - Request UPS Cancel</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>U/M</para>
            </td>
          </tr>
        </tbody>
      </table>
      <table frame="box" label="CC.2-4" rules="all" xml:id="table_CC.2-4">
        <caption>DIMSE Service Group - UPS Event</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">DIMSE Service Element</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>
                <emphasis role="bold">Usage SCU/SCP</emphasis>
              </para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>N-EVENT-REPORT</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>M/M</para>
            </td>
          </tr>
        </tbody>
      </table>
      <section label="CC.2.1" status="3" xml:id="sect_CC.2.1">
        <title>Change UPS State (N-ACTION)</title>
        <para>This operation allows an SCU to ask the SCP to change the state of a Unified Procedure Step (UPS) instance. This operation shall be invoked by the SCU through the DIMSE N-ACTION Service.</para>
        <section label="CC.2.1.1" status="4" xml:id="sect_CC.2.1.1">
          <title>Action Information</title>
          <para>DICOM AEs that claim conformance to the UPS Pull SOP Class as an SCU and/or an SCP shall support the Action Types and Action Information as specified in <xref linkend="table_CC.2.1-1" xrefstyle="select: label"/>.</para>
          <table frame="box" label="CC.2.1-1" rules="all" xml:id="table_CC.2.1-1">
            <caption>Change UPS State - Action Information</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type ID</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Attribute</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Tag</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="2">
                  <para>Change UPS State</para>
                </td>
                <td align="center" colspan="1" rowspan="2">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Procedure Step State</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1000)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Transaction UID</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,1195)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
        <section label="CC.2.1.2" status="4" xml:id="sect_CC.2.1.2">
          <title>Service Class User Behavior</title>
          <para>An SCU uses N-ACTION to ask the SCP to change the state of a UPS Instance as shown in <xref linkend="figure_CC.1.1-1" xrefstyle="select: label"/>. Since all UPSs are created as instances of the UPS Push SOP Class, the Requested SOP Class UID (0000,0003) in the N-ACTION request shall be the UID of the UPS Push SOP Class. See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further details.</para>
          <para>To take control of a SCHEDULED UPS, an SCU shall generate a Transaction UID and submit a state change to IN PROGRESS including the Transaction UID in the submission. The SCU shall record and use the Transaction UID in future N-ACTION and N-SET requests for that UPS instance.</para>
          <note>
            <orderedlist>
              <listitem>
                <para>The performing SCU may wish to record the Transaction UID in non-volatile storage. This would allow the SCU to retain control over the UPS after recovering from a crash.</para>
              </listitem>
              <listitem>
                <para>If two SCUs try to take control of a UPS, the second SCU will get an error since the first SCU established the correct Transaction UID, so the Transaction UID provided by the second SCU is incorrect.</para>
              </listitem>
            </orderedlist>
          </note>
          <para>Upon completion of an IN PROGRESS UPS it controls, an SCU shall submit a state change to COMPLETED and include the Transaction UID for the UPS instance.</para>
          <para>To cancel an IN PROGRESS UPS for which it has the Transaction UID, an SCU shall submit a state change to CANCELED and include the Transaction UID for the UPS instance.</para>
          <note>
            <orderedlist>
              <listitem>
                <para>Prior to submitting the state change to CANCELED, the performing SCU can N-SET the values of Reason For Cancellation, Procedure Step Discontinuation Reason Code Sequence, Contact Display Name or Contact URI to provide information to observing SCUs about the context of the cancellation.</para>
              </listitem>
              <listitem>
                <para>To request cancellation of an IN PROGRESS UPS for which it does not have the Transaction UID, an SCU uses the Request UPS Cancel action as described in <xref linkend="sect_CC.2.2" xrefstyle="select: label"/>, rather than a Change UPS State action.</para>
              </listitem>
            </orderedlist>
          </note>
          <para>Prior to submitting a state change to COMPLETED or CANCELED for a UPS instance it controls, the SCU shall perform any N-SETs necessary for the UPS to meet Final State requirements as described in section <xref linkend="sect_CC.2.5.1.1" xrefstyle="select: label"/>.</para>
          <para>At any time after receipt of the N-ACTION-Response, the SCU may release the association on which it sent the N-ACTION-Request.</para>
        </section>
        <section label="CC.2.1.3" status="4" xml:id="sect_CC.2.1.3">
          <title>Service Class Provider Behavior</title>
          <para>The SCP shall perform the submitted state change for the identified UPS instance by setting the Procedure Step State (0074,1000) to the requested value, or shall report the appropriate failure response code.</para>
          <para>Upon successfully changing the state of a UPS instance to IN PROGRESS, the SCP shall record the Transaction UID provided by the SCU in the Transaction UID (0008,1195) of the UPS instance.</para>
          <para>Upon completion of the N-ACTION request, the SCP shall return, via the N-ACTION response primitive, the N-ACTION Status Code applicable to the associated request as shown in <xref linkend="table_CC.2.1-2" xrefstyle="select: label"/>.</para>
          <para>The SCP shall only perform legal state changes as described in <xref linkend="table_CC.1.1-2" xrefstyle="select: label"/>.</para>
          <para>The SCP shall refuse requests to change the state of an IN PROGRESS UPS unless the Transaction UID of the UPS instance is provided in the N-ACTION request.</para>
          <para>The SCP shall refuse requests to change the state of an IN PROGRESS UPS to COMPLETED or CANCELED if the Final State requirements described in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/> have not been met.</para>
          <para>After the state of the UPS instance has been changed to COMPLETED or CANCELED, the SCP shall not delete the instance until all deletion locks have been removed.</para>
          <note>
            <para>See <xref linkend="sect_CC.2.3.2" xrefstyle="select: label"/> for a description of how SCUs place and remove deletion locks and see <olink targetdoc="PS3.17" targetptr="sect_GGG.1" xrefstyle="select: docname label quotedtitle"/> Reliable Watchers and Deletion Locks for further discussion.</para>
          </note>
          <para>The SCP may also modify the Procedure Step State (0074,1000) of a UPS instance independently of an N-ACTION request, e.g., if the SCP is performing the procedure step itself, or if it has been determined that the performing SCU has been disabled.</para>
          <note>
            <para>If the SCP is not performing the procedure step, this should be done with caution.</para>
          </note>
          <para>Upon successfully changing the state of a UPS instance, the SCP shall carry out the appropriate N-EVENT-REPORT behavior as described in <xref linkend="sect_CC.2.4.3" xrefstyle="select: label"/> if it supports the UPS Event SOP Class as an SCP.</para>
          <para>Bi-directional Authentication of machines/users/applications is possible at association time (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>). <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> provides a "Refused: Not Authorized" error code. Further requiring or documenting authentication and/or authorization features from the SCU or SCP is beyond the scope of this SOP Class.</para>
        </section>
        <section label="CC.2.1.4" status="4" xml:id="sect_CC.2.1.4">
          <title>Status Codes</title>
          <para>The status values that are specific for this DIMSE operation are defined in <xref linkend="table_CC.2.1-2" xrefstyle="select: label"/>.</para>
          <table frame="box" label="CC.2.1-2" rules="all" xml:id="table_CC.2.1-2">
            <caption>Status Values</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Status</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Meaning</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Code</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Success</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>The requested state change was performed</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0000</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="2">
                  <para>Warning</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>The UPS is already in the requested state of CANCELED</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>B304</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>The UPS is already in the requested state of COMPLETED</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>B306</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="7">
                  <para>Failure</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The UPS may no longer be updated</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C300</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The correct Transaction UID was not provided</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C301</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The UPS is already IN PROGRESS</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C302</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The UPS may only become SCHEDULED via N-CREATE, not N-SET or N-ACTION</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C303</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The UPS has not met final state requirements for the requested state change</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C304</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Specified SOP Instance UID does not exist or is not a UPS Instance managed by this SCP</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C307</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The UPS is not yet in the "IN PROGRESS" state</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C310</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="CC.2.2" status="3" xml:id="sect_CC.2.2">
        <title>Request UPS Cancel (N-ACTION)</title>
        <para>This operation allows an SCU that does not control a given Unified Procedure Step (UPS) instance to request to the SCP that the instance be canceled. This operation shall be invoked by the SCU through the DIMSE N-ACTION Service.</para>
        <section label="CC.2.2.1" status="4" xml:id="sect_CC.2.2.1">
          <title>Action Information</title>
          <para>DICOM AEs that claim conformance to the UPS Push SOP Class as an SCU or an SCP shall support the Action Types and Action Information as specified in <xref linkend="table_CC.2.2-1" xrefstyle="select: label"/>. DICOM AEs that claim conformance to the UPS Watch SOP Class as an SCP or claim conformance to the UPS Watch SOP Class as an SCU and choose to implement Request UPS Cancel shall support the Action Types and Action Information as specified in <xref linkend="table_CC.2.2-1" xrefstyle="select: label"/>.</para>
          <table frame="box" label="CC.2.2-1" rules="all" xml:id="table_CC.2.2-1">
            <caption>Request UPS Cancel - Action Information</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type ID</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Attribute</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Tag</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="8">
                  <para>Request UPS Cancel</para>
                </td>
                <td align="center" colspan="1" rowspan="8">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Reason For Cancellation</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1238)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Procedure Step Discontinuation Reason Code Sequence</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>(0074,100e)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Code Value</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Coding Scheme Designator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Coding Scheme Version</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0103)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1C/1C</para>
                  <para>Required if the value of Coding Scheme Designator (0008,0102) is not sufficient to identify the Code Value (0008,0100) unambiguously</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Code Meaning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Contact URI</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>(0074,100a)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Contact Display Name</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>(0074,100c)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>3/1</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
        <section label="CC.2.2.2" status="4" xml:id="sect_CC.2.2.2">
          <title>Service Class User Behavior</title>
          <para>An SCU uses N-ACTION to request to the SCP that the state of a UPS Instance be changed to CANCELED as shown in <xref linkend="figure_CC.1.1-1" xrefstyle="select: label"/>. Since all UPSs are created as instances of the UPS Push SOP Class, the Requested SOP Class UID (0000,0003) in the N-ACTION request shall be the UID of the UPS Push SOP Class. See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further details.</para>
          <para>The SCU may include a Reason For Cancellation and/or a proposed Procedure Step Discontinuation Reason Code Sequence.</para>
          <para>The SCU may also provide a Contact Display Name and/or a Contact URI for the person with whom the cancel request may be discussed.</para>
          <note>
            <para>An N-ACTION Status Code indicating success means that the Request was accepted, not that the UPS has been canceled. The system performing the UPS is not obliged to honor the request to cancel and in some scenarios, may not even receive notification of the request. See <xref linkend="sect_CC.2.4" xrefstyle="select: label"/>.</para>
          </note>
          <para>At any time after receipt of the N-ACTION-Response, the SCU may release the association on which it sent the N-ACTION-Request.</para>
          <para>To cancel an IN PROGRESS UPS that the SCU is itself performing, the SCU shall instead use the Change UPS State action as described in <xref linkend="sect_CC.2.1" xrefstyle="select: label"/>.</para>
        </section>
        <section label="CC.2.2.3" status="4" xml:id="sect_CC.2.2.3">
          <title>Service Class Provider Behavior</title>
          <para>The SCP shall send appropriate "UPS Cancel Requested" N-EVENT-REPORT messages, as described in <xref linkend="sect_CC.2.4.3" xrefstyle="select: label"/> or shall report the appropriate failure response code.</para>
          <note>
            <para>If provided, the Reason For Cancellation, a proposed Procedure Step Discontinuation Reason Code Sequence, a Contact Display Name and a Contact URI of someone responsible for the Cancel request might be useful in deciding to cancel the UPS or might be displayed to an operator so they can make contact for the purpose of clarifying or confirming the Cancel request. If the SCP is the performer and chooses to actually Cancel the UPS, it may at its own discretion set the Procedure Step Discontinuation Reason Code Sequence in the UPS instance based on the corresponding values provided.</para>
          </note>
          <para>If the Procedure Step State (0074,1000) of the UPS instance is still SCHEDULED, the SCP shall change the Procedure Step State, as described in <xref linkend="sect_CC.2.1.3" xrefstyle="select: label"/>, first to IN PROGRESS and then to CANCELED, ensuring that the Final State requirements, described in section <xref linkend="sect_CC.2.5.1.1" xrefstyle="select: label"/>, are met.</para>
          <para>If the Procedure Step State (0074,1000) of the UPS instance is IN PROGRESS, and the SCP is itself the performer of the UPS, the SCP may, at its own discretion, choose to cancel the UPS as described in <xref linkend="sect_CC.2.1.3" xrefstyle="select: label"/>.</para>
          <para>If the SCP is the performer of the UPS and chooses not to cancel, or if there is no possibility that the performing SCU will be informed of the cancel request (e.g., the subscription list for the UPS is empty, or the SCP has determined that the performing SCU has been disabled), the SCP may return a failure.</para>
          <para>Upon completion of the N-ACTION request, the SCP shall return, via the N-ACTION response primitive, the N-ACTION Status Code applicable to the associated request as shown in <xref linkend="table_CC.2.2-2" xrefstyle="select: label"/>.</para>
          <para>Bi-directional Authentication of machines/users/applications is possible at association time (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>). <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> provides a "Refused: Not Authorized" error code. Further requiring or documenting authentication and/or authorization features from the SCU or SCP is beyond the scope of this SOP Class.</para>
        </section>
        <section label="CC.2.2.4" status="4" xml:id="sect_CC.2.2.4">
          <title>Status Codes</title>
          <para>The status values that are specific for this DIMSE operation are defined in <xref linkend="table_CC.2.2-2" xrefstyle="select: label"/>.</para>
          <table frame="box" label="CC.2.2-2" rules="all" xml:id="table_CC.2.2-2">
            <caption>Status Values</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Status</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Meaning</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Code</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Success</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>The cancel request is acknowledged</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0000</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Warning</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>The UPS is already in the requested state of CANCELED</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>B304</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="4">
                  <para>Failure</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The UPS is already COMPLETED</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C311</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: Performer chooses not to cancel</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C313</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Specified SOP Instance UID does not exist or is not a UPS Instance managed by this SCP</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C307</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The performer cannot be contacted</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C312</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="CC.2.3" status="3" xml:id="sect_CC.2.3">
        <title>Subscribe/Unsubscribe to Receive UPS Event Reports (N-ACTION)</title>
        <para>This operation allows an SCU to subscribe with an SCP in order to receive N-EVENT-REPORTS of subsequent changes to the state of a UPS instance, or to unsubscribe in order to no longer receive such N-EVENT-REPORTs. This operation shall be invoked by the SCU through the DIMSE N-ACTION Service.</para>
        <section label="CC.2.3.1" status="4" xml:id="sect_CC.2.3.1">
          <title>Action Information</title>
          <para>DICOM AEs that claim conformance to the UPS Watch SOP Class as an SCU and/or an SCP shall support the Action Types and Action Information as specified in <xref linkend="table_CC.2.3-1" xrefstyle="select: label"/>.</para>
          <table frame="box" label="CC.2.3-1" rules="all" xml:id="table_CC.2.3-1">
            <caption>Subscribe/Unsubscribe to Receive UPS Event Reports - Action Information</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Action Type ID</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Attribute</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Tag</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Requirement Type SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="2">
                  <para>Subscribe to Receive UPS Event Reports</para>
                </td>
                <td align="center" colspan="1" rowspan="2">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Receiving AE</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1234)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Deletion Lock</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1230)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Unsubscribe from Receiving UPS Event Reports</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>4</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Receiving AE</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1234)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Suspend Global Subscription</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>5</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Receiving AE</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1234)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>1/1</para>
                </td>
              </tr>
            </tbody>
          </table>
          <para>Each AE may be in one of three UPS Subscription States for each existing UPS Instance: Not Subscribed, Subscribed with Deletion Lock, or Subscribed w/o Deletion Lock. The UPS Subscription State determines whether N-EVENT-REPORTs relating to a UPS Instance will be sent to the AE.</para>
          <para>Each AE may also be in one of three Global Subscription States for a given SCP: No Global Subscription, Globally Subscribed with Deletion Lock, Globally Subscribed w/o Deletion Lock. The Global Subscription State mainly determines the initial UPS Subscription State for an AE and new UPS Instances created by the SCP. Changes to the Global Subscription State can also change the UPS Subscription State for existing UPS Instances as described in <xref linkend="table_CC.2.3-2" xrefstyle="select: label"/>.</para>
          <para>The three Subscription actions in <xref linkend="table_CC.2.3-1" xrefstyle="select: label"/> are used to manage the UPS Subscription State and Global Subscription State of an AE.</para>
          <para><xref linkend="table_CC.2.3-2" xrefstyle="select: label"/> describes the UPS Subscription State transitions of an AE for a given UPS Instance. Each row in the table defines what should happen in response to a Subscription Action, or a UPS creation event, given the initial state. The table also shows when an initial event message should be sent to the AE describing the "Current UPS State".</para>
          <note>
            <para>In general, instance specific instructions take precedence over global instructions. The exception is the Unsubscribe Globally instruction, which removes all subscriptions, global and specific. To simply stop globally subscribing to new instances without removing specific subscriptions, use the Suspend Global Subscription message.</para>
          </note>
          <para>Most actions affect only the UPS Subscription State of a single UPS Instance. However, Global actions potentially affect all existing UPS Instances managed by the SCP and this is indicated in the following table by "All". For example, in the "AE Subscribes Globally with Lock" row, the content of the "Not Subscribed" cell means that in addition to setting the Global Subscription State for the AE to "Global Subscription with Lock", all existing UPS Instances whose UPS Subscription State for the Receiving AE is "Not Subscribed" will each have their UPS Subscription State changed to "Subscribed with Lock" and an event will be sent to the Receiving AE for each Instance.</para>
          <table frame="box" label="CC.2.3-2" rules="all" xml:id="table_CC.2.3-2">
            <caption>UPS Subscription State Transition Table</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1"/>
                <th align="center" colspan="4" rowspan="1">
                  <para>
                    <emphasis role="bold">States (for a specific UPS and AE)</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>Events</para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">null</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>Not Subscribed</para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>Subscribed with Lock</para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>Subscribed w/o Lock</para>
                </th>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>A UPS is Created when the AE Global Subscription State is "No Global Subscription"</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Go to Not Subscribed</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>A UPS is Created when the AE Global Subscription State is "Global Subscription with Lock"</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Go to Subscribed with Lock; Send initial event</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>A UPS is Created when the AE Global Subscription State is "Global Subscription w/o Lock"</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Go to Subscribed w/o Lock; Send initial event</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>AE Subscribes Globally with Lock</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">AE Global State is now "Global Sub. with Lock";</emphasis>
                  </para>
                  <para>
        All Go to Subscribed with Lock;
        All Send initial event</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">AE Global State is now "Global Sub. with Lock";</emphasis>
                  </para>
                  <para>No UPS state change;</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">AE Global State is now "Global Sub. with Lock";</emphasis>
                  </para>
                  <para>No UPS state change;</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>AE Subscribes Globally w/o Lock</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para><emphasis role="italic">AE Global State is now "Global Sub. w/o Lock"</emphasis>;</para>
                  <para>
        All Go to Subscribed w/o Lock;</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">AE Global State is now "Global Sub. w/o Lock";</emphasis>
                  </para>
                  <para><emphasis role="italic"/>No UPS state change;
        <emphasis role="italic"/></para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">AE Global State is now "Global Sub. w/o Lock";</emphasis>
                  </para>
                  <para>No UPS state change;</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>AE Subscribes to Specific UPS with Lock</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Go to Subscribed with Lock; Send initial event</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>No UPS state change; Send initial event</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Go to Subscribed with Lock; Send initial event</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>AE Subscribes to Specific UPS without Lock</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Go to Subscribed w/o Lock; Send initial event</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Go to Subscribed w/o Lock; Send initial event</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>No UPS state change; Send initial event</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>AE Unsubscribes from Specific UPS</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>No UPS state change</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Go to Not Subscribed</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Go to Not Subscribed</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>AE Unsubscribes Globally</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para><emphasis role="italic">AE Global State is now "No Global Subscription"</emphasis>;</para>
                  <para>No UPS state change;</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">AE Global State is now "No Global Subscription";</emphasis>
                  </para>
                  <para>
        All Go to Not Subscribed;</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">AE Global State is now "No Global Subscription";</emphasis>
                  </para>
                  <para>
        All Go to Not Subscribed;</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>AE Suspends Global Subscription</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">N/A</emphasis>
                  </para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">AE Global State is now "No Global Subscription";</emphasis>
                  </para>
                  <para>No UPS state change;</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">AE Global State is now "No Global Subscription";</emphasis>
                  </para>
                  <para>No UPS state change;</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="italic">AE Global State is now "No Global Subscription";</emphasis>
                  </para>
                  <para>No UPS state change;</para>
                </td>
              </tr>
            </tbody>
          </table>
          <para>See <olink targetdoc="PS3.17" targetptr="sect_GGG.1" xrefstyle="select: docname label quotedtitle"/> Reliable Watchers and Deletion Locks for further discussion of deletion locks.</para>
        </section>
        <section label="CC.2.3.2" status="4" xml:id="sect_CC.2.3.2">
          <title>Service Class User Behavior</title>
          <para>The SCU subscribing to track the progress and results of the scheduled procedure step may be the system that created the UPS as an SCU of the UPS Push SOP Class, or it may be some other interested observer.</para>
          <para>An SCU shall use the N-ACTION primitive to request the SCP to subscribe an AE (usually the requesting SCU) to receive event reports relating to UPS instances managed by the SCP. Since all UPSs are created as instances of the UPS Push SOP Class, the Requested SOP Class UID (0000,0003) in the N-ACTION request shall be the UID of the UPS Push SOP Class. See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further details.</para>
          <para>An SCU shall also use the N-ACTION primitive to request the SCP to unsubscribe an AE to stop receiving event reports relating to UPS instances managed by the SCP. Action Information is specified in <xref linkend="table_CC.2.3-1" xrefstyle="select: label"/>. The SCU shall always provide the AE-TITLE that is to receive (or stop receiving) the N-EVENT-REPORTs.</para>
          <para>To subscribe for events relating to
  a single specific UPS instance managed by the SCP, the SCU shall use Action Type ID 3 (Subscribe to Receive UPS Event Reports) and provide the SOP Instance UID of the specific UPS instance in the N-ACTION primitive request. The SCU shall indicate a need for the UPS instance to persist after its state has changed to COMPLETED or CANCELED by setting the value of the Deletion Lock to TRUE. Otherwise the SCU shall set the value of the Deletion Lock to FALSE.</para>
          <para>To unsubscribe for events relating to
  a single specific UPS instance managed by the SCP, the SCU shall use Action Type ID 4 (Unsubscribe from Receiving UPS Event Reports) and provide the SOP Instance UID of the specific UPS instance in the N-ACTION primitive request.</para>
          <para>To subscribe for events relating to
  all current and subsequently created UPS instances managed by the SCP, the SCU shall use Action Type ID 3 (Subscribe to Receive UPS Event Reports) and provide the well-known UID 1.2.840.10008.5.1.4.34.5 in the N-ACTION primitive request. The SCU shall indicate a need for UPS instances to persist after their states have changed to COMPLETED or CANCELED by setting the value of the Deletion Lock to TRUE. Otherwise the SCU shall set the value of the Deletion Lock to FALSE.</para>
          <note>
            <para>This "global subscription" is useful for SCUs that wish to monitor all activities without having to issue regular C-FINDs to identify new UPS instances.</para>
          </note>
          <para>To unsubscribe for events relating to
  all current UPS instances managed by the SCP and also stop being subscribed to subsequently created UPS instances, the SCU shall use Action Type ID 4 (Unsubscribe from Receiving UPS Event Reports) and provide the well-known UID 1.2.840.10008.5.1.4.34.5 in the N-ACTION primitive request.</para>
          <note>
            <para>This "global unsubscription" is useful for SCUs that wish to stop monitoring all activities and release all deletion locks (if any) placed for this subscriber.</para>
          </note>
          <para>To just stop being subscribed to subsequently created UPS instances, but still continue to receive events for currently subscribed instances managed by the SCP, the SCU shall use Action Type ID 5 (Suspend Global Subscription) and provide the well-known UID 1.2.840.10008.5.1.4.34.5 in the N-ACTION primitive request.</para>
          <para>For each UPS instance on which the SCU has placed a deletion lock, either explicitly on the specific instance or implicitly via a global subscription with lock, the SCU shall remove the deletion lock once any needed final state information for the instance has been obtained. The deletion lock may be removed either by unsubscribing or by subscribing with the value of the Deletion Lock set to FALSE.</para>
          <note>
            <para>The SCP will retain COMPLETED or CANCELED UPS Instances until all deletion locks have been released. Failure by SCUs to release the deletion lock may cause problems for the SCP. SCUs that do not have a significant need for the final state information, or who cannot dependably remove deletion locks should not use deletion locks.</para>
          </note>
          <para>The successful N-ACTION Response Status Code indicates that the SCP has received the N-ACTION request and the Subscription State for the AE has been successfully modified.</para>
          <note>
            <para>When subscribing to a specific instance, the SCU can also expect to receive an initial N-EVENT-REPORT containing the current state of the UPS instance. When subscribing globally with the Deletion Lock set to TRUE, the SCU can expect to receive initial N-EVENT-REPORTs for every instance currently managed by the SCP. Initial N-EVENT-REPORTs for newly created instances, received as a result of a global subscription, will appear as transitions to the SCHEDULED state.</para>
          </note>
          <para>A warning N-ACTION Response Status Code of "Deletion Lock not granted", indicates that the AE subscription requested by the SCU was successful, but the deletion lock has not been set.</para>
          <para>A failure N-ACTION Response Status Code indicates that the subscription state change requested will not be processed and no subscription states have been changed. The action taken by the SCU upon receiving this status is beyond the scope of this Standard.</para>
          <para>At any time after receipt of the N-ACTION-Response, the SCU may release the association on which it sent the N-ACTION-Request.</para>
        </section>
        <section label="CC.2.3.3" status="4" xml:id="sect_CC.2.3.3">
          <title>Service Class Provider Behavior</title>
          <para>Upon receipt of the N-ACTION request, the SCP shall attempt to update the Global Subscription State and/or UPS Subscription State of the specified AE with respect to the specified SOP Instance UID as described in <xref linkend="table_CC.2.3-2" xrefstyle="select: label"/> and then return, via the N-ACTION response primitive, the appropriate N-ACTION Response Status Code.</para>
          <para>A success status conveys that the Global Subscription State and/or UPS Subscription State for the AE specified in Receiving AE (0074,1234) was successfully modified by the SCP. The AE-TITLE in Receiving AE (0074,1234) may be different than the AE-TITLE used by the SCU for the association negotiation. The SCP shall use the AE-TITLE specified in Receiving AE (0074,1234). This allows systems to subscribe other systems they know would be interested in events for a certain UPS.</para>
          <para>For all UPS instances managed by the SCP, the SCP shall send N-EVENT-REPORTS (as described in <xref linkend="sect_CC.2.4.3" xrefstyle="select: label"/>) to AEs that have a UPS Subscription State of "Subscribed with Lock" or "Subscribed w/o Lock".</para>
          <para>Upon successfully processing a subscription action, the SCP shall send initial UPS State Report N-EVENT-REPORTs, as indicated in <xref linkend="table_CC.2.3-2" xrefstyle="select: label"/>, providing the current status of the UPS Instance to the Receiving AE.</para>
          <para>The SCP may also refuse both specific and global Subscription requests by returning a failure N-ACTION Response Status Code for "Refused: Not Authorized" if the refusal depends on permissions related to the tasks or the requestor, or "Refused: SCP does not support Event Reports" if the SCP does not support sending the events. The SCP must document in its conformance statement if it might refuse Subscription requests.</para>
          <para>The SCP may remove existing Deletion Locks by changing the UPS Subscription State for the AE from "Subscribed with Lock" to "Subscribed w/o Lock" and/or by changing the Global Subscription State for an AE from "Global Subscription with Lock" to "Global Subscription w/o Lock". This is intended to allow the SCP to deal with SCU malfunctions. The SCP must document in its conformance statement if it might remove a Deletion Lock.</para>
          <para>The SCP may also refuse the Deletion Lock portion of a specific or global Subscription request. For example, a request to modify the UPS Subscription State for the AE to "Subscribed with Lock" would instead result in a UPS Subscription State of "Subscribed w/o Lock" and a Warning status (see <xref linkend="table_CC.2.3-3" xrefstyle="select: label"/>) returned to the requesting SCU. This is intended to deal with Security and related policy restrictions. The SCP must document in its conformance statement if it might refuse a Deletion Lock.</para>
          <para>Bi-directional Authentication of machines/users/applications is possible at association time (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>). <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> provides a "Refused: Not Authorized" error code. Further requiring or documenting authentication and/or authorization features from the SCU or SCP is beyond the scope of this SOP Class.</para>
        </section>
        <section label="CC.2.3.4" status="4" xml:id="sect_CC.2.3.4">
          <title>Status Codes</title>
          <para>The status values that are specific for this DIMSE operation are defined in <xref linkend="table_CC.2.3-3" xrefstyle="select: label"/>.</para>
          <table frame="box" label="CC.2.3-3" rules="all" xml:id="table_CC.2.3-3">
            <caption>Status Values</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Status</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Meaning</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Code</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Success</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>The requested change of subscription state was performed</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0000</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Warning</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Deletion Lock not granted.</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>B301</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="4">
                  <para>Failure</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Specified SOP Instance UID does not exist or is not a UPS Instance managed by this SCP</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C307</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Receiving AE-TITLE is Unknown to this SCP</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C308</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: Specified action not appropriate for specified instance</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C314</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: SCP does not support Event Reports</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C315</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="CC.2.4" status="3" xml:id="sect_CC.2.4">
        <title>Report a Change in UPS Status (N-EVENT-REPORT)</title>
        <para>This operation allows an SCP to notify an SCU of a change in state of a UPS instance or a change in state of the SCP itself. This operation shall be invoked by the SCP through the DIMSE N-EVENT-REPORT Service.</para>
        <section label="CC.2.4.1" status="4" xml:id="sect_CC.2.4.1">
          <title>Event Report Information</title>
          <para>DICOM AEs that claim conformance to the UPS Event SOP Class as an SCU and/or an SCP shall support the Event Type IDs and Event Report Attributes as specified in <xref linkend="table_CC.2.4-1" xrefstyle="select: label"/>.</para>
          <table frame="box" label="CC.2.4-1" rules="all" xml:id="table_CC.2.4-1">
            <caption>Report a Change in UPS Status - Event Report Information</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Event Type Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Event Type ID</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Attribute</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Tag</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Req. Type SCU/SCP</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="8">
                  <para>UPS State Report</para>
                </td>
                <td align="center" colspan="1" rowspan="8">
                  <para>1</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Procedure Step State</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1000)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Input Readiness State</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0040,4041)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Reason For Cancellation</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1238)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Procedure Step Discontinuation Reason Code Sequence</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>(0074,100e)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Code Value</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Coding Scheme Designator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Coding Scheme Version</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0103)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1C</para>
                  <para>Required if the value of Coding Scheme Designator (0008,0102) is not sufficient to identify the Code Value (0008,0100) unambiguously</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Code Meaning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="9">
                  <para>UPS Cancel Requested</para>
                </td>
                <td align="center" colspan="1" rowspan="9">
                  <para>2</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Requesting AE</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1236)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Reason For Cancellation</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1238)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1C</para>
                  <para>Required if provided in the triggering N-ACTION</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Procedure Step Discontinuation Reason Code Sequence</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>(0074,100e)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1C</para>
                  <para>Required if provided in the triggering N-ACTION</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Code Value</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0100)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Coding Scheme Designator</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0102)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Coding Scheme Version</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0103)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1C</para>
                  <para>Required if the value of Coding Scheme Designator (0008,0102) is not sufficient to identify the Code Value (0008,0100) unambiguously</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Code Meaning</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0008,0104)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Contact URI</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>(0074,100a)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1C</para>
                  <para>Required if provided in the triggering N-ACTION</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Contact Display Name</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>(0074,100c)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1C</para>
                  <para>Required if provided in the triggering N-ACTION</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="6">
                  <para>UPS Progress Report</para>
                </td>
                <td align="center" colspan="1" rowspan="6">
                  <para>3</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Progress Information Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1002)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Procedure Step Progress</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1004)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Procedure Step Progress Description</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1006)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;Procedure Step Communications URI Sequence</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1008)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Contact URI</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>(0074,100a)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>&gt;&gt;Contact Display Name</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>(0074,100c)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/3</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="3">
                  <para>SCP Status Change</para>
                </td>
                <td align="center" colspan="1" rowspan="3">
                  <para>4</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>SCP Status</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1242)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Subscription List Status</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1244)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Unified Procedure Step List Status</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0074,1246)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>-/1</para>
                </td>
              </tr>
            </tbody>
          </table>
          <note>
            <para>The meanings of the Progress Information Attribute values in the context of a specific task are undefined, and the values may be obsolete when the UPS has moved to the COMPLETED or CANCELED state.</para>
          </note>
        </section>
        <section label="CC.2.4.2" status="4" xml:id="sect_CC.2.4.2">
          <title>Service Class User Behavior</title>
          <para>The SCU shall return, via the N-EVENT-REPORT response primitive, the N-EVENT-REPORT Response Status Code applicable to the associated request. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for general response status codes.</para>
          <para>The SCU shall accept all Attributes included in any notification. No requirements are placed on what the SCU will do as a result of receiving this information.</para>
          <note>
            <para>An SCU may receive N-EVENT-REPORTs with an Event Type ID of 1 (UPS State Report) either due to a state change to the UPS, or in response to initial subscription to the UPS (possibly when the UPS is initially created). See <xref linkend="sect_CC.2.3.3" xrefstyle="select: label"/>.</para>
          </note>
          <para>If an SCU performing a UPS receives an N-EVENT-REPORT for that instance with an Event Type ID of 2 (UPS Cancel Requested), then this SCU may, at its own discretion, choose to cancel the UPS as described in <xref linkend="sect_CC.2.1.2" xrefstyle="select: label"/>.</para>
          <note>
            <orderedlist>
              <listitem>
                <para>A UPS Cancel Requested notification includes the AE of the Requesting SCU, which could be useful to the performing SCU in deciding the significance/authority of the Cancel Request.</para>
              </listitem>
              <listitem>
                <para>The Reason For Cancellation, a proposed Procedure Step Discontinuation Reason Code Sequence, a Contact Display Name and a Contact URI of someone responsible for the Cancel Request may also be provided in the notification. Some performing SCUs might find this information useful in deciding to cancel the UPS or might provide the information to an operator so they can make contact for the purpose of clarifying or confirming the Cancel Request. If the performing SCU chooses to Cancel the UPS, it may at its own discretion set the Procedure Step Discontinuation Reason Code Sequence in the UPS instance based on the corresponding values provided.</para>
              </listitem>
            </orderedlist>
          </note>
          <para>An SCU that wishes to start/stop receiving N-EVENT-REPORTs about UPS instances may subscribe/unsubscribe as described in <xref linkend="sect_CC.2.3.2" xrefstyle="select: label"/>.</para>
          <para>If an SCU receives an N-EVENT-REPORT with an Event Type ID of 4 (SCP Status Change), it is not required to act on that information, however the SCU may want to consider actions such as: re-subscribing if the subscription list has been Cold Started, verifying (and recreating if necessary) scheduled UPSs if the UPS list has been Cold Started, etc.</para>
          <note>
            <para>An SCU may receive SCP State Change Events from any SCP with which it is currently subscribed either globally or for any specific UPS.</para>
          </note>
        </section>
        <section label="CC.2.4.3" status="4" xml:id="sect_CC.2.4.3">
          <title>Service Class Provider Behavior</title>
          <para>The SCP shall specify in the N-EVENT-REPORT Request Primitive the Event Type ID and the UID of the UPS Instance with which the event is associated. Since all UPSs are created as instances of the UPS Push SOP Class, the Affected SOP Class UID (0000,0002) in the N-EVENT-REPORT request shall be the UID of the UPS Push SOP Class. See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further details. The SCP shall additionally include Attributes related to the event as defined in <xref linkend="table_CC.2.4-1" xrefstyle="select: label"/>.</para>
          <para>Each time the SCP completes a Subscribe to Receive UPS Event Reports Action (see <xref linkend="sect_CC.2.3.1" xrefstyle="select: label"/>) for a specific UPS instance, the SCP shall send to the Receiving AE a UPS State Report Event and provide the current value of the Procedure Step State (0074,1000) and Input Readiness State (0040,4041) Attributes for the UPS instance.</para>
          <para>Each time the SCP completes a Subscribe to Receive UPS Event Reports Action (see <xref linkend="sect_CC.2.3.1" xrefstyle="select: label"/>) for the well-known UID 1.2.840.10008.5.1.4.34.5 with the value of the Deletion Lock set to TRUE (i.e., a Global Subscription with Lock), the SCP shall send to the Receiving AE a UPS State Report Event for every UPS Instance managed by the SCP and provide the current value of the Procedure Step State (0074,1000) and Input Readiness State (0040,4041) Attributes.</para>
          <para>Each time the SCP creates a new UPS instance, the SCP shall send a UPS State Report Event, indicating a change of status to SCHEDULED and the initial value of and Input Readiness State (0040,4041), to all AEs with a Global Subscription State of "Global Subscription with Lock" or "Global Subscription w/o Lock". (see <xref linkend="sect_CC.2.3" xrefstyle="select: label"/>)</para>
          <para>In the following text "Subscribed SCUs" means all AEs where the UPS Subscription State of the UPS Instance in question is "Subscribed with Lock" or "Subscribed w/o Lock". (see <xref linkend="sect_CC.2.3" xrefstyle="select: label"/>).</para>
          <para>Each time the SCP changes the Procedure Step State (0074,1000) Attribute for a UPS instance, the SCP shall send a UPS State Report Event to subscribed SCUs.</para>
          <para>Each time the SCP changes the Input Readiness State (0040,4041) Attribute for a UPS instance, the SCP shall send a UPS State Report Event to subscribed SCUs.</para>
          <para>Each time the SCP receives an N-ACTION with an Action Type ID of 2 (Request UPS Cancel), the SCP shall send a UPS Cancel Requested Event to subscribed SCUs. The SCP shall include the AE Title of the triggering N-ACTION SCU in the Requesting AE Attribute. The SCP shall include the Reason For Cancellation, Contact Display Name and Contact URI Attributes if they were provided in the triggering N-ACTION.</para>
          <para>Each time the SCP updates the Procedure Step Progress (0074,1004), the Procedure Step Progress Description (0074,1006), or the contents of the Procedure Step Communications URI Sequence (0074,1008) for a UPS instance, the SCP shall send a UPS Progress Event, with the current contents of the Progress Information Sequence (0074,1002), to subscribed SCUs.</para>
          <para>Each time the SCP is restarted, the SCP shall send an SCP Status Change Event. The SCP, if it knows it is going down, may send an additional SCP Status Change Event before it is shut down. Since the subscription lists may be incomplete or missing in the event of a restart, the SCP shall maintain a fallback list of AEs (for example as a configuration file, or from an LDAP server). The SCP shall send the SCP Status Change Events to:</para>
          <itemizedlist>
            <listitem>
              <para>all AEs on the fallback list and,</para>
            </listitem>
            <listitem>
              <para>all AEs with a Global Subscription State of "Global Subscription with Lock" or "Global Subscription w/o Lock" and,</para>
            </listitem>
            <listitem>
              <para>all AEs with a UPS Subscription State of "Subscribed with Lock" or "Subscribed w/o Lock" for any UPS Instance managed by the SCP</para>
            </listitem>
          </itemizedlist>
          <note>
            <para>The SCP may choose to not send duplicate messages to an AE.</para>
          </note>
          <para>The value of SCP Status (0074,1242) shall be RESTARTED if the SCP is sending this message due to being restarted and GOING DOWN if the SCP will be shut down soon.</para>
          <note>
            <para>SCPs that report they are GOING DOWN might stop accepting new interactions from SCUs until after they have restarted.</para>
          </note>
          <para>When SCP Status (0074,1242) is RESTARTED, the value of Subscription List Status (0074,1244) shall be WARM START if the SCP preserved the Subscription List to the best of its knowledge, and COLD STARTED if the SCP has not preserved the Subscription List.</para>
          <para>When SCP Status (0074,1242) is RESTARTED, the value of Unified Procedure Step List Status (0074,1246) shall be WARM START if the SCP preserved the UPS List to the best of its knowledge, and COLD START if the SCP has not preserved the UPS List.</para>
          <para>If the SCP is unable to successfully complete an N-EVENT-REPORT to any given SCU, the SCP has no obligation to queue or retry, and it should not imply any effect on the subscription list or deletion locks.</para>
        </section>
        <section label="CC.2.4.4" status="4" xml:id="sect_CC.2.4.4">
          <title>Status Codes</title>
          <para>No Service Class specific status values are defined for the N-EVENT-REPORT Service. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for general response status codes.</para>
        </section>
      </section>
      <section label="CC.2.5" status="3" xml:id="sect_CC.2.5">
        <title>Create a Unified Procedure Step (N-CREATE)</title>
        <para>This operation allows an SCU to instruct an SCP to create a Unified Procedure Step. This operation shall be invoked by the SCU through the DIMSE N-CREATE Service.</para>
        <section label="CC.2.5.1" status="4" xml:id="sect_CC.2.5.1">
          <title>Unified Procedure Step Attribute Specification</title>
          <para>An Application Entity that claims conformance to the UPS Push SOP Class as an SCU shall provide all Required Attributes as specified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>. Additional Attributes defined by the UPS IOD may be provided as well.</para>
          <para>An Application Entity that claims conformance to the UPS Push SOP Class as an SCP shall support all required Attributes as specified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>. Additional Attributes defined by the UPS IOD may be supported as well.</para>
          <section label="CC.2.5.1.1" status="5" xml:id="sect_CC.2.5.1.1">
            <title>UPS Final State Requirements</title>
            <para>COMPLETED and CANCELED are Final States for a UPS instance. The Attributes and values of the UPS instance must meet certain requirements before it may be placed in either of the Final States.</para>
            <note>
              <para>A UPS instance is in the SCHEDULED state when created. See <xref linkend="sect_CC.1.1" xrefstyle="select: label"/> for rules governing state transitions.</para>
            </note>
            <para>Attributes shall be valued as indicated by the Final State Codes in the Final State Column of <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/> before the Procedure Step State (0074,1000) may be set to COMPLETED or CANCELED (i.e., Final State).</para>
            <para>Performing systems are encouraged to ensure that the values for all Attributes reasonably reflect what was done and the Final State of the UPS. This may include blanking Attributes that are permitted to be empty and for which no reasonable value can be determined. The UPS contents should make it clear whether the step was completed, what work was done, what results were produced and whether the results are usable. See <olink targetdoc="PS3.17" targetptr="sect_GGG.3.1" xrefstyle="select: docname label quotedtitle"/> for a discussion of methods to convey things like partial completion.</para>
            <note>
              <para>The SCU may choose not to distribute, or otherwise make available, some or all instances created during the procedure step and referenced in the Output Information Sequence (0040,4033).</para>
            </note>
            <table frame="box" label="CC.2.5-1" rules="all" xml:id="table_CC.2.5-1">
              <caption>Final State Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Final State Code</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Meaning</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The UPS State shall not be set to COMPLETED or CANCELED if this Attribute does not have a value.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>RC</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The UPS State shall not be set to COMPLETED or CANCELED if the condition is met and this Attribute does not have a value.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>P</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The UPS State shall not be set to COMPLETED if this Attribute does not have a value, but may be set to CANCELED.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>X</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The UPS State shall not be set to CANCELED if this Attribute does not have a value, but may be set to COMPLETED.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The UPS State may be set to either COMPLETED or CANCELED if this Attribute does not have a value.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="CC.2.5.1.2" status="5" xml:id="sect_CC.2.5.1.2">
            <title>UPS Macros</title>
            <para>To reduce the size and complexity of <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>, a macro notation is used.</para>
            <para>For example, in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>, a table entry specifying "Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/>" should be interpreted as including the following table of text as a substitution. The nesting level for the sequence inclusion is indicated by the nesting level on the reference to the macro. Where the matching key type requirement is "*" it should be replaced with the matching key type requirement of the sequence Attribute that incorporates this macro.</para>
            <para>For code sequences that have requirements for N-CREATE, N-SET, N-GET, or C-FIND behavior that differ from the Macro, the code sequence contents are explicitly listed in the Table rather than specifying inclusion of the Macro.</para>
            <table frame="box" label="CC.2.5-2a" rules="all" xml:id="table_CC.2.5-2a">
              <caption>UPS Code Sequence Macro</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-CREATE (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-SET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Final State</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-GET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Match Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark/Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Code Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Code Value shall be retrieved with Single Value Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Coding Scheme Designator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Coding Scheme Designator shall be retrieved with Single Value Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Coding Scheme Version</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0103)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if the value of Coding Scheme Designator (0008,0102) is not sufficient to identify the Code Value (0008,0100) unambiguously.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Code Meaning</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Code Meaning shall not be used as Matching Key.</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <table frame="box" label="CC.2.5-2b" rules="all" xml:id="table_CC.2.5-2b">
              <caption>UPS Content Item Macro</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-CREATE (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-SET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Final State</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-GET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Match Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark/Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Value Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The type of the value encoded in this name-value Item.</para>
                    <variablelist spacing="compact">
                      <title>Enumerated Values:</title>
                      <varlistentry>
                        <term>DATETIME</term>
                        <listitem>
                          <para/>
                        </listitem>
                      </varlistentry>
                      <varlistentry>
                        <term>DATE</term>
                        <listitem>
                          <para/>
                        </listitem>
                      </varlistentry>
                      <varlistentry>
                        <term>TIME</term>
                        <listitem>
                          <para/>
                        </listitem>
                      </varlistentry>
                      <varlistentry>
                        <term>PNAME</term>
                        <listitem>
                          <para/>
                        </listitem>
                      </varlistentry>
                      <varlistentry>
                        <term>UIDREF</term>
                        <listitem>
                          <para/>
                        </listitem>
                      </varlistentry>
                      <varlistentry>
                        <term>TEXT</term>
                        <listitem>
                          <para/>
                        </listitem>
                      </varlistentry>
                      <varlistentry>
                        <term>CODE</term>
                        <listitem>
                          <para/>
                        </listitem>
                      </varlistentry>
                      <varlistentry>
                        <term>NUMERIC</term>
                        <listitem>
                          <para/>
                        </listitem>
                      </varlistentry>
                    </variablelist>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Concept Name Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A043)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Coded concept name of this name-value Item.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="8" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="italic">No Baseline CID is defined.</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A120)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Datetime value for this name-value Item.</para>
                    <para>Required if Value Type (0040,A040) is DATETIME.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A121)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Date value for this name-value Item.</para>
                    <para>Required if Value Type (0040,A040) is DATE.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A122)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Time value for this name-value Item.</para>
                    <para>Required if Value Type (0040,A040) is TIME.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Person Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A123)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Person name value for this name-value Item.</para>
                    <para>Required if Value Type (0040,A040) is PNAME.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A124)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>UID value for this name-value Item.</para>
                    <para>Required if Value Type (0040,A040) is UIDREF.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Text Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A160)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Text value for this name-value Item.</para>
                    <para>Required if Value Type (0040,A040) is TEXT.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Concept Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A168)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Coded concept value of this name-value Item.</para>
                    <para>Required if Value Type (0040,A040) is CODE.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="8" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="italic">No Baseline CID is defined.</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Numeric Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A30A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Numeric value for this name-value Item.</para>
                    <para>Required if Value Type (0040,A040) is NUMERIC.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Measurement Units Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,08EA)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Units of measurement for a numeric value in this name-value Item.</para>
                    <para>Required if Value Type (0040,A040) is NUMERIC.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="8" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="italic">Baseline <olink targetdoc="PS3.16" targetptr="sect_CID_82" xrefstyle="select: labelnumber quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
              </tbody>
            </table>
            <table frame="box" label="CC.2.5-2c" rules="all" xml:id="table_CC.2.5-2c">
              <caption>Referenced Instances and Access Macro</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-CREATE (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-SET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Final State</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-GET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Match Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark/Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Type of Instances</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Type of Instances (0040,E020) is DICOM</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Series Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Type of Instances (0040,E020) is DICOM</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced SOP Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1199)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;HL7 Instance Identifier</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Type of Instances (0040,E020) is CDA.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Frame Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1160)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if the Referenced SOP Instance is a multi-frame image and the reference does not apply to all frames, and Referenced Segment Number (0062,000B) is not present.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Segment Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0062,000B)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if the Referenced SOP Instance is a Segmentation and the reference does not apply to all segments and Referenced Frame Number (0008,1160) is not present.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>DICOM Retrieval Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E021)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Media Retrieval Sequence (0040,E022), WADO Retrieval Sequence (0040,E023), and XDS Retrieval Sequence (0040,E024) are not present. May be present otherwise.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Retrieve AE Title</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0054)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Media Retrieval Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E022)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if DICOM Retrieval Sequence (0040,E021), WADO Retrieval Sequence (0040,E023), and XDS Retrieval Sequence (0040,E024) are not present. May be present otherwise.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Storage Media File-Set ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0130)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Storage Media File-Set UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0088,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>WADO Retrieval Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E023)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if DICOM Retrieval Sequence (0040,E021), Media Retrieval Sequence (0040,E022), and XDS Retrieval Sequence (0040,E024) are not present. May be present otherwise.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Retrieve Location UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E011)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Retrieve URI</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>XDS Retrieval Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E024)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if DICOM Retrieval Sequence (0040,E021), Media Retrieval Sequence (0040,E022), and WADO Retrieval Sequence (0040,E023) are not present. May be present otherwise.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Repository Unique ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Home Community ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,E031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
              </tbody>
            </table>
            <table frame="box" label="CC.2.5-2d" rules="all" xml:id="table_CC.2.5-2d">
              <caption>HL7V2 Hierarchic Designator Macro</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-CREATE (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-SET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Final State</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-GET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Match Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark/Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Creation required if Universal Entity ID (0040,0032) is not present; may be present otherwise.</para>
                    <para>Return Key required if set.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Creation required if Local Namespace Entity ID (0040,0031) is not present; may be present otherwise.</para>
                    <para>Return Key required if set.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Creation required if Universal Entity ID (0040,0032) is present.</para>
                    <para>Return Key required if set.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Local Namespace Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0031)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Creation required if Universal Entity ID (0040,0032) is not present; may be present otherwise.</para>
                    <para>Return Key required if set.</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <table frame="box" label="CC.2.5-2e" rules="all" xml:id="table_CC.2.5-2e">
              <caption>Issuer of Patient ID Macro</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-CREATE (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-SET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Final State</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-GET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Match Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark/Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0021)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Patient ID Qualifiers Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0024)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Universal Entity ID Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if Universal Entity ID (0040,0032) is present in this item with a value.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Identifier Type Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0035)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Assigning Facility Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0036)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Assigning Facility Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="8" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2d" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Assigning Jurisdiction Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0039)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Assigning Jurisdiction Code Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="8" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="italic">Baseline <olink targetdoc="PS3.16" targetptr="sect_CID_5001" xrefstyle="select: labelnumber quotedtitle"/> for country codes.</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Assigning Agency or Department Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,003A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Assigning Agency or Department Code Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="8" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="italic">No Baseline CID.</emphasis>
                    </para>
                  </td>
                </tr>
              </tbody>
            </table>
            <table frame="box" label="CC.2.5-2f" rules="all" xml:id="table_CC.2.5-2f">
              <caption>SOP Instance Reference Macro</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-CREATE (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-SET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Final State</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-GET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Match Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark/Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Code Value shall be retrieved with Single Value Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>*</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Coding Scheme Designator shall be retrieved with Single Value Matching.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="CC.2.5.1.3" status="5" xml:id="sect_CC.2.5.1.3">
            <title>UPS Attribute Service Requirements</title>
            <para>This table combines the Attribute requirements for multiple DIMSE services (N-CREATE, N-SET, N-GET, C-FIND) to facilitate consistency between the requirements.</para>
            <para>See PS3.4 for the meaning of the requirement codes used in the N-CREATE, N-SET, N-GET and Return Key columns in the following table.</para>
            <para>See <xref linkend="sect_C.1.2" xrefstyle="select: label"/> for the meaning of the requirement codes used in the Match Key column in the following table.</para>
            <para>See <xref linkend="table_CC.2.5-1" xrefstyle="select: label"/> for the meaning of the requirement codes used in the Final State column of the following table.</para>
            <table frame="box" label="CC.2.5-3" rules="all" xml:id="table_CC.2.5-3">
              <caption>UPS SOP Class N-CREATE/N-SET/N-GET/C-FIND Attributes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-CREATE (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-SET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Final State</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-GET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Match Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Return Key Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Remark/Matching Type</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Transaction UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1195)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                    <para>Shall be empty</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(see <xref linkend="sect_CC.2.6.3" xrefstyle="select: labelnumber"/>)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Cannot be queried.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="bold">SOP Common Module</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Specific Character Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>RC</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if extended or replacement character set is used</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0016)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>See <xref linkend="sect_CC.2.5.1.3.1" xrefstyle="select: labelnumber"/></para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Uniquely identifies the SOP Class of the Unified Procedure Step.</para>
                    <para>See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further explanation.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0018)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed.</para>
                    <para>SOP Instance is conveyed in the Affected SOP Instance UID (0000,1000)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed.</para>
                    <para>SOP Instance is conveyed in the Requested SOP Instance UID (0000,1001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed.</para>
                    <para>SOP Instance is conveyed in the Requested SOP Instance UID (0000,1001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>U</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Uniquely identifies the SOP Instance of the UPS.</para>
                    <para>SOP Instance UID shall be retrieved with Single Value Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the SOP Common Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="bold">Unified Procedure Step Scheduled Procedure Information Module</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Procedure Step Priority</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1200)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Procedure Step Priority shall be retrieved with Single Value Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Procedure Step Modification Date and Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/1</para>
                    <para>SCP shall use time of CREATE rather than any value provided</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                    <para>SCP will use time of SET</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Procedure Step Modification Date and Time shall be retrieved with Single Value Matching or Range Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Procedure Step Label</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1204)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Worklist Label</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1202)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/1</para>
                    <para>If a value is not provided by the SCU, the SCP shall fill in the Worklist Label, e.g., using a default value or by assigning the UPS instance to a logical worklist.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Processing Parameters Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1210)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2b" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Station Name Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4025)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Scheduled Station Name Code Sequence shall only be retrieved with Sequence Matching.</para>
                    <note>
                      <para>In Push Scenario, the SCP-Performer has to create empty but could self fill later.</para>
                    </note>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Station Class Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4026)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Scheduled Station Class Code Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Station Geographic Location Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4027)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Scheduled Station Geographic Location Code Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Human Performers Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4034)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Scheduled Human Performers Sequence shall only be retrieved with Sequence Matching.</para>
                    <para>Required if a Human Performer is specified.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Human Performer Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4009)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Scheduled Human Performers Code Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Human Performer's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4037)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Human Performer's Organization</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4036)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Procedure Step Start Date and Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Procedure Step Start Date and Time shall be retrieved with Single Value Matching or Range Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Expected Completion Date and Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4011)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Expected Completion Date and Time shall be retrieved with Single Value Matching or Range Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Scheduled Workitem Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4018)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Scheduled Workitem Code Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Comments on the Scheduled Procedure Step</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0400)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Input Readiness State</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4041)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Input Readiness State shall be retrieved with Single Value Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Input Information Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4021)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Input Information Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2c" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Study Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if the Workitem is expected to result in the creation of any DICOM Composite Instances whose IOD contains the Study IE.</para>
                    <para>There may be situations where the performer does not use the Study Instance UID suggested by the Scheduler.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the Unified Procedure Step Scheduled Procedure Information Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="bold">Unified Procedure Step Relationship Module</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if the subject of the workitem requires identification or if the workitem is expected to result in the creation of objects that identify the subject.</para>
                    <para>See <olink targetdoc="PS3.3" targetptr="sect_C.30.4.1" xrefstyle="select: docname label quotedtitle"/></para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">Include <xref linkend="table_CC.2.5-2e" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Other Patient IDs Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,1002)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">Include <xref linkend="table_CC.2.5-2e" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Birth Date</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient's Sex</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0040)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Admission ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Issuer of Admission ID Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0014)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2d" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Admitting Diagnoses Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1080)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Admitting Diagnoses Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1084)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Attributes of the Admitting Diagnoses Code Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/>.</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Request Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,A370)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Could be "changed" while SCHEDULED by canceling and re-creating with the "correct" values.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Study Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0020,000D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Accession Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0050)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Issuer of Accession Number Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0051)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Issuer of Accession Number Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2d" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Placer Order Number/Imaging Service Request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,2016)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if set.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Order Placer Identifier Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0026)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Order Placer Identifier Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2d" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Filler Order Number/Imaging Service Request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,2017)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if set.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Order Filler Identifier Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0027)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Order Filler Identifier Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2d" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Procedure ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1001)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Procedure Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1060)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Procedure Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1064)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Reason for the Requested Procedure</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1002)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt; Reason for Requested Procedure Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,100A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requested Procedure Comments</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1400)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if set.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Confidentiality Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1008)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Names of Intended Recipients of Results</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,1010)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Imaging Service Request Comments</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,2400)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requesting Physician</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Requesting Service</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0032,1033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Issue Date of Imaging Service Request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,2004)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Issue Time of Imaging Service Request</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,2005)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referring Physician's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,0090)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Replaced Procedure Step Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1224)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if the UPS replaces another Procedure Step.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2f" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="bold">Patient Medical Module</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Medical Alerts</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,2000)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if present.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pregnancy Status</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,21C0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if present.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Special Needs</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0038,0050)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if present.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes from the Patient Medical Module</emphasis></para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="bold">Unified Procedure Step Progress Information Module</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Procedure Step State</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1000)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>Shall be created with a value of "SCHEDULED"</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Not Allowed.</para>
                    <para>Use N-ACTION</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>R</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Procedure Step State shall be retrieved with Single Value Matching</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Progress Information Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1002)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                    <para>Shall be empty</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>X</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Procedure Step Progress</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1004)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Procedure Step Progress Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1006)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Procedure Step Communications URI Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1008)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Contact URI</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>(0074,100a)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Contact Display Name</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>(0074,100c)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Procedure Step Cancellation DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4052)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>X</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>If changing the UPS State (0074,1000) to CANCELED and this Attribute has no value, the SCP shall fill it with the current datetime.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Reason For Cancellation</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1238)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Procedure Step Discontinuation Reason Code Sequence</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>(0074,100e)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>X</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="bold">Unified Procedure Step Performed Procedure Information Module</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Unified Procedure Step Performed Procedure Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1216)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                    <para>Shall be created empty</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>P</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>See <xref linkend="sect_CC.2.5.1.3.2" xrefstyle="select: labelnumber"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Actual Human Performers Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4035)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>RC</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be provided if known.</para>
                    <para>Return Key required if set.</para>
                    <para>The Attributes of the Actual Human Performers Sequence shall only be retrieved with Sequence Matching.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Human Performer Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4009)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>RC</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be provided if known.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Human Performer's Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4037)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>RC</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Shall be provided if known</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Human Performer's Organization</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4036)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performed Station Name Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4028)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>P</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performed Station Class Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4029)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performed Station Geographic Location Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4030)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performed Procedure Step Start DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0244)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>P</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performed Procedure Step Description</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0254)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Comments on the Performed Procedure Step</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0280)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performed Workitem Code Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4019)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>P</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2a" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performed Processing Parameters Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1212)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1"/>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;&gt;Include <xref linkend="table_CC.2.5-2b" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Performed Procedure Step End DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,0250)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>P</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>O</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Required if set.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Output Information Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0040,4033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not Allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>P</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>If there are no relevant output objects, then this sequence may have no items.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="9" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_CC.2.5-2c" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
              </tbody>
            </table>
            <section label="CC.2.5.1.3.1" status="6" xml:id="sect_CC.2.5.1.3.1">
              <title>UPS SOP Class UID</title>
              <para>The SOP Class UID shall be set to 1.2.840.10008.5.1.4.34.6.1 by SCP</para>
            </section>
            <section label="CC.2.5.1.3.2" status="6" xml:id="sect_CC.2.5.1.3.2">
              <title>Unified Procedure Step Performed Procedure Sequence</title>
              <para>The Attributes of the UPS Performed Procedure Sequence shall only be retrieved with Sequence Matching.</para>
              <note>
                <para>Since this Attribute may be created empty and has a Final State requirement of X, a UPS in the SCHEDULED state may be canceled with two N-ACTIONS (IN PROGRESS then CANCELED) and no N-SETs.</para>
              </note>
            </section>
          </section>
        </section>
        <section label="CC.2.5.2" status="4" xml:id="sect_CC.2.5.2">
          <title>Service Class User Behavior</title>
          <para>An SCU uses N-CREATE to request the SCP schedule a new UPS.</para>
          <para>The SCU shall specify in the N-CREATE request primitive the UPS Push SOP Class UID and the SOP Instance UID for the UPS that is to be created and for which Attribute Values are to be provided. See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further discussion of UPS SOP Class UIDs.</para>
          <para>The SCU shall provide Attribute values in the N-CREATE request primitive for all required UPS Attributes as specified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>. Additionally, values may be provided for optional Attributes as specified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>.</para>
          <para>The SCU shall specify a value of "SCHEDULED" for the Attribute Procedure Step State (0074,1000) in the N-CREATE request primitive.</para>
        </section>
        <section label="CC.2.5.3" status="4" xml:id="sect_CC.2.5.3">
          <title>Service Class Provider Behavior</title>
          <para>The SCP shall create and maintain UPS instances as instructed by N-CREATE requests and as specified by <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>.</para>
          <para>The SCP shall return, via the N-CREATE response primitive, the N-CREATE Response Status Code applicable to the associated request.</para>
          <para>The SCP shall accept N-CREATE request primitives only if the value of the Procedure Step State (0074,1000) Attribute is "SCHEDULED". If the Procedure Step State Attribute has another value, the SCP shall fail the N-CREATE.</para>
          <para>The SCP may modify Attributes of a UPS instance, e.g., to correct invalid Attribute values. A description of the modifications the SCP may perform shall be documented in the conformance statement of the SCP.</para>
          <para>The SCP may also create and maintain UPS instances without receiving a UPS instance N-CREATE request, e.g., based on internal logic, operator inputs or HL7 messages. The contents of the instance created by the SCP must still comply with the N-CREATE requirements in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>.</para>
          <para>Upon creating a new UPS Instance, the SCP shall update UPS Subscription Status of the Instance for each AE with a Global Subscription as described in <xref linkend="sect_CC.2.3" xrefstyle="select: label"/>.</para>
          <para>Upon creating a new UPS Instance, the SCP shall send UPS State Reports (if it supports the UPS Event SOP Class) as described in <xref linkend="sect_CC.2.4.3" xrefstyle="select: label"/> regardless of whether the creation was based on an N-CREATE or on internal logic.</para>
          <para>Bi-directional Authentication of machines/users/applications is possible at association time (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>). <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> provides a "Refused: Not Authorized" error code. There are no specific requirements to perform authorization.</para>
        </section>
        <section label="CC.2.5.4" status="4" xml:id="sect_CC.2.5.4">
          <title>Status Codes</title>
          <para>The status values that are specific for this DIMSE operation are defined in <xref linkend="table_CC.2.5-4" xrefstyle="select: label"/>.</para>
          <table frame="box" label="CC.2.5-4" rules="all" xml:id="table_CC.2.5-4">
            <caption>Status Values</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Status</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Meaning</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Code</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Success</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>The UPS was created as requested</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0000</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Warning</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>The UPS was created with modifications</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>B300</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Failure</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The provided value of UPS State was not "SCHEDULED".</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C309</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="CC.2.6" status="3" xml:id="sect_CC.2.6">
        <title>Set Unified Procedure Step Information (N-SET)</title>
        <para>This operation allows an SCU to set Attribute Values of a UPS Instance and provide information about a specific real-world UPS that is under control of the SCU. This operation shall be invoked by the SCU through the DIMSE N-SET Service.</para>
        <section label="CC.2.6.1" status="4" xml:id="sect_CC.2.6.1">
          <title>Unified Procedure Step IOD Subset Specification</title>
          <para>The Application Entity that claims conformance to the UPS Pull SOP Class as an SCU may choose to modify a subset of the Attributes maintained by the SCP. The Application Entity that claims conformance as an SCP to the UPS Pull SOP Class shall support Attributes specified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/></para>
        </section>
        <section label="CC.2.6.2" status="4" xml:id="sect_CC.2.6.2">
          <title>Service Class User Behavior</title>
          <para>The SCU shall specify in the N-SET request primitive the UID of the UPS Instance for which it wants to set Attribute Values. Since all UPSs are created as instances of the UPS Push SOP Class, the Requested SOP Class UID in the N-SET request shall be the UID of the UPS Push SOP Class. See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further details.</para>
          <para>To N-SET a UPS instance currently in the SCHEDULED state, the Transaction UID Attribute shall not be present in the request. For a UPS instance in the IN PROGRESS state, the SCU shall provide the current Transaction UID (0008,1195) as an Attribute.</para>
          <para>The SCU shall be permitted to set Attribute values as specified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>. The SCU shall specify the list of Attributes for which it wants to set the Attribute Values. The SCU shall provide, with one or more N-SET request primitives, the Attribute values specified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>.</para>
          <para>When modifying a sequence, the SCU shall include in the N-SET request all Items in the sequence, not just the Items to be modified.</para>
          <para>N-SET requests shall be atomic (indivisible) and idempotent (repeat executions have no additional effect). Since it is possible for an N-GET to occur between two N-SET requests, any given N-SET shall leave the UPS instance in an internally consistent state (i.e., when multiple Attributes need updating as a group, do this as multiple Attributes in a single N-SET request, not as multiple N-SET requests)</para>
          <para>The SCU shall not set the value of the Procedure Step State (0074,1000) Attribute using N-SET. Procedure Step State is managed using N-ACTION as described in <xref linkend="sect_CC.2.1" xrefstyle="select: label"/></para>
          <para>The SCU shall create or set all Attributes to meet Final State requirements prior to using N-ACTION to set the value of Procedure Step State (0074,1000) to "COMPLETED" or "CANCELED". See <xref linkend="sect_CC.2.5.1.1" xrefstyle="select: label"/> for further details.</para>
          <para>Once the Procedure Step State (0074,1000) has been set to "COMPLETED" or "CANCELED" the SCU shall no longer modify the UPS SOP Instance.</para>
          <note>
            <para>The SCU can only set Attribute Values that have already been created with an N-CREATE request.</para>
          </note>
        </section>
        <section label="CC.2.6.3" status="4" xml:id="sect_CC.2.6.3">
          <title>Service Class Provider Behavior</title>
          <para>The SOP Class UID of the specified UPS instance will always be the UPS Push SOP Class UID, which might not match the UPS SOP Class negotiated with the SCU. See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further details.</para>
          <para>The SCP shall support the Attribute changes to the UPS instance specified by the SCU in the N-SET request primitive as specified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>.</para>
          <para>The SCP shall refuse N-SET requests on an IN PROGRESS UPS and not modify the UPS if the N-SET request does not include the Transaction UID (0008,1195) Attribute with the same value as currently recorded in the UPS instance.</para>
          <para>The SCP shall refuse N-SET requests on a COMPLETED or CANCELED UPS.</para>
          <para>The SCP shall use the Specific Character Set (0008,0005) value to appropriately modify its internal representation so that subsequent operations reflect the combination of the character sets in use by the Attributes in this N-SET and those used by Attributes that have not been modified.</para>
          <para>The SCP shall return, via the N-SET response primitive, the N-SET Response Status Code applicable to the associated request as specified in <xref linkend="sect_CC.2.6.4" xrefstyle="select: label"/>.</para>
          <para>The SCP may itself modify any Attributes of a UPS instance independently of an N-SET request, e.g., if the SCP is performing the procedure step itself, if it has been determined that the performing SCU has been disabled, or if it is necessary to correct Attribute values after completion of the procedure in order to carry out reconciliation of the data. A description of the coercions the SCP may perform shall be documented in the conformance statement of the SCP.</para>
          <para>Bi-directional Authentication of machines/users/applications is possible at association time (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>). <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> provides a "Refused: Not Authorized" error code. There are no specific requirements to perform authorization.</para>
        </section>
        <section label="CC.2.6.4" status="4" xml:id="sect_CC.2.6.4">
          <title>Status Codes</title>
          <para>The status values that are specific for this DIMSE operation are defined in <xref linkend="table_CC.2.6-1" xrefstyle="select: label"/>. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for additional response status codes.</para>
          <table frame="box" label="CC.2.6-1" rules="all" xml:id="table_CC.2.6-1">
            <caption>Status Values</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Status</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Meaning</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Code</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Success</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>The requested modification of the Attribute values is performed</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0000</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="2">
                  <para>Warning</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Requested optional Attributes are not supported.</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0001</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Coerced invalid values to valid values</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>B305</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="4">
                  <para>Failure</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The UPS is not in the "IN PROGRESS" state</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C310</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The correct Transaction UID was not provided</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C301</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: The UPS may no longer be updated</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C300</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Specified SOP Instance UID does not exist or is not a UPS Instance managed by this SCP</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C307</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="CC.2.7" status="3" xml:id="sect_CC.2.7">
        <title>Get Unified Procedure Step Information (N-GET)</title>
        <para>This operation allows an SCU to get information from an SCP about a specific real-world Procedure Step that is represented as a Unified Procedure Step Instance. This operation shall be invoked by the SCU through the DIMSE N-GET Service.</para>
        <section label="CC.2.7.1" status="4" xml:id="sect_CC.2.7.1">
          <title>Unified Procedure Step IOD Subset Specification</title>
          <para>The Application Entity that claims conformance to the UPS Pull or UPS Watch SOP Classes as an SCU may choose to retrieve a subset of the Attribute values maintained by the SCP. The Application Entity that claims conformance as an SCP to these SOP Classes shall support the Attributes specified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>.</para>
        </section>
        <section label="CC.2.7.2" status="4" xml:id="sect_CC.2.7.2">
          <title>Service Class User Behavior</title>
          <para>The SCU uses the N-GET to request the SCP to provide Attributes and values of a Unified Procedure Step Instance. Since all UPSs are created as instances of the UPS Push SOP Class, the Affected SOP Class UID (0000,0002) in the N-GET request shall be the UID of the UPS Push SOP Class. See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further details.</para>
          <para>The SCU shall specify in the N-GET Service Element the UID of the SOP Instance from which Attributes are to be retrieved.</para>
          <para>The SCU shall specify the list of Unified Procedure Step Attributes for which values are to be returned. The SCU shall not specify Attributes that are defined within a Sequence, but rather specify the sequence itself to be retrieved in its entirety.</para>
          <para>The SCU shall not request the value of the Transaction UID (0008,1195) Attribute.</para>
          <para>The SCU may request Attribute Values for optional Attributes that are not maintained by the SCP. In such a case, the SCU shall function properly regardless of whether the SCP returns values for those Attributes or not. This Service Class Specification places no requirements on what the SCU shall do as a result of receiving this information.</para>
          <note>
            <para>In order to accurately interpret the character set used for the Attribute Values returned, it is recommended that the Attribute Value for the Specific Character Set (0008,0005) be requested in the N-GET request primitive.</para>
          </note>
          <para>The SCU shall be permitted to request and shall be capable of receiving values for any Attribute as specified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>. Additionally, values may be requested for optional Attributes.</para>
          <para>The SCU shall be capable of receiving all requested Attribute Values provided by the SCP in response to the N-GET indication primitive.</para>
          <note>
            <para>If the SCU or the user will need access to the final state Attributes it is the responsibility of the SCU to Subscribe (see <xref linkend="sect_CC.2.2" xrefstyle="select: label"/>) in order to receive State Change Events and then N-GET the necessary Attributes promptly upon notification of a state change to COMPLETED or CANCELED. If the SCU sets the Deletion Lock when subscribing, a COMPLETED or CANCELLED instance will continue to persist on the SCP, using resources. It is important that the SCU remove the lock (e.g., by unsubscribing) after doing the N-GET on the COMPLETED or CANCELED instance.</para>
          </note>
        </section>
        <section label="CC.2.7.3" status="4" xml:id="sect_CC.2.7.3">
          <title>Service Class Provider Behavior</title>
          <para>The SOP Class UID of the specified UPS instance will always be the UPS Push SOP Class UID, which might not match the UPS SOP Classes negotiated with the SCU. See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further details.</para>
          <para>The SCP shall return, via the N-GET response primitive, the selected Attribute values from the indicated Unified Procedure Step Instance to the SCU.</para>
          <note>
            <para>The requirement for the SCP to respond to N-GET requests for UPS Instances that have moved to the COMPLETED or CANCELED state is limited. See <xref linkend="sect_CC.2.1.3" xrefstyle="select: label"/> Service Class Provider Behavior.</para>
          </note>
          <para>The SCP shall not return the Transaction UID (0008,1195) Attribute. This is necessary to preserve this Attribute's role as an access lock.</para>
          <para>The SCP shall return, via the N-GET response primitive, the N-GET Response Status Code applicable to the associated request. A Failure Code shall indicate that the SCP has not retrieved the SOP Instance.</para>
          <para>Bi-directional Authentication of machines/users/applications is possible at association time (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>). <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> provides a "Refused: Not Authorized" error code. Further requiring or documenting authentication and/or authorization features from the SCU or SCP is beyond the scope of this SOP Class.</para>
        </section>
        <section label="CC.2.7.4" status="4" xml:id="sect_CC.2.7.4">
          <title>Status Codes</title>
          <para>The status values that are specific for this DIMSE operation are defined in <xref linkend="table_CC.2.7-1" xrefstyle="select: label"/>. See <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> for additional response status codes.</para>
          <table frame="box" label="CC.2.7-1" rules="all" xml:id="table_CC.2.7-1">
            <caption>Status Values</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Status</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Meaning</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Code</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Warning</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Requested optional Attributes are not supported</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0001</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Failure</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Specified SOP Instance UID does not exist or is not a UPS Instance managed by this SCP</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>C307</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section label="CC.2.8" status="3" xml:id="sect_CC.2.8">
        <title>Search for Unified Procedure Step (C-FIND)</title>
        <para>This operation allows an SCU to locate and get information about Unified Procedure Step instances of interest that are managed by an SCP. This operation shall be invoked by the SCU through the DIMSE C-FIND Service. The SCP processes such queries, matches UPS instances it manages against the keys present in the Identifier and returns C-FIND responses.</para>
        <para>The SCU might be searching for UPS instance with the intention of starting work on one of them or perhaps with the intention of subscribing to monitor the progress of an instance.</para>
        <section label="CC.2.8.1" status="4" xml:id="sect_CC.2.8.1">
          <title>Operation</title>
          <section label="CC.2.8.1.1" status="5" xml:id="sect_CC.2.8.1.1">
            <title>E/R Model</title>
            <para>In response to a given C-FIND request, the SCP might send several C-FIND responses, (i.e., one C-FIND response per matching worklist item). Each worklist item describes a single task and its related information.</para>
            <para>The Unified Procedure Step Query Information Model is represented by the Entity Relationship diagram shown in <xref linkend="figure_CC.2.8-1" xrefstyle="select: label"/>.</para>
            <para>
              <figure label="CC.2.8-1" pgwide="1" xml:id="figure_CC.2.8-1">
                <title>Unified Procedure Step E-R Diagram</title>
                <mediaobject>
                  <imageobject>
                   <imagedata fileref="figures/PS3.4_CC.2.8-1.svg"/>
                    <!--<imagedata fileref="part04_fromword_files/image055.png"/>-->
                  </imageobject>
                </mediaobject>
              </figure>
            </para>
            <para>There is only one Information Entity in the model, which is the Unified Procedure Step. The Attributes of a Unified Procedure Step can be found in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>.</para>
          </section>
          <section label="CC.2.8.1.2" status="5" xml:id="sect_CC.2.8.1.2">
            <title>C-FIND Service Parameters</title>
            <section label="CC.2.8.1.2.1" status="6" xml:id="sect_CC.2.8.1.2.1">
              <title>SOP Class UID</title>
              <para>The Affected SOP Class UID of the C-FIND DIMSE request shall always be the UPS SOP Class negotiated for the Presentation Context under which the service is requested. This will always be either the UPS Pull SOP Class or the UPS Watch SOP Class. See <xref linkend="sect_CC.3.1" xrefstyle="select: label"/> for further details.</para>
              <para>For both the UPS Pull SOP Class and the UPS Watch SOP Class, the C-FIND is performed against the Unified Procedure Step Information Model shown in <xref linkend="figure_CC.2.8-1" xrefstyle="select: label"/>.</para>
            </section>
            <section label="CC.2.8.1.2.2" status="6" xml:id="sect_CC.2.8.1.2.2">
              <title>Priority</title>
              <para>The Priority Attribute defines the requested priority of the C-FIND operation with respect to other DIMSE operations being performed by the same SCP.</para>
              <para>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP.</para>
            </section>
          </section>
          <section label="CC.2.8.1.3" status="5" xml:id="sect_CC.2.8.1.3">
            <title>Identifier</title>
            <para>Both the C-FIND request and response contain an Identifier encoded as a Data Set (see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
            <section label="CC.2.8.1.3.1" status="6" xml:id="sect_CC.2.8.1.3.1">
              <title>Request Identifier Structure</title>
              <para>An Identifier in a C-FIND request shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Key Attributes values to be matched against the values of Attributes specified in the SOP Class identified by the Affected SOP Class UID.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Request Identifier. It shall not be included otherwise.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Timezone Offset From UTC (0008,0201). This Attribute shall be included if Key Attributes of time are to be interpreted explicitly in the designated local time zone. It shall not be present otherwise, i.e., it shall not be sent with a zero-length value.</para>
                </listitem>
              </itemizedlist>
              <note>
                <para>This means that Specific Character Set (0008,0005) is included if the SCU supports expanded or replacement character sets in the context of this service. It will not be included if expanded or replacement character sets are not supported by the SCU.</para>
              </note>
              <para>The Key Attributes and values allowable for the query shall be defined in the SOP Class definition corresponding to the Affected SOP Class UID for the corresponding Unified Worklist And Procedure Step Information Model.</para>
            </section>
            <section label="CC.2.8.1.3.2" status="6" xml:id="sect_CC.2.8.1.3.2">
              <title>Response Identifier Structure</title>
              <para>The C-FIND response shall not contain Attributes that were not in the request or specified in this section.</para>
              <para>An Identifier in a C-FIND response shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para>Key Attributes with values corresponding to Key Attributes contained in the Identifier of the request (Key Attributes as defined in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>.)</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Response Identifier. It shall not be included otherwise. The C-FIND SCP is not required to return responses in the Specific Character Set requested by the SCU if that character set is not supported by the SCP. The SCP may return responses with a different Specific Character Set.</para>
                </listitem>
                <listitem>
                  <para>Conditionally, the Attribute Timezone Offset From UTC (0008,0201). This Attribute shall be included if any Attributes of time in the Response Identifier are to be interpreted explicitly in the designated local time zone. It shall not be present otherwise, i.e., it shall not be sent with a zero-length value.</para>
                </listitem>
              </itemizedlist>
              <note>
                <para>This means that Specific Character Set (0008,0005) is included if the SCP supports expanded or replacement character sets in the context of this service. It will not be included if expanded or replacement character sets are not supported by the SCP.</para>
              </note>
            </section>
          </section>
        </section>
        <section label="CC.2.8.2" status="4" xml:id="sect_CC.2.8.2">
          <title>Service Class User Behavior</title>
          <para>All C-FIND SCUs shall be capable of generating query requests that meet the requirements of the "Worklist" Search Method (see <xref linkend="sect_CC.2.8.3.1" xrefstyle="select: label"/>).</para>
          <para>Required Keys and Optional Keys, identified in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>, associated with the Query may be contained in the Identifier.</para>
          <para>An SCU conveys the following semantics using the C-FIND requests and responses:</para>
          <itemizedlist>
            <listitem>
              <para>The SCU requests that the SCP perform a match of all keys specified in the Identifier of the request against the information it possesses of the Query specified in the request.</para>
            </listitem>
            <listitem>
              <para>The SCU shall interpret Pending responses to convey the Attributes of a match of an item.</para>
            </listitem>
            <listitem>
              <para>The SCU shall interpret a response with a status equal to Success, Failure, or Cancel to convey the end of Pending responses.</para>
            </listitem>
            <listitem>
              <para>The SCU shall interpret a Failure response to a C-FIND request as an indication that the SCP is unable to process the request.</para>
            </listitem>
            <listitem>
              <para>The SCU may cancel the C-FIND service by issuing a C-FIND-CANCEL request at any time during the processing of the C-FIND. The SCU shall recognize a status of Cancel to indicate that the C-FIND-CANCEL was successful.</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="CC.2.8.3" status="4" xml:id="sect_CC.2.8.3">
          <title>Service Class Provider Behavior</title>
          <para>All C-FIND SCPs shall be capable of processing queries that meet the requirements of the "Worklist" Search (see <xref linkend="sect_CC.2.8.3.1" xrefstyle="select: label"/>). This does not imply that an SCP that supports the UPS Watch SOP Class must also be an SCP of the UPS Pull SOP Class.</para>
          <para>The SCP shall support Attribute matching as described in <xref linkend="sect_C.2.2.2" xrefstyle="select: label"/>.</para>
          <para>An SCP conveys the following semantics using the C-FIND requests and responses:</para>
          <itemizedlist>
            <listitem>
              <para>The SCP is requested to perform a match of all the keys specified in the Identifier of the request, against the information it possesses. Attribute matching is performed using the key values specified in the Identifier of the C-FIND request as defined in <xref linkend="table_CC.2.5-3" xrefstyle="select: label"/>.</para>
            </listitem>
            <listitem>
              <para>The SCP generates a C-FIND response for each match using the "Worklist" Search method. All such responses shall contain an Identifier whose Attributes contain values from a single match. All such responses shall contain a status of Pending.</para>
            </listitem>
            <listitem>
              <para>When all matches have been sent, the SCP generates a C-FIND response that contains a status of Success. A status of Success shall indicate that a response has been sent for each match known to the SCP.</para>
            </listitem>
          </itemizedlist>
          <note>
            <orderedlist>
              <listitem>
                <para>No Identifier is contained in a response with a status of Success. For a complete definition, see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
              </listitem>
              <listitem>
                <para>When there are no matches, then no responses with a status of Pending are sent, only a single response with a status of Success.</para>
              </listitem>
            </orderedlist>
          </note>
          <itemizedlist>
            <listitem>
              <para>The SCP shall generate a response with a status of Failure if it is unable to process the request. A Failure response shall contain no Identifier.</para>
            </listitem>
            <listitem>
              <para>If the SCP receives C-FIND-CANCEL indication before it has completed the processing of the matches it shall interrupt the matching process and return a status of Cancel.</para>
            </listitem>
          </itemizedlist>
          <para>Bi-directional Authentication of machines/users/applications is possible at association time (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>). <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> provides a "Refused: Not Authorized" error code. Further requiring or documenting authentication and/or authorization features from the SCU or SCP is beyond the scope of this SOP Class.</para>
          <section label="CC.2.8.3.1" status="5" xml:id="sect_CC.2.8.3.1">
            <title>Worklist Search Method</title>
            <para>The following steps are used to generate match responses.</para>
            <itemizedlist>
              <listitem>
                <para>Match the key match Attributes contained in the Identifier of the C-FIND request against the values of the Key Attributes for each worklist entity.</para>
              </listitem>
              <listitem>
                <para>If there are no matching keys, then there are no matches, return a response with a status equal to Success and with no Identifier.</para>
              </listitem>
              <listitem>
                <para>Otherwise,</para>
                <itemizedlist>
                  <listitem>
                    <para>For each entity for which the Attributes match all of the specified matching key Attributes, construct an Identifier. This Identifier shall contain all of the values of the Attributes for this entity that correspond to the return keys specified in the C-FIND request.</para>
                  </listitem>
                  <listitem>
                    <para>Return a response for each remaining Identifier.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
            <para><xref linkend="table_CC.2.5-3" xrefstyle="select: label"/> defines the Attributes of the Unified Procedure Step Information Model, the requirements for key matching, and the requirements for return keys.</para>
          </section>
        </section>
        <section label="CC.2.8.4" status="4" xml:id="sect_CC.2.8.4">
          <title>Status Codes</title>
          <para><xref linkend="table_CC.2.8-2" xrefstyle="select: label"/> defines the status code values that might be returned in a C-FIND response. Fields related to status code values are defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
          <table frame="box" label="CC.2.8-2" rules="all" xml:id="table_CC.2.8-2">
            <caption>C-FIND Response Status Values</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Service Status</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Further Meaning</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Status Codes</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para>
                    <emphasis role="bold">Related Fields</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="4">
                  <para>Failure</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Refused: Out of Resources</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>A700</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0000,0902)</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Identifier Does Not Match SOP Class</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>A900</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0000,0901)</para>
                  <para>(0000,0902)</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>SOP Class not Supported</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0122</para>
                </td>
                <td align="left" colspan="1" rowspan="1"/>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Unable to process</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>(any value C000 through CFFF as assigned by the implementation)</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>(0000,0901)</para>
                  <para>(0000,0902)</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Cancel</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Matching terminated due to Cancel request</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>FE00</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>None</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Success</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Matching is complete - No final Identifier is supplied.</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>0000</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>None</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="2">
                  <para>Pending</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para>Matches are continuing - Current Match is supplied and any Optional Keys were supported in the same manner as Required Keys.</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>FF00</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>Identifier</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para>Matches are continuing - Warning that one or more Optional Keys were not supported for existence for this Identifier.</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>FF01</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para>Identifier</para>
                </td>
              </tr>
            </tbody>
          </table>
          <note>
            <para>Status Codes are returned in DIMSE response messages (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>). The code values stated in column "Status Codes" are returned in Status Command Element (0000,0900).</para>
          </note>
        </section>
      </section>
    </section>
    <section label="CC.3" status="2" xml:id="sect_CC.3">
      <title>UPS SOP Classes</title>
      <para>There are four UPS SOP Classes associated with the Unified Procedure Step IOD. Each SOP Class supports different interactions with a UPS Instance (also referred to as a worklist item).</para>
      <para>The UPS Push SOP Class allows SCU systems to:</para>
      <itemizedlist>
        <listitem>
          <para>create (push) a new worklist item (i.e., instance) onto a worklist</para>
        </listitem>
        <listitem>
          <para>submit a cancellation request for a worklist item</para>
        </listitem>
      </itemizedlist>
      <para>The UPS Pull SOP Class allows SCU systems to:</para>
      <itemizedlist>
        <listitem>
          <para>query a worklist for matching items</para>
        </listitem>
        <listitem>
          <para>take responsibility for performing a worklist item</para>
        </listitem>
        <listitem>
          <para>add/modify progress/status/result details for the worklist item</para>
        </listitem>
        <listitem>
          <para>finalize a controlled worklist item as Completed or Canceled.</para>
        </listitem>
      </itemizedlist>
      <para>The UPS Watch SOP Class allows SCU systems to:</para>
      <itemizedlist>
        <listitem>
          <para>query for worklist items of interest</para>
        </listitem>
        <listitem>
          <para>subscribe/unsubscribe for event notifications of changes to a given worklist item</para>
        </listitem>
        <listitem>
          <para>subscribe/unsubscribe for event notifications of all worklist items</para>
        </listitem>
        <listitem>
          <para>get details for a given worklist item</para>
        </listitem>
        <listitem>
          <para>submit a cancellation request for a given worklist item</para>
        </listitem>
      </itemizedlist>
      <para>The UPS Event SOP Class allows SCU systems to:</para>
      <itemizedlist>
        <listitem>
          <para>receive event notifications of changes to a worklist item</para>
        </listitem>
      </itemizedlist>
      <para>The DICOM AEs that claim conformance to one or more of these SOP Classes shall support all services listed as "M" in the corresponding <xref linkend="table_CC.2-1" xrefstyle="select: label"/>, <xref linkend="table_CC.2-2" xrefstyle="select: label"/>, <xref linkend="table_CC.2-3" xrefstyle="select: label"/> and <xref linkend="table_CC.2-4" xrefstyle="select: label"/>.</para>
      <section label="CC.3.1" status="3" xml:id="sect_CC.3.1">
        <title>Service Class and SOP Class UIDs</title>
        <para>All UPS Instances shall be created with the value of SOP Class UID set to "1.2.840.10008.5.1.4.34.6.1" (i.e., that of the UPS Push SOP Class).</para>
        <note>
          <para>UPS Instances are all based on the Unified Procedure Step IOD and are all created either internally by the SCP, or in response to an N-CREATE issued as part of the UPS Push SOP Class.</para>
        </note>
        <para>Once created, UPS instances may be operated on by DIMSE services from any of the four UPS SOP Classes defined in the Unified Worklist and Procedure Step Service Class.</para>
        <para>During association negotiation, the Abstract Syntax UID shall be the implemented SOP Class as shown in the following list:</para>
        <itemizedlist>
          <listitem>
            <para>1.2.840.10008.5.1.4.34.6.1 (UPS Push SOP Class)</para>
          </listitem>
          <listitem>
            <para>1.2.840.10008.5.1.4.34.6.2 (UPS Watch SOP Class)</para>
          </listitem>
          <listitem>
            <para>1.2.840.10008.5.1.4.34.6.3 (UPS Pull SOP Class)</para>
          </listitem>
          <listitem>
            <para>1.2.840.10008.5.1.4.34.6.4 (UPS Event SOP Class)</para>
          </listitem>
        </itemizedlist>
        <section label="CC.3.1.1" status="4" xml:id="sect_CC.3.1.1">
          <title>DIMSE Implications for UPS (Informative)</title>
          <para>A SOP Instance may be created with one SOP Class UID (UPS Push) and later DIMSE Services may refer to it over an association negotiated for a different SOP Class UID. Further details on this can be found in <olink targetdoc="PS3.7" targetptr="chapter_10" xrefstyle="select: docname label"/>.</para>
          <para>For DIMSE-N Services, the Affected SOP Class UID (0000,0002) or Requested SOP Class UID (0000,0003), when present, will be the UID of the UPS Push SOP Class regardless of the negotiated Abstract Syntax UID. The SCU and SCP will not reject DIMSE-N messages on the basis of the Affected/Requested SOP Class UID being that of the UPS Push SOP Class, rather than one of the other three SOP Class UIDs as listed in the Abstract Syntax UID during association negotiation. The SCU and SCP may reject the DIMSE-N messages if the instance is not a UPS Push SOP Class Instance.</para>
          <para>For DIMSE-C Services (C-FIND), the Affected SOP Class UID will always match the negotiated Abstract Syntax UID for the Presentation Context under which the request is made. This will be either UPS Watch or UPS Pull. Both of these SOP Classes represent the UPS Information Model described in <xref linkend="sect_CC.2.8.1" xrefstyle="select: label"/>.</para>
          <para>For example, in a typical "Pull Workflow" message exchange, the C-FIND query from a "performing SCU" would use the UPS Pull SOP Class UID for both the negotiated Abstract Syntax UID and the Affected SOP Class UID (0000,0002), however the SOP Class UID (0008,0016) of the C-FIND responses themselves will be set to the UPS Push SOP Class UID by the SCP. All the subsequent N-ACTION, N-SET, and N-GET messages, would then use the UPS Pull SOP Class UID for the negotiated Abstract Syntax UID, and the UPS Push SOP Class UID for the Affected SOP Class UID (0000,0002).</para>
        </section>
        <section label="CC.3.1.2" status="4" xml:id="sect_CC.3.1.2">
          <title>Global Instance Subscription UID</title>
          <para>The well-known UID for subscribing/unsubscribing to events for all UPS Instances managed by an SCP shall have the value "1.2.840.10008.5.1.4.34.5".</para>
        </section>
      </section>
      <section label="CC.3.2" status="3" xml:id="sect_CC.3.2">
        <title>Association Negotiation</title>
        <para>Association establishment is the first phase of any instance of communication between peer DICOM AEs. The Association negotiation procedure specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> shall be used to negotiate the supported SOP Classes.</para>
        <para>See the Association Negotiation definition for the Basic Worklist Management Service Class (<xref linkend="sect_K.5" xrefstyle="select: label"/>).</para>
      </section>
    </section>
    <section label="CC.4" status="2" xml:id="sect_CC.4">
      <title>Conformance Requirements</title>
      <para>Implementations providing conformance to any of the UPS SOP Classes (UPS Pull, UPS Push, UPS Watch and UPS Event) shall be conformant as described in the following sections and shall include within their Conformance Statement information as described below.</para>
      <para>An implementation may conform to any of the UPS SOP Classes as an SCU or as an SCP. The Conformance Statement shall be in the format defined in <olink targetdoc="PS3.2" targetptr="chapter_A" xrefstyle="template: Annex %n “%t”"/>.</para>
      <section label="CC.4.1" status="3" xml:id="sect_CC.4.1">
        <title>SCU Conformance</title>
        <para>An implementation, which is conformant to any of the UPS SOP Classes as an SCU, shall meet conformance requirements for the operations that it invokes.</para>
        <section label="CC.4.1.1" status="4" xml:id="sect_CC.4.1.1">
          <title>Operations</title>
          <para>The SCU Conformance Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="chapter_A" xrefstyle="template: Annex %n “%t”"/>.</para>
          <para>An implementation, that conforms to any of the UPS Push, UPS Pull or UPS Watch SOP Classes as an SCU, shall specify under which conditions it will request the modification of the value of the Procedure Step State (0074,1000) Attribute to "IN PROGRESS", "COMPLETED", and "CANCELED".</para>
          <para>An implementation that conforms to the UPS Pull or UPS Watch SOP Classes as an SCU shall state in its Conformance Statement</para>
          <itemizedlist>
            <listitem>
              <para>Whether it requests matching on Optional Matching Key Attributes for C-FIND.</para>
            </listitem>
            <listitem>
              <para>Whether it requests Type 3 Return Key Attributes. If it requests Type 3 Return Key Attributes, then it shall list these Optional Return Key Attributes.</para>
            </listitem>
            <listitem>
              <para>Whether or not it supports extended negotiation of fuzzy semantic matching of person names for C-FIND.</para>
            </listitem>
            <listitem>
              <para>How it makes use of Specific Character Set (0008,0005) and Timezone Offset From UTC (0008,0201) when encoding queries and interpreting responses for C-FIND.</para>
            </listitem>
            <listitem>
              <para>What access mechanisms the SCP is capable of using for retrieving input data and/or making output data available. (see <olink targetdoc="PS3.3" targetptr="table_10-3b" xrefstyle="select: docname label quotedtitle"/> for details on the different Retrieval Sequences).</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
      <section label="CC.4.2" status="3" xml:id="sect_CC.4.2">
        <title>SCP Conformance</title>
        <para>An implementation that is conformant to any of the UPS SOP Classes as an SCP shall meet conformance requirements for the operations that it performs.</para>
        <section label="CC.4.2.1" status="4" xml:id="sect_CC.4.2.1">
          <title>Operations</title>
          <para>The SCP Conformance Statement shall be formatted as defined in <olink targetdoc="PS3.2" targetptr="chapter_A" xrefstyle="template: Annex %n “%t”"/>.</para>
          <para>The SCP Conformance Statement shall provide information on the behavior of the SCP at the following occurrences:</para>
          <itemizedlist>
            <listitem>
              <para>The creation of a new Instance of the UPS Push SOP Class with the status "SCHEDULED". The result of that process on the scheduling information and on the Attribute Values of the Unified Procedure Step shall be specified.</para>
            </listitem>
            <listitem>
              <para>The conditions for the update of the Attribute "Procedure Step State" (0074,1000), i.e., the change to the state "IN PROGRESS" or to "CANCELED" or to "COMPLETED".</para>
            </listitem>
            <listitem>
              <para>Which Attributes the SCP may update after the state has been set to "IN PROGRESS" or "CANCELED" or "COMPLETED".</para>
            </listitem>
            <listitem>
              <para>For how long the UPS Instance will persist on the SCP, and how long it will be available for N-GETs once its state has been set to "COMPLETED" or "CANCELED".</para>
            </listitem>
            <listitem>
              <para>Whether the SCP supports priority for C-FIND. If the SCP supports priority for C-FIND, then the meaning of the different priority levels shall be specified.</para>
            </listitem>
            <listitem>
              <para>Whether the SCP supports case-insensitive matching for PN VR Attributes for C-FIND. If the SCP supports case-insensitive matching of PN VR Attributes, then the Attributes for which this applies shall be specified.</para>
            </listitem>
            <listitem>
              <para>Whether the SCP supports extended negotiation of fuzzy semantic matching of person names for C-FIND. If the SCP supports extended negotiation of fuzzy semantic matching of person names, then the mechanism for fuzzy semantic matching shall be specified.</para>
            </listitem>
            <listitem>
              <para>How the SCP makes use of Specific Character Set (0008,0005) and Timezone Offset From UTC (0008,0201) when interpreting C-FIND queries, performing matching and encoding responses.</para>
            </listitem>
            <listitem>
              <para>What rules the SCP may use to perform additional filtering during a C-FIND (e.g., limiting returns based on the requesting user and the confidentiality settings of the workitems, or limiting the return to a single item already selected on the SCP) and under what conditions those rules are invoked.</para>
            </listitem>
            <listitem>
              <para>Whether the SCP might refuse Subscription requests and/or Deletion Locks and for what reasons.</para>
            </listitem>
            <listitem>
              <para>What access mechanisms the SCP is capable of using for retrieving input data and/or making output data available. (see <olink targetdoc="PS3.3" targetptr="table_10-3b" xrefstyle="select: docname label quotedtitle"/> for details on the different Retrieval Sequences).</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="DD" status="1" xml:id="chapter_DD">
    <title>RT Machine Verification Service Classes (Normative)</title>
    <section label="DD.1" status="2" xml:id="sect_DD.1">
      <title>Scope</title>
      <para>The RT Machine Verification Service Classes define an application-level class-of-service that facilitates the independent verification of geometric and dosimetric settings on a radiation delivery system prior to delivery of a radiation treatment. The service classes are intended for use with both conventional (e.g., photon, electron) as well as particle therapy (e.g., proton, ion) treatments.</para>
    </section>
    <section label="DD.2" status="2" xml:id="sect_DD.2">
      <title>RT Machine Verification Model</title>
      <section label="DD.2.1" status="3" xml:id="sect_DD.2.1">
        <title>RT Machine Verification Data Flow</title>
        <para>In the RT Machine Verification Model, the Service Class User (SCU) of the applicable Machine Verification Service Class is the radiation delivery system used to administer the treatment. The Machine Parameter Verifier (MPV) acts in the role of Service Class Provider (SCP).</para>
        <para>The communication states between the SCU and SCP can be described in two levels shown in <xref linkend="figure_DD.2-1" xrefstyle="select: label"/>: A) the Plan Level and B) the Beam Level.</para>
        <para>The first level (A in the diagram) is the Plan Level. The SCU initializes external verification of a new plan using the N-CREATE command. The MPV then retrieves the data necessary to perform verification through DICOM or other means. In general, there is a close relationship between an MPV and a Treatment Management System (TMS) or Archive. If DICOM is the protocol used to retrieve this data, this might be done using one or more C-MOVEs on the Archive.</para>
        <para>The second level (B in the diagram) is the Beam Level. The SCU uses the N-SET command request to instruct the SCP on the specified Attributes to be verified. The SCU then requests that the verification start using an N-ACTION command. The SCP compares the values of the specified Attributes against the values of the Attributes from the referenced plan, and signals the status of the verification using N-EVENT-REPORT command with the Treatment Verification Status (3008,002C) Attribute indicating the verification result. The MPV's use of tolerance values in the verification process shall be described in a Conformance Statement. The SCU may then optionally request the beam's verification parameters using an N-GET.</para>
        <para>Finally, when all beams have been delivered or abandoned, the SCU terminates the verification session at the Plan Level using an N-DELETE.</para>
        <para>
          <figure label="DD.2-1" pgwide="1" xml:id="figure_DD.2-1">
            <title> RT Verification Data Flow</title>
            <mediaobject>
              <imageobject>
               <imagedata fileref="figures/PS3.4_DD.2-1.svg"/>
                <!--<imagedata fileref="part04_fromword_files/image057.png"/>-->
              </imageobject>
            </mediaobject>
          </figure>
        </para>
      </section>
    </section>
    <section label="DD.3" status="2" xml:id="sect_DD.3">
      <title>Machine Verification SOP Class Definitions</title>
      <section label="DD.3.1" status="3" xml:id="sect_DD.3.1">
        <title>IOD Description</title>
        <para>The Machine Verification IODs are abstractions of the information needed to verify the correct setup of a treatment delivery system prior to radiation treatment.</para>
      </section>
      <section label="DD.3.2" status="3" xml:id="sect_DD.3.2">
        <title>DIMSE Service Group</title>
        <para><xref linkend="table_DD.3.2-1" xrefstyle="select: label"/> shows DIMSE Services applicable to the IODs.</para>
        <table frame="box" label="DD.3.2-1" rules="all" xml:id="table_DD.3.2-1">
          <caption>DIMSE Service Group</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">DIMSE Service Element</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>
                  <emphasis role="bold">Usage SCU/SCP</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-CREATE</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-SET</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-GET</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-ACTION</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-DELETE</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>N-EVENT-REPORT</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>M/M</para>
              </td>
            </tr>
          </tbody>
        </table>
        <para>The meaning of the Usage SCU/SCP is described in <xref linkend="sect_H.2.4" xrefstyle="select: label"/>.</para>
        <para>This Section describes the behavior of the DIMSE Services that are specific for this IOD. The general behavior of the DIMSE services is specified in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
        <section label="DD.3.2.1" status="4" xml:id="sect_DD.3.2.1">
          <title>N-CREATE and N-SET</title>
          <para>The N-CREATE is used to create an instance of the applicable Machine Verification SOP Class.</para>
          <para>The N-SET is used to communicate parameters for verification to an MPV by setting Attributes on an instance of the applicable Machine Verification SOP Class.</para>
          <para>All Attributes in the table relating to the number of a certain item (e.g., Number of Wedges, Number of Control Points) specify the number in the N-SET command. The numbering in the Beams Verification Request is not necessarily the same as the numbering in the referenced RT Plan.</para>
          <section label="DD.3.2.1.1" status="5" xml:id="sect_DD.3.2.1.1">
            <title>Attributes</title>
            <para>The Attribute list of the N-CREATE and N-SET for the RT Conventional Machine Verification SOP Class is shown in <xref linkend="table_DD.3.2.1-1" xrefstyle="select: label"/>. See Section 5.4 for usage notation.</para>
            <table frame="box" label="DD.3.2.1-1" rules="all" xml:id="table_DD.3.2.1-1">
              <caption>N-CREATE and N-SET Attribute List - RT Conventional Machine Verification SOP Class</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">N-CREATE Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">N-SET Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="4" rowspan="1">
                    <para>
                      <emphasis role="bold">
                        <emphasis role="italic">RT General Machine Verification Module</emphasis>
                      </emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced RT Plan Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0002)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>(only a single Item shall be permitted)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Fraction Group Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0022)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                    <para>(required if plan has more than one fraction group)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="4" rowspan="1">
                    <para>
                      <emphasis role="italic">Include <xref linkend="table_CC.2.5-2e" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Treatment Verification Status</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,002C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failed Parameters Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1048)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Overridden Parameters Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,104A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>General Machine Verification Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1042)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                    <para>(sequence shall contain zero items)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>(only a single Item shall be permitted)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Specified Primary Meterset</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Specified Secondary Meterset</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Specified Treatment Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,003A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Beam Limiting Device Leaf Pairs Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00A0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;RT Beam Limiting Device Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00B8)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Number of Leaf/Jaw Pairs</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00BC)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Recorded Wedge Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00B0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying wedges). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Wedge Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00D2)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Wedge ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00D4)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Wedge Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00D5)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Wedge Orientation</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00D8)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Recorded Compensator Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00C0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying compensators). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Compensator ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00E5)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced Compensator Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,00D0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Recorded Block Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00D0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying blocks). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Block Tray ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F5)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced Block Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,00E0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Treatment Machine Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00B2)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Beam Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00C2)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Radiation Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00C6)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Wedges</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00D0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Compensators</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00E0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Boli</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00ED)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Blocks</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Applicator Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0107)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying applicators). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Applicator ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0108)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Applicator Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0109)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Control Points</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0110)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>(value shall be 1)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Patient Setup Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0180)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>(one or more Items may be included)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Patient Setup Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0182)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Fixation Device Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0190)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying fixation devices). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Fixation Device Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0192)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Beam Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0006)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Bolus Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,00B0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying bolus). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced ROI Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3006,0084)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes in RT General Machine Verification Module</emphasis></para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="4" rowspan="1">
                    <para>
                      <emphasis role="bold">
                        <emphasis role="italic">RT Conventional Machine Verification Module</emphasis>
                      </emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Conventional Machine Verification Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1044)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                    <para>(sequence shall contain zero items)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>(only a single Item shall be permitted)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Conventional Control Point Verification Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,104C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>(only a single Item shall be permitted)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Nominal Beam Energy</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0114)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Dose Rate Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0115)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Wedge Position Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0116)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Number of Wedges (300A,00D0) is non-zero,one or more Items may be included)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Wedge Position</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0118)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Referenced Wedge Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,00C0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Beam Limiting Device Position Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,011A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Beam Limiting Device Leaf Pairs Sequence (3008,00A0) is sent,one or more Items may be included)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;RT Beam Limiting Device Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00B8)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Leaf/Jaw Positions</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,011C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Gantry Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,011E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Gantry Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,011F)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Beam Limiting Device Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0120)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Beam Limiting Device Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0121)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Patient Support Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0122)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Patient Support Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0123)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Eccentric Axis Distance</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0124)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Eccentric Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0125)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Eccentric Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0126)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Vertical Position</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0128)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Longitudinal Position</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0129)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Lateral Position</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,012A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Pitch Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Pitch Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0142)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Roll Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0144)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Roll Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0146)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced Control Point Index</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,00F0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes in RT Conventional Machine Verification Module</emphasis></para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <para>The Attribute list of the N-CREATE and N-SET for the RT Ion Machine Verification SOP Class is shown in <xref linkend="table_DD.3.2.1-2" xrefstyle="select: label"/>.</para>
            <table frame="box" label="DD.3.2.1-2" rules="all" xml:id="table_DD.3.2.1-2">
              <caption>N-CREATE and N-SET Attribute List - RT Ion Machine Verification SOP Class</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">N-CREATE Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">N-SET Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="4" rowspan="1">
                    <para>
                      <emphasis role="bold">
                        <emphasis role="italic">RT General Machine Verification Module</emphasis>
                      </emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced RT Plan Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0002)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>(only a single Item shall be permitted)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Fraction Group Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0022)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1</para>
                    <para>(required if plan has more than one fraction group)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="4" rowspan="1">
                    <para>
                      <emphasis role="italic">Include <xref linkend="table_CC.2.5-2e" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Treatment Verification Status</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,002C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failed Parameters Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1048)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Overridden Parameters Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,104A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>Not allowed</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>General Machine Verification Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1042)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                    <para>(sequence shall contain zero items)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>(only a single Item shall be permitted)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Specified Primary Meterset</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,0032)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Specified Secondary Meterset</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,0033)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Specified Treatment Time</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,003A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Beam Limiting Device Leaf Pairs Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00A0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;RT Beam Limiting Device Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00B8)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Number of Leaf/Jaw Pairs</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00BC)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Recorded Wedge Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00B0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying wedges). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Wedge Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00D2)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Wedge ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00D4)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Wedge Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00D5)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Wedge Orientation</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00D8)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Recorded Compensator Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00C0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying compensators). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Compensator ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00E5)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced Compensator Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,00D0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Recorded Block Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00D0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying blocks). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Block Tray ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F5)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced Block Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,00E0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Treatment Machine Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00B2)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Beam Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00C2)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Radiation Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00C6)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Wedges</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00D0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Compensators</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00E0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Boli</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00ED)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Blocks</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Applicator Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0107)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying applicators). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Applicator ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0108)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Applicator Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0109)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Control Points</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0110)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>(value shall be 1)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Patient Setup Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0180)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                    <para>See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Patient Setup Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0182)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Fixation Device Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0190)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying fixation devices). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Fixation Device Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0192)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Beam Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0006)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced Bolus Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,00B0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying bolus). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced ROI Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3006,0084)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes in RT General Machine Verification Module</emphasis></para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="4" rowspan="1">
                    <para>
                      <emphasis role="bold">
                        <emphasis role="italic">RT Ion Machine Verification Module</emphasis>
                      </emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Ion Machine Verification Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1046)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                    <para>(sequence shall contain zero items)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>(only a single Item shall be permitted)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Ion Control Point Verification Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,104E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                    <para>(only a single Item shall be permitted)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Meterset Rate Set</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,0045)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Nominal Beam Energy</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0114)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Beam Limiting Device Position Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,011A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Beam Limiting Device Leaf Pairs Sequence (3008,00A0) is sent,one or more Items may be included)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;RT Beam Limiting Device Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00B8)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Leaf/Jaw Positions</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,011C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Gantry Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,011E)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Gantry Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,011F)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Beam Limiting Device Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0120)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Beam Limiting Device Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0121)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Patient Support Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0122)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Patient Support Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0123)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Vertical Position</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0128)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Longitudinal Position</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0129)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Lateral Position</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,012A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Pitch Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0140)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Pitch Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0142)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Roll Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0144)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Table Top Roll Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0146)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Head Fixation Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0148)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Gantry Pitch Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,014A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Gantry Pitch Rotation Direction</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,014C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Snout Position</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,030D)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Range Shifter Settings Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0360)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Number of Range Shifters (300A,0312) is non-zero,one or more Items may be included)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Range Shifter Setting</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0362)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Referenced Range Shifter Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Lateral Spreading Device Settings Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0370)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Number of Lateral Spreading Devices (300A,0330) is non-zero,one or more Items may be included)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Lateral Spreading Device Setting</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0372)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Referenced Lateral Spreading Device Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Range Modulator Settings Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0380)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Number of Range Modulators (300A,0340) is non-zero,one or more Items may be included)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Range Modulator Gating Start Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0382)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Range Modulator Gating Stop Value</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0384)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Referenced Range Modulator Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Ion Wedge Position Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,03AC)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Number of Wedges (300A,00D0) is non-zero,one or more Items may be included)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Wedge Thin Edge Position</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00DB)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Wedge Type (300A,00D3) of the wedge referenced by Referenced Wedge Number (300C,00C0) is PARTIAL_STANDARD or PARTIAL_MOTORIZ)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;&gt;Wedge Position</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0118)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced Control Point Index</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,00F0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Recorded Snout Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00F0)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Snout Sequence is included in the RT Ion Plan referenced within the Referenced RT Plan Sequence (300C,0002); only a single Item is permitted in this sequence)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Snout ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,030F)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Recorded Range Shifter Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00F2)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying range shifters). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Range Shifter ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0318)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced Range Shifter Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0100)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Recorded Lateral Spreading Device Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00F4)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying lateral spreading devices). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Lateral Spreading Device ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0336)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced Lateral Spreading Device Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0102)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Recorded Range Modulator Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,00F6)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2C/2C</para>
                    <para>(required if MPV is capable of verifying range modulators). See <xref linkend="sect_DD.3.2.1.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,00F9)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Range Modulator ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0346)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Range Modulator Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0348)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Beam Current Modulation ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,034C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Range Modulator Type (300A,0348) is WHL_MODWEIGHTS)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;&gt;Referenced Range Modulator Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0104)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Radiation Mass Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0302)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Radiation Type (300A,00C6) is ION)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Radiation Atomic Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0304)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Radiation Type (300A,00C6) is ION)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Radiation Charge State</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0306)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1C/1C</para>
                    <para>(required if Radiation Type (300A,00C6) is ION)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Scan Mode</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0308)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Range Shifters</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0312)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Lateral Spreading Devices</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0330)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Number of Range Modulators</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0340)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Patient Support Type</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0350)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Patient Support ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0352)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Patient Support Accessory Code</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0354)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Fixation Light Azimuthal Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0356)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Fixation Light Polar Angle</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300A,0358)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes in RT Ion Machine Verification Module</emphasis></para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/3</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <section label="DD.3.2.1.1.1" status="6" xml:id="sect_DD.3.2.1.1.1">
              <title>Beam Modifiers</title>
              <para>If the MPV is not capable of performing the type of verification required by the Attribute, then the Attribute shall not be present. If the MPV is capable of performing the type of verification required by the Attribute, then the Attribute will be zero length if there are no such modifiers, and valued with one or more items if there are one or more such modifiers.</para>
            </section>
          </section>
          <section label="DD.3.2.1.2" status="5" xml:id="sect_DD.3.2.1.2">
            <title>Status</title>
            <para>The status values for N-CREATE that are specific for these SOP Classes are defined as follows:</para>
            <table frame="box" label="DD.3.2.1.2-1" rules="all" xml:id="table_DD.3.2.1.2-1">
              <caption>RT Ion Machine Verification SOP Class N-CREATE Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Code</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Machine Verification successfully created</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="4">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>No such object instance - Referenced RT Plan not found</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C227</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>The Referenced Fraction Group Number does not exist in the referenced plan</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C221</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>No beams exist within the referenced fraction group</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C222</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>SCU already verifying and cannot currently process this request.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C223</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <para>The status values for N-SET that are specific for these SOP Classes are defined as follows:</para>
            <table frame="box" label="DD.3.2.1.2-2" rules="all" xml:id="table_DD.3.2.1.2-2">
              <caption>RT Ion Machine Verification SOP Class N-SET Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Code</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Machine Verification successfully updated</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="3">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Beam Number not found within the referenced Fraction Group</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C224</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced device or accessory not supported</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C225</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced device or accessory not found within the referenced beam</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C226</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="DD.3.2.1.3" status="5" xml:id="sect_DD.3.2.1.3">
            <title>Behavior</title>
            <section label="DD.3.2.1.3.1" status="6" xml:id="sect_DD.3.2.1.3.1">
              <title>N-CREATE</title>
              <para>The SCU uses N-CREATE to request the SCP to create an applicable Machine Verification SOP Instance. The SCP shall create the SOP Instance and shall initialize Attributes of the SOP Class.</para>
              <para>The General Machine Verification Sequence, Conventional Machine Verification Sequence, and Ion Machine Verification Sequence are created with an empty value, and specification of the contained Attributes is deferred until the N-SET operation.</para>
              <para>The SCP shall return the status code of the requested SOP Instance creation. The meaning of success, warning and failure status codes is defined in <xref linkend="sect_DD.3.2.1.2" xrefstyle="select: label"/>.</para>
            </section>
            <section label="DD.3.2.1.3.2" status="6" xml:id="sect_DD.3.2.1.3.2">
              <title>N-SET</title>
              <para>The SCU uses the N-SET to request the SCP to update an applicable Machine Verification instance. The SCU shall specify the SOP Instance to be updated and shall specify the list of Attributes for which the Attribute Values are to be set. The Attributes in the Conventional/Ion Control Point Verification Sequence represent the Treatment Delivery System's actual geometric values at the time the N-SET request is issued and therefore, the Conventional/Ion Control Point Verification Sequence shall always contain one sequence item. The Referenced Control Point Index shall be zero for NORMAL treatments, and may be greater than zero for CONTINUATION treatments.</para>
              <para>Within an Attribute sequence such as the General Machine Verification Sequence, Conventional Machine Verification Sequence, and Ion Machine Verification Sequence, values for all required Attributes must be supplied with each N-SET, or else the missing Attributes will have any previously set values removed from the SOP Instance. Existing parameters may be cleared by sending an empty sequence or Attribute. The MPV's Conformance Statement shall specify the set of Attributes that it requires for verification.</para>
              <para>The SCU shall set the new values for the specified Attributes of the specified SOP Instance. The SCP shall then compare the values of Attributes of the specified SOP Instance to the values of the same Attributes found in the RT Plan referenced in N-CREATE. Values shall be compared using the tolerance values also found in the referenced RT Plan. The result of this comparison shall be available for use when the SCU requests the Treatment Verification Status using an N-GET.</para>
            </section>
          </section>
        </section>
        <section label="DD.3.2.2" status="4" xml:id="sect_DD.3.2.2">
          <title>N-GET</title>
          <para>The N-GET is used to get the verification status and results of the applicable Machine Verification SOP Class.</para>
          <section label="DD.3.2.2.1Verification" status="5" xml:id="sect_DD.3.2.2.1Verification">
            <title>Parameters Selector Attribute Macro</title>
            <para><xref linkend="table_DD.3.2.2.1-1" xrefstyle="select: label"/> describes N-GET support requirements for the Selector Attribute Macro. See Section 5.4 for requirements type code meaning.</para>
            <table frame="box" label="DD.3.2.2.1-1" rules="all" xml:id="table_DD.3.2.2.1-1">
              <caption>Verification Parameters Selector Attribute Macro</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Req. Type N-GET (SCU/SCP)</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Selector Attribute</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0072,0026)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Selector Value Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0072,0028)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Selector Sequence Pointer</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0072,0052)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Selector Sequence Pointer Private Creator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0072,0054)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Selector Sequence Pointer Items</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1057)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Selector Attribute Private Creator</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0072,0056)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="DD.3.2.2.2" status="5" xml:id="sect_DD.3.2.2.2">
            <title>Attributes</title>
            <para>The Attribute list of the N-GET for the RT Conventional Machine Verification SOP Class and RT Ion Machine Verification SOP Class is shown in <xref linkend="table_DD.3.2.2.2-1" xrefstyle="select: label"/>. See Section 5.4 for usage notation.</para>
            <table frame="box" label="DD.3.2.2.2-1" rules="all" xml:id="table_DD.3.2.2.2-1">
              <caption>N-GET Attribute List- RT Conventional Machine Verification SOP Class and RT Ion Machine Verification SOP Class</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced RT Plan Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0002)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Class UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1150)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Referenced SOP Instance UID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1155)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Referenced Fraction Group Number</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(300C,0022)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Patient ID</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0010,0020)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="3" rowspan="1">
                    <para>
                      <emphasis role="italic">Include <xref linkend="table_CC.2.5-2e" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Treatment Verification Status</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,002C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failed Parameters Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,1048)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                    <para>(zero or more items shall be included in this Sequence)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="3" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_DD.3.2.2.1-1" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Overridden Parameters Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0074,104A)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                    <para>(zero or more items shall be included in this Sequence)</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="3" rowspan="1">
                    <para>
                      <emphasis role="italic">&gt;Include <xref linkend="table_DD.3.2.2.1-1" xrefstyle="select: label quotedtitle"/></emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Operators' Name</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(0008,1070)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>&gt;Override Reason</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,0066)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/2</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para><emphasis role="italic">All other Attributes</emphasis></para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>3/2</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="DD.3.2.2.3" status="5" xml:id="sect_DD.3.2.2.3">
            <title>Status</title>
            <para>The status values that are specific for these SOP Classes are defined as follows:</para>
            <table frame="box" label="DD.3.2.2.3-1" rules="all" xml:id="table_DD.3.2.2.3-1">
              <caption>RT Conventional Machine and RT Ion Machine Verification SOP Class N-GET Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Code</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Treatment Verification Status of the applicable Machine Verification instance successfully returned.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>No such object instance - applicable Machine Verification instance not found</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C112</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="DD.3.2.2.4" status="5" xml:id="sect_DD.3.2.2.4">
            <title>Behavior</title>
            <para>The SCU uses N-GET to retrieve from the SCP the verification status and results of the applicable Machine Verification SOP Instance.</para>
            <para>The SCP shall return the Treatment Verification Status (3008,002C) Attribute as well as the status code of the requested SOP Instance update. Treatment Verification Status shall have one of the following values:</para>
            <para>VERIFIED = treatment verified</para>
            <para>VERIFIED_OVR = treatment verified with at least one out-of-range value overridden</para>
            <para>NOT_VERIFIED = verification of treatment was not successful</para>
            <para>The VERIFIED state indicates that all required parameters have been checked and no out-of-range values have been detected. The VERIFIED_OVR state indicates that the treatment failed to verify due to one or more out-of-range values that were then overridden. NOT_VERIFIED indicates that one of more of the out-of-range values has not yet been overridden and the treatment cannot go ahead. This could be because at least one out-of-range value was detected, or one or more values required for verification were not supplied. The site- and vendor-specific configuration of the MPV determines the Attributes and ranges required for successful verification.</para>
            <para>If the Treatment Verification Status is VERIFIED_OVR, one or more parameter occurrences shall be returned in Overridden Parameters Sequence (0074,104A), otherwise the sequence shall be empty.</para>
            <para>If the Treatment Verification Status is NOT_VERIFIED, one or more parameter occurrences shall be returned in Failed Parameters Sequence (0074,1048), otherwise the sequence shall be empty.</para>
            <para>See <olink targetdoc="PS3.3" targetptr="sect_C.31.1.1" xrefstyle="select: docname label quotedtitle"/> for specification of how the Attribute tags and position within a sequence are encoded.</para>
            <para>The SCP shall return the status code of the requested action. The meanings of success, warning and failure status codes are defined in <xref linkend="sect_DD.3.2.2.3" xrefstyle="select: label"/>.</para>
          </section>
        </section>
        <section label="DD.3.2.3" status="4" xml:id="sect_DD.3.2.3">
          <title>N-ACTION</title>
          <para>The N-ACTION is used to initiate parameter verification of an instance of the applicable Machine Verification SOP Class.</para>
          <section label="DD.3.2.3.1" status="5" xml:id="sect_DD.3.2.3.1">
            <title>Attributes</title>
            <para>The action types of the N-ACTION are defined as shown in <xref linkend="table_DD.3.2.3-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="DD.3.2.3-1" rules="all" xml:id="table_DD.3.2.3-1">
              <caption>Action Event Information</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Action Type Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Action Type ID</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Request Beam Verification</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>None</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="DD.3.2.3.2" status="5" xml:id="sect_DD.3.2.3.2">
            <title>Status</title>
            <para>The status values that are specific for these SOP Classes are defined in <xref linkend="table_DD.3.2.3-2" xrefstyle="select: label"/>.</para>
            <table frame="box" label="DD.3.2.3-2" rules="all" xml:id="table_DD.3.2.3-2">
              <caption>RT Conventional Machine and RT Ion Machine Verification SOP Class N-ACTION Status Values</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Status</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Meaning</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Code</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Machine Parameter Verification of the applicable Machine Verification instance successfully initiated.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>0000</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>No such object instance - Machine Verification requested instance not found.</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>C112</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="DD.3.2.3.3" status="5" xml:id="sect_DD.3.2.3.3">
            <title>Behavior</title>
            <para>The SCU uses N-ACTION to instruct the SCP to initiate machine parameter verification of the applicable Machine Verification SOP Instance.</para>
          </section>
        </section>
        <section label="DD.3.2.4" status="4" xml:id="sect_DD.3.2.4">
          <title>N-DELETE</title>
          <para>The N-DELETE is used to delete an instance of the applicable Machine Verification SOP Class.</para>
          <section label="DD.3.2.4.1" status="5" xml:id="sect_DD.3.2.4.1">
            <title>Attributes</title>
            <para>There are no specific Attributes.</para>
          </section>
          <section label="DD.3.2.4.2" status="5" xml:id="sect_DD.3.2.4.2">
            <title>Status</title>
            <para>There are no specific status codes.</para>
          </section>
          <section label="DD.3.2.4.3" status="5" xml:id="sect_DD.3.2.4.3">
            <title>Behavior</title>
            <para>The SCU uses the N-DELETE to request the SCP to delete an applicable Machine Verification SOP Instance. The SCU shall specify in the N-DELETE request primitive the SOP Instance UID of the applicable Machine Verification instance.</para>
            <para>The SCP shall delete the specified SOP Instance, such that subsequent operations of the same SOP Instance will fail.</para>
            <para>The SCP shall return the status code of the requested SOP Instance deletion. The meanings of success, warning, and failure status classes are defined in <olink targetdoc="PS3.7" targetptr="chapter_C" xrefstyle="template: Annex %n “%t”"/>.</para>
            <para>If an N-DELETE is not issued, the SOP Class instance may be deleted on the SCP by a manual or automatic operation. This behavior is beyond the scope of the standard.</para>
          </section>
        </section>
        <section label="DD.3.2.5" status="4" xml:id="sect_DD.3.2.5">
          <title>N-EVENT-REPORT</title>
          <para>The N-EVENT-REPORT is used by the MPV to notify the TDS of the status of the verification task (successful or otherwise), or to notify the TDS that a verification is pending (in progress). The encoding of Notification Event Information is defined in <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/>.</para>
          <section label="DD.3.2.5.1" status="5" xml:id="sect_DD.3.2.5.1">
            <title>Attributes</title>
            <para>The arguments of the N-EVENT-REPORT are defined as shown in <xref linkend="table_DD.3.2.5-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="DD.3.2.5-1" rules="all" xml:id="table_DD.3.2.5-1">
              <caption>Notification Event Information</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Event Type Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Event Type ID</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Attribute</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para>
                      <emphasis role="bold">Usage SCU/SCP</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Pending</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>None</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para>Done</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para>Treatment Verification Status</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>(3008,002C)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para>-/1</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="DD.3.2.5.2" status="5" xml:id="sect_DD.3.2.5.2">
            <title>Status</title>
            <para>There are no specific status codes.</para>
          </section>
          <section label="DD.3.2.5.3" status="5" xml:id="sect_DD.3.2.5.3">
            <title>Behavior</title>
            <para>The SCP uses the N-EVENT-REPORT to inform the SCU of the verification status. See <olink targetdoc="PS3.17" targetptr="sect_BBB.3" xrefstyle="select: docname label quotedtitle"/>.</para>
            <para>If the Event Type ID = 1 then the verification is still in progress, and the SCU must wait until another event is received. See <olink targetdoc="PS3.17" targetptr="sect_BBB.3.2.2" xrefstyle="select: docname label quotedtitle"/>.</para>
            <para>If the Event Type ID = 2 then the verification process has been completed. The SCU may use the returned value of the Treatment Verification Status (3008,002C) to determine whether or not the beam is ready to be delivered, or if a machine adjustment or override needs to be made. See <olink targetdoc="PS3.17" targetptr="sect_BBB.3.2.2" xrefstyle="select: docname label quotedtitle"/>.</para>
          </section>
        </section>
      </section>
    </section>
  </chapter>
</book>
