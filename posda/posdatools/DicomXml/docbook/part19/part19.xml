<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!-- $Source: /home/bbennett/pass/archive/DicomXml/docbook/part19/part19.xml,v $ -->
<!-- $Date: 2014/05/08 19:55:40 $ -->
<!-- $Revision: 1.1 $ -->
<book xmlns="http://docbook.org/ns/docbook" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xl="http://www.w3.org/1999/xlink" label="PS3.19" version="5.0" xml:id="PS3.19">
  <title>PS3.19</title>
  <subtitle>DICOM PS3.19 2013 - Application Hosting</subtitle>
  <info>
    <author>
      <orgname>DICOM Standards Committee</orgname>
    </author>
    <copyright>
      <year>2013</year>
      <holder>NEMA</holder>
    </copyright>
  </info>
  <chapter label="" status="1" xml:id="chapter_Notice">
    <title>Notice and Disclaimer</title>
    <para>The information in this publication was considered technically sound by the consensus of
      persons engaged in the development and approval of the document at the time it was developed.
      Consensus does not necessarily mean that there is unanimous agreement among every person
      participating in the development of this document.</para>
    <para>NEMA standards and guideline publications, of which the document contained herein is one,
      are developed through a voluntary consensus standards development process. This process brings
      together volunteers and/or seeks out the views of persons who have an interest in the topic
      covered by this publication. While NEMA administers the process and establishes rules to
      promote fairness in the development of consensus, it does not write the document and it does
      not independently test, evaluate, or verify the accuracy or completeness of any information or
      the soundness of any judgments contained in its standards and guideline publications.</para>
    <para>NEMA disclaims liability for any personal injury, property, or other damages of any nature
      whatsoever, whether special, indirect, consequential, or compensatory, directly or indirectly
      resulting from the publication, use of, application, or reliance on this document. NEMA
      disclaims and makes no guaranty or warranty, expressed or implied, as to the accuracy or
      completeness of any information published herein, and disclaims and makes no warranty that the
      information in this document will fulfill any of your particular purposes or needs. NEMA does
      not undertake to guarantee the performance of any individual manufacturer or seller's products
      or services by virtue of this standard or guide.</para>
    <para>In publishing and making this document available, NEMA is not undertaking to render
      professional or other services for or on behalf of any person or entity, nor is NEMA
      undertaking to perform any duty owed by any person or entity to someone else. Anyone using
      this document should rely on his or her own independent judgment or, as appropriate, seek the
      advice of a competent professional in determining the exercise of reasonable care in any given
      circumstances. Information and other standards on the topic covered by this publication may be
      available from other sources, which the user may wish to consult for additional views or
      information not covered by this publication.</para>
    <para>NEMA has no power, nor does it undertake to police or enforce compliance with the contents
      of this document. NEMA does not certify, test, or inspect products, designs, or installations
      for safety or health purposes. Any certification or other statement of compliance with any
      health or safety-related information in this document shall not be attributable to NEMA and is
      solely the responsibility of the certifier or maker of the statement.</para>
  </chapter>
  <chapter label="" status="1" xml:id="chapter_Foreword">
    <title>Foreword</title>
    <para>This DICOM Standard was developed according to the procedures of the DICOM Standards Committee.</para>
    <para>The DICOM Standard is structured as a multi-part document using the guidelines established in <xref linkend="biblio_ISODirectives3"/>.</para>
  </chapter>
  <chapter xml:id="chapter_1" label="1" status="1">
    <title>Scope and Field of Application</title>
    <para>This Part of the DICOM Standard defines an interface between two software applications. One application, the Hosting System, provides the second application with data, such as a set of images and related data. The second application, the Hosted Application, analyzes that data, potentially returning the results of that analysis, for example in the form of another set of images and/or structured reports, to the first application. Such an Application Program Interface (API) differs in scope from other portions of the DICOM Standard in that it standardizes the data interchange between software components on the same system, instead of data interchange between different systems. Hosted Application programs written to that standardized interface can 'plug-into' (see <xref linkend="figure_1-1" xrefstyle="select: label"/>) Hosting Systems. The notion of software add-ons or 'plug-ins' is quite common in the computing world, and has been successfully employed to extend the capabilities of web browsers, media players, graphical
  editors, publishing programs, etc. A Hosting System implementer needs only to create the standardized API once in order to support a wide variety of add-on Hosted Applications.</para>
    <figure label="1-1" pgwide="1" xml:id="figure_1-1">
      <title>Interface between Hosted Application and Hosting System.</title>
      <mediaobject>
        <imageobject>
          <!--<imagedata fileref="figures/PS3.19_1-1.svg"/>-->
          <imagedata fileref="part19_fromword_files/figure_1-1.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>In the traditional 'plug-in' model, the 'plug-in' is dedicated to a particular host system (e.g., a web browsing program), and might not run under other host systems (e.g., other web browsing programs). PS3.19 defines a standardized API that may be implemented by any Hosting System. A 'plug-in' Hosted Application written to the standardized API would be able to run on any Hosting System that implements that standardized API (see <xref linkend="figure_1-2" xrefstyle="select: label"/>).</para>
    <para>
      <figure label="1-2" pgwide="1" xml:id="figure_1-2">
        <title>Illustration of Platform Independence via Hosted Application Architecture.</title>
        <mediaobject>
          <imageobject>
            <!--<imagedata fileref="figures/PS3.19_1-2.svg"/>-->
            <imagedata fileref="part19_fromword_files/image002.png"/>
          </imageobject>
        </mediaobject>
      </figure>
    </para>
    <para>The design goals and assumptions for the API include:</para>
    <itemizedlist>
      <listitem>
        <para>Language independence - the API is defined in such a way that programs written in any common programming language could utilize it.</para>
      </listitem>
      <listitem>
        <para>Platform independence - the API is defined in such a way that it is not dependent on any particular computing platform or operating system.</para>
      </listitem>
      <listitem>
        <para>Extensible - the API can be extended in a backward compatible fashion. Old applications still work even with new extensions in place, while new applications that are aware of the extensions can gain access to a richer set of functionality.</para>
      </listitem>
      <listitem>
        <para>Protected - the API design is consistent with later additions of mechanisms to protect intellectual property rights, and mechanisms that assure appropriate permissions and licenses are in place. The API should not interfere with common licensing systems.</para>
      </listitem>
      <listitem>
        <para>Secure - the Hosted Application's access to data on the Hosting System would be controlled via the API by the Hosting System. The Hosting System would be responsible for access controls and audit logging, since it is the one providing the data to the Hosted Application.</para>
      </listitem>
      <listitem>
        <para>Leverage Existing Technology - the API definition utilizes existing technology in common use, as far as practical, and does not define new methodologies.</para>
      </listitem>
      <listitem>
        <para>Simultaneous Launching - the Hosting System will be able to launch several instances of the same or of different Hosted Applications at the same time.</para>
      </listitem>
      <listitem>
        <para>Distributed Execution - although the API is designed for local execution, it does not prevent remote execution, where the Application is running on a different system from the Host.</para>
      </listitem>
    </itemizedlist>
    <para>PS3.19 specifies both the interactions and the Application Programming Interfaces (API) between Hosting Systems and Hosted Applications. PS3.19 also includes Normative and Informative Annexes that define the data models that are used by the API defined in this part.</para>
    <para>The API does not directly address workflow management, which is addressed by other DICOM Services.</para>
  </chapter>
  <chapter xml:id="chapter_2" label="2" status="1">
    <title>Normative References</title>
    <para>The following standards contain provisions that, through reference in this text, constitute provisions of this Standard. At the time of publication, the editions indicated were valid. All standards are subject to revision, and parties to agreements based on this Standard are encouraged to investigate the possibilities of applying the most recent editions of the standards indicated below.</para>
    <para>IETF RFC 2045,2046,2048MIME Multipurpose Internet Mail Extension</para>
    <para>IETF RFC 2396Uniform Resource Identifiers (URI) : Generic Syntax</para>
    <para>IETF RFC 3240application/dicom MIME Sub-type Registration</para>
    <para>ISO 8822:1988 Information processing systems -- Open Systems Interconnection - Connection oriented presentation service definition</para>
    <para>ISO/IEC 19757 DSDL Document Schema Definition Languages (DSDL)</para>
    <para>ITU-T Recommendation X.667 UUID (also IETF RFC 4122)</para>
    <para>W3C Recommendation Web Services Description Language (WSDL) 1.1</para>
    <note>
      <para>The WSDL W3C Recommendation can be found at <link xl:href="http://www.w3.org/TR/wsdl"/></para>
    </note>
    <para>W3C Recommendation XML Path Language (XPath) 2.0</para>
    <note>
      <para>The XPath W3C Recommendation can be found at <link xl:href="http://www.w3.org/TR/2007/REC-xpath20-20070123/"/>)</para>
    </note>
    <para>W3C Recommendation XML Information Set</para>
    <note>
      <para>The XML Information Set W3C Recommendation can be found at <link xl:href="http://www.w3.org/TR/xml-infoset/"/></para>
    </note>
  </chapter>
  <chapter xml:id="chapter_3" label="3" status="1">
    <title>Definitions</title>
    <para>For the purposes of this Standard the following definitions apply.</para>
    <section xml:id="sect_3.1" label="3.1" status="2">
      <title>Presentation Service Definitions</title>
      <para>This part of the standard makes use of the following terms defined in ISO 8822:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Transfer Syntax</para>
        </listitem>
        <listitem>
          <para>Transfer Syntax Name</para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="sect_3.2" label="3.2" status="2">
      <title>XML Infoset Definitions</title>
      <para>This part of the standard makes use of the following terms defined in W3C Recommendation XML Information Set:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Infoset or XML Infoset</para>
        </listitem>
        <listitem>
          <para>Element or XML Element</para>
        </listitem>
        <listitem>
          <para>Attribute or XML Attribute</para>
        </listitem>
      </orderedlist>
      <note>
        <orderedlist>
          <listitem>
            <para>The concept of an XML Attribute is quite distinct from that of a DICOM Attribute.</para>
          </listitem>
          <listitem>
            <para>To avoid confusion with the DICOM terms with similar names, the text of the DICOM Standard will use XML Element and XML Attribute when referring to these XML Infoset concepts. The appearance of Element or Attribute without the term XML in front of them generally refers to the DICOM concepts instead of the XML Infoset concepts.</para>
          </listitem>
        </orderedlist>
      </note>
    </section>
    <section xml:id="sect_3.3" label="3.3" status="2">
      <title>DICOM Introduction and Overview Definitions</title>
      <para>This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.1" targetptr="PS3.1" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Attribute</para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="sect_3.4" label="3.4" status="2">
      <title>DICOM Information Object Definition</title>
      <para>This part of the standard makes use of the following term defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Attribute Tag</para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="sect_3.5" label="3.5" status="2">
      <title>DICOM Data Structures and Encoding</title>
      <para>This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Data Element</para>
        </listitem>
        <listitem>
          <para>Data Element Tag</para>
        </listitem>
        <listitem>
          <para>Data Element Type</para>
        </listitem>
        <listitem>
          <para>Data Set</para>
        </listitem>
        <listitem>
          <para>Defined Term</para>
        </listitem>
        <listitem>
          <para>Enumerated Value</para>
        </listitem>
        <listitem>
          <para>Sequence of Items</para>
        </listitem>
        <listitem>
          <para>Unique Identifier (UID)</para>
        </listitem>
        <listitem>
          <para>Value Multiplicity (VM)</para>
        </listitem>
        <listitem>
          <para>Value Representation (VR)</para>
        </listitem>
      </orderedlist>
      <para/>
    </section>
    <section xml:id="sect_3.6" label="3.6" status="2">
      <title>Codes and Controlled Terminology Definitions:</title>
      <para>This Part of the Standard makes use of the following terms defined in <olink targetdoc="PS3.16" targetptr="PS3.16" xrefstyle="select: labelnumber"/>:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para>Baseline Context Group Identifier (BCID)</para>
        </listitem>
        <listitem>
          <para>Defined Context Group Identifier (DCID)</para>
        </listitem>
        <listitem>
          <para>Context Group</para>
        </listitem>
        <listitem>
          <para>Context Group Version</para>
        </listitem>
        <listitem>
          <para>Context ID (CID)</para>
        </listitem>
        <listitem>
          <para>Mapping Resource</para>
        </listitem>
        <listitem>
          <para>DICOM Content Mapping Resource (DCMR)</para>
        </listitem>
        <listitem>
          <para>Value Set</para>
        </listitem>
        <listitem>
          <para>Coding schemes</para>
        </listitem>
      </orderedlist>
    </section>
    <section xml:id="sect_3.7" label="3.7" status="2">
      <title>Application Hosting Definitions</title>
      <para>The following definitions are commonly used in this part of the Standard:</para>
      <variablelist>
        <varlistentry>
          <term>Application Programming Interface</term>
          <listitem>
            <para>A set of interface methods that Hosted Applications and Hosting Systems use to communicate with each other.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Hosted Application</term>
          <listitem>
            <para>An application launched and controlled by a Hosting System. The Hosted Application may utilize services offered by the Hosting System.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Hosting System</term>
          <listitem>
            <para>The application used to launch and control Hosted Applications. The Hosting System provides a variety of services such as DICOM object retrieval and storage for the Hosted Application. The Hosting System provides the infrastructure in which the Hosted Application runs and interacts with the external environment. This includes network access, database and security.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </chapter>
  <chapter xml:id="chapter_4" label="4" status="1">
    <title>Symbols and Abbreviations</title>
    <para>The following symbols and abbreviations are used in this Part of the Standard.</para>
    <variablelist>
      <varlistentry>
        <term>ACR</term>
        <listitem>
          <para>American College of Radiology</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>ASCII</term>
        <listitem>
          <para>American Standard Code for Information Interchange</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>ANSI</term>
        <listitem>
          <para>American National Standards Institute</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>API</term>
        <listitem>
          <para>Application Programming Interface</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>BCID</term>
        <listitem>
          <para>Baseline Context Group Identifier</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>CID</term>
        <listitem>
          <para>Context ID</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>DCID</term>
        <listitem>
          <para>Defined Context Group Identifier</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>DCMR</term>
        <listitem>
          <para>DICOM Content Mapping Resource</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>DICOM</term>
        <listitem>
          <para>Digital Imaging and Communications in Medicine</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>DSDL</term>
        <listitem>
          <para>Document Schema Definition Languages</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>IEC</term>
        <listitem>
          <para>International Electrotechnical Commission</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>IOD</term>
        <listitem>
          <para>Information Object Definition</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>IANA</term>
        <listitem>
          <para>Internet Assigned Numbers Authority</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>ISO</term>
        <listitem>
          <para>International Standards Organization</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>LUT</term>
        <listitem>
          <para>Lookup Table</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>MIME</term>
        <listitem>
          <para>Multipurpose Internet Mail Extensions</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>NEMA</term>
        <listitem>
          <para>National Electrical Manufacturers Association</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>OID</term>
        <listitem>
          <para>Object Identifier (ISO 8824)</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>ROI</term>
        <listitem>
          <para>Region of interest</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>SOP</term>
        <listitem>
          <para>Service-Object Pair</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>SR</term>
        <listitem>
          <para>Structured Reporting</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>UID</term>
        <listitem>
          <para>Unique Identifier</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>UUID</term>
        <listitem>
          <para>Universal Unique Identifier (ISO/IEC 11578)</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>URL/URI</term>
        <listitem>
          <para>Uniform Resource Locator / Identifier</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>VM</term>
        <listitem>
          <para>Value Multiplicity</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>VR</term>
        <listitem>
          <para>Value Representation</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>WSDL</term>
        <listitem>
          <para>Web Services Description Language</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>XSD</term>
        <listitem>
          <para>XML Schema Definition</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>XML</term>
        <listitem>
          <para>eXtensible Markup Language</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>XPath</term>
        <listitem>
          <para>XML Path Language</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </chapter>
  <chapter xml:id="chapter_5" label="5" status="1">
    <title>Conventions</title>
    <para>Terms listed in <xref linkend="chapter_3" xrefstyle="template: Section %n"/> Definitions are capitalized throughout the document.</para>
  </chapter>
  <chapter xml:id="chapter_6" label="6" status="1">
    <title>Application Hosting Overview</title>
    <para>This section describes the capabilities of the API, gives an example of the sequence of operations, and summarizes the remaining sections of this Part.</para>
    <para>The APIs are shared by a Hosting System and one or more Hosted Applications.</para>
    <para>The API is agnostic to the hardware platform, the operating system, and the GUI. The API supports requesting space in the GUI, if available. The API supports headless operation (i.e., no GUI).</para>
    <para>The APIs are defined using Web Services Definition Language (WSDL) to be programming language, platform, and technology neutral. The APIs are designed to maximize language independence while minimizing the impact on efficiency of utilizing web services technology. The interfaces support both a networked file-based and a shared-memory interaction model. The API supports manual configuration, but not discovery.</para>
    <para>The API can provide DICOM Data Sets and other data to the Hosted Application and can accept DICOM Data Sets and other data created by the Hosted Application, incrementally or upon completion. The Hosted Application has granular access to data provided by the Hosting System (e.g., single attributes, a subset of the pixel data, etc.) and only that data. The API utilizes DICOM semantics, but not necessarily DICOM network transfer syntax. The Hosting System provides a mechanism to the Hosted Application for generating UIDs.</para>
    <para>The API allows the Hosting System to suspend and/or cancel the operation of the Hosted Application and regain user interface control. The API supports returning status information from the Hosted Application to the Hosting System and tracking the state of the Hosted Application.</para>
    <para>The Hosting System has a mechanism to launch or connect to one or more Hosted Applications, verify that the Hosted Application has started successfully, and then pass the initial data objects. All interactions start in the Hosting System. A typical sequence of events is as follows:</para>
    <orderedlist>
      <listitem>
        <para>The Hosting System identifies and locates the Hosted Application appropriate to the task and data using host-specific methods. Often the desired application is selected by the user of the system or is identified in a work list entry.</para>
      </listitem>
      <listitem>
        <para>The Hosting System launches the application, essentially issuing a 'run' or 'exec' command, passing parameters that the Hosted Application uses to establish bilateral communications between the two.</para>
      </listitem>
      <listitem>
        <para>The Hosting System uses the API to initiate a processing task in the Hosted Application and notifies it of its input data.</para>
      </listitem>
      <listitem>
        <para>The Hosted Application uses the API to pull information from the Hosting System about the input data, including the location of the bulk pixel data.</para>
      </listitem>
      <listitem>
        <para>The Hosted Application may use file I/O, memory mapping, or any other appropriate method to gain access to the bulk pixel data.</para>
      </listitem>
      <listitem>
        <para>The Hosted Application may also use the API to inform the Hosting System of the status of the processing, for example progress, any warnings or errors encountered.</para>
      </listitem>
      <listitem>
        <para>The Hosting System might use the API to suspend or cancel processing in the Hosted Application.</para>
      </listitem>
      <listitem>
        <para>If the Hosting System suspended processing in the Hosted Application, it may use the API to instruct the Hosted Application to resume processing.</para>
      </listitem>
      <listitem>
        <para>The Hosted Application, as it processes the input data, might create output objects, and use the API to inform the Hosting System of their existence.</para>
      </listitem>
      <listitem>
        <para>The Hosting System uses the API to pull information about the output objects from the Hosted Application, including the location of the bulk data.</para>
      </listitem>
      <listitem>
        <para>The Hosting system might use file I/O, memory mapping, or any other appropriate method to gain access to the output bulk data, if needed.</para>
      </listitem>
      <listitem>
        <para>Once the Hosting System has pulled the output data from the Hosted Application, it uses the API to instruct the Hosted Application to wait for the next processing task (i.e., tells the Hosted Application to idle).</para>
      </listitem>
      <listitem>
        <para>If the Hosting System has another task for the Hosted Application to perform, it may use the API to start that task, following this sequence of events beginning at Step 3.</para>
      </listitem>
      <listitem>
        <para>When the Hosting System no longer needs the Hosted Application, it may use the API to request that the Hosted Application exit.</para>
      </listitem>
    </orderedlist>
    <para><xref linkend="chapter_7" xrefstyle="template: Section %n"/> describes in greater detail the Hosted Application Life Cycle.</para>
    <para><xref linkend="chapter_8" xrefstyle="template: Section %n"/> describes the base interfaces between the Hosting System and the Hosted Application.</para>
    <para><xref linkend="chapter_9" xrefstyle="template: Section %n"/> describes the custom data types and data structures used by the interfaces.</para>
    <para><xref linkend="chapter_10" xrefstyle="template: Section %n"/> describes the general form of models used by the model-based interfaces, and the conventions used in defining those models. The models defined by this Standard are described in the Annexes.</para>
  </chapter>
  <chapter xml:id="chapter_7" label="7" status="1">
    <title>Hosted Application Life Cycle</title>
    <section xml:id="sect_7.1" label="7.1" status="2">
      <title>Initialization</title>
      <para>The Hosting System initializes a Hosted Application by issuing a run command or its equivalent (e.g exec function in the C language) with command line parameters to specify the end point references (URLs) to be used for the interfaces. One end point reference is used by the Hosted Application to access the Host interface provided by the Hosting System. The second end point reference is where the Hosting System will look for the Application interface provided by the Hosted Application. The Host and Application interfaces are described in <xref linkend="chapter_8" xrefstyle="template: Section %n"/>. If issued from a command prompt or shell, the run command may appear as:</para>
      <para><emphasis role="italic">app</emphasis>--hostURL
  <emphasis role="italic">url1</emphasis>--applicationURL
  <emphasis role="italic">url2</emphasis></para>
      <note>
        <orderedlist>
          <listitem>
            <para>In this startup methodology, it is the Hosting System, not the Hosted Application that specifies both URLs. The Hosted Application must respond at the URL assigned to it by the Hosting System.</para>
          </listitem>
          <listitem>
            <para>A Hosted Application implementation where the Hosted Application runs remotely or on an application server might utilize a startup or proxy application to appropriately map between the URL provided by the Hosting System and the actual URL that the Hosted Application is using.</para>
          </listitem>
        </orderedlist>
      </note>
      <para><xref linkend="figure_7.1-1" xrefstyle="select: label"/> shows a sequence diagram of Hosted Application initialization. Once the Hosted Application has initialized and is ready to begin processing data, it changes its state to IDLE and notifies the Hosting System of the state change using a call to the notifyStateChanged() method, thus informing the Hosting System that the Hosted Application is ready to go.</para>
      <para>
        <figure label="7.1-1" pgwide="1" xml:id="figure_7.1-1">
          <title>Hosted Application Initialization Sequence</title>
          <mediaobject>
            <imageobject>
              <!--<imagedata fileref="figures/PS3.19_7.1-1.svg"/>-->
              <imagedata fileref="part19_fromword_files/image004.png"/>
            </imageobject>
          </mediaobject>
        </figure>
      </para>
    </section>
    <section xml:id="sect_7.2" label="7.2" status="2">
      <title>States</title>
      <para><xref linkend="figure_7.2-1" xrefstyle="select: label"/> shows the state diagram for a Hosted Application. The states are defined in <xref linkend="table_7.2-1" xrefstyle="select: label"/>.</para>
      <table frame="box" rules="all" xml:id="table_7.2-1" label="7.2-1">
        <caption>States</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>State</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>Description</para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>IDLE</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>In IDLE state the Hosted Application is waiting for a new task assignment from the Hosting System. This is the initial state when the Hosted Application starts.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>INPROGRESS</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The Hosted Application is performing the assigned task.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>SUSPENDED</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The Hosted Application is stopping processing and is releasing as many resources as it can, while still preserving enough state to be able to resume processing.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>COMPLETED</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The Hosted Application has completed processing, and is waiting for the Hosting System to access and release any output data from Hosted Application.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>CANCELED</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The Hosted Application is stopping processing, and is releasing all resources with no chance to resume processing.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>EXIT</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The terminal state of the Hosted Application.</para>
            </td>
          </tr>
        </tbody>
      </table>
      <para>The transitions between states are described in <xref linkend="table_7.2-2" xrefstyle="select: label"/>.</para>
      <table frame="box" rules="all" xml:id="table_7.2-2" label="7.2-2">
        <caption>Transitions Between States</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>State</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>Trigger</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>New State</para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>not started</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosting System launches the Hosted Application (e.g., run, exec).</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>IDLE</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>IDLE</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosting System calls Application.setState (EXIT).</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>EXIT</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>IDLE</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosting System calls Application.setState (INPROGRESS).</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>INPROGRESS</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>INPROGRESS</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosting System calls Application.setState (SUSPENDED).</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>SUSPENDED</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>INPROGRESS</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosting System calls Application.setState (CANCELED).</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>CANCELED</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>INPROGRESS</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosted Application encounters an error that prevents further processing, but is still healthy enough to perhaps start another task. The Hosted Application shall report this error through a call to notifyStatus() with a statusType of FATALERROR prior to transitioning to the CANCELED state.</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>CANCELED</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>INPROGRESS</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosted Application finishes its processing.</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>COMPLETED</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>SUSPENDED</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosting System calls Application.setState (INPROGRESS).</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>INPROGRESS</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>SUSPENDED</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosted Application encounters an error (e.g., during suspension) that prevents further processing, but is still healthy enough to perhaps start another task. The Hosted Application shall report this error through a call to notifyStatus() with a statusType of FATALERROR prior to transitioning to the CANCELED state.</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>CANCELED</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>SUSPENDED</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosting System calls Application.setState (CANCELED).</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>CANCELED</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>COMPLETED</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosting System calls Application.setState (IDLE), after capturing all pertinent output data from the Hosted Application.</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>IDLE</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>CANCELED</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Hosted Application releases all resources and is ready for the next task.</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>IDLE</para>
            </td>
          </tr>
        </tbody>
      </table>
      <para>The Hosted Application notifies the Hosting System of all state transitions by calling the notifyStateChanged() method.</para>
      <note>
        <para>If a Hosted Application does not respond to state change requests made by the Hosting System, the Hosting System may 'hard abort' the Hosted Application in some implementation specific manner, such as by killing the process in which the Hosted Application is executing.</para>
      </note>
      <para>
        <figure label="7.2-1" pgwide="1" xml:id="figure_7.2-1">
          <title>State Diagram of Hosted Applications.</title>
          <mediaobject>
            <imageobject>
              <!--<imagedata fileref="figures/PS3.19_7.2-1.svg"/>-->
              <imagedata fileref="part19_fromword_files/image006.png"/>
            </imageobject>
          </mediaobject>
        </figure>
      </para>
    </section>
  </chapter>
  <chapter xml:id="chapter_8" label="8" status="1">
    <title>Interfaces</title>
    <para>There are three base interfaces defined in this part, as shown in <xref linkend="figure_8-1" xrefstyle="select: label"/>. One, named "Application", represents the Hosted Application, and is utilized by the Hosting System to control the Hosted Application. The second, named "Host", represents the Hosting System, and is utilized by the Hosted Application to request services from and to notify the Hosting System of events during the execution of the Hosted Application. The third, named "DataExchange" is an interface used by both the Hosting System and the Hosted Application to communicate information about the data to be exchanged. Thus, the entire Hosted Application ("ApplicationService") implementation consists of the combination of the "Application" and "DataExchange" base interfaces, while the entire Hosting System ("HostService") implementation consists of the combination of the "Host" and "DataExchange" base interfaces.</para>
    <para>The interfaces are defined as a set of methods using Web Services Description Language (WSDL). The implementers shall change the end point references (i.e., the "location" XML Attribute within the "address" XML Element within the "port" XML Elements of a "service" XML Element) in the WSDL specification as needed to deploy Hosted Applications and Hosting Systems that utilize these interfaces.</para>
    <note>
      <para>The major (non-backward compatible) versions of the interfaces are reflected in the values of the "name" and "targetNamespace" XML Attributes of the "definitions" XML Element in the WSDL specification of the interfaces. Any changes to the interfaces that are not backward compatible will utilize new values for "name" and "targetNamespace" XML Attributes of the "definitions" XML Element.</para>
    </note>
    <para>Minor (backward compatible) versions of the interfaces may be reflected in the values of the "targetNamespace" XML Attribute of any new "schema" XML Element where new input or output data types are defined in the WSDL specifications, and/or in the values of the "name" XML Attributes of the "portType" and "service" XML Elements where new messages and operations are associated as new services in the WSDL specifications of the interfaces. To maintain backward compatibility, the names of existing elements, messages, and operations in the WSDL specification of the interfaces remain the same.</para>
    <para>These methods utilize a set of basic data types and more complex data structures to communicate parameters, which are defined using XML Schemas. Later sections of this document provide more detailed descriptions of the interfaces and data structures, along with sequence diagrams illustrating how the interfaces are used.</para>
    <para>The actual WSDL code and XML Schemas that specify this interface are defined in <xref linkend="chapter_B" xrefstyle="template: Annex %n"/>.</para>
    <note>
      <orderedlist>
        <listitem>
          <para>WSDL is a platform and programming language independent means of specifying an interface between two cooperating applications. The applications need not be written in the same programming language.</para>
        </listitem>
        <listitem>
          <para>The interfaces do not directly address reporting of SOAP communications problems. If a problem occurs in the communications between the Hosting System and a Hosting Application during the execution of a WSDL interface call, this should be reported by the SOAP libraries utilized by an implementation, e.g., thrown as an exception.</para>
        </listitem>
      </orderedlist>
    </note>
    <para>
      <figure label="8-1" pgwide="1" xml:id="figure_8-1">
        <title>Diagram of the Interface Between the Hosting System and the Hosted Application</title>
        <mediaobject>
          <imageobject>
            <!--<imagedata fileref="figures/PS3.19_8-1.svg"/>-->
            <imagedata fileref="part19_fromword_files/image008.png"/>
          </imageobject>
        </mediaobject>
      </figure>
    </para>
    <section xml:id="sect_8.1" label="8.1" status="2">
      <title>Application Interface</title>
      <para>The following sections describe the methods of the Application interface.</para>
      <section xml:id="sect_8.1.1" label="8.1.1" status="3">
        <title>getState() : State</title>
        <para>The Hosted Application returns its current state to the caller.</para>
        <para>This method may be called at any time.</para>
        <note>
          <orderedlist>
            <listitem>
              <para>A Hosting System may use this method as an alternative to tracking Hosted Application state changes reported by the notifyStateChanged() method call.</para>
            </listitem>
            <listitem>
              <para>A Hosting System may use this method to determine if a Hosted Application is still in operation (i.e., did not die without calling the notifyStateChanged() method with an EXIT state).</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
      <section xml:id="sect_8.1.2" label="8.1.2" status="3">
        <title>setState(newState : State) : boolean</title>
        <para>The Hosting System requests that the Hosted Application switch to the newState.</para>
        <para>The Hosted Application returns TRUE from the method if the Hosted Application received the request, and the requested state change is allowed in the state diagram. Otherwise, the method returns FALSE. A return value of TRUE does not indicate that the state of the Hosted Application has changed to the newState; it merely indicates that the requested state change is valid, and will be made at the soonest opportunity. Once the Hosted Application switches to the requested state, it shall inform the Hosting System through the notifyStateChanged() method of the Host interface.</para>
        <note>
          <para>The asynchronous response to a state change is intended to minimize blocking the Hosting System while waiting for a potentially time-consuming state change in the application.</para>
        </note>
        <para>The Hosted Application shall ignore any setState() and return TRUE when the Hosted Application is already in requested state (i.e., this is a repeated call with the same state).</para>
        <para>If the Hosted Application receives a second setState() request for a different state prior to completing a previous request, then the Hosted Application shall abort or ignore the previous request, and begin processing the latest request.</para>
        <para>This method may be called at any time, however may not have any effect (other than a return of FALSE) if the requested new state is not an allowed transition from the current state.</para>
      </section>
      <section xml:id="sect_8.1.3" label="8.1.3" status="3">
        <title>bringToFront(requestedScreenArea : Rectangle) : boolean</title>
        <para>By calling this method, the Hosting System is asking the Hosted Application to take whatever steps are needed to make its GUI visible as the topmost window, and to gain focus.</para>
        <para>If possible, the Hosted Application shall resize and reposition itself to the requestedScreenArea. If requestedScreenArea is missing or null, the Hosted Application may retain its current size and location on the screen.</para>
        <para>The method returns TRUE if the Hosted Application received the request and will act on it. Otherwise it returns FALSE.</para>
        <para>A Hosted Application shall act on this method if the Hosted Application is in the IDLE or INPROGRESS state. A Hosted Application is not required to act on this method if the Hosted Application is not in the IDLE or INPROGRESS state.</para>
        <para>A Hosted Application that has no GUI (e.g., a headless analysis application), where becoming visible and gaining focus has no meaning, shall always return TRUE from this method.</para>
      </section>
    </section>
    <section xml:id="sect_8.2" label="8.2" status="2">
      <title>Host Interface</title>
      <para>The following sections describe the methods of the Host interface.</para>
      <section xml:id="sect_8.2.1" label="8.2.1" status="3">
        <title>generateUID() : UID</title>
        <para>Returns a newly created DICOM UID that the Hosted Application might use, e.g., to create new data objects and structures.</para>
        <para>This method may be called at any time.</para>
      </section>
      <section xml:id="sect_8.2.2" label="8.2.2" status="3">
        <title>getAvailableScreen(appPreferredScreen : Rectangle) : Rectangle</title>
        <para>The Hosted Application supplies its preferred screen size in the appPreferredScreen parameter. The Hosting System may utilize this information as a hint, but may return a window location and size that best suits the Hosting System's GUI.</para>
        <para>The method returns the window location and size that the Hosting System would prefer that the Hosted Application utilize. However, there are no requirements that the Hosted Application act on that information.</para>
        <para>This method may be called at any time.</para>
      </section>
      <section xml:id="sect_8.2.3" label="8.2.3" status="3">
        <title>getOutputLocation(preferredProtocols: ArrayOfString) : String</title>
        <para>The method returns a URI that a Hosted Application may use to store output that it may provide back to the Hosting System (e.g., in response to a getData() call).</para>
        <para>The Hosted Application indicates, in order of preference, the protocols it can use to store data. The Hosted Application shall at least support both the http: and the file: protocols. The Hosting System selects the most appropriate protocol, potentially taking into account system or security considerations as well as the order of preference. The Hosting System uses the selected protocol in setting up the resources and generating the URI returned to the Hosted Application.</para>
        <note>
          <orderedlist>
            <listitem>
              <para>There may be limitations when using the http: protocol when compared to the file: protocol. Some functions that might work with a file: protocol such as seek, rewrite, and delete, may not work with the http: protocol. The Hosted Application should assume that it can only write once in sequential order when the returned output location uses the http: protocol.</para>
            </listitem>
            <listitem>
              <para>If any authentication information is needed in order to access the data, this authentication information may be included in the URI.</para>
            </listitem>
          </orderedlist>
        </note>
        <para>The Hosting System shall keep the URI active while the Hosted Application is in any state other than IDLE or EXIT, or until such time that the Hosted Application returns the URI to the Hosting System (e.g., in an ObjectLocator returned to the Hosting System in response to a getData() call). The disposition of the data that the Hosted Application sends to this URI is the responsibility of the Hosting System after the Hosted Application transitions to the IDLE state or after the Hosted Application returns the URI to the Hosting System (e.g., in an ObjectLocator returned to the Hosting System in response to a getData() call). After the Hosted Application transitions to IDLE state, the Hosting System need not keep the URI active.</para>
        <para>The Hosted Application shall only call this method if the Hosted Application is at the INPROGRESS or COMPLETED states.</para>
      </section>
      <section xml:id="sect_8.2.4" label="8.2.4" status="3">
        <title>notifyStateChanged(state : State) : void</title>
        <para>The Hosted Application shall invoke this method each time the Hosted Application successfully transitions to a new state. The new state is passed in the state parameter.</para>
        <note>
          <para>While all Hosting Systems need to accept this interface call method, they may track the current Application State in other ways, such as by polling for the state using the Application getState() method.</para>
        </note>
      </section>
      <section xml:id="sect_8.2.5" label="8.2.5" status="3">
        <title>notifyStatus(status : Status) : void</title>
        <para>The Hosted Application may inform the Hosting System of notable events that occur during execution by invoking this method, passing the information in the status parameter.</para>
        <note>
          <para>The Hosting System typically would log these events to facilitate debugging. It may, at its discretion, display the information to the user.</para>
        </note>
        <para>This method may be called at any time.</para>
      </section>
    </section>
    <section xml:id="sect_8.3" label="8.3" status="2">
      <title>DataExchange Interface</title>
      <para>The interface used to exchange information about data being transferred between a source and a recipient is the same for both the Hosting System and the Hosted Application. Implementations of the Application interface shall also include the DataExchange interface. Implementations of the Host interface shall also include the DataExchange interface. In other words, the DataExchange interface is symmetric with respect to the Hosting System and Hosting Application.</para>
      <para>The data being exchanged between the Hosting System and the Hosted Application can either be passed as files, or may be described in models that might be queried by the recipient.</para>
      <para>Recipients that can parse DICOM objects are able to request the file-based methods. The sequence diagram in <xref linkend="figure_8.3-1" xrefstyle="select: label"/> illustrates one potential exchange using the file-based methods.</para>
      <para>
        <figure label="8.3-1" pgwide="1" xml:id="figure_8.3-1">
          <title>Example File-based Data Exchange Sequence</title>
          <mediaobject>
            <imageobject>
              <!--<imagedata fileref="figures/PS3.19_8.3-1.svg"/>-->
              <imagedata fileref="part19_fromword_files/image010.png"/>
            </imageobject>
          </mediaobject>
        </figure>
      </para>
      <para>The advantage of using the model-based methods is that the recipient need not know how to parse the data formats, but instead can use commonly available tools for manipulating XML Infosets to extract data from the models.</para>
      <para>The model-based interfaces can work with a variety of models. Particular models are identified by a UID. The models can either be an abstraction of the data, or can be a model of some native format. Models defined by the DICOM Standard are described in <xref linkend="chapter_A" xrefstyle="template: Annex %n"/>. Models are described as XML Infosets, even though the original data might never be actually represented in XML form. The source providing the data handles the mapping from the models back to the original data format.</para>
      <para>Abstract models allow a recipient to work with data without regard to what its native form is. For example, data from a variety of image formats, such as DICOM, TIFF, JPEG, NIfTI, or Analyze, could be included in an abstract image model. The recipient can then work with the data even though the recipient has no knowledge of how the data was natively represented. Abstract models may have been derived from data referenced in multiple ObjectDescriptors (e.g., multiple CT slices combined into a single volume).</para>
      <para>Abstract models generally do not include the full richness of data that is available in native representations. For example, an abstract image model derived from DICOM data normally would include references to 'cooked' pixel data and its spatial organization, but might not include many of the modality-specific Attributes. To allow recipients to access such details the supplier of an abstract model can provide references to the ObjectDescriptors, in the form of UUIDs, from which that abstract model was derived. The recipient may gain access to any attribute of the original data formats through the source ObjectDescriptors.</para>
      <para>The sequence diagram in <xref linkend="figure_8.3-2" xrefstyle="select: label"/> illustrates one potential exchange using the model-based methods. It also illustrates the Hosted Application returning partial outputs, one potential way a Hosted Application might use the getOutputLocation() method, and potential uses of the releaseModel() and releaseData() methods.</para>
      <para>
        <figure label="8.3-2" pgwide="1" xml:id="figure_8.3-2">
          <title>Example Model-based Data Exchange Sequence (continued on next page)</title>
          <mediaobject>
            <imageobject>
              <!--<imagedata fileref="figures/PS3.19_8.3-2.svg"/>-->
              <imagedata fileref="part19_fromword_files/image012.png"/>
            </imageobject>
          </mediaobject>
        </figure>
      </para>
      <para>
        <figure label="8.3-2b" pgwide="1" xml:id="figure_8.3-2b">
          <title>Example Model-based Data Exchange Sequence (continued from previous page)</title>
          <mediaobject>
            <imageobject>
              <!--<imagedata fileref="figures/PS3.19_8.3-2b.svg"/>-->
              <imagedata fileref="part19_fromword_files/image014.png"/>
            </imageobject>
          </mediaobject>
        </figure>
      </para>
      <para>Hosting Systems shall support both the file-based and model-based interfaces, both as a data source as well as a data recipient.</para>
      <para>Hosted Applications shall support at least one of the file-based or model-based interfaces, as either a data source or as a data recipient, as needed by the Hosted Application. If a Hosted Application supports the model-based interfaces, it shall support at least one of the models defined in <xref linkend="chapter_A" xrefstyle="template: Annex %n"/>. Hosted Applications may choose to implement only those portions of those interfaces that the Hosted Application actually uses; however, all interface methods that a Hosting System may call must be available for the Hosting System to call, even if the Hosted Application does not do anything but return appropriately.</para>
      <para>The following sections describe the methods of the DataExchange interface.</para>
      <section xml:id="sect_8.3.1" label="8.3.1" status="3">
        <title>notifyDataAvailable(data : AvailableData, lastData : boolean) : boolean</title>
        <para>The source of the data calls this method with descriptions of the available data that it can provide to the recipient. If the source of the data expects that additional data will become available, it shall pass FALSE in the lastData parameter. Otherwise, it shall pass TRUE in the lastData parameter, and shall not make any further calls to notifyDataAvailable until after it has transitioned through the IDLE state once more.</para>
        <para>The source of the data shall be able to provide the data in the form identified in the AvailableData structure.</para>
        <para>A Hosting System uses this method to inform a Hosted Application of input data that the Hosted Application should work with. A Hosted Application uses this method to inform the Hosting System of outputs produced by the Hosted Application.</para>
        <para>This method returns TRUE if the recipient of the data successfully received the AvailableData list. Otherwise this method returns FALSE.</para>
        <note>
          <para>A Hosted Application that is recipient of this call, but that was unsuccessful in receiving the AvailableData list might report a reason for the failure in a notifyStatus method call.</para>
        </note>
        <para>The source of the data shall not include in AvailableData any references to data that were sent in a previous successful notifyDataAvailable call (i.e., one where the method call returned TRUE).</para>
        <para>A Hosted Application shall not transition into the COMPLETED state if it has received or sent a notifyDataAvailable() call with a lastData indicator of FALSE.</para>
        <para>The source of the data may call notifyDataAvailable() with an empty data list.</para>
        <note>
          <para>Calling notifyDataAvailable() with an empty list is useful for setting the lastData indicator to TRUE.</para>
        </note>
        <para>This method shall only be called if the Hosted Application is at the INPROGRESS state.</para>
      </section>
      <section xml:id="sect_8.3.2" label="8.3.2" status="3">
        <title>getData(objectUUIDs : ArrayOfUUID, acceptableTransferSyntaxUIDs : ArrayOfUID, includeBulkData : boolean) : ArrayOfObjectLocator</title>
        <para>The recipient of data invokes this method to gain access to binary data provided by the source of the data. The source of the data provides a URI that the recipient may open as a byte stream to retrieve the data.</para>
        <note>
          <para>The provider of the data may delay the actual preparation of binary data until the recipient actually requests it.</para>
        </note>
        <para>The objectUUIDs array provides the UUIDs of the binary data that the source wishes to retrieve. Each of the UUIDs in that array are drawn either from the ObjectDescriptors provided in the AvailableData structure received by the recipient in one or more notifyDataAvailable() method calls, or from bulk data pointers in models accessed by the recipient.</para>
        <para>If the UUID came from an ObjectDescriptor, the source returns ObjectLocators of the binary objects using the MIME content type and class UID listed in the ObjectDescriptor within the AvailableData structure associated with each UUID. If the UUID came from a Data Exchange Model, then the source returns the binary bulk data described within the model.</para>
        <para>The recipient lists the desired Transfer Syntax for the bulk data via the acceptableTransferSyntaxUIDs parameter. The recipient shall list in order of preference in the acceptableTransferSyntaxUIDs parameter the UIDs of the Transfer Syntaxes that it will accept for the data represented by objectUUIDs. The provider of the data shall select and use the first transfer syntax in the list that it supports. For DICOM data, the provider of data shall as a minimum support the Explicit VR Little Endian transfer syntax. The acceptableTransferSyntaxUIDs may be empty for those MIME content types where Transfer Syntax has no meaning.</para>
        <para>When retrieving binary data identified by a UUID from an ObjectDescriptor, if the recipient sets the includeBulkData flag to TRUE, then the source shall supply the bulk data within the data stream. Otherwise, the source may, but is not required to, omit bulk data such as pixel data.</para>
        <note>
          <para>The includeBulkData flag is useful, for example, when the recipient wishes to work with the description of the pixel data in binary DICOM form, in order to decide whether or not to retrieve the pixel data itself.</para>
        </note>
        <para>The method returns one ObjectLocator for each UUID passed into the method within the objectUUIDs array. The ObjectLocator describes a file where the recipient can read in the data referred to by that particular object's UUID.</para>
        <para>When the recipient is finished with data referred to by an ObjectLocator URI, it may call the releaseData() method to free up the resources being consumed to provide those URIs. Any data references not explicitly released by the recipient of the data are released implicitly when the Hosted Application enters the IDLE state.</para>
        <para>The recipient may call getData() multiple times for data referenced by a given ObjectDescriptor or bulk data UUID. Each call to getData() shall be matched by either an explicit or implicit call to releaseData().</para>
        <para>This method shall only be called if the Hosted Application is at the INPROGRESS or COMPLETED states. A Hosting System may also call this method when the Hosted Application is in the SUSPENDED state.</para>
      </section>
      <section xml:id="sect_8.3.3" label="8.3.3" status="3">
        <title>getAsModels(objectUUIDs : ArrayOfUUID, classUID : UID, supportedInfosetTypes : ArrayOfMimeType) : ModelSetDescriptor</title>
        <para>The recipient of data invokes this method to ask that the source of the data provide the data referenced by objectUUIDs array as models of the type referenced by classUID. The objectUUIDs are drawn from the ObjectDescriptors passed to the recipient of the data in one or more notifyDataAvailable() calls.</para>
        <para>The recipient of the data shall list in supportedInfosetTypes in order of preference the MIME types that the recipient can process as Infosets. Recipients of data shall support the "text/xml" MIME type, which shall always be included in the supportedInfosetTypes array. The provider of data shall select the first entry in that array that it supports.</para>
        <para>The ModelSetDescriptor returned by this method contains the UUIDs of the models provided by the source, as well as the UUIDs of data objects referred to by the objectUUIDs array that could not be represented in the requested model.</para>
        <para>The recipient may call getAsModels() multiple times for data referenced by a given UUID. Each successful call returns a different model UUID.</para>
        <para>When the recipient is finished with a set of models, it may call the releaseModels() method to free up the resources being consumed to provide those models. Any models not explicitly released by the recipient of the data are released implicitly when the Hosted Application enters the IDLE state.</para>
        <para>This method shall only be called if the Hosted Application is at the INPROGRESS or COMPLETED states. A Hosting System may also call this method when the Hosted Application is in the SUSPENDED state.</para>
      </section>
      <section xml:id="sect_8.3.4" label="8.3.4" status="3">
        <title>queryModel(models : ArrayOfUUID, xpaths : ArrayOfString) : ArrayOfQueryResult</title>
        <para>The recipient of data invokes this method to request that the source of the data return the subset of data referred to in each of the XPath query strings passed in the xpath parameter from each of the models identified by the UUIDs passed in the model array. Each of the XPath query strings is applied to each of the models referred to in the model array.</para>
        <para>The UUIDs passed in the model array shall be chosen from those returned by one or more getAsModels() method calls.</para>
        <para>The results of the query are returned by the method as XML Infosets, encoded in XML returned as a string. Each result from a particular model UUID is returned as a QueryResult element in the returned array for each xpath string. In other words, the number of QueryResults returned is the number of UUIDs in the model array times the number of XPath queries strings in the xpath array.</para>
        <note>
          <para>This method is principally used when the infoset type is "text/xml".</para>
        </note>
        <para>This method shall only be called if the Hosted Application is at the INPROGRESS or COMPLETED states. A Hosting System may also call this method when the Hosted Application is in the SUSPENDED state.</para>
      </section>
      <section xml:id="sect_8.3.5" label="8.3.5" status="3">
        <title>queryInfoset(models : ArrayOfUUID, xpaths : ArrayOfString) : ArrayOfQueryResultInfoset</title>
        <para>The recipient of data invokes this method to request that the source of the data return the subset of data referred to in each of the XPath query strings passed in the xpath parameter from each of the models identified by the UUIDs passed in the model array. Each of the XPath query strings is applied to each of the models referred to in the model array.</para>
        <para>The UUIDs passed in the model array shall be chosen from those returned by one or more getAsModels() method calls.</para>
        <para>The results of the query are returned by the method as XML Infosets, encoded in XML, returned as a byte array encoded in the form negotiated during the getAsModel() call.. Each result from a particular model UUID is returned as a QueryResultInfoset element in the returned array for each xpath string. In other words, the number of QueryResultInfoset structures returned is the number of UUIDs in the model array times the number of XPath queries strings in the xpath array.</para>
        <note>
          <para>This method is principally used when the infoset type is not string based, for example a "application\fastinfoset". If called on a model using the "text/xml" infoset type, a conversion from a byte array to a string would be needed.</para>
        </note>
        <para>This method shall only be called if the Hosted Application is at the INPROGRESS or COMPLETED states. A Hosting System may also call this method when the Hosted Application is in the SUSPENDED state.</para>
      </section>
      <section xml:id="sect_8.3.6" label="8.3.6" status="3">
        <title>releaseData(objectUUIDs : ArrayOfUUID) : void</title>
        <para>The recipient of data invokes this method to release access to binary data provided by the source of the data through a getData() call. The ArrayOfUUID identifies the data streams that the recipient is releasing. The UUIDs in this array shall be drawn from the locator fields in ObjectLocators returned by calls to getData().</para>
      </section>
      <section xml:id="sect_8.3.7" label="8.3.7" status="3">
        <title>releaseModels(objectUUIDs : ArrayOfUUID) : void</title>
        <para>The recipient of data invokes this method to release access to models provided by the source of the data. The ArrayOfUUID identifies the models that the recipient is releasing. The UUIDs in this array shall be drawn from the models fields in ModelSetDescriptors returned by calls to getAsModels().</para>
      </section>
    </section>
  </chapter>
  <chapter xml:id="chapter_9" label="9" status="1">
    <title>Data Types and Structures</title>
    <section xml:id="sect_9.1" label="9.1" status="2">
      <title>Arrayof[type]</title>
      <para>A wrapper object representing the encapsulation of an array of a specific type. Used in parameters to and return values from API functions to enable cross-platform compatibility. The wrapper contains a single field, which is an array of the type being stored. The field name is the Type name with the first letter in lowercase instead of uppercase.</para>
      <note>
        <para>This construct was needed to support Microsoft .NET language bindings even though it looks ugly in Java.</para>
      </note>
    </section>
    <section xml:id="sect_9.2" label="9.2" status="2">
      <title>AvailableData</title>
      <para>A data structure that communicates what data is available to the recipient. The data is organized in a hierarchical fashion, communicating patients, studies, series, and finally ObjectDescriptors that identify available data objects. The fields in the data structure are:</para>
      <itemizedlist>
        <listitem>
          <para>ObjectDescriptors : ObjectDescriptor[] - An array of ObjectDescriptor data structures listing data that either applies to multiple patients, or does not fit into the patient / study / series hierarchy.</para>
        </listitem>
        <listitem>
          <para>Patients : Patient[] - An array of Patient data structures.</para>
        </listitem>
      </itemizedlist>
      <section xml:id="sect_9.2.1" label="9.2.1" status="3">
        <title>ObjectDescriptor</title>
        <para>A data structure with the following fields:</para>
        <itemizedlist>
          <listitem>
            <para>DescriptorUUID : UUID - the UUID that the interface utilizes to track this particular data object.</para>
          </listitem>
          <listitem>
            <para>MimeType : MimeType - the MIME content type of this particular data object, in its most natural form available from the source. The most natural form is typically the form in which the source maintains the data in its database, for example a DICOM file.</para>
          </listitem>
          <listitem>
            <para>ClassUID : UID - the UID that represents the class of this data object in the form described by mimeType. For objects whose mimeType refers to a data exchange model such as those defined in <xref linkend="chapter_A" xrefstyle="template: Annex %n"/>, this is the UID of that model. For objects whose mimeType is application:dicom, this is the SOP Class UID of the DICOM object. This may be empty for those objects whose MIME content types have no additional classes.</para>
          </listitem>
          <listitem>
            <para>TransferSyntaxUID : UID - the UID that represents the Transfer Syntax of this data object in the form described by mimeType. This may be empty for those objects of a MIME content type where Transfer Syntax has no meaning.</para>
          </listitem>
          <listitem>
            <para>Modality : String - the modality that best represents where this data originated from. Standard values are drawn from the Defined Terms listed for the Modality (0008,0060) Attribute in the <olink targetdoc="PS3.3" targetptr="sect_C.7.3.1.1.1" xrefstyle="select: docname label quotedtitle"/>.</para>
          </listitem>
        </itemizedlist>
      </section>
      <section xml:id="sect_9.2.2" label="9.2.2" status="3">
        <title>Patient</title>
        <para>A data structure that communicates data for a particular patient. The fields in the data structure are:</para>
        <itemizedlist>
          <listitem>
            <para>Name : String - The name of the patient, formatted as described for the PN VR in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>. For DICOM SOP Instances this is the value of the Patient's Name (0010,0010) Attribute.</para>
          </listitem>
          <listitem>
            <para>ID : String - A string used as the identifier for a particular patient, formatted as described for the LO VR in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>. For DICOM SOP Instances this is the value of the Patient ID (0010,0020) Attribute.</para>
          </listitem>
          <listitem>
            <para>AssigningAuthority : String - The organization who assigned the id to the patient, formatted as described for the LO VR in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>. For DICOM SOP Instances this is the value of the Issuer of Patient ID (0010,0021) Attribute.</para>
          </listitem>
          <listitem>
            <para>Sex : String - The sex of the patient. For DICOM SOP Instances this is the value of the Patient's Sex (0010,0040) Attribute. In all other cases it shall take on the values permissible for the DICOM Sex (0010,0040) Attribute.</para>
          </listitem>
          <listitem>
            <para>BirthDate: String The birth date of the patient, formatted as described for the DA VR in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>. For DICOM SOP Instances this is the value of the Patient's Birth Date (0010,0030) Attribute.</para>
          </listitem>
          <listitem>
            <para>ObjectDescriptors : ObjectDescriptor[] - An array of ObjectDescriptor data structures listing data that applies to this patient, but that do not apply to any particular study of this patient.</para>
          </listitem>
          <listitem>
            <para>Studies : Study[] - An array of Study data structures.</para>
          </listitem>
        </itemizedlist>
        <para>At least one of objectDescriptors or studies shall be present.</para>
      </section>
      <section xml:id="sect_9.2.3" label="9.2.3" status="3">
        <title>Study</title>
        <para>A data structure that communicates data for a particular study. The fields in the data structure are:</para>
        <itemizedlist>
          <listitem>
            <para>StudyUID : UID - The UID of the study. For DICOM SOP Instances this is the value of the Study Instance UID (0020,000D) Attribute.</para>
          </listitem>
          <listitem>
            <para>ObjectDescriptors : ObjectDescriptor[] - An array of ObjectDescriptor data structures listing data that applies to this study (within the enclosing patient), but that do not apply to any particular series within this study.</para>
          </listitem>
          <listitem>
            <para>Series : Series[] - An array of Series data structures.</para>
          </listitem>
        </itemizedlist>
      </section>
      <section xml:id="sect_9.2.4" label="9.2.4" status="3">
        <title>Series</title>
        <para>A data structure that communicates data for a particular series. The fields in the data structure are:</para>
        <itemizedlist>
          <listitem>
            <para>SeriesUID : UID - The UID of the series. For DICOM SOP Instances this is the value of the Series Instance UID (0020,000E) Attribute.</para>
          </listitem>
          <listitem>
            <para>ObjectDescriptors : ObjectDescriptor - An array of ObjectDescriptor data structures listing data existing in this series (within the enclosing Study, within the enclosing Patient).</para>
          </listitem>
        </itemizedlist>
        <note>
          <para>Most DICOM Composite SOP Instances would be identified by objectDescriptors at the Series level.</para>
        </note>
      </section>
    </section>
    <section xml:id="sect_9.3" label="9.3" status="2">
      <title>MimeType</title>
      <para>A data type whose values are Defined Terms that identify particular MIME content types. The syntax of the string defining a MIME content type is defined in IETF RFC 2045. Top level MIME content types are defined in IETF RFC 2046. MIME content types are drawn from the list managed by the Internet Assigned Numbers Authority (IANA) whose web site is at <link xl:href="http://www.iana.org/assignments/media-types/"/>, as described in IETF RFC 2048.</para>
    </section>
    <section xml:id="sect_9.4" label="9.4" status="2">
      <title>ModelSetDescriptor</title>
      <para>A data structure returned from the getAsModels() method with the following fields:</para>
      <itemizedlist>
        <listitem>
          <para>InfosetType : MimeType - the MIME type of the infoset, selected by the source of the data from the list passed to it by the recipient in a getAsModels() call.</para>
        </listitem>
        <listitem>
          <para>Models : UUID[] - an array of UUIDs referring to models that have been created from the set of data objects referred to by the array of UUIDs passed into the getAsModels() call.</para>
        </listitem>
        <listitem>
          <para>FailedSourceObjects : UUID[] - an array of UUIDs designating data objects referred to the array of UUIDs passed into the getAsModels() call that could not be represented in the requested model class.</para>
        </listitem>
      </itemizedlist>
      <note>
        <para>For example, if the array of UUIDs passed into the getAsModels() call includes 100 CT slices from the same frame of reference (i.e., a volume stack), plus 1 GSPS object, and if the caller requested an Abstract Multi-Dimensional Image model, then the ModelSetDescriptor returned by GetAsModels() would include one UUID in the models array, identifying the CT volume image data created from the 100 CT slices, and one UUID in the failedSourceObjects array, specifying the UUID for the GSPS object.</para>
      </note>
    </section>
    <section xml:id="sect_9.5" label="9.5" status="2">
      <title>ObjectLocator</title>
      <para>A data structure that represents the location from which the recipient of a data object can retrieve that object. It consists of the following fields:</para>
      <itemizedlist>
        <listitem>
          <para>Locator : UUID - the UUID that the interface utilizes to track this particular ObjectLocator.</para>
        </listitem>
        <listitem>
          <para>Source : UUID - the UUID of the source that is supplying data for this ObjectLocator. This UUID matches the UUID in the ObjectDescriptor if trying to retrieve the data in its natural form (e.g., as a file or byte stream). This UUID matches the UUID in a bulk data pointer when retrieving bulk data from a model.</para>
        </listitem>
        <listitem>
          <para>TransferSyntax : UID - the transfer syntax in which this data is encoded, selected by source of the data from the list passed in by the recipient of the data in the acceptableTransferSyntaxUIDs parameter of the getData() call. This may be empty for those objects of a MIME content type where Transfer Syntax has no meaning.</para>
        </listitem>
        <listitem>
          <para>Length: long - the length of the data object referred to by the UUID.</para>
        </listitem>
        <listitem>
          <para>Offset: long - the offset within the file or byte stream where the data object begins.</para>
        </listitem>
        <listitem>
          <para>URI: URI - the URI that identifies the resource from which the recipient might retrieve the data object, typically but not limited to a file on the local file system. The recipient shall be able to access the data within the object using file IO or memory mapping.</para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sect_9.6" label="9.6" status="2">
      <title>QueryResult</title>
      <para>A data structure that holds the results from an XPath query of a model. It consists of the following fields:</para>
      <itemizedlist>
        <listitem>
          <para>Model : UUID - the UUID of the model from which this result came.</para>
        </listitem>
        <listitem>
          <para>XPath : String - the XPath query string that led to this result.</para>
        </listitem>
        <listitem>
          <para>Results : XPathNode[] - an array of XPathNodes holding the query results.</para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sect_9.7" label="9.7" status="2">
      <title>QueryResultInfoset</title>
      <para>A data structure that holds the results from an XPath query of a model. It consists of the following fields:</para>
      <itemizedlist>
        <listitem>
          <para>Model : UUID - the UUID of the model from which this result came.</para>
        </listitem>
        <listitem>
          <para>XPath : String - the XPath query string that led to this result.</para>
        </listitem>
        <listitem>
          <para>Results : XPathNodeInfoset[] - an array of XPathNodeInfoset structures holding the query results.</para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sect_9.8" label="9.8" status="2">
      <title>Rectangle</title>
      <para>A data structure that defines a rectangular region on a display screen. The fields in the data structure are:</para>
      <itemizedlist>
        <listitem>
          <para>RefPointX : int</para>
        </listitem>
        <listitem>
          <para>RefPointY : int</para>
        </listitem>
      </itemizedlist>
      <para>that define the location of the top left corner of the region in screen coordinates, and</para>
      <itemizedlist>
        <listitem>
          <para>Width : int</para>
        </listitem>
        <listitem>
          <para>Height : int</para>
        </listitem>
      </itemizedlist>
      <para>that specify the extents of the region. Screen coordinates are defined starting from an origin of 0,0 in the upper left corner of the screen, and extend in the positive direction down and to the right.</para>
    </section>
    <section xml:id="sect_9.9" label="9.9" status="2">
      <title>State</title>
      <para>State is an enumerated data type with the following values:</para>
      <itemizedlist>
        <listitem>
          <para>IDLE</para>
        </listitem>
        <listitem>
          <para>INPROGRESS</para>
        </listitem>
        <listitem>
          <para>COMPLETED</para>
        </listitem>
        <listitem>
          <para>SUSPENDED</para>
        </listitem>
        <listitem>
          <para>CANCELED</para>
        </listitem>
        <listitem>
          <para>EXIT</para>
        </listitem>
      </itemizedlist>
      <para>The interpretation of these enumerated values is defined in section7.2 States.</para>
    </section>
    <section xml:id="sect_9.10" label="9.10" status="2">
      <title>Status</title>
      <para>A data structure with the following fields:</para>
      <itemizedlist>
        <listitem>
          <para>StatusType : StatusType - the severity level of this status message.</para>
        </listitem>
        <listitem>
          <para>CodingSchemeDesignator : String - the coding scheme in which the codeValues are defined. The use of codeValue shall be consistent with the use of the DICOM Code Value (0008,0100) Attribute as specified in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
        </listitem>
        <listitem>
          <para>CodeValue : String - the particular code value within the designated coding scheme that represents the nature of this status message. The use of message shall be consistent with the use of the DICOM Code Meaning (0008,0104) Attribute as specified in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
        </listitem>
        <listitem>
          <para>CodeMeaning : String - a displayable string for the code value. The use of message shall be consistent with the use of the DICOM Code Meaning (0008,0104) Attribute as specified in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>.</para>
        </listitem>
        <listitem>
          <para>Any other field from the Coded Terminology macro defined in <xref linkend="sect_10.1" xrefstyle="select: label"/>.</para>
        </listitem>
      </itemizedlist>
      <section xml:id="sect_9.10.1" label="9.10.1" status="3">
        <title>StatusType</title>
        <para>An enumerated data type with the following values and definitions:</para>
        <itemizedlist>
          <listitem>
            <para>INFORMATION - the status is for informational purposes only.</para>
          </listitem>
          <listitem>
            <para>WARNING - indicates a condition that might impact the speed or quality of the work done by the Hosted Application, but that does not prevent the Hosted Application from completing its task.</para>
          </listitem>
          <listitem>
            <para>ERROR - indicates a condition that might prevent the Hosted Application from correctly completing its task. The Hosted Application will attempt to continue.</para>
          </listitem>
          <listitem>
            <para>FATALERROR - indicates a condition that prevents the Hosted Application from completing its task. The Hosted Application will not attempt to continue, and will transition automatically to the CANCELED state.</para>
          </listitem>
        </itemizedlist>
      </section>
    </section>
    <section xml:id="sect_9.11" label="9.11" status="2">
      <title>UID</title>
      <para>A string of period-separated digits representing a Unique Identifier (see <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>), formatted as described for the UI VR in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
    </section>
    <section xml:id="sect_9.12" label="9.12" status="2">
      <title>UUID</title>
      <para>A string representing a Universally Unique Identifier as defined in ITU-T Recommendation X.667, using the hexadecimal representation form.</para>
    </section>
    <section xml:id="sect_9.13" label="9.13" status="2">
      <title>XPathNode</title>
      <para>A data structure with the following fields, which represents the output from an XPath query of a model, returned in a string-based representation.</para>
      <itemizedlist>
        <listitem>
          <para>NodeType : XPathNodeType</para>
        </listitem>
        <listitem>
          <para>Value : String</para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sect_9.14" label="9.14" status="2">
      <title>XPathNodeInfoset</title>
      <para>A data structure with the following fields, which represents the output from an XPath query of a model returned in a byte array representation.</para>
      <itemizedlist>
        <listitem>
          <para>NodeType : XPathNodeType</para>
        </listitem>
        <listitem>
          <para>InfosetValue : byte[]</para>
        </listitem>
      </itemizedlist>
    </section>
    <section xml:id="sect_9.15" label="9.15" status="2">
      <title>XPathNodeType</title>
      <para>An enumeration of the types of results that may come back from an XPath query.</para>
      <note>
        <para>This enumeration is compatible with a similar enumeration utilized in the Microsoft .NET framework.</para>
      </note>
      <itemizedlist>
        <listitem>
          <para>Root - the result is the top level node of the XML Infoset (i.e., the result is the entire XML Infoset).</para>
        </listitem>
        <listitem>
          <para>Element - the result is an XML Element within the XML Infoset (i.e., the result is a subset of the XML Infoset).</para>
        </listitem>
        <listitem>
          <para>Attribute - the result is an XML Attribute of an XML Element within the XML Infoset.</para>
        </listitem>
        <listitem>
          <para>Text - the result is the textual content of an XML Element within the XML Infoset. Equivalent to the Document Object Model (DOM) Text and CDATA node types. Contains at least one character.</para>
        </listitem>
        <listitem>
          <para>SignificantWhitespace - the result is the content of an XML Element within the XML Infoset, where the content consists only of significant whitespace (e.g., xml:space was set to preserve). White space code points are SPACE (U0020), TAB (U0009), CARRIAGE RETURN (U000D), or LINE FEED (U000A) of ISO 10646 (Unicode).</para>
        </listitem>
        <listitem>
          <para>Whitespace - the result is the content of an XML Element within the XML Infoset, where the content consists only of whitespace. White space code points are SPACE (U0020), TAB (U0009), CARRIAGE RETURN (U000D), or LINE FEED (U000A) of ISO 10646 (Unicode).</para>
        </listitem>
        <listitem>
          <para>Comment - the result is a comment within the XML Infoset.</para>
        </listitem>
        <listitem>
          <para>Namespace - the result is a namespace directive within the XML Infoset.</para>
        </listitem>
        <listitem>
          <para>ProcessingInstruction - the result is a processing instruction within the XML Infoset.</para>
        </listitem>
        <listitem>
          <para>All - the result may contain any of the types defined in XPathNodeType.</para>
        </listitem>
      </itemizedlist>
    </section>
  </chapter>
  <chapter xml:id="chapter_10" label="10" status="1">
    <title>Data Exchange Model Conventions</title>
    <para>Models that can be used by the model-based DataExchange interface methods are defined in <xref linkend="chapter_A" xrefstyle="template: Annex %n"/>. These models are defined in the form of XML Schemas written in Relax NG Compact form of DSDL as specified by ISO/IEC 19757.</para>
    <note>
      <para>An implementer may translate the Relax NG Compact form to other forms for use within their implementation as long as the exchanged XML Infosets will validate against the schema specified by the standard. For example, a particular implementation may internally utilize a schema with stronger validation rules (e.g., using Schematron rules as specified in ISO/IEC 19757, or using XSDL with assertion rules) as long as the XML produced for exchange over the interface can be parsed with the schema specified in the standard, and that XML from well-formed DICOM objects produced by the schema specified in the standard can still be utilized by the implementation's internal schema.</para>
    </note>
    <para>Actual instances of the models are XML Infosets. <xref linkend="chapter_A" xrefstyle="template: Annex %n"/> follows the following conventions in describing models.</para>
    <note>
      <orderedlist>
        <listitem>
          <para>The models are defined via XML schemas to allow the use of commonly available tools to manipulate and navigate the model. For example, an XPath statement can be used to identify portions of interest within the model such as a particular DICOM Attribute and extract it.</para>
        </listitem>
        <listitem>
          <para>Some implementations may parse directly from the incoming object, which may not be in XML form, into an internal representation, such as the domain object model (DOM) without ever having converted the object to XML.</para>
        </listitem>
      </orderedlist>
    </note>
    <para>Within each model description is a table of XML Elements and XML Attributes used to describe an XML Infoset of that model. These tables utilize the following conventions:</para>
    <orderedlist numeration="arabic">
      <listitem>
        <para>XML Element names (listed in the first column) are in CamelCase, with the first letter capitalized.</para>
      </listitem>
      <listitem>
        <para>XML Attribute names (listed in the first column) are in camelCase with the first letter in lower case.</para>
      </listitem>
      <listitem>
        <para>XML Element and XML Attribute names with a set of "&gt;" characters in front of them are nested within the first preceding XML Element with one fewer "&gt;" characters in front of its name. A nested XML Attribute is associated with the immediately enclosing XML Element.</para>
      </listitem>
      <listitem>
        <para>The entries in the "Optionality" column have the following interpretations:</para>
        <itemizedlist>
          <listitem>
            <para>"R" indicates that the XML Element or XML Attribute is required in all models.</para>
          </listitem>
          <listitem>
            <para>"C" indicates that the XML Element or XML Attribute is required in all models if the condition stated in the Description is met.</para>
          </listitem>
          <listitem>
            <para>"O" indicates that the XML Element or XML Attribute is optional.</para>
          </listitem>
          <listitem>
            <para>If the XML Element or XML Attribute is nested inside another XML Element, and that enclosing XML Element is not present (i.e., it is defined with an Optionality of "O" and is not present in the XML Infoset, or it is defined with an Optionality of "RC" and is not included in the XML Infoset because the condition was not met), then the nested XML Element or XML Attribute shall not be present in the XML Infoset irrespective of its optionality.</para>
          </listitem>
        </itemizedlist>
      </listitem>
      <listitem>
        <para>The entries in the "Cardinality" column have the following interpretations:</para>
        <itemizedlist>
          <listitem>
            <para>"A" indicates that this is represented as an XML Attribute instead of an XML Element, hence has a cardinality of 1 by definition.</para>
          </listitem>
          <listitem>
            <para>"1" indicates that only a single instance of this XML Element is included inside the immediately enclosing XML Element, or at the top level if this XML Element is not nested inside another XML Element.</para>
          </listitem>
          <listitem>
            <para>"0-n" indicates that zero to n instances of this XML Element are included inside the immediately enclosing XML Element, or at the top level if this XML Element is not nested inside another XML Element.</para>
          </listitem>
          <listitem>
            <para>"1-n" indicates that one to n instances of this XML Element are included inside the immediately enclosing XML Element, or at the top level if this XML Element is not nested inside another XML Element.</para>
          </listitem>
        </itemizedlist>
      </listitem>
      <listitem>
        <para>Sets of XML Elements and XML Attributes that are often repeated within models may be defined as macros. Macros that may have general applicability are defined in this section. Macros that are unique to a particular model may be defined in the Annex specific that model. When a macro is included within a table, it is as if the contents of the Macro's table were inserted within the table referencing the macro. Any set of "&gt;" characters in front of the directive to include a Macro in the table are prepended to the XML Element and XML Attribute names listed in the Macro's table.</para>
      </listitem>
    </orderedlist>
    <section xml:id="sect_10.1" label="10.1" status="2">
      <title>Coded Terminology</title>
      <para>Models may make use of coded terminology. The representation of coded terminology in DICOM is described in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. Specific terminology of interest, organized in Context Groups in <olink targetdoc="PS3.16" targetptr="PS3.16" xrefstyle="select: labelnumber"/>, can be referenced using the following macro.</para>
      <table frame="box" label="10.1-1" rules="all" xml:id="table_10.1-1">
        <caption>Coded Terminology Macro</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>Name</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>Optionality</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>Cardinality</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>Description</para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="4" rowspan="1">
              <para>
                <emphasis role="italic">BASIC CODED ENTRY ATTRIBUTES</emphasis>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>CodeValue</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>R</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The particular code value identifying the referenced term or concept. See <olink targetdoc="PS3.3" targetptr="sect_8.1" xrefstyle="select: docname label"/>.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>CodingSchemeDesignator</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>R</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Designates the coding scheme in which the codeValue is defined. See <olink targetdoc="PS3.3" targetptr="sect_8.2" xrefstyle="select: docname label"/>.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>CodingSchemeVersion</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>C</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>See <olink targetdoc="PS3.3" targetptr="sect_8.2" xrefstyle="select: docname label"/>. Required if the codingSchemeDesignator is not sufficient to identify the codeValue.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>CodeMeaning</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>O</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>0-1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>A brief human readable description of what the coded value means. See <olink targetdoc="PS3.3" targetptr="sect_8.3" xrefstyle="select: docname label"/>.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="4" rowspan="1">
              <para>
                <emphasis role="italic">ENHANCED ENCODING MODE</emphasis>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>ContextIdentifier</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>O</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>0-1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Identifies a Context Group defined within a Mapping Resource from which the values of codeValue and codeMeaning were selected or have been added as a Private Context Group extension See <olink targetdoc="PS3.3" targetptr="sect_8.6" xrefstyle="select: docname label"/> and <olink targetdoc="PS3.3" targetptr="sect_8.7" xrefstyle="select: docname label"/>.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>MappingResource</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>C</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>See <olink targetdoc="PS3.3" targetptr="sect_8.4" xrefstyle="select: docname label"/>. Required if the contextIdentifier XML Attribute is present.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>ContextGroupVersion</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>C</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>See <olink targetdoc="PS3.3" targetptr="sect_8.5" xrefstyle="select: docname label"/>. Required if the contextIdentifier XML Attribute is present.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>ContextGroupExtensionFlag</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>O</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>0-1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Indicates whether the codeValue/codingScheme/codeMeaning is selected from a private extension of the Context Group identified in the contextIdentifier XML Attribute. See <olink targetdoc="PS3.3" targetptr="sect_8.7" xrefstyle="select: docname label"/>.</para>
              <para>Enumerated Values:</para>
              <para>"Y"</para>
              <para>"N"</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>ContextGroupLocalVersion</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>C</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>See <olink targetdoc="PS3.3" targetptr="sect_8.7" xrefstyle="select: docname label"/>.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>ContextGroupExtensionCreatorUID</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>C</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>Identifies the person or organization who created an extension to the Context Group. See <olink targetdoc="PS3.3" targetptr="sect_8.7" xrefstyle="select: docname label"/>.</para>
              <para>Required if the value of contextGroupExtensionFlag is "Y".</para>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
    <section xml:id="sect_10.2" label="10.2" status="2">
      <title>Person Name Components</title>
      <para>The Person Name Components follow the definitions given in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> of the DICOM Standard. The <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> description of the usage of Person Name Components also applies to this macro.</para>
      <table frame="box" label="10.2-1" rules="all" xml:id="table_10.2-1">
        <caption>Person Name Components Macro</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para>Name</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>Optionality</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>Cardinality</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para>Description</para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>FamilyName</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>O</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>0-1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The person's family or last name. See the description of the PN VR in DICOM <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>GivenName</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>O</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>0-1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The person's given or first names. See the description of the PN VR in DICOM <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>MiddleName</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>O</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>0-1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The person's middle names. See the description of the PN VR in DICOM <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>NamePrefix</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>O</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>0-1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The person's name prefix. See the description of the PN VR in DICOM <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para>NameSuffix</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>O</para>
            </td>
            <td align="center" colspan="1" rowspan="1">
              <para>0-1</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para>The person's name suffix. See the description of the PN VR in DICOM <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </chapter>
  <chapter xml:id="chapter_A" label="A" status="1">
    <title>Data Exchange Models</title>
    <section xml:id="sect_A.1" label="A.1" status="2">
      <title>Native DICOM Model</title>
      <section xml:id="sect_A.1.1" label="A.1.1" status="3">
        <title>Usage</title>
        <para>The Native DICOM Model defines a representation of binary-encoded DICOM SOP Instances as XML Infosets that allows a recipient of data to navigate through a binary DICOM data set using XML-based tools instead of relying on tool kits that understand the binary encoding of DICOM.</para>
        <note>
          <para>It is not the intention that this form be utilized as the basis for other uses. This form does not take advantage of the self-validation features that could be possible with a pure XML representation of the data.</para>
        </note>
        <para>With the exception of padding, a data source that is creating a new instance of a Native DICOM Model (e.g., the result from some analysis application) shall follow the DICOM encoding rules (e.g., the handling of character sets) in creating Values for the DicomAttributes within the instance of the Native DICOM Model.</para>
        <para>Group Length (gggg,0000) attributes shall not be included in a Native DICOM Model instance.</para>
        <para>A data recipient that converts data from an instance of the Native DICOM Model back into a binary encoded DICOM object shall adjust the padding as necessary to meet the encoding rules specified in DICOM <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section xml:id="sect_A.1.2" label="A.1.2" status="3">
        <title>Identification</title>
        <para>The ObjectDescriptors MIME content type for the Native DICOM Model shall be "application/x-dicom.native".</para>
        <para>The ObjectDescriptors class UID for the Native DICOM Model shall be "1.2.840.10008.7.1.1".</para>
      </section>
      <section xml:id="sect_A.1.3" label="A.1.3" status="3">
        <title>Support</title>
        <para>Support of the Native DICOM Model as both a data source and a data recipient shall be required of all Hosting Systems implementing the interface.</para>
        <para>Support of the Native DICOM Model as either a data source or a data recipient shall be optional for all Hosted Applications implementing the interface.</para>
      </section>
      <section xml:id="sect_A.1.4" label="A.1.4" status="3">
        <title>Information Model</title>
        <para>A diagram of the Native DICOM Model appears in <xref linkend="figure_A.1.4-1" xrefstyle="select: label"/>.</para>
        <para>
          <figure xml:id="figure_A.1.4-1" label="A.1.4-1">
            <title>Native DICOM Model</title>
            <mediaobject>
              <imageobject>
                <!--<imagedata fileref="figures/PS3.19_A.1.4-1.svg"/>-->
                <imagedata fileref="part19_fromword_files/figure_A.1.4-1.png"/>
              </imageobject>
            </mediaobject>
          </figure>
        </para>
      </section>
      <section xml:id="sect_A.1.5" label="A.1.5" status="3">
        <title>Description</title>
        <table frame="box" label="A.1.5-1" rules="all" xml:id="table_A.1.5-1">
          <caption>Native DICOM Model</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>Name</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Optionality</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Cardinality</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Description</para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>NativeDicomModel</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>An Infoset (as defined in W3C Recommendation XML Information Set "<link xl:href="http://www.w3.org/TR/xml-infoset/"/>") representing the content of a DICOM Data Set (as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
                <para>The directivexml:space="preserve" shall be included.</para>
                <para>Examples include:</para>
                <itemizedlist>
                  <listitem>
                    <para>the contents of an entire DICOM Composite Instance (as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>) in response to a native model request, or</para>
                  </listitem>
                  <listitem>
                    <para>the contents of part of a DICOM Composite Instance in response to a query on a native model, or</para>
                  </listitem>
                  <listitem>
                    <para>the contents of a STOW-RS response</para>
                  </listitem>
                  <listitem>
                    <para>the contents of a Sequence Item (as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>), recursively included within an Infoset Value element.</para>
                  </listitem>
                </itemizedlist>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="4" rowspan="1">
                <para>
                  <emphasis role="italic">Include <xref linkend="table_A.1.5-2" xrefstyle="select: label quotedtitle"/></emphasis>
                </para>
              </td>
            </tr>
          </tbody>
        </table>
        <table frame="box" label="A.1.5-2" rules="all" xml:id="table_A.1.5-2">
          <caption>DICOM Data Set Macro</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>Name</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Optionality</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Cardinality</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Description</para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>DicomAttribute</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>0-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>An Infoset element corresponding to each DICOM Attribute.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;keyword</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The keyword as defined in <olink targetdoc="PS3.6" targetptr="PS3.6" xrefstyle="select: labelnumber"/>.</para>
                <para>Required unless the DICOM Data Element is unknown to the host.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;tag</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The four-digit zero-padded hexadecimal values of the Group and Element Numbers of the Data Element Tag, concatenated as a single string without a delimiter and with lowercase letters disallowed. E.g., Data Element (0010,0020) would have a tag of "00100020".</para>
                <para>For Private Data Elements, the two most significant hexadecimal characters of the Element Number shall be 00, since the Private Creator is explicitly conveyed and the block used in the DICOM encoding shall not be sent (i.e., a Private Data Element has the form gggg00ee).</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;vr</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The Value Representation of this element, represented as a two character uppercase string, as defined in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> and specified for this Data Element in <olink targetdoc="PS3.6" targetptr="PS3.6" xrefstyle="select: labelnumber"/>.</para>
                <note>
                  <para>Implementations may utilize the Value Representation to validate data values, if desired.</para>
                </note>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;privateCreator</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The value of the Private Creator Data Element corresponding to the block in which this Private Data Element is used.</para>
                <para>Required for Private Data Elements. Shall not be present otherwise (i.e., for Data Elements defined by the DICOM Standard).</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;Value</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A Value from the Value Field of the DICOM Data Element. There is one Infoset Value element for each DICOM Value or Sequence Item.</para>
                <para>Required if the DICOM Data Element represented is not zero length and an Item, PersonName, InlineBinary or BulkData XML element is not present. Shall not be used if the VR of the enclosing Attribute is either SQ or PN.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;number</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The order in which the Value occurs within the DICOM Value Field, as a number monotonically increasing starting from 1 by 1.</para>
                <note>
                  <para>The Number XML Attribute is used to preserve the original order.</para>
                </note>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;
        <emphasis role="italic">plain character data</emphasis>
</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A single DICOM value encoded as plain character data.</para>
                <para>E.g., a DICOM Decimal String Value Field that contained two delimiter-separated values, e.g., "0.5\0.4" would be encoded as two Infoset Value elements:&lt;Value number="1"&gt;0.5&lt;/Value&gt;&lt;Value number="2"&gt;0.4&lt;/Value&gt;A Code String Value Field that containing three delimiter-separated values, the second of which was zero length, "MPG\\XR3", would be encoded as:&lt;Value number="1"&gt;MPG&lt;/Value&gt;&lt;Value number="2"&gt;&lt;/Value&gt;&lt;Value number="3"&gt;XR3&lt;/Value&gt;Contrast the latter example with a zero length Value Field, in which case there would be no Infoset Value elements at all.</para>
                <para>For DICOM Data Elements whose VR is AT, each value shall be encoded as the four-digit zero-padded hexadecimal values of the Group and Element Numbers of the Data Element Tag, concatenated as a single string without a delimiter and with lowercase letters disallowed.</para>
                <para>The character encoding is that declared for the Infoset, regardless of any DICOM Specific Character Set, and any necessary translation from the DICOM Specific Character Set to the Infoset character encoding shall have been performed.</para>
                <note>
                  <para>This translation might not be completely lossless, particularly with Asian character sets.</para>
                </note>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;Item</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A DICOM sequence item, in other words a nested DICOM Data Set.</para>
                <para>Required if the DICOM Data Element represented is a Sequence (has a VR of "SQ") and is not zero length. Not allowed otherwise.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;number</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The order in which the Item occurs within a Sequence of Items, as a number monotonically increasing from 1 by 1.</para>
                <note>
                  <para>The Number XML Attribute is used to preserve the original order.</para>
                </note>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;<emphasis role="italic">Include <xref linkend="table_A.1.5-2" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Recursively includes the Data Set corresponding to a Sequence Item.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;PersonName</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A parsed representation in XML of a DICOM Data Element containing a name (i.e., whose VR is PN).</para>
                <note>
                  <para>Parsing Attributes with a VR of PN into an XML representation of the name groups and components simplifies the creation of XPath statements to pull only portions of names out of the DICOM data.</para>
                </note>
                <para>Required if the DICOM Data Element represented has a VR of PN and is not zero length. Not allowed otherwise.</para>
                <para>The rules defined in DICOM <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> on the usage of the Alphabetic, Ideographic, and Phonetic groups of name components within a DICOM Attribute with a Value Representation of PN apply.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;number</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The order in which the PersonName occurs within the DICOM Value Field, as a number monotonically increasing from 1 by 1.</para>
                <note>
                  <para>The Number XML Attribute is used to preserve the original order.</para>
                </note>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;Alphabetic</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>0-1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A group of name components that are represented in alphabetical characters (see the definition for the Value Representation of PN in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="4" rowspan="1">
                <para>&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.2-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;Ideographic</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>0-1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A group of name components that are represented in ideographic characters (see the definition for the Value Representation of PN in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="4" rowspan="1">
                <para>&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.2-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;Phonetic</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>0-1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A group of name components that are represented in phonetic characters (see the definition for the Value Representation of PN in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>).</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="4" rowspan="1">
                <para>&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.2-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;BulkData</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A reference to a blob of data that the recipient may retrieve through use of the GetData() method, a WADO-RS call or a STOW-RS call.</para>
                <para>Required if the DICOM Data Element represented is not zero length and an XML Infoset Value, Item, InlineBinary or PersonName element is not present.</para>
                <para>The provider of the data may use a BulkData reference at its discretion to avoid encoding a large DICOM Value Field as text by value in the Infoset. For example, pixel data or look up tables.</para>
                <para>There is a single BulkData Infoset element representing the entire Value Field, and not one per Value in the case where the Value Multiplicity is greater than one. E.g., a LUT with 4096 16 bit entries that may be encoded in DICOM with a Value Representation of OW, with a VL of 8192 and a VM of 1, or a US VR with a VL of 8192 and a VM of 4096 would both be represented as a single BulkData element.</para>
                <para>All rules (e.g., byte ordering and swapping) in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> apply.</para>
                <note>
                  <para>Implementers should in particular pay attention the <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> rules regarding the value representations of OW and OF.</para>
                </note>
                <para>If the BulkData has a string or text Value Representation, the value(s) of the DICOM Specific Character Set Data Element, if present, might be necessary to determine its encoding.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;uuid</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>An identifier of this bulk data reference formatted as a UUID using the hexadecimal representation defined in ITU-T Recommendation X.667.</para>
                <para>Required if BulkData URI is not present. Shall not be present otherwise.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;uri</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The HTTP(S) URI for this bulk data reference.</para>
                <para>Required if the NativeDicomModel was:</para>
                <itemizedlist>
                  <listitem>
                    <para>returned in response to a WADO-RS Retrieve Metadata request</para>
                  </listitem>
                </itemizedlist>
                <para>Shall not be present otherwise.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;InlineBinary</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The Value Field of the enclosing Attribute encoded as base64.</para>
                <para>Required if the DICOM Data Element represented is:</para>
                <itemizedlist>
                  <listitem>
                    <para>not zero length</para>
                  </listitem>
                  <listitem>
                    <para>the VR if the enclosing Attribute is either OB, OD, OF, OW, or UN</para>
                  </listitem>
                  <listitem>
                    <para>an XML Infoset Value or BulkData XML element is not present</para>
                  </listitem>
                </itemizedlist>
                <para>Shall not be present otherwise.</para>
                <para>There is a single InlineBinary Infoset element representing the entire Value Field, and not one per Value in the case where the Value Multiplicity is greater than one. E.g., a LUT with 4096 16 bit entries that may be encoded in DICOM with a Value Representation of OW, with a VL of 8192 and a VM of 1, or a US VR with a VL of 8192 and a VM of 4096 would both be represented as a single InlineBinary element.</para>
                <para>All rules (e.g., byte ordering and swapping) in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> apply.</para>
                <note>
                  <para>Implementers should in particular pay attention to the <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> rules regarding the value representations of OD, OF and OW.</para>
                </note>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
      <section xml:id="sect_A.1.6" label="A.1.6" status="3">
        <title>Schema</title>
        <para>The Normative version of the XML Schema for the Native DICOM Model follows:</para>
        <programlisting><![CDATA[
default namespace="http://dicom.nema.org/PS3.19/models/NativeDICOM"

# This schema was created as an intermediary, a means of describing
# native binary encoded DICOM objects as XML Infosets, thus allowing  
# one to manipulate binary DICOM objects using familiar XML tools. 
# As such, the schema is designed to facilitate a simple, mechanical,
# bi-directional translation between binary encoded DICOM and XML-like 
# constructs without constraints, and to simplify identifying portions 
# of a DICOM object using XPath statements.
#
# Since this schema has minimal type checking, it is neither intended 
# to be used for any operation that involves hand coding, nor to 
# describe a definitive, fully validating encoding of DICOM concepts
# into XML, as what one might use, for example, in a robust XML  
# database system or in XML-based forms, though it may be used
# as a means for translating binary DICOM Objects into such a form
# (e.g., through an XSLT script).

start = element NativeDicomModel { DicomDataSet }

# A DICOM Data Set is as defined in PS3.5.  It does not appear 
# as an XML Element, since it does not appear in the binary encoded 
# DICOM objects.  It exists here merely as a documentation aid. 
DicomDataSet = DicomAttribute*

DicomAttribute = element DicomAttribute {
  Tag, VR, Keyword?, PrivateCreator?, 
  (BulkData | Value+ | Item+ | PersonName+ | InlineBinary)? 
} 
BulkData = element BulkData{ UUID | URI } 
Value = element Value { Number, xsd:string }
InlineBinary = element InlineBinary { xsd:base64Binary }
Item = element Item { Number, DicomDataSet }
PersonName = element PersonName {
  Number,
  element Alphabetic  { NameComponents }?,
  element Ideographic { NameComponents }?,
  element Phonetic    { NameComponents }?
}

NameComponents =
  element FamilyName {xsd:string}?,
  element GivenName  {xsd:string}?,
  element MiddleName {xsd:string}?,
  element NamePrefix {xsd:string}?,
  element NameSuffix {xsd:string}?
  
# keyword is the attribute tag from PS3.6 
# (derived from the DICOM Attribute's name)
Keyword = attribute keyword { xsd:token }
# canonical XML definition of Hex, with lowercase letters disallowed
Tag = attribute tag { xsd:string{ minLength="8" maxLength="8" pattern="[0-9A-F]{8}" } } 
VR = attribute vr { "AE" | "AS" | "AT"| "CS" | "DA" | "DS" | "DT" | "FL" | "FD" 
                    | "IS" | "LO" | "LT" | "OB" | "OD" | "OF" | "OW" | "PN" | "SH" | "SL" 
                    | "SQ" | "SS" | "ST" | "TM" | "UI" | "UL" | "UN" | "US" | "UT" }
PrivateCreator = attribute privateCreator{ xsd:string }
UUID = attribute uuid { xsd:string }
URI = attribute uri { xsd:anyURI }
Number = attribute number { xsd:positiveInteger } 
]]></programlisting>
      </section>
      <section xml:id="sect_A.1.7" label="A.1.7" status="3">
        <title>Examples</title>
        <para>Here is an example XPath query to extract the code meaning of the first item in the View Code Sequence:</para>
        <para>/NativeDicomModel/DicomAttribute[@keyword="ViewCodeSequence"]/Item[@number=1]//DicomAttribute[@keyword="CodeMeaning"]/Value[@number=1]</para>
      </section>
    </section>
    <section xml:id="sect_A.2" label="A.2" status="2">
      <title>Abstract Multi-Dimensional Image Model</title>
      <section xml:id="sect_A.2.1" label="A.2.1" status="3">
        <title>Usage</title>
        <para>The Abstract Multi-Dimensional Image Model can be used to refer to a discretely-sampled, multi-dimensional image data. The sample values may either be single-valued (a scalar) or a vector of values (a vector). An example would be a time varying series of three dimensional images set at multiple energy levels. The Abstract Multi-Dimensional Image Model is patterned after the Enhanced Multi-frame family of DICOM objects. In mathematical terms, this is any data set that is defined by a function <emphasis role="italic">I (x,y,z,t,)</emphasis>, where <emphasis role="italic">(x,y,z,t,)</emphasis> are the dimensions, and the sample value of <emphasis role="italic">I</emphasis> is either a vector of components or a scalar (i.e., a single component). The primary purpose of this model is to allow applications to process image data without concern as to the underlying format of the data.</para>
        <para>When converting DICOM SOP Instances into Abstract Multi-Dimensional Image Models, a provider of data shall follow these rules as closely as it practically can:</para>
        <note>
          <para>Deterministic behavior is not expected nor guaranteed when making conversions between DICOM SOP Instances and Abstract Multi-Dimensional Image Models. For example, given the same DICOM SOP Instances, different Hosting Systems may create Abstract Multi-Dimensional Image Models that differ in some details, such as the Units of the Component values or in the Dimensions.</para>
        </note>
        <orderedlist numeration="arabic">
          <listitem>
            <para>Multiple DICOM SOP Instances from the same series that have the same Frame of Reference UID shall be combined into a single instance of the Abstract Multi-Dimensional Image Model. DICOM SOP Instances from multiple series that have the same Frame of Reference UUID may be combined into a single instance of the Abstract Multi-Dimensional Image Model, if appropriate.</para>
          </listitem>
          <listitem>
            <para>A single DICOM SOP Instance shall not be divided into multiple instances of the Abstract Multi-Dimensional Image Model.</para>
          </listitem>
          <listitem>
            <para>The coordinate system utilized within the Abstract Multi-Dimensional Image Model shall use the coordinate system defined by the DICOM objects utilized in the creation of the Abstract Multi-Dimensional Image Model instance if applicable. Where practical, the coordinate system and Dimension definitions utilized within the Abstract Multi-Dimensional Image Model shall be chosen such that interpolation is not required to covert the source data into the Abstract Multi-Dimensional Image Model.</para>
            <note>
              <para>Interpolation may be necessary if the source data is not laid out on a frame-based Cartesian coordinate grid.</para>
            </note>
          </listitem>
          <listitem>
            <para>Spatial coordinates, such as Image Position (Patient) (0020,0032), shall be transformed into the coordinate system utilized within the Abstract Multi-Dimensional Image Model instance.</para>
          </listitem>
          <listitem>
            <para>The Pixel Data shall be spatially transformed as needed to match the Semantics and Units of the Dimensions of the Abstract Multi-Dimensional Image Model into which the pixels values are being placed.</para>
          </listitem>
          <listitem>
            <para>Any embedded overlays within the Pixel Data (7FE0,0010) Attribute shall be stripped out of the pixel values and the pixel values sign extended or converted as needed to match the datatype of the Component of the Abstract Multi-Dimensional Image Model into which the pixels values are being placed.</para>
          </listitem>
          <listitem>
            <para>The pixel values of the Pixel Data shall be transformed as needed to match the Semantics and Units of the Component of the Abstract Multi-Dimensional Image Model into which the pixels values are being placed.</para>
            <note>
              <para>Typically presentation settings such as VOI and Presentation LUTs are not used in creating Abstract Multi-Dimensional Image Models from DICOM SOP Instances. The exception is when the application of such LUTs is needed to match the Semantics and Units of the Component. Modality LUTs or Rescale Slope and Intercept often must be applied to match the Semantics and Units of the Abstract Multi-Dimensional Image Model.</para>
            </note>
          </listitem>
          <listitem>
            <para>Any pixel values that correspond to the pixel padding values shall be stripped out (i.e., set to zero or other suitable replacement value) and the spatially corresponding values in the PixelMapOfValidData shall be set to the outValue or something other than the inValue, as appropriate.</para>
          </listitem>
        </orderedlist>
        <para>When converting data within an instance of the Abstract Multi-Dimensional Image Models into DICOM SOP Instances, the recipient of an abstract model instance shall convert the pixel data back into values compatible with the native form of the DICOM SOP Instances being created. This conversion may include recreating Modality LUT information, inserting pixel padding values, converting pixel spacing and origins, etc. as dictated by the SOP Class the data is being converted to. When converting a single Abstract Multi-Dimensional Image Model into multiple DICOM SOP Instances, the DICOM SOP Instances shall all have the same Frame of Reference UID (0020,0052), if permitted by the SOP Class.</para>
      </section>
      <section xml:id="sect_A.2.2" label="A.2.2" status="3">
        <title>Identification</title>
        <para>The ObjectDescriptors MIME content type for the Abstract Multi-Dimensional Image Model is "application/x-dicom.abstract".</para>
        <note>
          <para>This is an experimental MIME type. A formal MIME type will be applied for. Implementations will be expected to support both the experimental and formal MIME type going forward without a version change to the interface.</para>
        </note>
        <para>The ObjectDescriptors class UID for the Abstract Multi-Dimensional Image Model is "1.2.840.10008.7.1.2".</para>
      </section>
      <section xml:id="sect_A.2.3" label="A.2.3" status="3">
        <title>Support</title>
        <para>Support of the Abstract Multi-Dimensional Image Model as both a data source and a data recipient is required of all Hosting Systems implementing the interface.</para>
        <para>Support of the Abstract Multi-Dimensional Image Model as either a data source or a data recipient is optional for all Hosted Applications implementing the interface.</para>
      </section>
      <section xml:id="sect_A.2.4" label="A.2.4" status="3">
        <title>Information Model</title>
        <para>A diagram of the Abstract Multi-Dimensional Image Model appears in <xref linkend="figure_A.2.4-1" xrefstyle="select: label"/>.</para>
        <para>
          <figure label="A.2.4-1" pgwide="1" xml:id="figure_A.2.4-1">
            <title>Abstract Multi-Dimensional Image Model</title>
            <mediaobject>
              <imageobject>
                <!--<imagedata fileref="figures/PS3.19_A.2.4-1.svg"/>-->
                <imagedata fileref="part19_fromword_files/image016.png"/>
              </imageobject>
            </mediaobject>
          </figure>
        </para>
      </section>
      <section xml:id="sect_A.2.5" label="A.2.5" status="3">
        <title>Description</title>
        <table frame="box" label="A.2.5-1" rules="all" xml:id="table_A.2.5-1">
          <caption>Abstract Image Model</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para>Name</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Optionality</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Cardinality</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para>Description</para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>AbstractImageDataSet</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The top level element required of all abstract image models, holding the entire abstract image Data Set.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;Component</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Describes a component of the function output. If the output is a scalar, there is only one Component. Vector outputs require a Component for each position in the vector. When there are multiple components, the components appear in each value in the order defined by their respective idNumbers.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;idNumber</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Identifies this particular component, with numbering monotonically increasing from 1.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;datatype</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Describes how this component value is represented. Enumerated values are:</para>
                <para>SIGNED_INT8</para>
                <para>SIGNED_INT16</para>
                <para>SIGNED_INT32</para>
                <para>UNSIGNED_INT8</para>
                <para>UNSIGNED_INT16</para>
                <para>UNSIGNED_INT32</para>
                <para>FLOAT32</para>
                <para>FLOAT64</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;minValue</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The minimum value that this component takes on. If this XML Attribute is missing, this is the minimum value that can be represented by the Datatype.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;maxValue</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The maximum value that this component takes on. If this XML Attribute is missing, this is the maximum value that can be represented by the Datatype.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;Semantics</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A coded value describing what this component represents.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.1-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Defined <olink targetdoc="PS3.16" targetptr="sect_CID_7180" xrefstyle="select: labelnumber quotedtitle"/>.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;Unit</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A coded value describing what units this dimension is in.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.1-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Defined <olink targetdoc="PS3.16" targetptr="sect_CID_7181" xrefstyle="select: labelnumber quotedtitle"/>.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;Dimension</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Describes a dimension.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;idNumber</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Identifies this particular dimension, with numbering starting from 1. Dimensions with a lower idNumber vary faster than those with a higher idNumber.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;numberOfSamples</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The number of samples in this dimension, for example:the number of columns along the X-axis,the number of rows along the Y-axis,the number of slices along the Z-axis,the number of qualitative descriptions.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;Semantics</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A coded value describing what this dimension represents.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.1-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Defined <olink targetdoc="PS3.16" targetptr="sect_CID_7182" xrefstyle="select: labelnumber quotedtitle"/></para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt; Regular</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Used to describe regularly spaced samples in this dimension. Required if neither Irregular nor Qualitative are present. Shall not be present otherwise.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;width</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The sample width.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;spacing</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The sample spacing.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;Unit</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A coded value describing what units the sample width and spacing are in.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.1-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Defined <olink targetdoc="PS3.16" targetptr="sect_CID_7183" xrefstyle="select: labelnumber quotedtitle"/>.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;AxisDirection</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The direction of the axis of this dimension.</para>
                <note>
                  <para>This XML Element might only be applicable to spatial dimensions, such as those dealing with linear displacement. Typically this is in relationship to the patient.</para>
                </note>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.1-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Defined <olink targetdoc="PS3.16" targetptr="sect_CID_7184" xrefstyle="select: labelnumber quotedtitle"/></para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;AxisOrientation</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The orientation of the axis of this dimension along which values are increasing.</para>
                <note>
                  <para>This XML Element might only be applicable to spatial dimensions, such as those dealing with linear displacement. Typically this is in relationship to the patient.</para>
                </note>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.1-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Defined <olink targetdoc="PS3.16" targetptr="sect_CID_7185" xrefstyle="select: labelnumber quotedtitle"/></para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;Irregular</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Used to describe irregularly spaced samples in this dimension. Required if neither Regular nor Qualitative are present. Shall not be present otherwise.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;origin</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The reference location from which each of the sample locations are measured.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;SampleLocation</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Describes the locations of each sample as an offset from the origin. There shall be numberOfSamples SampleLocation XML Elements in this sequence.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;&gt;index</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The index value of this sample location, with numbering starting from 1 and incrementing to numberOfSamples.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;&gt;width</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The sample width.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;&gt;distanceToOrigin</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The distance of this sample location from the Origin location.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;Unit</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A coded value describing what units the sample widths and locations are in.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.1-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Defined <olink targetdoc="PS3.16" targetptr="sect_CID_7183" xrefstyle="select: labelnumber quotedtitle"/>.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;AxisDirection</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The direction of the axis of this dimension.</para>
                <note>
                  <para>This XML Element might only be applicable to spatial dimensions, such as those dealing with linear displacement. Typically this is in relationship to the patient.</para>
                </note>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.1-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Defined <olink targetdoc="PS3.16" targetptr="sect_CID_7184" xrefstyle="select: labelnumber quotedtitle"/></para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;AxisOrientation</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The orientation of the axis of this dimension along which values are increasing.</para>
                <note>
                  <para>This XML Element might only be applicable to spatial dimensions, such as those dealing with linear displacement. Typically this is in relationship to the patient.</para>
                </note>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.1-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Defined <olink targetdoc="PS3.16" targetptr="sect_CID_7185" xrefstyle="select: labelnumber quotedtitle"/></para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;Qualitative</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Used to describe a qualitative dimension. Required if neither Regular nor Irregular are present. Shall not be present otherwise.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;Sample</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Description of what each sample along this dimension represents. There shall be numberOfSamples Sample XML Elements in this sequence.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;&gt;index</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The index value of this sample, with numbering starting from 1 and increasing to numberOfSamples.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;&gt;Semantics</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A coded value describing what this sample represents.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;&gt;&gt;&gt;<emphasis role="italic">Include <xref linkend="table_10.1-1" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Defined <olink targetdoc="PS3.16" targetptr="sect_CID_7186" xrefstyle="select: labelnumber quotedtitle"/></para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;Origin</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>0-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Specifies the spatial position in the coordinate system of the Abstract Multi-Dimensional Image Model of the spatial frames or volumes of image data values. Different frames or volumes may either share an origin, or have a different origin for each frame or volume. If there is only a single Origin XML element within this Dimension, then this Origin applies to all samples along this Dimension. Otherwise, there shall be numberOfSamples Origin XML elements, one for each sample along this Dimension. Sample index values for Dimensions whose idNumbers are less than this Dimension's idNumber, are all equal to 1.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;index</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Index of the sample to which this Origin,. If this is a single Origin that applies to all samples along this Dimension, then index shall either be left out or given a value of "0" (zero). Otherwise, the value shall be the appropriate number between 1 and nubmerOfSamples.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;xCoord</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The X position of this Origin in the coordinate system of the Abstract Multi-Dimensional Image Model.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;yCoord</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The Y position of this Origin in the coordinate system of the Abstract Multi-Dimensional Image Model.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;zCoord</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The Z position of this Origin in the coordinate system of the Abstract Multi-Dimensional Image Model.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;DirectionCosines</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>0-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Specifies the direction in the coordinate system of the Abstract Multi-Dimensional Image Model of the Dimension whose idNumber is given in concernedSpatialDimension. The idNumber of the concernedSpatialDimension shall be less than the idNumber of this Dimension. If there is only a single DirectionCosines XML element within this Dimension XML element with a particular concernedSpatialDimension, then this Direction Cosine applies to all samples along this Dimension. Otherwise, there shall be numberOfSamples DirectionCosines XML elements with this particular concernedSpatialDimension, one for each sample along this Dimension.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;concernedSpatialDimension</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The idNumber of the particular Dimension for which this DirectionCosines XML element applies. The value of concernedSpatialDimension shall be less than the idNumber of this Dimension.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;index</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Index of this direction specification, with numbering starting from 1. If this is a single-valued DirectionCosines that applies to all samples along this Dimension then index shall either be left out or given a value of "0" (zero). Otherwise, the value of index refers to the DirectionCosines of a particular sample value along this Dimension.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;cosAlongX</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The direction cosine along the X axis of the coordinate system of the Abstract Multi-Dimensional Image Model for this concernedSpatialDimension.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;cosAlongY</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The direction cosine along the Y axis of the coordinate system of the Abstract Multi-Dimensional Image Model for this concernedSpatialDimension.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;&gt;cosAlongZ</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The direction cosine along the Z axis of the coordinate system of the Abstract Multi-Dimensional Image Model for this concernedSpatialDimension.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;PixelData</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Structure that defines where the pixel data is located, organized along dimensional lines.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="4" rowspan="1">
                <para>
                  <emphasis role="italic">&gt;&gt;Include <xref linkend="table_A.2.5-2" xrefstyle="select: label quotedtitle"/></emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;PixelMapOfValidData</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>0-1</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A pixel map that identifies which pixels either belong in or out of the Data Set. The dimensions of the pixel map match the dimensions of the image data, i.e., there is a one-to-one correspondence between samples in the image data and samples in the pixel map. The pointers to the pixel map data are included one of the Dimension XML elements.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;datatype</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Describes how samples in the pixel map are encoded. Enumerated values are:</para>
                <para>BIT1</para>
                <para>UNSIGNED_INT8</para>
                <para>For BIT1, the bit ordering starts from the least significant bit going to the most significant bit within an UNSIGNED_INT8 (i.e., 8 bit) byte. The bits are zero-padded to make a full 8-bit byte at the end of the most rapidly changing dimension (i.e., the Dimension whose idNumber is 1).</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;inValue</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The value within the pixel map that indicates that this sample shall be considered as part of the Data Set. All samples whose pixel map values do not match inValue shall not be considered as part of the Data Set. Required if outValue is not present. Shall not be present if outValue is present.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;outValue</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The value within the pixel map that indicates that this sample shall not be considered as part of the Data Set. All samples whose pixel map values do not match outValue shall be considered as part of the Data Set. Required if inValue is not present. Shall not be present if inValue is present.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="4" rowspan="1">
                <para>&gt;&gt;<emphasis role="italic">Include <xref linkend="table_A.2.5-2" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
            </tr>
          </tbody>
        </table>
        <table frame="box" label="A.2.5-2" rules="all" xml:id="table_A.2.5-2">
          <caption>Dimensional Data Macro</caption>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;dimensionID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The idNumber of the Dimension in this AbstractImageDataSet to which this DimensionalData refers.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;DataAt</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>O</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>1-n</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>References to where the image data is located. Only one Dimension XML Element within this AbstractImageDataSet shall have UUIDs for bulk pixel data (i.e., all bulk data references are at the same dimensional level).</para>
                <note>
                  <para>If the source of the data, as part of the model preparation, creates a single file for pixel data from multiple smaller native objects, then in order to provide the descriptorUUID XML Attributes the source may need to create multiple bulkDataUUIDs referring to different offsets within that single pixel data file.</para>
                </note>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;indexWithinDimension</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>R</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The ordinal position (e.g., index number) of this sample point in the array of data at this level. Numbering starts from 1.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;descriptorUUID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>A UUID that refers to the ObjectDescriptor from which this data is drawn, formatted in the hexadecimal representation defined by ITU-T Recommendation X.667.</para>
                <para>Required at the level of the nested tree structure where the source added the data from the descriptorUUID into the Abstract Multi-Dimensional Image Model.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para>&gt;&gt;bulkDataUUID</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>C</para>
              </td>
              <td align="center" colspan="1" rowspan="1">
                <para>A</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>The identifier that the recipient of the data may use in a getData() call to gain access to the bulk pixel data formatted as a UUID using the hexadecimal representation defined in ITU-T Recommendation X.667.</para>
                <para>Required if the Dimensional Data Macro is not present at this level of the nested tree structure. Shall not be present otherwise.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="3" rowspan="1">
                <para>&gt;&gt;<emphasis role="italic">Conditionally include <xref linkend="table_A.2.5-2" xrefstyle="select: label quotedtitle"/></emphasis></para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para>Only one of bulkDataUUID or Dimensional Data shall be included at each level. If Dimensional Data is included, it shall be the next lower level of the nested tree structure, that is the Dimension with an idNumber one less than the Dimension referred to by the enclosing DimensionalData.</para>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
      <section xml:id="sect_A.2.6" label="A.2.6" status="3">
        <title>Schema</title>
        <para>The Relax NG Compact schema for the Abstract Multi-Dimensional Image Model follows:</para>
        <programlisting><![CDATA[
default namespace = "http://dicom.nema.org/PS3.19/models/AbstractImage"

start = AbstractImageDataSet
AbstractImageDataSet = 

 element AbstractImageDataSet {
    element Component{
      attribute idNumber { xsd:positiveInteger },
      attribute datatype { ComponentDatatype },
      attribute minValue { xsd:double }?,
      attribute maxValue { xsd:double }?,
      element Semantics { CodedTerm },
      element Unit { CodedTerm  },
      element RealWordMapping {
        attribute rescaleSlope { xsd:double },
        attribute rescaleIntercept { xsd:double },
        element Unit { CodedTerm },
        element Semantics { CodedTerm }
      }*
    }+,
    element Dimension {
      attribute idNumber { xsd:positiveInteger },
      attribute numberOfSamples { xsd:positiveInteger },
      element Semantics { CodedTerm },
      (element Regular {
         attribute width { xsd:double },
         attribute spacing { xsd:double },
         element Unit { CodedTerm  },
         element AxisDirection { CodedTerm  }?,
         element AxisOrientation { CodedTerm  }?
       }
       | element Irregular {
           element origin { xsd:double },
           element SampleLocation {
             attribute index { xsd:positiveInteger },
             attribute width { xsd:double },
             attribute distanceToOrigin { xsd:double }
           }+,
         element Unit { CodedTerm  },
         element AxisDirection { CodedTerm  }?,
         element AxisOrientation { CodedTerm  }?
         }
       | element Qualitative {
           element Sample {
             attribute index { xsd:positiveInteger },
             element Semantics { CodedTerm }
           }+
         }),
      element Origin {
        attribute index { xsd:positiveInteger }?,
        attribute xCoord { xsd:double },
        attribute yCoord { xsd:double },
        attribute zCoord { xsd:double }
      }*,
      element DirectionCosines {
        attribute concernedSpatialDimension { xsd:positiveInteger },
        attribute index { xsd:positiveInteger }?,
        attribute cosAlongX { xsd:double },
        attribute cosAlongY { xsd:double },
        attribute cosAlongZ { xsd:double }
      }*
    }+,
    element PixelData { DimensionalData },
    element PixelMapOfValidData {
      attribute datatype { PixelMapDatatype },
      (
        attribute inValue { xsd:positiveInteger }
        | attribute outValue { xsd:positiveInteger }
      ),
      DimensionalData
    }?
  }

ComponentDatatype =
    "SIGNED_INT8"
    | "SIGNED_INT16"
    | "SIGNED_INT32"
    | "UNSIGNED_CHAR8"
    | "UNSIGNED_INT16"
    | "UNSIGNED_INT32"
    | "FLOAT32"
    | "FLOAT64"
  
PixelMapDatatype = 
    "BIT1"
    | "UNSIGNED_INT8"

DimensionalData =
  element DimensionalData {
    attribute dimensionID { xsd:positiveInteger },
    element DataAt 
    {
      attribute sampleNumber { xsd:positiveInteger },
      attribute descriptorUUID { xsd:string }?,
      (DimensionalData | BulkDataPointer)
    }+
  }

BulkDataPointer = 
    attribute UUID { xsd:string }

CodedTerm = 
    element CodeValue { xsd:string },
    element CodingSchemeDesignator { xsd:string },
    element CodingSchemeVersion { xsd:string }?,
    element CodeMeaning { xsd:string }?,
    (
      element ContextIdentifier { xsd:string },
      element MappingResource { xsd:string },
      element ContextGroupVersion { xsd:string }
    )?,
    (
      element ContextGroupExtensionFlag { xsd:string },
      element ContextGroupLocalVersion { xsd:string }?,
      element ContextGroupExtensionCreatorUID { xsd:string }?
    )?
]]></programlisting>
      </section>
      <section xml:id="sect_A.2.7" label="A.2.7" status="3">
        <title>Examples</title>
        <section xml:id="sect_A.2.7.1" label="A.2.7.1" status="4">
          <title>Simple 3D Volume</title>
          <para>
            <figure label="A.2.7.1-1" pgwide="1" xml:id="figure_A.2.7.1-1">
              <title>Simple 3D Volume Example</title>
              <mediaobject>
                <imageobject>
                  <!--<imagedata fileref="figures/PS3.19_A.2.7.1-1.svg"/>-->
                  <imagedata fileref="part19_fromword_files/image018.png"/>
                </imageobject>
              </mediaobject>
            </figure>
          </para>
        </section>
        <section xml:id="sect_A.2.7.2" label="A.2.7.2" status="4">
          <title>Simple 4D Volume</title>
          <para>
            <figure label="A.2.7.2-1" pgwide="1" xml:id="figure_A.2.7.2-1">
              <title>Simple 4D Volume Example</title>
              <mediaobject>
                <imageobject>
                  <!--<imagedata fileref="figures/PS3.19_A.2.7.2-1.svg"/>-->
                  <imagedata fileref="part19_fromword_files/image020.png"/>
                </imageobject>
              </mediaobject>
            </figure>
          </para>
        </section>
        <section xml:id="sect_A.2.7.3" label="A.2.7.3" status="4">
          <title>2D Ultrasound</title>
          <para>
            <figure label="A.2.7.3-1" pgwide="1" xml:id="figure_A.2.7.3-1">
              <title>2D Ultrasound Example</title>
              <mediaobject>
                <imageobject>
                  <!--<imagedata fileref="figures/PS3.19_A.2.7.3-1.svg"/>-->
                  <imagedata fileref="part19_fromword_files/figure_A.2.7.3-1.png"/>
                </imageobject>
              </mediaobject>
            </figure>
          </para>
          <itemizedlist>
            <listitem>
              <para>In this particular case, we have three dimensions, numbered #1 for displacements along X, #2 for displacements along Y, and #3 to index the time series. If we have 200 images along time (i.e., the <emphasis role="italic">numberOfSamples</emphasis> XML Attribute is set to 200), we will then have 400 occurrences of the <emphasis role="italic">DirectionCosines</emphasis> XML Element within the <emphasis role="italic">Dimension</emphasis> XML Element whose <emphasis role="italic">idNumber</emphasis> XML Attribute is set to #3 (the dimension referring to time). The 200 first occurrences will have the XML Attribute <emphasis role="italic">concernedSpatialDimension</emphasis> with value #1 (to specify direction cosines along the X axis) and will be indexed by the XML Attribute <emphasis role="italic">index</emphasis> varying from 1 to 200 corresponding to the 200 images along time. The 200 following occurrences will have the XML Attribute <emphasis role="italic">concernedSpatialDimension</emphasis> with value #2 (to specify direction cosines along the Y axis), and will also be indexed by the XML Attribute <emphasis role="italic">index</emphasis> varying from 1 to 200.</para>
            </listitem>
            <listitem>
              <para>Similarly, in this example we will have 200 occurrences of the <emphasis role="italic">Origin</emphasis> XML Element within the Dimension XML Element that has the <emphasis role="italic">idNumber</emphasis> XML Attribute set to the value 3, and of course by the XML Attribute <emphasis role="italic">index</emphasis> varying from 1 to 200.</para>
            </listitem>
          </itemizedlist>
        </section>
        <section xml:id="sect_A.2.7.4" label="A.2.7.4" status="4">
          <title>3D MR Metabolite Map - Single Component</title>
          <para>
            <figure label="A.2.7.4-1" pgwide="1" xml:id="figure_A.2.7.4-1">
              <title>Single Component 3D MR Metabolite Example</title>
              <mediaobject>
                <imageobject>
                  <!--<imagedata fileref="figures/PS3.19_A.2.7.4-1.svg"/>-->
                  <imagedata fileref="part19_fromword_files/image022.png"/>
                </imageobject>
              </mediaobject>
            </figure>
          </para>
        </section>
        <section xml:id="sect_A.2.7.5" label="A.2.7.5" status="4">
          <title>3D MR Metabolite Map - Multiple Component</title>
          <para>
            <figure label="A.2.7.5-1" pgwide="1" xml:id="figure_A.2.7.5-1">
              <title>Multiple Component 3D MR Metabolite Map Example</title>
              <mediaobject>
                <imageobject>
                  <!--<imagedata fileref="figures/PS3.19_A.2.7.5-1.svg"/>-->
                  <imagedata fileref="part19_fromword_files/image024.png"/>
                </imageobject>
              </mediaobject>
            </figure>
          </para>
        </section>
      </section>
    </section>
  </chapter>
  <chapter xml:id="chapter_B" label="B" status="1">
    <title>Interface Definitions</title>
    <section xml:id="sect_B.1" label="B.1" status="2">
      <title>Application Interface - Version 20100825</title>
      <section xml:id="sect_B.1.1" label="B.1.1" status="3">
        <title>WSDL Definition of the Interface</title>
        <para>The following is the content of ApplicationService-20100825.wsdl:</para>
        <programlisting><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions name="ApplicationService-20100825"
targetNamespace="http://dicom.nema.org/PS3.19/ApplicationService-20100825"
xmlns:tns="http://dicom.nema.org/PS3.19/ApplicationService-20100825"
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"
xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata"
xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"
xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy"
xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract"
xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl"
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/"
xmlns:wsa10="http://www.w3.org/2005/08/addressing"
xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex"
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:types>
    <xsd:schema targetNamespace="http://dicom.nema.org/PS3.19/Imports/ApplicationService-20100825">

      <xsd:import namespace="http://dicom.nema.org/PS3.19/ApplicationService-20100825"
      schemaLocation="./ApplicationService-20100825.xsd" />
      <xsd:import namespace="http://schemas.microsoft.com/2003/10/Serialization/"
      schemaLocation="./Types.xsd" />
      <xsd:import namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
      schemaLocation="./ArrayOfString.xsd" />
      <xsd:import namespace="http://schemas.datacontract.org/2004/07/System.Xml.XPath"
      schemaLocation="./XPathNodeType.xsd" />
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="IApplicationService_GetState_InputMessage">
    <wsdl:part name="parameters" element="tns:GetState" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_GetState_OutputMessage">
    <wsdl:part name="parameters" element="tns:GetStateResponse" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_SetState_InputMessage">
    <wsdl:part name="parameters" element="tns:SetState" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_SetState_OutputMessage">
    <wsdl:part name="parameters" element="tns:SetStateResponse" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_BringToFront_InputMessage">
    <wsdl:part name="parameters" element="tns:BringToFront" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_BringToFront_OutputMessage">
    <wsdl:part name="parameters" element="tns:BringToFrontResponse" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_NotifyDataAvailable_InputMessage">
    <wsdl:part name="parameters" element="tns:NotifyDataAvailable" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_NotifyDataAvailable_OutputMessage">
    <wsdl:part name="parameters" element="tns:NotifyDataAvailableResponse" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_GetData_InputMessage">
    <wsdl:part name="parameters" element="tns:GetData" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_GetData_OutputMessage">
    <wsdl:part name="parameters" element="tns:GetDataResponse" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_ReleaseData_InputMessage">
    <wsdl:part name="parameters" element="tns:ReleaseData" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_ReleaseData_OutputMessage">
    <wsdl:part name="parameters" element="tns:ReleaseDataResponse" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_GetAsModels_InputMessage">
    <wsdl:part name="parameters" element="tns:GetAsModels" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_GetAsModels_OutputMessage">
    <wsdl:part name="parameters" element="tns:GetAsModelsResponse" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_ReleaseModels_InputMessage">
    <wsdl:part name="parameters" element="tns:ReleaseModels" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_ReleaseModels_OutputMessage">
    <wsdl:part name="parameters" element="tns:ReleaseModelsResponse" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_QueryModel_InputMessage">
    <wsdl:part name="parameters" element="tns:QueryModel" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_QueryModel_OutputMessage">
    <wsdl:part name="parameters" element="tns:QueryModelResponse" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_QueryInfoSet_InputMessage">
    <wsdl:part name="parameters" element="tns:QueryInfoSet" />
  </wsdl:message>
  <wsdl:message name="IApplicationService_QueryInfoSet_OutputMessage">
    <wsdl:part name="parameters" element="tns:QueryInfoSetResponse" />
  </wsdl:message>
  <wsdl:portType name="IApplicationService-20100825">
    <wsdl:operation name="GetState">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/GetState"
      message="tns:IApplicationService_GetState_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/GetStateResponse"
      message="tns:IApplicationService_GetState_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="SetState">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/SetState"
      message="tns:IApplicationService_SetState_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/SetStateResponse"
      message="tns:IApplicationService_SetState_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="BringToFront">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/BringToFront"
      message="tns:IApplicationService_BringToFront_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/BringToFrontResponse"
      message="tns:IApplicationService_BringToFront_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="NotifyDataAvailable">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/NotifyDataAvailable"
      message="tns:IApplicationService_NotifyDataAvailable_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/NotifyDataAvailableResponse"
      message="tns:IApplicationService_NotifyDataAvailable_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="GetData">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/GetData"
      message="tns:IApplicationService_GetData_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/GetDataResponse"
      message="tns:IApplicationService_GetData_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="ReleaseData">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/ReleaseData"
      message="tns:IApplicationService_ReleaseData_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/ReleaseDataResponse"
      message="tns:IApplicationService_ReleaseData_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="GetAsModels">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/GetAsModels"
      message="tns:IApplicationService_GetAsModels_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/GetAsModelsResponse"
      message="tns:IApplicationService_GetAsModels_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="ReleaseModels">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/ReleaseModels"
      message="tns:IApplicationService_ReleaseModels_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/ReleaseModelsResponse"
      message="tns:IApplicationService_ReleaseModels_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="QueryModel">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/QueryModel"
      message="tns:IApplicationService_QueryModel_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/QueryModelResponse"
      message="tns:IApplicationService_QueryModel_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="QueryInfoSet">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/QueryInfoSet"
      message="tns:IApplicationService_QueryInfoSet_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IApplicationService/QueryInfoSetResponse"
      message="tns:IApplicationService_QueryInfoSet_OutputMessage" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="ApplicationService-20100825Binding"
  type="tns:IApplicationService-20100825">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="GetState">
      <soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IApplicationService/GetState"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="SetState">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IApplicationService/SetState"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="BringToFront">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IApplicationService/BringToFront"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="NotifyDataAvailable">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IApplicationService/NotifyDataAvailable"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetData">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IApplicationService/GetData"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="ReleaseData">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IApplicationService/ReleaseData"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetAsModels">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IApplicationService/GetAsModels"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="ReleaseModels">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IApplicationService/ReleaseModels"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="QueryModel">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IApplicationService/QueryModel"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="QueryInfoSet">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IApplicationService/QueryInfoSet"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="ApplicationService-20100825">
    <wsdl:port name="ApplicationServiceBinding"
    binding="tns:ApplicationService-20100825Binding">
      <soap:address location="http://localhost/Service" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>
]]></programlisting>
      </section>
      <section xml:id="sect_B.1.2" label="B.1.2" status="3">
        <title>Definition of Data Structures Used</title>
        <section xml:id="sect_B.1.2.1" label="B.1.2.1" status="4">
          <title>Primary Definitions</title>
          <para>The following is the content of ApplicationService-20100825.xsd</para>
          <programlisting><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:tns="http://dicom.nema.org/PS3.19/ApplicationService-20100825"
elementFormDefault="qualified"
targetNamespace="http://dicom.nema.org/PS3.19/ApplicationService-20100825"
xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays" />
  <xs:import namespace="http://schemas.datacontract.org/2004/07/System.Xml.XPath" />
  <xs:element name="GetState">
    <xs:complexType>
      <xs:sequence />
    </xs:complexType>
  </xs:element>
  <xs:element name="GetStateResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="GetStateResult" type="tns:State" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:simpleType name="State">
    <xs:restriction base="xs:string">
      <xs:enumeration value="IDLE" />
      <xs:enumeration value="INPROGRESS" />
      <xs:enumeration value="SUSPENDED" />
      <xs:enumeration value="COMPLETED" />
      <xs:enumeration value="CANCELED" />
      <xs:enumeration value="EXIT" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="State" nillable="true" type="tns:State" />
  <xs:element name="SetState">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="state" type="tns:State" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="SetStateResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="SetStateResult" type="xs:boolean" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="BringToFront">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="location" nillable="true"
        type="tns:Rectangle" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="Rectangle">
    <xs:sequence>
      <xs:element minOccurs="0" name="Height" type="xs:int" />
      <xs:element minOccurs="0" name="Width" type="xs:int" />
      <xs:element minOccurs="0" name="RefPointX" type="xs:int" />
      <xs:element minOccurs="0" name="RefPointY" type="xs:int" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Rectangle" nillable="true" type="tns:Rectangle" />
  <xs:element name="BringToFrontResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="BringToFrontResult"
        type="xs:boolean" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="NotifyDataAvailable">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="data" nillable="true"
        type="tns:AvailableData" />
        <xs:element minOccurs="0" name="lastData" type="xs:boolean" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="AvailableData">
    <xs:sequence>
      <xs:element minOccurs="0" name="ObjectDescriptors" nillable="true"
      type="tns:ArrayOfObjectDescriptor" />
      <xs:element minOccurs="0" name="Patients" nillable="true"
      type="tns:ArrayOfPatient" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="AvailableData" nillable="true" type="tns:AvailableData" />
  <xs:complexType name="ArrayOfObjectDescriptor">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="ObjectDescriptor"
      nillable="true" type="tns:ObjectDescriptor" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfObjectDescriptor" nillable="true"
  type="tns:ArrayOfObjectDescriptor" />
  <xs:complexType name="ObjectDescriptor">
    <xs:sequence>
      <xs:element minOccurs="0" name="ClassUID" nillable="true"
      type="tns:UID" />
      <xs:element minOccurs="0" name="MimeType" nillable="true"
      type="tns:MimeType" />
      <xs:element minOccurs="0" name="Modality" nillable="true"
      type="tns:Modality" />
      <xs:element minOccurs="0" name="TransferSyntaxUID" nillable="true"
      type="tns:UID" />
      <xs:element minOccurs="0" name="DescriptorUuid" nillable="true"
      type="tns:UUID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ObjectDescriptor" nillable="true"
  type="tns:ObjectDescriptor" />
  <xs:complexType name="UID">
    <xs:sequence>
      <xs:element minOccurs="0" name="Uid" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="UID" nillable="true" type="tns:UID" />
  <xs:complexType name="MimeType">
    <xs:sequence>
      <xs:element minOccurs="0" name="Type" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="MimeType" nillable="true" type="tns:MimeType" />
  <xs:complexType name="Modality">
    <xs:sequence>
      <xs:element minOccurs="0" name="Modality" nillable="true"
      type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Modality" nillable="true" type="tns:Modality" />
  <xs:complexType name="UUID">
    <xs:sequence>
      <xs:element minOccurs="0" name="Uuid" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="UUID" nillable="true" type="tns:UUID" />
  <xs:complexType name="ArrayOfPatient">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="Patient"
      nillable="true" type="tns:Patient" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfPatient" nillable="true"
  type="tns:ArrayOfPatient" />
  <xs:complexType name="Patient">
    <xs:sequence>
      <xs:element minOccurs="0" name="AssigningAuthority" nillable="true"
      type="xs:string" />
      <xs:element minOccurs="0" name="DateOfBirth" type="xs:dateTime" />
      <xs:element minOccurs="0" name="ID" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="Name" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="ObjectDescriptors" nillable="true"
      type="tns:ArrayOfObjectDescriptor" />
      <xs:element minOccurs="0" name="Sex" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="Studies" nillable="true"
      type="tns:ArrayOfStudy" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Patient" nillable="true" type="tns:Patient" />
  <xs:complexType name="ArrayOfStudy">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="Study"
      nillable="true" type="tns:Study" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfStudy" nillable="true" type="tns:ArrayOfStudy" />
  <xs:complexType name="Study">
    <xs:sequence>
      <xs:element minOccurs="0" name="ObjectDescriptors" nillable="true"
      type="tns:ArrayOfObjectDescriptor" />
      <xs:element minOccurs="0" name="Series" nillable="true"
      type="tns:ArrayOfSeries" />
      <xs:element minOccurs="0" name="StudyUID" nillable="true"
      type="tns:UID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Study" nillable="true" type="tns:Study" />
  <xs:complexType name="ArrayOfSeries">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="Series"
      nillable="true" type="tns:Series" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfSeries" nillable="true" type="tns:ArrayOfSeries" />
  <xs:complexType name="Series">
    <xs:sequence>
      <xs:element minOccurs="0" name="ObjectDescriptors" nillable="true"
      type="tns:ArrayOfObjectDescriptor" />
      <xs:element minOccurs="0" name="SeriesUID" nillable="true"
      type="tns:UID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Series" nillable="true" type="tns:Series" />
  <xs:element name="NotifyDataAvailableResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="NotifyDataAvailableResult"
        type="xs:boolean" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="GetData">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="objects" nillable="true"
        type="tns:ArrayOfUUID" />
        <xs:element minOccurs="0" name="acceptableTransferSyntaxes"
        nillable="true" type="tns:ArrayOfUID" />
        <xs:element minOccurs="0" name="includeBulkData" type="xs:boolean" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ArrayOfUUID">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="UUID"
      nillable="true" type="tns:UUID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfUUID" nillable="true" type="tns:ArrayOfUUID" />
  <xs:complexType name="ArrayOfUID">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="UID"
      nillable="true" type="tns:UID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfUID" nillable="true" type="tns:ArrayOfUID" />
  <xs:element name="GetDataResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="GetDataResult" nillable="true"
        type="tns:ArrayOfObjectLocator" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ArrayOfObjectLocator">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="ObjectLocator"
      nillable="true" type="tns:ObjectLocator" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfObjectLocator" nillable="true"
  type="tns:ArrayOfObjectLocator" />
  <xs:complexType name="ObjectLocator">
    <xs:sequence>
      <xs:element minOccurs="0" name="Length" type="xs:long" />
      <xs:element minOccurs="0" name="Offset" type="xs:long" />
      <xs:element minOccurs="0" name="TransferSyntax" nillable="true"
      type="tns:UID" />
      <xs:element minOccurs="0" name="URI" nillable="true" type="xs:anyURI" />
      <xs:element minOccurs="0" name="Locator" nillable="true"
      type="tns:UUID" />
      <xs:element minOccurs="0" name="Source" nillable="true"
      type="tns:UUID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ObjectLocator" nillable="true" type="tns:ObjectLocator" />
  <xs:element name="ReleaseData">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="objects" nillable="true"
        type="tns:ArrayOfUUID" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="ReleaseDataResponse">
    <xs:complexType>
      <xs:sequence />
    </xs:complexType>
  </xs:element>
  <xs:element name="GetAsModels">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="objects" nillable="true"
        type="tns:ArrayOfUUID" />
        <xs:element minOccurs="0" name="classUID" nillable="true"
        type="tns:UID" />
        <xs:element minOccurs="0" name="supportedInfoSetTypes" nillable="true"
        type="tns:ArrayOfMimeType" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ArrayOfMimeType">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="MimeType"
      nillable="true" type="tns:MimeType" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfMimeType" nillable="true"
  type="tns:ArrayOfMimeType" />
  <xs:element name="GetAsModelsResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="GetAsModelsResult" nillable="true"
        type="tns:ModelSetDescriptor" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ModelSetDescriptor">
    <xs:sequence>
      <xs:element minOccurs="0" name="FailedSourceObjects" nillable="true"
      type="tns:ArrayOfUUID" />
      <xs:element minOccurs="0" name="InfosetType" nillable="true"
      type="tns:MimeType" />
      <xs:element minOccurs="0" name="Models" nillable="true"
      type="tns:ArrayOfUUID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ModelSetDescriptor" nillable="true"
  type="tns:ModelSetDescriptor" />
  <xs:element name="ReleaseModels">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="models" nillable="true"
        type="tns:ArrayOfUUID" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="ReleaseModelsResponse">
    <xs:complexType>
      <xs:sequence />
    </xs:complexType>
  </xs:element>
  <xs:element name="QueryModel">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="models" nillable="true"
        type="tns:ArrayOfUUID" />
        <xs:element minOccurs="0" name="xPaths" nillable="true"
        xmlns:q1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
        type="q1:ArrayOfstring" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="QueryModelResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="QueryModelResult" nillable="true"
        type="tns:ArrayOfQueryResult" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ArrayOfQueryResult">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="QueryResult"
      nillable="true" type="tns:QueryResult" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfQueryResult" nillable="true"
  type="tns:ArrayOfQueryResult" />
  <xs:complexType name="QueryResult">
    <xs:sequence>
      <xs:element minOccurs="0" name="Model" nillable="true" type="tns:UUID" />
      <xs:element minOccurs="0" name="Result" nillable="true"
      type="tns:ArrayOfXPathNode" />
      <xs:element minOccurs="0" name="XPath" nillable="true"
      type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="QueryResult" nillable="true" type="tns:QueryResult" />
  <xs:complexType name="ArrayOfXPathNode">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="XPathNode"
      nillable="true" type="tns:XPathNode" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfXPathNode" nillable="true"
  type="tns:ArrayOfXPathNode" />
  <xs:complexType name="XPathNode">
    <xs:sequence>
      <xs:element minOccurs="0" name="NodeType"
      xmlns:q2="http://schemas.datacontract.org/2004/07/System.Xml.XPath"
      type="q2:XPathNodeType" />
      <xs:element minOccurs="0" name="Value" nillable="true"
      type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="XPathNode" nillable="true" type="tns:XPathNode" />
  <xs:element name="QueryInfoSet">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="models" nillable="true"
        type="tns:ArrayOfUUID" />
        <xs:element minOccurs="0" name="xPaths" nillable="true"
        xmlns:q3="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
        type="q3:ArrayOfstring" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="QueryInfoSetResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="QueryInfoSetResult" nillable="true"
        type="tns:ArrayOfQueryResultInfoSet" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ArrayOfQueryResultInfoSet">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="QueryResultInfoSet"
      nillable="true" type="tns:QueryResultInfoSet" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfQueryResultInfoSet" nillable="true"
  type="tns:ArrayOfQueryResultInfoSet" />
  <xs:complexType name="QueryResultInfoSet">
    <xs:sequence>
      <xs:element minOccurs="0" name="Model" nillable="true" type="tns:UUID" />
      <xs:element minOccurs="0" name="Result" nillable="true"
      type="tns:ArrayOfXPathNodeInfoSet" />
      <xs:element minOccurs="0" name="XPath" nillable="true"
      type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="QueryResultInfoSet" nillable="true"
  type="tns:QueryResultInfoSet" />
  <xs:complexType name="ArrayOfXPathNodeInfoSet">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="XPathNodeInfoSet"
      nillable="true" type="tns:XPathNodeInfoSet" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfXPathNodeInfoSet" nillable="true"
  type="tns:ArrayOfXPathNodeInfoSet" />
  <xs:complexType name="XPathNodeInfoSet">
    <xs:sequence>
      <xs:element minOccurs="0" name="InfoSetValue" nillable="true"
      type="xs:base64Binary" />
      <xs:element minOccurs="0" name="NodeType"
      xmlns:q4="http://schemas.datacontract.org/2004/07/System.Xml.XPath"
      type="q4:XPathNodeType" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="XPathNodeInfoSet" nillable="true"
  type="tns:XPathNodeInfoSet" />
</xs:schema>
]]></programlisting>
        </section>
        <section xml:id="sect_B.1.2.2" label="B.1.2.2" status="4">
          <title>Referenced Definitions</title>
          <para>The following is the content of XPathNodeType.xsd:</para>
          <programlisting><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:tns="http://schemas.datacontract.org/2004/07/System.Xml.XPath"
elementFormDefault="qualified"
targetNamespace="http://schemas.datacontract.org/2004/07/System.Xml.XPath"
xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:simpleType name="XPathNodeType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Root" />
      <xs:enumeration value="Element" />
      <xs:enumeration value="Attribute" />
      <xs:enumeration value="Namespace" />
      <xs:enumeration value="Text" />
      <xs:enumeration value="SignificantWhitespace" />
      <xs:enumeration value="Whitespace" />
      <xs:enumeration value="ProcessingInstruction" />
      <xs:enumeration value="Comment" />
      <xs:enumeration value="All" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="XPathNodeType" nillable="true" type="tns:XPathNodeType" />
</xs:schema>
]]></programlisting>
          <para>The following is the content of Types.xsd:</para>
          <programlisting><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:tns="http://schemas.microsoft.com/2003/10/Serialization/"
attributeFormDefault="qualified" elementFormDefault="qualified"
targetNamespace="http://schemas.microsoft.com/2003/10/Serialization/"
xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="anyType" nillable="true" type="xs:anyType" />
  <xs:element name="anyURI" nillable="true" type="xs:anyURI" />
  <xs:element name="base64Binary" nillable="true" type="xs:base64Binary" />
  <xs:element name="boolean" nillable="true" type="xs:boolean" />
  <xs:element name="byte" nillable="true" type="xs:byte" />
  <xs:element name="dateTime" nillable="true" type="xs:dateTime" />
  <xs:element name="decimal" nillable="true" type="xs:decimal" />
  <xs:element name="double" nillable="true" type="xs:double" />
  <xs:element name="float" nillable="true" type="xs:float" />
  <xs:element name="int" nillable="true" type="xs:int" />
  <xs:element name="long" nillable="true" type="xs:long" />
  <xs:element name="QName" nillable="true" type="xs:QName" />
  <xs:element name="short" nillable="true" type="xs:short" />
  <xs:element name="string" nillable="true" type="xs:string" />
  <xs:element name="unsignedByte" nillable="true" type="xs:unsignedByte" />
  <xs:element name="unsignedInt" nillable="true" type="xs:unsignedInt" />
  <xs:element name="unsignedLong" nillable="true" type="xs:unsignedLong" />
  <xs:element name="unsignedShort" nillable="true" type="xs:unsignedShort" />
  <xs:element name="char" nillable="true" type="tns:char" />
  <xs:simpleType name="char">
    <xs:restriction base="xs:int" />
  </xs:simpleType>
  <xs:element name="duration" nillable="true" type="tns:duration" />
  <xs:simpleType name="duration">
    <xs:restriction base="xs:duration">
      <xs:pattern value="\-?P(\d*D)?(T(\d*H)?(\d*M)?(\d*(\.\d*)?S)?)?" />
      <xs:minInclusive value="-P10675199DT2H48M5.4775808S" />
      <xs:maxInclusive value="P10675199DT2H48M5.4775807S" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="guid" nillable="true" type="tns:guid" />
  <xs:simpleType name="guid">
    <xs:restriction base="xs:string">
      <xs:pattern value="[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}" />
    </xs:restriction>
  </xs:simpleType>
  <xs:attribute name="FactoryType" type="xs:QName" />
  <xs:attribute name="Id" type="xs:ID" />
  <xs:attribute name="Ref" type="xs:IDREF" />
</xs:schema>
]]></programlisting>
          <para>The following is the content of ArrayOfString.xsd:</para>
          <programlisting><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:tns="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
elementFormDefault="qualified"
targetNamespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:complexType name="ArrayOfstring">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="string"
      nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfstring" nillable="true" type="tns:ArrayOfstring" />
</xs:schema>
]]></programlisting>
        </section>
      </section>
    </section>
    <section xml:id="sect_B.2" label="B.2" status="2">
      <title>Host Interface - Version 20100825</title>
      <section xml:id="sect_B.2.1" label="B.2.1" status="3">
        <title>WSDL Definition of the Interface</title>
        <para>The following is the content of HostService-20100825.wsdl:</para>
        <programlisting><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions name="HostService-20100825"
targetNamespace="http://dicom.nema.org/PS3.19/HostService-20100825"
xmlns:tns="http://dicom.nema.org/PS3.19/HostService-20100825"
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"
xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata"
xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"
xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy"
xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract"
xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl"
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/"
xmlns:wsa10="http://www.w3.org/2005/08/addressing"
xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex"
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:types>
    <xsd:schema targetNamespace="http://dicom.nema.org/PS3.19/Imports/HostService-20100825">

      <xsd:import namespace="http://dicom.nema.org/PS3.19/HostService-20100825"
      schemaLocation="./HostService-20100825.xsd" />
      <xsd:import namespace="http://schemas.microsoft.com/2003/10/Serialization/"
      schemaLocation="./Types.xsd" />
      <xsd:import namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
      schemaLocation="./ArrayOfString.xsd" />
      <xsd:import namespace="http://schemas.datacontract.org/2004/07/System.Xml.XPath"
      schemaLocation="./XPathNodeType.xsd" />
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="IHostService_GenerateUID_InputMessage">
    <wsdl:part name="parameters" element="tns:GenerateUID" />
  </wsdl:message>
  <wsdl:message name="IHostService_GenerateUID_OutputMessage">
    <wsdl:part name="parameters" element="tns:GenerateUIDResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_GetAvailableScreen_InputMessage">
    <wsdl:part name="parameters" element="tns:GetAvailableScreen" />
  </wsdl:message>
  <wsdl:message name="IHostService_GetAvailableScreen_OutputMessage">
    <wsdl:part name="parameters" element="tns:GetAvailableScreenResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_GetOutputLocation_InputMessage">
    <wsdl:part name="parameters" element="tns:GetOutputLocation" />
  </wsdl:message>
  <wsdl:message name="IHostService_GetOutputLocation_OutputMessage">
    <wsdl:part name="parameters" element="tns:GetOutputLocationResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_NotifyStateChanged_InputMessage">
    <wsdl:part name="parameters" element="tns:NotifyStateChanged" />
  </wsdl:message>
  <wsdl:message name="IHostService_NotifyStateChanged_OutputMessage">
    <wsdl:part name="parameters" element="tns:NotifyStateChangedResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_NotifyStatus_InputMessage">
    <wsdl:part name="parameters" element="tns:NotifyStatus" />
  </wsdl:message>
  <wsdl:message name="IHostService_NotifyStatus_OutputMessage">
    <wsdl:part name="parameters" element="tns:NotifyStatusResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_NotifyDataAvailable_InputMessage">
    <wsdl:part name="parameters" element="tns:NotifyDataAvailable" />
  </wsdl:message>
  <wsdl:message name="IHostService_NotifyDataAvailable_OutputMessage">
    <wsdl:part name="parameters" element="tns:NotifyDataAvailableResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_GetData_InputMessage">
    <wsdl:part name="parameters" element="tns:GetData" />
  </wsdl:message>
  <wsdl:message name="IHostService_GetData_OutputMessage">
    <wsdl:part name="parameters" element="tns:GetDataResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_ReleaseData_InputMessage">
    <wsdl:part name="parameters" element="tns:ReleaseData" />
  </wsdl:message>
  <wsdl:message name="IHostService_ReleaseData_OutputMessage">
    <wsdl:part name="parameters" element="tns:ReleaseDataResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_GetAsModels_InputMessage">
    <wsdl:part name="parameters" element="tns:GetAsModels" />
  </wsdl:message>
  <wsdl:message name="IHostService_GetAsModels_OutputMessage">
    <wsdl:part name="parameters" element="tns:GetAsModelsResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_ReleaseModels_InputMessage">
    <wsdl:part name="parameters" element="tns:ReleaseModels" />
  </wsdl:message>
  <wsdl:message name="IHostService_ReleaseModels_OutputMessage">
    <wsdl:part name="parameters" element="tns:ReleaseModelsResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_QueryModel_InputMessage">
    <wsdl:part name="parameters" element="tns:QueryModel" />
  </wsdl:message>
  <wsdl:message name="IHostService_QueryModel_OutputMessage">
    <wsdl:part name="parameters" element="tns:QueryModelResponse" />
  </wsdl:message>
  <wsdl:message name="IHostService_QueryInfoSet_InputMessage">
    <wsdl:part name="parameters" element="tns:QueryInfoSet" />
  </wsdl:message>
  <wsdl:message name="IHostService_QueryInfoSet_OutputMessage">
    <wsdl:part name="parameters" element="tns:QueryInfoSetResponse" />
  </wsdl:message>
  <wsdl:portType name="IHostService-20100825">
    <wsdl:operation name="GenerateUID">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/GenerateUID"
      message="tns:IHostService_GenerateUID_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/GenerateUIDResponse"
      message="tns:IHostService_GenerateUID_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="GetAvailableScreen">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/GetAvailableScreen"
      message="tns:IHostService_GetAvailableScreen_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/GetAvailableScreenResponse"
      message="tns:IHostService_GetAvailableScreen_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="GetOutputLocation">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/GetOutputLocation"
      message="tns:IHostService_GetOutputLocation_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/GetOutputLocationResponse"
      message="tns:IHostService_GetOutputLocation_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="NotifyStateChanged">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/NotifyStateChanged"
      message="tns:IHostService_NotifyStateChanged_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/NotifyStateChangedResponse"
      message="tns:IHostService_NotifyStateChanged_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="NotifyStatus">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/NotifyStatus"
      message="tns:IHostService_NotifyStatus_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/NotifyStatusResponse"
      message="tns:IHostService_NotifyStatus_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="NotifyDataAvailable">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/NotifyDataAvailable"
      message="tns:IHostService_NotifyDataAvailable_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/NotifyDataAvailableResponse"
      message="tns:IHostService_NotifyDataAvailable_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="GetData">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/GetData"
      message="tns:IHostService_GetData_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/GetDataResponse"
      message="tns:IHostService_GetData_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="ReleaseData">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/ReleaseData"
      message="tns:IHostService_ReleaseData_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/ReleaseDataResponse"
      message="tns:IHostService_ReleaseData_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="GetAsModels">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/GetAsModels"
      message="tns:IHostService_GetAsModels_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/GetAsModelsResponse"
      message="tns:IHostService_GetAsModels_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="ReleaseModels">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/ReleaseModels"
      message="tns:IHostService_ReleaseModels_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/ReleaseModelsResponse"
      message="tns:IHostService_ReleaseModels_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="QueryModel">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/QueryModel"
      message="tns:IHostService_QueryModel_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/QueryModelResponse"
      message="tns:IHostService_QueryModel_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="QueryInfoSet">
      <wsdl:input wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/QueryInfoSet"
      message="tns:IHostService_QueryInfoSet_InputMessage" />
      <wsdl:output
        wsaw:Action="http://dicom.nema.org/PS3.19/IHostService/QueryInfoSetResponse"
      message="tns:IHostService_QueryInfoSet_OutputMessage" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="HostService-YYYYNNDDBinding"
  type="tns:IHostService-20100825">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="GenerateUID">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/GenerateUID"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetAvailableScreen">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/GetAvailableScreen"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetOutputLocation">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/GetOutputLocation"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="NotifyStateChanged">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/NotifyStateChanged"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="NotifyStatus">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/NotifyStatus"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="NotifyDataAvailable">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/NotifyDataAvailable"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetData">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/GetData"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="ReleaseData">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/ReleaseData"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetAsModels">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/GetAsModels"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="ReleaseModels">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/ReleaseModels"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="QueryModel">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/QueryModel"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="QueryInfoSet">
      <<soap:operation
         soapAction="http://dicom.nema.org/PS3.19/IHostService/QueryInfoSet"
      style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="HostService-20100825">
    <wsdl:port name="HostServiceBinding"
    binding="tns:HostService-YYYYNNDDBinding">
      <soap:address location="http://localhost/Service" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>
]]></programlisting>
      </section>
      <section xml:id="sect_B.2.2" label="B.2.2" status="3">
        <title>Definition of Data Structures Used</title>
        <section xml:id="sect_B.2.2.1" label="B.2.2.1" status="4">
          <title>Primary Definitions</title>
          <para>The following is the the contents of HostService-20100825.xsd:</para>
          <programlisting><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:tns="http://dicom.nema.org/PS3.19/HostService-20100825"
elementFormDefault="qualified"
targetNamespace="http://dicom.nema.org/PS3.19/HostService-20100825"
xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays" />
  <xs:import namespace="http://schemas.datacontract.org/2004/07/System.Xml.XPath" />
  <xs:element name="GenerateUID">
    <xs:complexType>
      <xs:sequence />
    </xs:complexType>
  </xs:element>
  <xs:element name="GenerateUIDResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="GenerateUIDResult" nillable="true"
        type="tns:UID" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="UID">
    <xs:sequence>
      <xs:element minOccurs="0" name="Uid" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="UID" nillable="true" type="tns:UID" />
  <xs:element name="GetAvailableScreen">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="preferredScreen" nillable="true"
        type="tns:Rectangle" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="Rectangle">
    <xs:sequence>
      <xs:element minOccurs="0" name="Height" type="xs:int" />
      <xs:element minOccurs="0" name="Width" type="xs:int" />
      <xs:element minOccurs="0" name="RefPointX" type="xs:int" />
      <xs:element minOccurs="0" name="RefPointY" type="xs:int" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Rectangle" nillable="true" type="tns:Rectangle" />
  <xs:element name="GetAvailableScreenResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="GetAvailableScreenResult"
        nillable="true" type="tns:Rectangle" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="GetOutputLocation">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="preferredProtocols" nillable="true"
        xmlns:q1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
        type="q1:ArrayOfstring" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="GetOutputLocationResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="GetOutputLocationResult"
        nillable="true" type="xs:anyURI" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="NotifyStateChanged">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="state" type="tns:State" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:simpleType name="State">
    <xs:restriction base="xs:string">
      <xs:enumeration value="IDLE" />
      <xs:enumeration value="INPROGRESS" />
      <xs:enumeration value="SUSPENDED" />
      <xs:enumeration value="COMPLETED" />
      <xs:enumeration value="CANCELED" />
      <xs:enumeration value="EXIT" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="State" nillable="true" type="tns:State" />
  <xs:element name="NotifyStateChangedResponse">
    <xs:complexType>
      <xs:sequence />
    </xs:complexType>
  </xs:element>
  <xs:element name="NotifyStatus">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="status" nillable="true"
        type="tns:Status" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="Status">
    <xs:sequence>
      <xs:element minOccurs="0" name="StatusType" type="tns:StatusType" />
      <xs:element minOccurs="0" name="CodeValue" type="xs:int" />
      <xs:element minOccurs="0" name="CodingSchemeDesignator" nillable="true"
      type="xs:string" />
      <xs:element minOccurs="0" name="CodeMeaning" nillable="true"
      type="xs:string" />
      <xs:element minOccurs="0" name="ContextIdentifier" nillable="true"
      type="xs:string" />
      <xs:element minOccurs="0" name="MappingResource" nillable="true"
      type="xs:string" />
      <xs:element minOccurs="0" name="ContextGroupVersion" nillable="true"
      type="xs:string" />
      <xs:element minOccurs="0" name="ContextGroupExtensionFlag"
      nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="ContextGroupLocalVersion" nillable="true"
      type="xs:string" />
      <xs:element minOccurs="0" name="ContextGroupExtensionCreatorUID"
      nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Status" nillable="true" type="tns:Status" />
  <xs:simpleType name="StatusType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="INFORMATION" />
      <xs:enumeration value="WARNING" />
      <xs:enumeration value="ERROR" />
      <xs:enumeration value="FATALERROR" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="StatusType" nillable="true" type="tns:StatusType" />
  <xs:element name="NotifyStatusResponse">
    <xs:complexType>
      <xs:sequence />
    </xs:complexType>
  </xs:element>
  <xs:element name="NotifyDataAvailable">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="data" nillable="true"
        type="tns:AvailableData" />
        <xs:element minOccurs="0" name="lastData" type="xs:boolean" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="AvailableData">
    <xs:sequence>
      <xs:element minOccurs="0" name="ObjectDescriptors" nillable="true"
      type="tns:ArrayOfObjectDescriptor" />
      <xs:element minOccurs="0" name="Patients" nillable="true"
      type="tns:ArrayOfPatient" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="AvailableData" nillable="true" type="tns:AvailableData" />
  <xs:complexType name="ArrayOfObjectDescriptor">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="ObjectDescriptor"
      nillable="true" type="tns:ObjectDescriptor" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfObjectDescriptor" nillable="true"
  type="tns:ArrayOfObjectDescriptor" />
  <xs:complexType name="ObjectDescriptor">
    <xs:sequence>
      <xs:element minOccurs="0" name="ClassUID" nillable="true"
      type="tns:UID" />
      <xs:element minOccurs="0" name="MimeType" nillable="true"
      type="tns:MimeType" />
      <xs:element minOccurs="0" name="Modality" nillable="true"
      type="tns:Modality" />
      <xs:element minOccurs="0" name="TransferSyntaxUID" nillable="true"
      type="tns:UID" />
      <xs:element minOccurs="0" name="DescriptorUuid" nillable="true"
      type="tns:UUID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ObjectDescriptor" nillable="true"
  type="tns:ObjectDescriptor" />
  <xs:complexType name="MimeType">
    <xs:sequence>
      <xs:element minOccurs="0" name="Type" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="MimeType" nillable="true" type="tns:MimeType" />
  <xs:complexType name="Modality">
    <xs:sequence>
      <xs:element minOccurs="0" name="Modality" nillable="true"
      type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Modality" nillable="true" type="tns:Modality" />
  <xs:complexType name="UUID">
    <xs:sequence>
      <xs:element minOccurs="0" name="Uuid" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="UUID" nillable="true" type="tns:UUID" />
  <xs:complexType name="ArrayOfPatient">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="Patient"
      nillable="true" type="tns:Patient" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfPatient" nillable="true"
  type="tns:ArrayOfPatient" />
  <xs:complexType name="Patient">
    <xs:sequence>
      <xs:element minOccurs="0" name="AssigningAuthority" nillable="true"
      type="xs:string" />
      <xs:element minOccurs="0" name="DateOfBirth" type="xs:dateTime" />
      <xs:element minOccurs="0" name="ID" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="Name" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="ObjectDescriptors" nillable="true"
      type="tns:ArrayOfObjectDescriptor" />
      <xs:element minOccurs="0" name="Sex" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="Studies" nillable="true"
      type="tns:ArrayOfStudy" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Patient" nillable="true" type="tns:Patient" />
  <xs:complexType name="ArrayOfStudy">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="Study"
      nillable="true" type="tns:Study" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfStudy" nillable="true" type="tns:ArrayOfStudy" />
  <xs:complexType name="Study">
    <xs:sequence>
      <xs:element minOccurs="0" name="ObjectDescriptors" nillable="true"
      type="tns:ArrayOfObjectDescriptor" />
      <xs:element minOccurs="0" name="Series" nillable="true"
      type="tns:ArrayOfSeries" />
      <xs:element minOccurs="0" name="StudyUID" nillable="true"
      type="tns:UID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Study" nillable="true" type="tns:Study" />
  <xs:complexType name="ArrayOfSeries">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="Series"
      nillable="true" type="tns:Series" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfSeries" nillable="true" type="tns:ArrayOfSeries" />
  <xs:complexType name="Series">
    <xs:sequence>
      <xs:element minOccurs="0" name="ObjectDescriptors" nillable="true"
      type="tns:ArrayOfObjectDescriptor" />
      <xs:element minOccurs="0" name="SeriesUID" nillable="true"
      type="tns:UID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Series" nillable="true" type="tns:Series" />
  <xs:element name="NotifyDataAvailableResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="NotifyDataAvailableResult"
        type="xs:boolean" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="GetData">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="objects" nillable="true"
        type="tns:ArrayOfUUID" />
        <xs:element minOccurs="0" name="acceptableTransferSyntaxes"
        nillable="true" type="tns:ArrayOfUID" />
        <xs:element minOccurs="0" name="includeBulkData" type="xs:boolean" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ArrayOfUUID">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="UUID"
      nillable="true" type="tns:UUID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfUUID" nillable="true" type="tns:ArrayOfUUID" />
  <xs:complexType name="ArrayOfUID">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="UID"
      nillable="true" type="tns:UID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfUID" nillable="true" type="tns:ArrayOfUID" />
  <xs:element name="GetDataResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="GetDataResult" nillable="true"
        type="tns:ArrayOfObjectLocator" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ArrayOfObjectLocator">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="ObjectLocator"
      nillable="true" type="tns:ObjectLocator" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfObjectLocator" nillable="true"
  type="tns:ArrayOfObjectLocator" />
  <xs:complexType name="ObjectLocator">
    <xs:sequence>
      <xs:element minOccurs="0" name="Length" type="xs:long" />
      <xs:element minOccurs="0" name="Offset" type="xs:long" />
      <xs:element minOccurs="0" name="TransferSyntax" nillable="true"
      type="tns:UID" />
      <xs:element minOccurs="0" name="URI" nillable="true" type="xs:anyURI" />
      <xs:element minOccurs="0" name="Locator" nillable="true"
      type="tns:UUID" />
      <xs:element minOccurs="0" name="Source" nillable="true"
      type="tns:UUID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ObjectLocator" nillable="true" type="tns:ObjectLocator" />
  <xs:element name="ReleaseData">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="objects" nillable="true"
        type="tns:ArrayOfUUID" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="ReleaseDataResponse">
    <xs:complexType>
      <xs:sequence />
    </xs:complexType>
  </xs:element>
  <xs:element name="GetAsModels">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="objects" nillable="true"
        type="tns:ArrayOfUUID" />
        <xs:element minOccurs="0" name="classUID" nillable="true"
        type="tns:UID" />
        <xs:element minOccurs="0" name="supportedInfoSetTypes" nillable="true"
        type="tns:ArrayOfMimeType" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ArrayOfMimeType">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="MimeType"
      nillable="true" type="tns:MimeType" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfMimeType" nillable="true"
  type="tns:ArrayOfMimeType" />
  <xs:element name="GetAsModelsResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="GetAsModelsResult" nillable="true"
        type="tns:ModelSetDescriptor" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ModelSetDescriptor">
    <xs:sequence>
      <xs:element minOccurs="0" name="FailedSourceObjects" nillable="true"
      type="tns:ArrayOfUUID" />
      <xs:element minOccurs="0" name="InfosetType" nillable="true"
      type="tns:MimeType" />
      <xs:element minOccurs="0" name="Models" nillable="true"
      type="tns:ArrayOfUUID" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ModelSetDescriptor" nillable="true"
  type="tns:ModelSetDescriptor" />
  <xs:element name="ReleaseModels">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="models" nillable="true"
        type="tns:ArrayOfUUID" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="ReleaseModelsResponse">
    <xs:complexType>
      <xs:sequence />
    </xs:complexType>
  </xs:element>
  <xs:element name="QueryModel">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="models" nillable="true"
        type="tns:ArrayOfUUID" />
        <xs:element minOccurs="0" name="xPaths" nillable="true"
        xmlns:q2="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
        type="q2:ArrayOfstring" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="QueryModelResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="QueryModelResult" nillable="true"
        type="tns:ArrayOfQueryResult" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ArrayOfQueryResult">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="QueryResult"
      nillable="true" type="tns:QueryResult" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfQueryResult" nillable="true"
  type="tns:ArrayOfQueryResult" />
  <xs:complexType name="QueryResult">
    <xs:sequence>
      <xs:element minOccurs="0" name="Model" nillable="true" type="tns:UUID" />
      <xs:element minOccurs="0" name="Result" nillable="true"
      type="tns:ArrayOfXPathNode" />
      <xs:element minOccurs="0" name="XPath" nillable="true"
      type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="QueryResult" nillable="true" type="tns:QueryResult" />
  <xs:complexType name="ArrayOfXPathNode">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="XPathNode"
      nillable="true" type="tns:XPathNode" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfXPathNode" nillable="true"
  type="tns:ArrayOfXPathNode" />
  <xs:complexType name="XPathNode">
    <xs:sequence>
      <xs:element minOccurs="0" name="NodeType"
      xmlns:q3="http://schemas.datacontract.org/2004/07/System.Xml.XPath"
      type="q3:XPathNodeType" />
      <xs:element minOccurs="0" name="Value" nillable="true"
      type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="XPathNode" nillable="true" type="tns:XPathNode" />
  <xs:element name="QueryInfoSet">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="models" nillable="true"
        type="tns:ArrayOfUUID" />
        <xs:element minOccurs="0" name="xPaths" nillable="true"
        xmlns:q4="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
        type="q4:ArrayOfstring" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="QueryInfoSetResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="QueryInfoSetResult" nillable="true"
        type="tns:ArrayOfQueryResultInfoSet" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="ArrayOfQueryResultInfoSet">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="QueryResultInfoSet"
      nillable="true" type="tns:QueryResultInfoSet" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfQueryResultInfoSet" nillable="true"
  type="tns:ArrayOfQueryResultInfoSet" />
  <xs:complexType name="QueryResultInfoSet">
    <xs:sequence>
      <xs:element minOccurs="0" name="Model" nillable="true" type="tns:UUID" />
      <xs:element minOccurs="0" name="Result" nillable="true"
      type="tns:ArrayOfXPathNodeInfoSet" />
      <xs:element minOccurs="0" name="XPath" nillable="true"
      type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="QueryResultInfoSet" nillable="true"
  type="tns:QueryResultInfoSet" />
  <xs:complexType name="ArrayOfXPathNodeInfoSet">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="XPathNodeInfoSet"
      nillable="true" type="tns:XPathNodeInfoSet" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfXPathNodeInfoSet" nillable="true"
  type="tns:ArrayOfXPathNodeInfoSet" />
  <xs:complexType name="XPathNodeInfoSet">
    <xs:sequence>
      <xs:element minOccurs="0" name="InfoSetValue" nillable="true"
      type="xs:base64Binary" />
      <xs:element minOccurs="0" name="NodeType"
      xmlns:q5="http://schemas.datacontract.org/2004/07/System.Xml.XPath"
      type="q5:XPathNodeType" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="XPathNodeInfoSet" nillable="true"
  type="tns:XPathNodeInfoSet" />
</xs:schema>
]]></programlisting>
        </section>
        <section xml:id="sect_B.2.2.2" label="B.2.2.2" status="4">
          <title>Referenced Definitions</title>
          <para>The following is the content of XPathNodeType.xsd:</para>
          <programlisting><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:tns="http://schemas.datacontract.org/2004/07/System.Xml.XPath"
elementFormDefault="qualified"
targetNamespace="http://schemas.datacontract.org/2004/07/System.Xml.XPath"
xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:simpleType name="XPathNodeType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Root" />
      <xs:enumeration value="Element" />
      <xs:enumeration value="Attribute" />
      <xs:enumeration value="Namespace" />
      <xs:enumeration value="Text" />
      <xs:enumeration value="SignificantWhitespace" />
      <xs:enumeration value="Whitespace" />
      <xs:enumeration value="ProcessingInstruction" />
      <xs:enumeration value="Comment" />
      <xs:enumeration value="All" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="XPathNodeType" nillable="true" type="tns:XPathNodeType" />
</xs:schema>
]]></programlisting>
          <para>The following is the content of Types.xsd:</para>
          <programlisting><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:tns="http://schemas.microsoft.com/2003/10/Serialization/"
attributeFormDefault="qualified" elementFormDefault="qualified"
targetNamespace="http://schemas.microsoft.com/2003/10/Serialization/"
xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="anyType" nillable="true" type="xs:anyType" />
  <xs:element name="anyURI" nillable="true" type="xs:anyURI" />
  <xs:element name="base64Binary" nillable="true" type="xs:base64Binary" />
  <xs:element name="boolean" nillable="true" type="xs:boolean" />
  <xs:element name="byte" nillable="true" type="xs:byte" />
  <xs:element name="dateTime" nillable="true" type="xs:dateTime" />
  <xs:element name="decimal" nillable="true" type="xs:decimal" />
  <xs:element name="double" nillable="true" type="xs:double" />
  <xs:element name="float" nillable="true" type="xs:float" />
  <xs:element name="int" nillable="true" type="xs:int" />
  <xs:element name="long" nillable="true" type="xs:long" />
  <xs:element name="QName" nillable="true" type="xs:QName" />
  <xs:element name="short" nillable="true" type="xs:short" />
  <xs:element name="string" nillable="true" type="xs:string" />
  <xs:element name="unsignedByte" nillable="true" type="xs:unsignedByte" />
  <xs:element name="unsignedInt" nillable="true" type="xs:unsignedInt" />
  <xs:element name="unsignedLong" nillable="true" type="xs:unsignedLong" />
  <xs:element name="unsignedShort" nillable="true" type="xs:unsignedShort" />
  <xs:element name="char" nillable="true" type="tns:char" />
  <xs:simpleType name="char">
    <xs:restriction base="xs:int" />
  </xs:simpleType>
  <xs:element name="duration" nillable="true" type="tns:duration" />
  <xs:simpleType name="duration">
    <xs:restriction base="xs:duration">
      <xs:pattern value="\-?P(\d*D)?(T(\d*H)?(\d*M)?(\d*(\.\d*)?S)?)?" />
      <xs:minInclusive value="-P10675199DT2H48M5.4775808S" />
      <xs:maxInclusive value="P10675199DT2H48M5.4775807S" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="guid" nillable="true" type="tns:guid" />
  <xs:simpleType name="guid">
    <xs:restriction base="xs:string">
      <xs:pattern value="[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}" />
    </xs:restriction>
  </xs:simpleType>
  <xs:attribute name="FactoryType" type="xs:QName" />
  <xs:attribute name="Id" type="xs:ID" />
  <xs:attribute name="Ref" type="xs:IDREF" />
</xs:schema>
]]></programlisting>
          <para>The following is the content of ArrayOfString.xsd:</para>
          <programlisting><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:tns="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
elementFormDefault="qualified"
targetNamespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:complexType name="ArrayOfstring">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="string"
      nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ArrayOfstring" nillable="true" type="tns:ArrayOfstring" />
</xs:schema>
]]></programlisting>
        </section>
      </section>
    </section>
  </chapter>
</book>
